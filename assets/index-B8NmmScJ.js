(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var tp={exports:{}},Nu={};var Xv;function oR(){if(Xv)return Nu;Xv=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,r,o){var u=null;if(o!==void 0&&(u=""+o),r.key!==void 0&&(u=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:i,type:n,key:u,ref:r!==void 0?r:null,props:o}}return Nu.Fragment=t,Nu.jsx=e,Nu.jsxs=e,Nu}var Wv;function lR(){return Wv||(Wv=1,tp.exports=oR()),tp.exports}var at=lR(),ep={exports:{}},Rt={};var $v;function uR(){if($v)return Rt;$v=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function S(z){return z===null||typeof z!="object"?null:(z=T&&z[T]||z["@@iterator"],typeof z=="function"?z:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,M={};function U(z,et,ct){this.props=z,this.context=et,this.refs=M,this.updater=ct||C}U.prototype.isReactComponent={},U.prototype.setState=function(z,et){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,et,"setState")},U.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function G(){}G.prototype=U.prototype;function Q(z,et,ct){this.props=z,this.context=et,this.refs=M,this.updater=ct||C}var Z=Q.prototype=new G;Z.constructor=Q,D(Z,U.prototype),Z.isPureReactComponent=!0;var $=Array.isArray;function it(){}var R={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function I(z,et,ct){var ft=ct.ref;return{$$typeof:i,type:z,key:et,ref:ft!==void 0?ft:null,props:ct}}function P(z,et){return I(z.type,et,z.props)}function O(z){return typeof z=="object"&&z!==null&&z.$$typeof===i}function k(z){var et={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ct){return et[ct]})}var V=/\/+/g;function Vt(z,et){return typeof z=="object"&&z!==null&&z.key!=null?k(""+z.key):et.toString(36)}function xt(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(it,it):(z.status="pending",z.then(function(et){z.status==="pending"&&(z.status="fulfilled",z.value=et)},function(et){z.status==="pending"&&(z.status="rejected",z.reason=et)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Y(z,et,ct,ft,Tt){var At=typeof z;(At==="undefined"||At==="boolean")&&(z=null);var Ut=!1;if(z===null)Ut=!0;else switch(At){case"bigint":case"string":case"number":Ut=!0;break;case"object":switch(z.$$typeof){case i:case t:Ut=!0;break;case y:return Ut=z._init,Y(Ut(z._payload),et,ct,ft,Tt)}}if(Ut)return Tt=Tt(z),Ut=ft===""?"."+Vt(z,0):ft,$(Tt)?(ct="",Ut!=null&&(ct=Ut.replace(V,"$&/")+"/"),Y(Tt,et,ct,"",function(Nr){return Nr})):Tt!=null&&(O(Tt)&&(Tt=P(Tt,ct+(Tt.key==null||z&&z.key===Tt.key?"":(""+Tt.key).replace(V,"$&/")+"/")+Ut)),et.push(Tt)),1;Ut=0;var Fe=ft===""?".":ft+":";if($(z))for(var me=0;me<z.length;me++)ft=z[me],At=Fe+Vt(ft,me),Ut+=Y(ft,et,ct,At,Tt);else if(me=S(z),typeof me=="function")for(z=me.call(z),me=0;!(ft=z.next()).done;)ft=ft.value,At=Fe+Vt(ft,me++),Ut+=Y(ft,et,ct,At,Tt);else if(At==="object"){if(typeof z.then=="function")return Y(xt(z),et,ct,ft,Tt);throw et=String(z),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return Ut}function ot(z,et,ct){if(z==null)return z;var ft=[],Tt=0;return Y(z,ft,"","",function(At){return et.call(ct,At,Tt++)}),ft}function gt(z){if(z._status===-1){var et=z._result;et=et(),et.then(function(ct){(z._status===0||z._status===-1)&&(z._status=1,z._result=ct)},function(ct){(z._status===0||z._status===-1)&&(z._status=2,z._result=ct)}),z._status===-1&&(z._status=0,z._result=et)}if(z._status===1)return z._result.default;throw z._result}var St=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Pt={map:ot,forEach:function(z,et,ct){ot(z,function(){et.apply(this,arguments)},ct)},count:function(z){var et=0;return ot(z,function(){et++}),et},toArray:function(z){return ot(z,function(et){return et})||[]},only:function(z){if(!O(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Rt.Activity=_,Rt.Children=Pt,Rt.Component=U,Rt.Fragment=e,Rt.Profiler=r,Rt.PureComponent=Q,Rt.StrictMode=n,Rt.Suspense=f,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return R.H.useMemoCache(z)}},Rt.cache=function(z){return function(){return z.apply(null,arguments)}},Rt.cacheSignal=function(){return null},Rt.cloneElement=function(z,et,ct){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ft=D({},z.props),Tt=z.key;if(et!=null)for(At in et.key!==void 0&&(Tt=""+et.key),et)!x.call(et,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&et.ref===void 0||(ft[At]=et[At]);var At=arguments.length-2;if(At===1)ft.children=ct;else if(1<At){for(var Ut=Array(At),Fe=0;Fe<At;Fe++)Ut[Fe]=arguments[Fe+2];ft.children=Ut}return I(z.type,Tt,ft)},Rt.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},Rt.createElement=function(z,et,ct){var ft,Tt={},At=null;if(et!=null)for(ft in et.key!==void 0&&(At=""+et.key),et)x.call(et,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(Tt[ft]=et[ft]);var Ut=arguments.length-2;if(Ut===1)Tt.children=ct;else if(1<Ut){for(var Fe=Array(Ut),me=0;me<Ut;me++)Fe[me]=arguments[me+2];Tt.children=Fe}if(z&&z.defaultProps)for(ft in Ut=z.defaultProps,Ut)Tt[ft]===void 0&&(Tt[ft]=Ut[ft]);return I(z,At,Tt)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(z){return{$$typeof:h,render:z}},Rt.isValidElement=O,Rt.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:gt}},Rt.memo=function(z,et){return{$$typeof:g,type:z,compare:et===void 0?null:et}},Rt.startTransition=function(z){var et=R.T,ct={};R.T=ct;try{var ft=z(),Tt=R.S;Tt!==null&&Tt(ct,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(it,St)}catch(At){St(At)}finally{et!==null&&ct.types!==null&&(et.types=ct.types),R.T=et}},Rt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Rt.use=function(z){return R.H.use(z)},Rt.useActionState=function(z,et,ct){return R.H.useActionState(z,et,ct)},Rt.useCallback=function(z,et){return R.H.useCallback(z,et)},Rt.useContext=function(z){return R.H.useContext(z)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(z,et){return R.H.useDeferredValue(z,et)},Rt.useEffect=function(z,et){return R.H.useEffect(z,et)},Rt.useEffectEvent=function(z){return R.H.useEffectEvent(z)},Rt.useId=function(){return R.H.useId()},Rt.useImperativeHandle=function(z,et,ct){return R.H.useImperativeHandle(z,et,ct)},Rt.useInsertionEffect=function(z,et){return R.H.useInsertionEffect(z,et)},Rt.useLayoutEffect=function(z,et){return R.H.useLayoutEffect(z,et)},Rt.useMemo=function(z,et){return R.H.useMemo(z,et)},Rt.useOptimistic=function(z,et){return R.H.useOptimistic(z,et)},Rt.useReducer=function(z,et,ct){return R.H.useReducer(z,et,ct)},Rt.useRef=function(z){return R.H.useRef(z)},Rt.useState=function(z){return R.H.useState(z)},Rt.useSyncExternalStore=function(z,et,ct){return R.H.useSyncExternalStore(z,et,ct)},Rt.useTransition=function(){return R.H.useTransition()},Rt.version="19.2.3",Rt}var Zv;function py(){return Zv||(Zv=1,ep.exports=uR()),ep.exports}var Ht=py(),np={exports:{}},Pu={},ip={exports:{}},sp={};var Jv;function cR(){return Jv||(Jv=1,(function(i){function t(Y,ot){var gt=Y.length;Y.push(ot);t:for(;0<gt;){var St=gt-1>>>1,Pt=Y[St];if(0<r(Pt,ot))Y[St]=ot,Y[gt]=Pt,gt=St;else break t}}function e(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ot=Y[0],gt=Y.pop();if(gt!==ot){Y[0]=gt;t:for(var St=0,Pt=Y.length,z=Pt>>>1;St<z;){var et=2*(St+1)-1,ct=Y[et],ft=et+1,Tt=Y[ft];if(0>r(ct,gt))ft<Pt&&0>r(Tt,ct)?(Y[St]=Tt,Y[ft]=gt,St=ft):(Y[St]=ct,Y[et]=gt,St=et);else if(ft<Pt&&0>r(Tt,gt))Y[St]=Tt,Y[ft]=gt,St=ft;else break t}}return ot}function r(Y,ot){var gt=Y.sortIndex-ot.sortIndex;return gt!==0?gt:Y.id-ot.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var f=[],g=[],y=1,_=null,T=3,S=!1,C=!1,D=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function Z(Y){for(var ot=e(g);ot!==null;){if(ot.callback===null)n(g);else if(ot.startTime<=Y)n(g),ot.sortIndex=ot.expirationTime,t(f,ot);else break;ot=e(g)}}function $(Y){if(D=!1,Z(Y),!C)if(e(f)!==null)C=!0,it||(it=!0,k());else{var ot=e(g);ot!==null&&xt($,ot.startTime-Y)}}var it=!1,R=-1,x=5,I=-1;function P(){return M?!0:!(i.unstable_now()-I<x)}function O(){if(M=!1,it){var Y=i.unstable_now();I=Y;var ot=!0;try{t:{C=!1,D&&(D=!1,G(R),R=-1),S=!0;var gt=T;try{e:{for(Z(Y),_=e(f);_!==null&&!(_.expirationTime>Y&&P());){var St=_.callback;if(typeof St=="function"){_.callback=null,T=_.priorityLevel;var Pt=St(_.expirationTime<=Y);if(Y=i.unstable_now(),typeof Pt=="function"){_.callback=Pt,Z(Y),ot=!0;break e}_===e(f)&&n(f),Z(Y)}else n(f);_=e(f)}if(_!==null)ot=!0;else{var z=e(g);z!==null&&xt($,z.startTime-Y),ot=!1}}break t}finally{_=null,T=gt,S=!1}ot=void 0}}finally{ot?k():it=!1}}}var k;if(typeof Q=="function")k=function(){Q(O)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Vt=V.port2;V.port1.onmessage=O,k=function(){Vt.postMessage(null)}}else k=function(){U(O,0)};function xt(Y,ot){R=U(function(){Y(i.unstable_now())},ot)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var ot=3;break;default:ot=T}var gt=T;T=ot;try{return Y()}finally{T=gt}},i.unstable_requestPaint=function(){M=!0},i.unstable_runWithPriority=function(Y,ot){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var gt=T;T=Y;try{return ot()}finally{T=gt}},i.unstable_scheduleCallback=function(Y,ot,gt){var St=i.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?St+gt:St):gt=St,Y){case 1:var Pt=-1;break;case 2:Pt=250;break;case 5:Pt=1073741823;break;case 4:Pt=1e4;break;default:Pt=5e3}return Pt=gt+Pt,Y={id:y++,callback:ot,priorityLevel:Y,startTime:gt,expirationTime:Pt,sortIndex:-1},gt>St?(Y.sortIndex=gt,t(g,Y),e(f)===null&&Y===e(g)&&(D?(G(R),R=-1):D=!0,xt($,gt-St))):(Y.sortIndex=Pt,t(f,Y),C||S||(C=!0,it||(it=!0,k()))),Y},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(Y){var ot=T;return function(){var gt=T;T=ot;try{return Y.apply(this,arguments)}finally{T=gt}}}})(sp)),sp}var tT;function hR(){return tT||(tT=1,ip.exports=cR()),ip.exports}var rp={exports:{}},ln={};var eT;function fR(){if(eT)return ln;eT=1;var i=py();function t(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,g,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:f,containerInfo:g,implementation:y}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ln.createPortal=function(f,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(f,g,null,y)},ln.flushSync=function(f){var g=u.T,y=n.p;try{if(u.T=null,n.p=2,f)return f()}finally{u.T=g,n.p=y,n.d.f()}},ln.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(f,g))},ln.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},ln.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var y=g.as,_=h(y,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?n.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:S}):y==="script"&&n.d.X(f,{crossOrigin:_,integrity:T,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ln.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=h(g.as,g.crossOrigin);n.d.M(f,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(f)},ln.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,_=h(y,g.crossOrigin);n.d.L(f,y,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ln.preloadModule=function(f,g){if(typeof f=="string")if(g){var y=h(g.as,g.crossOrigin);n.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(f)},ln.requestFormReset=function(f){n.d.r(f)},ln.unstable_batchedUpdates=function(f,g){return f(g)},ln.useFormState=function(f,g,y){return u.H.useFormState(f,g,y)},ln.useFormStatus=function(){return u.H.useHostTransitionStatus()},ln.version="19.2.3",ln}var nT;function dR(){if(nT)return rp.exports;nT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),rp.exports=fR(),rp.exports}var iT;function gR(){if(iT)return Pu;iT=1;var i=hR(),t=py(),e=dR();function n(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function u(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(n(188))}function g(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(n(188));return a!==s?null:s}for(var l=s,c=a;;){var m=l.return;if(m===null)break;var p=m.alternate;if(p===null){if(c=m.return,c!==null){l=c;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===l)return f(m),s;if(p===c)return f(m),a;p=p.sibling}throw Error(n(188))}if(l.return!==c.return)l=m,c=p;else{for(var v=!1,A=m.child;A;){if(A===l){v=!0,l=m,c=p;break}if(A===c){v=!0,c=m,l=p;break}A=A.sibling}if(!v){for(A=p.child;A;){if(A===l){v=!0,l=p,c=m;break}if(A===c){v=!0,c=p,l=m;break}A=A.sibling}if(!v)throw Error(n(189))}}if(l.alternate!==c)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?s:a}function y(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=y(s),a!==null)return a;s=s.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),it=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function k(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var V=Symbol.for("react.client.reference");function Vt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===V?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case U:return"Profiler";case M:return"StrictMode";case $:return"Suspense";case it:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case C:return"Portal";case Q:return s.displayName||"Context";case G:return(s._context.displayName||"Context")+".Consumer";case Z:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return a=s.displayName||null,a!==null?a:Vt(s.type)||"Memo";case x:a=s._payload,s=s._init;try{return Vt(s(a))}catch{}}return null}var xt=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},St=[],Pt=-1;function z(s){return{current:s}}function et(s){0>Pt||(s.current=St[Pt],St[Pt]=null,Pt--)}function ct(s,a){Pt++,St[Pt]=s.current,s.current=a}var ft=z(null),Tt=z(null),At=z(null),Ut=z(null);function Fe(s,a){switch(ct(At,a),ct(Tt,s),ct(ft,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?_v(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=_v(a),s=bv(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}et(ft),ct(ft,s)}function me(){et(ft),et(Tt),et(At)}function Nr(s){s.memoizedState!==null&&ct(Ut,s);var a=ft.current,l=bv(a,s.type);a!==l&&(ct(Tt,s),ct(ft,l))}function Ka(s){Tt.current===s&&(et(ft),et(Tt)),Ut.current===s&&(et(Ut),Du._currentValue=gt)}var Ya,Qa;function Ti(s){if(Ya===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ya=a&&a[1]||"",Qa=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ya+s+Qa}var Dl=!1;function Pr(s,a){if(!s||Dl)return"";Dl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(W){var K=W}Reflect.construct(s,[],st)}else{try{st.call()}catch(W){K=W}s.call(st.prototype)}}else{try{throw Error()}catch(W){K=W}(st=s())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(W){if(W&&K&&typeof W.stack=="string")return[W.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),v=p[0],A=p[1];if(v&&A){var N=v.split(`
`),q=A.split(`
`);for(m=c=0;c<N.length&&!N[c].includes("DetermineComponentFrameRoot");)c++;for(;m<q.length&&!q[m].includes("DetermineComponentFrameRoot");)m++;if(c===N.length||m===q.length)for(c=N.length-1,m=q.length-1;1<=c&&0<=m&&N[c]!==q[m];)m--;for(;1<=c&&0<=m;c--,m--)if(N[c]!==q[m]){if(c!==1||m!==1)do if(c--,m--,0>m||N[c]!==q[m]){var J=`
`+N[c].replace(" at new "," at ");return s.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",s.displayName)),J}while(1<=c&&0<=m);break}}}finally{Dl=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Ti(l):""}function Ml(s,a){switch(s.tag){case 26:case 27:case 5:return Ti(s.type);case 16:return Ti("Lazy");case 13:return s.child!==a&&a!==null?Ti("Suspense Fallback"):Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return Pr(s.type,!1);case 11:return Pr(s.type.render,!1);case 1:return Pr(s.type,!0);case 31:return Ti("Activity");default:return""}}function Vl(s){try{var a="",l=null;do a+=Ml(s,l),l=s,s=s.return;while(s);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var De=Object.prototype.hasOwnProperty,He=i.unstable_scheduleCallback,Cs=i.unstable_cancelCallback,ng=i.unstable_shouldYield,jc=i.unstable_requestPaint,fn=i.unstable_now,kr=i.unstable_getCurrentPriorityLevel,Ol=i.unstable_ImmediatePriority,Nl=i.unstable_UserBlockingPriority,Ds=i.unstable_NormalPriority,ig=i.unstable_LowPriority,Fc=i.unstable_IdlePriority,Hc=i.log,qc=i.unstable_setDisableYieldValue,oi=null,tn=null;function qn(s){if(typeof Hc=="function"&&qc(s),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(oi,s)}catch{}}var Se=Math.clz32?Math.clz32:Kc,Gc=Math.log,Xa=Math.LN2;function Kc(s){return s>>>=0,s===0?32:31-(Gc(s)/Xa|0)|0}var Ei=256,zr=262144,Me=4194304;function Si(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ai(s,a,l){var c=s.pendingLanes;if(c===0)return 0;var m=0,p=s.suspendedLanes,v=s.pingedLanes;s=s.warmLanes;var A=c&134217727;return A!==0?(c=A&~p,c!==0?m=Si(c):(v&=A,v!==0?m=Si(v):l||(l=A&~s,l!==0&&(m=Si(l))))):(A=c&~p,A!==0?m=Si(A):v!==0?m=Si(v):l||(l=c&~s,l!==0&&(m=Si(l)))),m===0?0:a!==0&&a!==m&&(a&p)===0&&(p=m&-m,l=a&-a,p>=l||p===32&&(l&4194048)!==0)?a:m}function li(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function sg(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yc(){var s=Me;return Me<<=1,(Me&62914560)===0&&(Me=4194304),s}function xi(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function Lr(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function rg(s,a,l,c,m,p){var v=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var A=s.entanglements,N=s.expirationTimes,q=s.hiddenUpdates;for(l=v&~l;0<l;){var J=31-Se(l),st=1<<J;A[J]=0,N[J]=-1;var K=q[J];if(K!==null)for(q[J]=null,J=0;J<K.length;J++){var W=K[J];W!==null&&(W.lane&=-536870913)}l&=~st}c!==0&&Br(s,c,0),p!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=p&~(v&~a))}function Br(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var c=31-Se(a);s.entangledLanes|=a,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Pl(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var c=31-Se(l),m=1<<c;m&a|s[c]&a&&(s[c]|=a),l&=~m}}function kl(s,a){var l=a&-a;return l=(l&42)!==0?1:Ur(l),(l&(s.suspendedLanes|a))!==0?0:l}function Ur(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ts(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Qc(){var s=ot.p;return s!==0?s:(s=window.event,s===void 0?32:Fv(s.type))}function ui(s,a){var l=ot.p;try{return ot.p=s,a()}finally{ot.p=l}}var ci=Math.random().toString(36).slice(2),Ve="__reactFiber$"+ci,Qe="__reactProps$"+ci,wi="__reactContainer$"+ci,Wa="__reactEvents$"+ci,ag="__reactListeners$"+ci,Xc="__reactHandles$"+ci,Wc="__reactResources$"+ci,Ri="__reactMarker$"+ci;function $a(s){delete s[Ve],delete s[Qe],delete s[Wa],delete s[ag],delete s[Xc]}function Ii(s){var a=s[Ve];if(a)return a;for(var l=s.parentNode;l;){if(a=l[wi]||l[Ve]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=wv(s);s!==null;){if(l=s[Ve])return l;s=wv(s)}return a}s=l,l=s.parentNode}return null}function Gn(s){if(s=s[Ve]||s[wi]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Dn(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(n(33))}function Ci(s){var a=s[Wc];return a||(a=s[Wc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Oe(s){s[Ri]=!0}var zl=new Set,Ll={};function Di(s,a){Mi(s,a),Mi(s+"Capture",a)}function Mi(s,a){for(Ll[s]=a,s=0;s<a.length;s++)zl.add(a[s])}var Bl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ul={},jl={};function $c(s){return De.call(jl,s)?!0:De.call(Ul,s)?!1:Bl.test(s)?jl[s]=!0:(Ul[s]=!0,!1)}function Za(s,a,l){if($c(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function Mn(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function Ne(s,a,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+c)}}function Xe(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ms(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Fl(s,a,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,p=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(v){l=""+v,p.call(this,v)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Zt(s){if(!s._valueTracker){var a=Ms(s)?"checked":"value";s._valueTracker=Fl(s,a,""+s[a])}}function jr(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return s&&(c=Ms(s)?s.checked?"true":"false":s.value),s=c,s!==l?(a.setValue(s),!0):!1}function Vi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Fr=/[\n"\\]/g;function pn(s){return s.replace(Fr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ja(s,a,l,c,m,p,v,A){s.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?s.type=v:s.removeAttribute("type"),a!=null?v==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Xe(a)):s.value!==""+Xe(a)&&(s.value=""+Xe(a)):v!=="submit"&&v!=="reset"||s.removeAttribute("value"),a!=null?Hl(s,v,Xe(a)):l!=null?Hl(s,v,Xe(l)):c!=null&&s.removeAttribute("value"),m==null&&p!=null&&(s.defaultChecked=!!p),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+Xe(A):s.removeAttribute("name")}function Zc(s,a,l,c,m,p,v,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),a!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){Zt(s);return}l=l!=null?""+Xe(l):"",a=a!=null?""+Xe(a):l,A||a===s.value||(s.value=a),s.defaultValue=a}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=A?s.checked:!!c,s.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.name=v),Zt(s)}function Hl(s,a,l){a==="number"&&Vi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Vs(s,a,l,c){if(s=s.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=a.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&c&&(s[l].defaultSelected=!0)}else{for(l=""+Xe(l),a=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,c&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function Jc(s,a,l){if(a!=null&&(a=""+Xe(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+Xe(l):""}function Os(s,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(n(92));if(xt(c)){if(1<c.length)throw Error(n(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=Xe(a),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),Zt(s)}function yn(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var th=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ql(s,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":c?s.setProperty(a,l):typeof l!="number"||l===0||th.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Gl(s,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var m in a)c=a[m],a.hasOwnProperty(m)&&l[m]!==c&&ql(s,m,c)}else for(var p in a)a.hasOwnProperty(p)&&ql(s,p,a[p])}function to(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function eo(s){return Ns.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function hi(){}var Kl=null;function Kn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ps=null,Oi=null;function Hr(s){var a=Gn(s);if(a&&(s=a.stateNode)){var l=s[Qe]||null;t:switch(s=a.stateNode,a.type){case"input":if(Ja(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+pn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==s&&c.form===s.form){var m=c[Qe]||null;if(!m)throw Error(n(90));Ja(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===s.form&&jr(c)}break t;case"textarea":Jc(s,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&Vs(s,!!l.multiple,a,!1)}}}var no=!1;function ks(s,a,l){if(no)return s(a,l);no=!0;try{var c=s(a);return c}finally{if(no=!1,(Ps!==null||Oi!==null)&&(Qh(),Ps&&(a=Ps,s=Oi,Oi=Ps=null,Hr(a),s)))for(a=0;a<s.length;a++)Hr(s[a])}}function fi(s,a){var l=s.stateNode;if(l===null)return null;var c=l[Qe]||null;if(c===null)return null;l=c[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qr=!1;if(Yn)try{var se={};Object.defineProperty(se,"passive",{get:function(){qr=!0}}),window.addEventListener("test",se,se),window.removeEventListener("test",se,se)}catch{qr=!1}var Ni=null,Yl=null,Gr=null;function Ql(){if(Gr)return Gr;var s,a=Yl,l=a.length,c,m="value"in Ni?Ni.value:Ni.textContent,p=m.length;for(s=0;s<l&&a[s]===m[s];s++);var v=l-s;for(c=1;c<=v&&a[l-c]===m[p-c];c++);return Gr=m.slice(s,1<c?1-c:void 0)}function Kr(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function es(){return!0}function di(){return!1}function en(s){function a(l,c,m,p,v){this._reactName=l,this._targetInst=m,this.type=c,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(l=s[A],this[A]=l?l(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?es:di,this.isPropagationStopped=di,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),a}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=en(ns),zs=_({},ns,{view:0,detail:0}),Xl=en(zs),Ls,io,ki,so=_({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ki&&(ki&&s.type==="mousemove"?(Ls=s.screenX-ki.screenX,io=s.screenY-ki.screenY):io=Ls=0,ki=s),Ls)},movementY:function(s){return"movementY"in s?s.movementY:io}}),Wl=en(so),Yr=_({},so,{dataTransfer:0}),nh=en(Yr),ih=_({},zs,{relatedTarget:0}),Qr=en(ih),$l=_({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),sh=en($l),ro=_({},ns,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),rh=en(ro),ah=_({},ns,{data:0}),zi=en(ah),oh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ch(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=uh[s])?!!a[s]:!1}function Bs(){return ch}var dn=_({},zs,{key:function(s){if(s.key){var a=oh[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Kr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?lh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bs,charCode:function(s){return s.type==="keypress"?Kr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Kr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),hh=en(dn),fh=_({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),is=en(fh),d=_({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bs}),b=en(d),E=_({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=en(E),F=_({},so,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),X=en(F),lt=_({},ns,{newState:0,oldState:0}),It=en(lt),Ae=[9,13,27,32],Qt=Yn&&"CompositionEvent"in window,pe=null;Yn&&"documentMode"in document&&(pe=document.documentMode);var Qn=Yn&&"TextEvent"in window&&!pe,Li=Yn&&(!Qt||pe&&8<pe&&11>=pe),gi=" ",mi=!1;function Xr(s,a){switch(s){case"keyup":return Ae.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ao(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var oo=!1;function Mw(s,a){switch(s){case"compositionend":return ao(a);case"keypress":return a.which!==32?null:(mi=!0,gi);case"textInput":return s=a.data,s===gi&&mi?null:s;default:return null}}function Vw(s,a){if(oo)return s==="compositionend"||!Qt&&Xr(s,a)?(s=Ql(),Gr=Yl=Ni=null,oo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Li&&a.locale!=="ko"?null:a.data;default:return null}}var Ow={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Ow[s.type]:a==="textarea"}function D_(s,a,l,c){Ps?Oi?Oi.push(c):Oi=[c]:Ps=c,a=ef(a,"onChange"),0<a.length&&(l=new Pi("onChange","change",null,l,c),s.push({event:l,listeners:a}))}var Zl=null,Jl=null;function Nw(s){fv(s,0)}function dh(s){var a=Dn(s);if(jr(a))return s}function M_(s,a){if(s==="change")return a}var V_=!1;if(Yn){var og;if(Yn){var lg="oninput"in document;if(!lg){var O_=document.createElement("div");O_.setAttribute("oninput","return;"),lg=typeof O_.oninput=="function"}og=lg}else og=!1;V_=og&&(!document.documentMode||9<document.documentMode)}function N_(){Zl&&(Zl.detachEvent("onpropertychange",P_),Jl=Zl=null)}function P_(s){if(s.propertyName==="value"&&dh(Jl)){var a=[];D_(a,Jl,s,Kn(s)),ks(Nw,a)}}function Pw(s,a,l){s==="focusin"?(N_(),Zl=a,Jl=l,Zl.attachEvent("onpropertychange",P_)):s==="focusout"&&N_()}function kw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return dh(Jl)}function zw(s,a){if(s==="click")return dh(a)}function Lw(s,a){if(s==="input"||s==="change")return dh(a)}function Bw(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Vn=typeof Object.is=="function"?Object.is:Bw;function tu(s,a){if(Vn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var m=l[c];if(!De.call(a,m)||!Vn(s[m],a[m]))return!1}return!0}function k_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function z_(s,a){var l=k_(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=a&&c>=a)return{node:l,offset:a-s};s=c}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=k_(l)}}function L_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?L_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function B_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Vi(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=Vi(s.document)}return a}function ug(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Uw=Yn&&"documentMode"in document&&11>=document.documentMode,lo=null,cg=null,eu=null,hg=!1;function U_(s,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;hg||lo==null||lo!==Vi(c)||(c=lo,"selectionStart"in c&&ug(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),eu&&tu(eu,c)||(eu=c,c=ef(cg,"onSelect"),0<c.length&&(a=new Pi("onSelect","select",null,a,l),s.push({event:a,listeners:c}),a.target=lo)))}function Wr(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var uo={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},fg={},j_={};Yn&&(j_=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function $r(s){if(fg[s])return fg[s];if(!uo[s])return s;var a=uo[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in j_)return fg[s]=a[l];return s}var F_=$r("animationend"),H_=$r("animationiteration"),q_=$r("animationstart"),jw=$r("transitionrun"),Fw=$r("transitionstart"),Hw=$r("transitioncancel"),G_=$r("transitionend"),K_=new Map,dg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dg.push("scrollEnd");function pi(s,a){K_.set(s,a),Di(a,[s])}var gh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Xn=[],co=0,gg=0;function mh(){for(var s=co,a=gg=co=0;a<s;){var l=Xn[a];Xn[a++]=null;var c=Xn[a];Xn[a++]=null;var m=Xn[a];Xn[a++]=null;var p=Xn[a];if(Xn[a++]=null,c!==null&&m!==null){var v=c.pending;v===null?m.next=m:(m.next=v.next,v.next=m),c.pending=m}p!==0&&Y_(l,m,p)}}function ph(s,a,l,c){Xn[co++]=s,Xn[co++]=a,Xn[co++]=l,Xn[co++]=c,gg|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function mg(s,a,l,c){return ph(s,a,l,c),yh(s)}function Zr(s,a){return ph(s,null,null,a),yh(s)}function Y_(s,a,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var m=!1,p=s.return;p!==null;)p.childLanes|=l,c=p.alternate,c!==null&&(c.childLanes|=l),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(m=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,m&&a!==null&&(m=31-Se(l),s=p.hiddenUpdates,c=s[m],c===null?s[m]=[a]:c.push(a),a.lane=l|536870912),p):null}function yh(s){if(50<Su)throw Su=0,Am=null,Error(n(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var ho={};function qw(s,a,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(s,a,l,c){return new qw(s,a,l,c)}function pg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ss(s,a){var l=s.alternate;return l===null?(l=On(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Q_(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function _h(s,a,l,c,m,p){var v=0;if(c=s,typeof s=="function")pg(s)&&(v=1);else if(typeof s=="string")v=X2(s,l,ft.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case I:return s=On(31,l,a,m),s.elementType=I,s.lanes=p,s;case D:return Jr(l.children,m,p,a);case M:v=8,m|=24;break;case U:return s=On(12,l,a,m|2),s.elementType=U,s.lanes=p,s;case $:return s=On(13,l,a,m),s.elementType=$,s.lanes=p,s;case it:return s=On(19,l,a,m),s.elementType=it,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Q:v=10;break t;case G:v=9;break t;case Z:v=11;break t;case R:v=14;break t;case x:v=16,c=null;break t}v=29,l=Error(n(130,s===null?"null":typeof s,"")),c=null}return a=On(v,l,a,m),a.elementType=s,a.type=c,a.lanes=p,a}function Jr(s,a,l,c){return s=On(7,s,c,a),s.lanes=l,s}function yg(s,a,l){return s=On(6,s,null,a),s.lanes=l,s}function X_(s){var a=On(18,null,null,0);return a.stateNode=s,a}function _g(s,a,l){return a=On(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var W_=new WeakMap;function Wn(s,a){if(typeof s=="object"&&s!==null){var l=W_.get(s);return l!==void 0?l:(a={value:s,source:a,stack:Vl(a)},W_.set(s,a),a)}return{value:s,source:a,stack:Vl(a)}}var fo=[],go=0,bh=null,nu=0,$n=[],Zn=0,Us=null,Bi=1,Ui="";function rs(s,a){fo[go++]=nu,fo[go++]=bh,bh=s,nu=a}function $_(s,a,l){$n[Zn++]=Bi,$n[Zn++]=Ui,$n[Zn++]=Us,Us=s;var c=Bi;s=Ui;var m=32-Se(c)-1;c&=~(1<<m),l+=1;var p=32-Se(a)+m;if(30<p){var v=m-m%5;p=(c&(1<<v)-1).toString(32),c>>=v,m-=v,Bi=1<<32-Se(a)+m|l<<m|c,Ui=p+s}else Bi=1<<p|l<<m|c,Ui=s}function bg(s){s.return!==null&&(rs(s,1),$_(s,1,0))}function vg(s){for(;s===bh;)bh=fo[--go],fo[go]=null,nu=fo[--go],fo[go]=null;for(;s===Us;)Us=$n[--Zn],$n[Zn]=null,Ui=$n[--Zn],$n[Zn]=null,Bi=$n[--Zn],$n[Zn]=null}function Z_(s,a){$n[Zn++]=Bi,$n[Zn++]=Ui,$n[Zn++]=Us,Bi=a.id,Ui=a.overflow,Us=s}var nn=null,he=null,Bt=!1,js=null,Jn=!1,Tg=Error(n(519));function Fs(s){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw iu(Wn(a,s)),Tg}function J_(s){var a=s.stateNode,l=s.type,c=s.memoizedProps;switch(a[Ve]=s,a[Qe]=c,l){case"dialog":Nt("cancel",a),Nt("close",a);break;case"iframe":case"object":case"embed":Nt("load",a);break;case"video":case"audio":for(l=0;l<xu.length;l++)Nt(xu[l],a);break;case"source":Nt("error",a);break;case"img":case"image":case"link":Nt("error",a),Nt("load",a);break;case"details":Nt("toggle",a);break;case"input":Nt("invalid",a),Zc(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Nt("invalid",a);break;case"textarea":Nt("invalid",a),Os(a,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||pv(a.textContent,l)?(c.popover!=null&&(Nt("beforetoggle",a),Nt("toggle",a)),c.onScroll!=null&&Nt("scroll",a),c.onScrollEnd!=null&&Nt("scrollend",a),c.onClick!=null&&(a.onclick=hi),a=!0):a=!1,a||Fs(s,!0)}function t0(s){for(nn=s.return;nn;)switch(nn.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:nn=nn.return}}function mo(s){if(s!==nn)return!1;if(!Bt)return t0(s),Bt=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Bm(s.type,s.memoizedProps)),l=!l),l&&he&&Fs(s),t0(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));he=xv(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));he=xv(s)}else a===27?(a=he,nr(s.type)?(s=qm,qm=null,he=s):he=a):he=nn?ei(s.stateNode.nextSibling):null;return!0}function ta(){he=nn=null,Bt=!1}function Eg(){var s=js;return s!==null&&(Tn===null?Tn=s:Tn.push.apply(Tn,s),js=null),s}function iu(s){js===null?js=[s]:js.push(s)}var Sg=z(null),ea=null,as=null;function Hs(s,a,l){ct(Sg,a._currentValue),a._currentValue=l}function os(s){s._currentValue=Sg.current,et(Sg)}function Ag(s,a,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),s===l)break;s=s.return}}function xg(s,a,l,c){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var p=m.dependencies;if(p!==null){var v=m.child;p=p.firstContext;t:for(;p!==null;){var A=p;p=m;for(var N=0;N<a.length;N++)if(A.context===a[N]){p.lanes|=l,A=p.alternate,A!==null&&(A.lanes|=l),Ag(p.return,l,s),c||(v=null);break t}p=A.next}}else if(m.tag===18){if(v=m.return,v===null)throw Error(n(341));v.lanes|=l,p=v.alternate,p!==null&&(p.lanes|=l),Ag(v,l,s),v=null}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===s){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}}function po(s,a,l,c){s=null;for(var m=a,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var v=m.alternate;if(v===null)throw Error(n(387));if(v=v.memoizedProps,v!==null){var A=m.type;Vn(m.pendingProps.value,v.value)||(s!==null?s.push(A):s=[A])}}else if(m===Ut.current){if(v=m.alternate,v===null)throw Error(n(387));v.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(Du):s=[Du])}m=m.return}s!==null&&xg(a,s,l,c),a.flags|=262144}function vh(s){for(s=s.firstContext;s!==null;){if(!Vn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function na(s){ea=s,as=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function sn(s){return e0(ea,s)}function Th(s,a){return ea===null&&na(s),e0(s,a)}function e0(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},as===null){if(s===null)throw Error(n(308));as=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else as=as.next=a;return l}var Gw=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},Kw=i.unstable_scheduleCallback,Yw=i.unstable_NormalPriority,Pe={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wg(){return{controller:new Gw,data:new Map,refCount:0}}function su(s){s.refCount--,s.refCount===0&&Kw(Yw,function(){s.controller.abort()})}var ru=null,Rg=0,yo=0,_o=null;function Qw(s,a){if(ru===null){var l=ru=[];Rg=0,yo=Dm(),_o={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Rg++,a.then(n0,n0),a}function n0(){if(--Rg===0&&ru!==null){_o!==null&&(_o.status="fulfilled");var s=ru;ru=null,yo=0,_o=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function Xw(s,a){var l=[],c={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return s.then(function(){c.status="fulfilled",c.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(c.status="rejected",c.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),c}var i0=Y.S;Y.S=function(s,a){Ub=fn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Qw(s,a),i0!==null&&i0(s,a)};var ia=z(null);function Ig(){var s=ia.current;return s!==null?s:le.pooledCache}function Eh(s,a){a===null?ct(ia,ia.current):ct(ia,a.pool)}function s0(){var s=Ig();return s===null?null:{parent:Pe._currentValue,pool:s}}var bo=Error(n(460)),Cg=Error(n(474)),Sh=Error(n(542)),Ah={then:function(){}};function r0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function a0(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(hi,hi),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,l0(s),s;default:if(typeof a.status=="string")a.then(hi,hi);else{if(s=le,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=a,s.status="pending",s.then(function(c){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=c}},function(c){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,l0(s),s}throw ra=a,bo}}function sa(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ra=l,bo):l}}var ra=null;function o0(){if(ra===null)throw Error(n(459));var s=ra;return ra=null,s}function l0(s){if(s===bo||s===Sh)throw Error(n(483))}var vo=null,au=0;function xh(s){var a=au;return au+=1,vo===null&&(vo=[]),a0(vo,s,a)}function ou(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function wh(s,a){throw a.$$typeof===T?Error(n(525)):(s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function u0(s){function a(B,L){if(s){var H=B.deletions;H===null?(B.deletions=[L],B.flags|=16):H.push(L)}}function l(B,L){if(!s)return null;for(;L!==null;)a(B,L),L=L.sibling;return null}function c(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function m(B,L){return B=ss(B,L),B.index=0,B.sibling=null,B}function p(B,L,H){return B.index=H,s?(H=B.alternate,H!==null?(H=H.index,H<L?(B.flags|=67108866,L):H):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function v(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function A(B,L,H,nt){return L===null||L.tag!==6?(L=yg(H,B.mode,nt),L.return=B,L):(L=m(L,H),L.return=B,L)}function N(B,L,H,nt){var bt=H.type;return bt===D?J(B,L,H.props.children,nt,H.key):L!==null&&(L.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===x&&sa(bt)===L.type)?(L=m(L,H.props),ou(L,H),L.return=B,L):(L=_h(H.type,H.key,H.props,null,B.mode,nt),ou(L,H),L.return=B,L)}function q(B,L,H,nt){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=_g(H,B.mode,nt),L.return=B,L):(L=m(L,H.children||[]),L.return=B,L)}function J(B,L,H,nt,bt){return L===null||L.tag!==7?(L=Jr(H,B.mode,nt,bt),L.return=B,L):(L=m(L,H),L.return=B,L)}function st(B,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=yg(""+L,B.mode,H),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case S:return H=_h(L.type,L.key,L.props,null,B.mode,H),ou(H,L),H.return=B,H;case C:return L=_g(L,B.mode,H),L.return=B,L;case x:return L=sa(L),st(B,L,H)}if(xt(L)||k(L))return L=Jr(L,B.mode,H,null),L.return=B,L;if(typeof L.then=="function")return st(B,xh(L),H);if(L.$$typeof===Q)return st(B,Th(B,L),H);wh(B,L)}return null}function K(B,L,H,nt){var bt=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return bt!==null?null:A(B,L,""+H,nt);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return H.key===bt?N(B,L,H,nt):null;case C:return H.key===bt?q(B,L,H,nt):null;case x:return H=sa(H),K(B,L,H,nt)}if(xt(H)||k(H))return bt!==null?null:J(B,L,H,nt,null);if(typeof H.then=="function")return K(B,L,xh(H),nt);if(H.$$typeof===Q)return K(B,L,Th(B,H),nt);wh(B,H)}return null}function W(B,L,H,nt,bt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return B=B.get(H)||null,A(L,B,""+nt,bt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case S:return B=B.get(nt.key===null?H:nt.key)||null,N(L,B,nt,bt);case C:return B=B.get(nt.key===null?H:nt.key)||null,q(L,B,nt,bt);case x:return nt=sa(nt),W(B,L,H,nt,bt)}if(xt(nt)||k(nt))return B=B.get(H)||null,J(L,B,nt,bt,null);if(typeof nt.then=="function")return W(B,L,H,xh(nt),bt);if(nt.$$typeof===Q)return W(B,L,H,Th(L,nt),bt);wh(L,nt)}return null}function mt(B,L,H,nt){for(var bt=null,Kt=null,yt=L,Dt=L=0,zt=null;yt!==null&&Dt<H.length;Dt++){yt.index>Dt?(zt=yt,yt=null):zt=yt.sibling;var Yt=K(B,yt,H[Dt],nt);if(Yt===null){yt===null&&(yt=zt);break}s&&yt&&Yt.alternate===null&&a(B,yt),L=p(Yt,L,Dt),Kt===null?bt=Yt:Kt.sibling=Yt,Kt=Yt,yt=zt}if(Dt===H.length)return l(B,yt),Bt&&rs(B,Dt),bt;if(yt===null){for(;Dt<H.length;Dt++)yt=st(B,H[Dt],nt),yt!==null&&(L=p(yt,L,Dt),Kt===null?bt=yt:Kt.sibling=yt,Kt=yt);return Bt&&rs(B,Dt),bt}for(yt=c(yt);Dt<H.length;Dt++)zt=W(yt,B,Dt,H[Dt],nt),zt!==null&&(s&&zt.alternate!==null&&yt.delete(zt.key===null?Dt:zt.key),L=p(zt,L,Dt),Kt===null?bt=zt:Kt.sibling=zt,Kt=zt);return s&&yt.forEach(function(or){return a(B,or)}),Bt&&rs(B,Dt),bt}function Et(B,L,H,nt){if(H==null)throw Error(n(151));for(var bt=null,Kt=null,yt=L,Dt=L=0,zt=null,Yt=H.next();yt!==null&&!Yt.done;Dt++,Yt=H.next()){yt.index>Dt?(zt=yt,yt=null):zt=yt.sibling;var or=K(B,yt,Yt.value,nt);if(or===null){yt===null&&(yt=zt);break}s&&yt&&or.alternate===null&&a(B,yt),L=p(or,L,Dt),Kt===null?bt=or:Kt.sibling=or,Kt=or,yt=zt}if(Yt.done)return l(B,yt),Bt&&rs(B,Dt),bt;if(yt===null){for(;!Yt.done;Dt++,Yt=H.next())Yt=st(B,Yt.value,nt),Yt!==null&&(L=p(Yt,L,Dt),Kt===null?bt=Yt:Kt.sibling=Yt,Kt=Yt);return Bt&&rs(B,Dt),bt}for(yt=c(yt);!Yt.done;Dt++,Yt=H.next())Yt=W(yt,B,Dt,Yt.value,nt),Yt!==null&&(s&&Yt.alternate!==null&&yt.delete(Yt.key===null?Dt:Yt.key),L=p(Yt,L,Dt),Kt===null?bt=Yt:Kt.sibling=Yt,Kt=Yt);return s&&yt.forEach(function(aR){return a(B,aR)}),Bt&&rs(B,Dt),bt}function oe(B,L,H,nt){if(typeof H=="object"&&H!==null&&H.type===D&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case S:t:{for(var bt=H.key;L!==null;){if(L.key===bt){if(bt=H.type,bt===D){if(L.tag===7){l(B,L.sibling),nt=m(L,H.props.children),nt.return=B,B=nt;break t}}else if(L.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===x&&sa(bt)===L.type){l(B,L.sibling),nt=m(L,H.props),ou(nt,H),nt.return=B,B=nt;break t}l(B,L);break}else a(B,L);L=L.sibling}H.type===D?(nt=Jr(H.props.children,B.mode,nt,H.key),nt.return=B,B=nt):(nt=_h(H.type,H.key,H.props,null,B.mode,nt),ou(nt,H),nt.return=B,B=nt)}return v(B);case C:t:{for(bt=H.key;L!==null;){if(L.key===bt)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){l(B,L.sibling),nt=m(L,H.children||[]),nt.return=B,B=nt;break t}else{l(B,L);break}else a(B,L);L=L.sibling}nt=_g(H,B.mode,nt),nt.return=B,B=nt}return v(B);case x:return H=sa(H),oe(B,L,H,nt)}if(xt(H))return mt(B,L,H,nt);if(k(H)){if(bt=k(H),typeof bt!="function")throw Error(n(150));return H=bt.call(H),Et(B,L,H,nt)}if(typeof H.then=="function")return oe(B,L,xh(H),nt);if(H.$$typeof===Q)return oe(B,L,Th(B,H),nt);wh(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(l(B,L.sibling),nt=m(L,H),nt.return=B,B=nt):(l(B,L),nt=yg(H,B.mode,nt),nt.return=B,B=nt),v(B)):l(B,L)}return function(B,L,H,nt){try{au=0;var bt=oe(B,L,H,nt);return vo=null,bt}catch(yt){if(yt===bo||yt===Sh)throw yt;var Kt=On(29,yt,null,B.mode);return Kt.lanes=nt,Kt.return=B,Kt}finally{}}}var aa=u0(!0),c0=u0(!1),qs=!1;function Dg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Gs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ks(s,a,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Xt&2)!==0){var m=c.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),c.pending=a,a=yh(s),Y_(s,null,l),a}return ph(s,c,a,l),yh(s)}function lu(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=s.pendingLanes,l|=c,a.lanes=l,Pl(s,l)}}function Vg(s,a){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var m=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var v={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?m=p=v:p=p.next=v,l=l.next}while(l!==null);p===null?m=p=a:p=p.next=a}else m=p=a;l={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var Og=!1;function uu(){if(Og){var s=_o;if(s!==null)throw s}}function cu(s,a,l,c){Og=!1;var m=s.updateQueue;qs=!1;var p=m.firstBaseUpdate,v=m.lastBaseUpdate,A=m.shared.pending;if(A!==null){m.shared.pending=null;var N=A,q=N.next;N.next=null,v===null?p=q:v.next=q,v=N;var J=s.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==v&&(A===null?J.firstBaseUpdate=q:A.next=q,J.lastBaseUpdate=N))}if(p!==null){var st=m.baseState;v=0,J=q=N=null,A=p;do{var K=A.lane&-536870913,W=K!==A.lane;if(W?(kt&K)===K:(c&K)===K){K!==0&&K===yo&&(Og=!0),J!==null&&(J=J.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var mt=s,Et=A;K=a;var oe=l;switch(Et.tag){case 1:if(mt=Et.payload,typeof mt=="function"){st=mt.call(oe,st,K);break t}st=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=Et.payload,K=typeof mt=="function"?mt.call(oe,st,K):mt,K==null)break t;st=_({},st,K);break t;case 2:qs=!0}}K=A.callback,K!==null&&(s.flags|=64,W&&(s.flags|=8192),W=m.callbacks,W===null?m.callbacks=[K]:W.push(K))}else W={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(q=J=W,N=st):J=J.next=W,v|=K;if(A=A.next,A===null){if(A=m.shared.pending,A===null)break;W=A,A=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);J===null&&(N=st),m.baseState=N,m.firstBaseUpdate=q,m.lastBaseUpdate=J,p===null&&(m.shared.lanes=0),$s|=v,s.lanes=v,s.memoizedState=st}}function h0(s,a){if(typeof s!="function")throw Error(n(191,s));s.call(a)}function f0(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)h0(l[s],a)}var To=z(null),Rh=z(0);function d0(s,a){s=ps,ct(Rh,s),ct(To,a),ps=s|a.baseLanes}function Ng(){ct(Rh,ps),ct(To,To.current)}function Pg(){ps=Rh.current,et(To),et(Rh)}var Nn=z(null),ti=null;function Ys(s){var a=s.alternate;ct(xe,xe.current&1),ct(Nn,s),ti===null&&(a===null||To.current!==null||a.memoizedState!==null)&&(ti=s)}function kg(s){ct(xe,xe.current),ct(Nn,s),ti===null&&(ti=s)}function g0(s){s.tag===22?(ct(xe,xe.current),ct(Nn,s),ti===null&&(ti=s)):Qs()}function Qs(){ct(xe,xe.current),ct(Nn,Nn.current)}function Pn(s){et(Nn),ti===s&&(ti=null),et(xe)}var xe=z(0);function Ih(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Fm(l)||Hm(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ls=0,Ct=null,re=null,ke=null,Ch=!1,Eo=!1,oa=!1,Dh=0,hu=0,So=null,Ww=0;function ve(){throw Error(n(321))}function zg(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!Vn(s[l],a[l]))return!1;return!0}function Lg(s,a,l,c,m,p){return ls=p,Ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Y.H=s===null||s.memoizedState===null?$0:Jg,oa=!1,p=l(c,m),oa=!1,Eo&&(p=p0(a,l,c,m)),m0(s),p}function m0(s){Y.H=gu;var a=re!==null&&re.next!==null;if(ls=0,ke=re=Ct=null,Ch=!1,hu=0,So=null,a)throw Error(n(300));s===null||ze||(s=s.dependencies,s!==null&&vh(s)&&(ze=!0))}function p0(s,a,l,c){Ct=s;var m=0;do{if(Eo&&(So=null),hu=0,Eo=!1,25<=m)throw Error(n(301));if(m+=1,ke=re=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Y.H=Z0,p=a(l,c)}while(Eo);return p}function $w(){var s=Y.H,a=s.useState()[0];return a=typeof a.then=="function"?fu(a):a,s=s.useState()[0],(re!==null?re.memoizedState:null)!==s&&(Ct.flags|=1024),a}function Bg(){var s=Dh!==0;return Dh=0,s}function Ug(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function jg(s){if(Ch){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ch=!1}ls=0,ke=re=Ct=null,Eo=!1,hu=Dh=0,So=null}function gn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?Ct.memoizedState=ke=s:ke=ke.next=s,ke}function we(){if(re===null){var s=Ct.alternate;s=s!==null?s.memoizedState:null}else s=re.next;var a=ke===null?Ct.memoizedState:ke.next;if(a!==null)ke=a,re=s;else{if(s===null)throw Ct.alternate===null?Error(n(467)):Error(n(310));re=s,s={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},ke===null?Ct.memoizedState=ke=s:ke=ke.next=s}return ke}function Mh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fu(s){var a=hu;return hu+=1,So===null&&(So=[]),s=a0(So,s,a),a=Ct,(ke===null?a.memoizedState:ke.next)===null&&(a=a.alternate,Y.H=a===null||a.memoizedState===null?$0:Jg),s}function Vh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return fu(s);if(s.$$typeof===Q)return sn(s)}throw Error(n(438,String(s)))}function Fg(s){var a=null,l=Ct.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=Ct.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Mh(),Ct.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),c=0;c<s;c++)l[c]=P;return a.index++,l}function us(s,a){return typeof a=="function"?a(s):a}function Oh(s){var a=we();return Hg(a,re,s)}function Hg(s,a,l){var c=s.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=l;var m=s.baseQueue,p=c.pending;if(p!==null){if(m!==null){var v=m.next;m.next=p.next,p.next=v}a.baseQueue=m=p,c.pending=null}if(p=s.baseState,m===null)s.memoizedState=p;else{a=m.next;var A=v=null,N=null,q=a,J=!1;do{var st=q.lane&-536870913;if(st!==q.lane?(kt&st)===st:(ls&st)===st){var K=q.revertLane;if(K===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),st===yo&&(J=!0);else if((ls&K)===K){q=q.next,K===yo&&(J=!0);continue}else st={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(A=N=st,v=p):N=N.next=st,Ct.lanes|=K,$s|=K;st=q.action,oa&&l(p,st),p=q.hasEagerState?q.eagerState:l(p,st)}else K={lane:st,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(A=N=K,v=p):N=N.next=K,Ct.lanes|=st,$s|=st;q=q.next}while(q!==null&&q!==a);if(N===null?v=p:N.next=A,!Vn(p,s.memoizedState)&&(ze=!0,J&&(l=_o,l!==null)))throw l;s.memoizedState=p,s.baseState=v,s.baseQueue=N,c.lastRenderedState=p}return m===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function qg(s){var a=we(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=s;var c=l.dispatch,m=l.pending,p=a.memoizedState;if(m!==null){l.pending=null;var v=m=m.next;do p=s(p,v.action),v=v.next;while(v!==m);Vn(p,a.memoizedState)||(ze=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),l.lastRenderedState=p}return[p,c]}function y0(s,a,l){var c=Ct,m=we(),p=Bt;if(p){if(l===void 0)throw Error(n(407));l=l()}else l=a();var v=!Vn((re||m).memoizedState,l);if(v&&(m.memoizedState=l,ze=!0),m=m.queue,Yg(v0.bind(null,c,m,s),[s]),m.getSnapshot!==a||v||ke!==null&&ke.memoizedState.tag&1){if(c.flags|=2048,Ao(9,{destroy:void 0},b0.bind(null,c,m,l,a),null),le===null)throw Error(n(349));p||(ls&127)!==0||_0(c,a,l)}return l}function _0(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Ct.updateQueue,a===null?(a=Mh(),Ct.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function b0(s,a,l,c){a.value=l,a.getSnapshot=c,T0(a)&&E0(s)}function v0(s,a,l){return l(function(){T0(a)&&E0(s)})}function T0(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!Vn(s,l)}catch{return!0}}function E0(s){var a=Zr(s,2);a!==null&&En(a,s,2)}function Gg(s){var a=gn();if(typeof s=="function"){var l=s;if(s=l(),oa){qn(!0);try{l()}finally{qn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:s},a}function S0(s,a,l,c){return s.baseState=l,Hg(s,re,typeof c=="function"?c:us)}function Zw(s,a,l,c,m){if(kh(s))throw Error(n(485));if(s=a.action,s!==null){var p={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};Y.T!==null?l(!0):p.isTransition=!1,c(p),l=a.pending,l===null?(p.next=a.pending=p,A0(a,p)):(p.next=l.next,a.pending=l.next=p)}}function A0(s,a){var l=a.action,c=a.payload,m=s.state;if(a.isTransition){var p=Y.T,v={};Y.T=v;try{var A=l(m,c),N=Y.S;N!==null&&N(v,A),x0(s,a,A)}catch(q){Kg(s,a,q)}finally{p!==null&&v.types!==null&&(p.types=v.types),Y.T=p}}else try{p=l(m,c),x0(s,a,p)}catch(q){Kg(s,a,q)}}function x0(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){w0(s,a,c)},function(c){return Kg(s,a,c)}):w0(s,a,l)}function w0(s,a,l){a.status="fulfilled",a.value=l,R0(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,A0(s,l)))}function Kg(s,a,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,R0(a),a=a.next;while(a!==c)}s.action=null}function R0(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function I0(s,a){return a}function C0(s,a){if(Bt){var l=le.formState;if(l!==null){t:{var c=Ct;if(Bt){if(he){e:{for(var m=he,p=Jn;m.nodeType!==8;){if(!p){m=null;break e}if(m=ei(m.nextSibling),m===null){m=null;break e}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){he=ei(m.nextSibling),c=m.data==="F!";break t}}Fs(c)}c=!1}c&&(a=l[0])}}return l=gn(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:I0,lastRenderedState:a},l.queue=c,l=Q0.bind(null,Ct,c),c.dispatch=l,c=Gg(!1),p=Zg.bind(null,Ct,!1,c.queue),c=gn(),m={state:a,dispatch:null,action:s,pending:null},c.queue=m,l=Zw.bind(null,Ct,m,p,l),m.dispatch=l,c.memoizedState=s,[a,l,!1]}function D0(s){var a=we();return M0(a,re,s)}function M0(s,a,l){if(a=Hg(s,a,I0)[0],s=Oh(us)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=fu(a)}catch(v){throw v===bo?Sh:v}else c=a;a=we();var m=a.queue,p=m.dispatch;return l!==a.memoizedState&&(Ct.flags|=2048,Ao(9,{destroy:void 0},Jw.bind(null,m,l),null)),[c,p,s]}function Jw(s,a){s.action=a}function V0(s){var a=we(),l=re;if(l!==null)return M0(a,l,s);we(),a=a.memoizedState,l=we();var c=l.queue.dispatch;return l.memoizedState=s,[a,c,!1]}function Ao(s,a,l,c){return s={tag:s,create:l,deps:c,inst:a,next:null},a=Ct.updateQueue,a===null&&(a=Mh(),Ct.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,a.lastEffect=s),s}function O0(){return we().memoizedState}function Nh(s,a,l,c){var m=gn();Ct.flags|=s,m.memoizedState=Ao(1|a,{destroy:void 0},l,c===void 0?null:c)}function Ph(s,a,l,c){var m=we();c=c===void 0?null:c;var p=m.memoizedState.inst;re!==null&&c!==null&&zg(c,re.memoizedState.deps)?m.memoizedState=Ao(a,p,l,c):(Ct.flags|=s,m.memoizedState=Ao(1|a,p,l,c))}function N0(s,a){Nh(8390656,8,s,a)}function Yg(s,a){Ph(2048,8,s,a)}function t2(s){Ct.flags|=4;var a=Ct.updateQueue;if(a===null)a=Mh(),Ct.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function P0(s){var a=we().memoizedState;return t2({ref:a,nextImpl:s}),function(){if((Xt&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function k0(s,a){return Ph(4,2,s,a)}function z0(s,a){return Ph(4,4,s,a)}function L0(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function B0(s,a,l){l=l!=null?l.concat([s]):null,Ph(4,4,L0.bind(null,a,s),l)}function Qg(){}function U0(s,a){var l=we();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&zg(a,c[1])?c[0]:(l.memoizedState=[s,a],s)}function j0(s,a){var l=we();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&zg(a,c[1]))return c[0];if(c=s(),oa){qn(!0);try{s()}finally{qn(!1)}}return l.memoizedState=[c,a],c}function Xg(s,a,l){return l===void 0||(ls&1073741824)!==0&&(kt&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=Fb(),Ct.lanes|=s,$s|=s,l)}function F0(s,a,l,c){return Vn(l,a)?l:To.current!==null?(s=Xg(s,l,c),Vn(s,a)||(ze=!0),s):(ls&42)===0||(ls&1073741824)!==0&&(kt&261930)===0?(ze=!0,s.memoizedState=l):(s=Fb(),Ct.lanes|=s,$s|=s,a)}function H0(s,a,l,c,m){var p=ot.p;ot.p=p!==0&&8>p?p:8;var v=Y.T,A={};Y.T=A,Zg(s,!1,a,l);try{var N=m(),q=Y.S;if(q!==null&&q(A,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=Xw(N,c);du(s,a,J,Ln(s))}else du(s,a,c,Ln(s))}catch(st){du(s,a,{then:function(){},status:"rejected",reason:st},Ln())}finally{ot.p=p,v!==null&&A.types!==null&&(v.types=A.types),Y.T=v}}function e2(){}function Wg(s,a,l,c){if(s.tag!==5)throw Error(n(476));var m=q0(s).queue;H0(s,m,a,gt,l===null?e2:function(){return G0(s),l(c)})}function q0(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:gt},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function G0(s){var a=q0(s);a.next===null&&(a=s.alternate.memoizedState),du(s,a.next.queue,{},Ln())}function $g(){return sn(Du)}function K0(){return we().memoizedState}function Y0(){return we().memoizedState}function n2(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Ln();s=Gs(l);var c=Ks(a,s,l);c!==null&&(En(c,a,l),lu(c,a,l)),a={cache:wg()},s.payload=a;return}a=a.return}}function i2(s,a,l){var c=Ln();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},kh(s)?X0(a,l):(l=mg(s,a,l,c),l!==null&&(En(l,s,c),W0(l,a,c)))}function Q0(s,a,l){var c=Ln();du(s,a,l,c)}function du(s,a,l,c){var m={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(kh(s))X0(a,m);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var v=a.lastRenderedState,A=p(v,l);if(m.hasEagerState=!0,m.eagerState=A,Vn(A,v))return ph(s,a,m,0),le===null&&mh(),!1}catch{}finally{}if(l=mg(s,a,m,c),l!==null)return En(l,s,c),W0(l,a,c),!0}return!1}function Zg(s,a,l,c){if(c={lane:2,revertLane:Dm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},kh(s)){if(a)throw Error(n(479))}else a=mg(s,l,c,2),a!==null&&En(a,s,2)}function kh(s){var a=s.alternate;return s===Ct||a!==null&&a===Ct}function X0(s,a){Eo=Ch=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function W0(s,a,l){if((l&4194048)!==0){var c=a.lanes;c&=s.pendingLanes,l|=c,a.lanes=l,Pl(s,l)}}var gu={readContext:sn,use:Vh,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useLayoutEffect:ve,useInsertionEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useSyncExternalStore:ve,useId:ve,useHostTransitionStatus:ve,useFormState:ve,useActionState:ve,useOptimistic:ve,useMemoCache:ve,useCacheRefresh:ve};gu.useEffectEvent=ve;var $0={readContext:sn,use:Vh,useCallback:function(s,a){return gn().memoizedState=[s,a===void 0?null:a],s},useContext:sn,useEffect:N0,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,Nh(4194308,4,L0.bind(null,a,s),l)},useLayoutEffect:function(s,a){return Nh(4194308,4,s,a)},useInsertionEffect:function(s,a){Nh(4,2,s,a)},useMemo:function(s,a){var l=gn();a=a===void 0?null:a;var c=s();if(oa){qn(!0);try{s()}finally{qn(!1)}}return l.memoizedState=[c,a],c},useReducer:function(s,a,l){var c=gn();if(l!==void 0){var m=l(a);if(oa){qn(!0);try{l(a)}finally{qn(!1)}}}else m=a;return c.memoizedState=c.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},c.queue=s,s=s.dispatch=i2.bind(null,Ct,s),[c.memoizedState,s]},useRef:function(s){var a=gn();return s={current:s},a.memoizedState=s},useState:function(s){s=Gg(s);var a=s.queue,l=Q0.bind(null,Ct,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:Qg,useDeferredValue:function(s,a){var l=gn();return Xg(l,s,a)},useTransition:function(){var s=Gg(!1);return s=H0.bind(null,Ct,s.queue,!0,!1),gn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var c=Ct,m=gn();if(Bt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),le===null)throw Error(n(349));(kt&127)!==0||_0(c,a,l)}m.memoizedState=l;var p={value:l,getSnapshot:a};return m.queue=p,N0(v0.bind(null,c,p,s),[s]),c.flags|=2048,Ao(9,{destroy:void 0},b0.bind(null,c,p,l,a),null),l},useId:function(){var s=gn(),a=le.identifierPrefix;if(Bt){var l=Ui,c=Bi;l=(c&~(1<<32-Se(c)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Dh++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=Ww++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:$g,useFormState:C0,useActionState:C0,useOptimistic:function(s){var a=gn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Zg.bind(null,Ct,!0,l),l.dispatch=a,[s,a]},useMemoCache:Fg,useCacheRefresh:function(){return gn().memoizedState=n2.bind(null,Ct)},useEffectEvent:function(s){var a=gn(),l={impl:s};return a.memoizedState=l,function(){if((Xt&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},Jg={readContext:sn,use:Vh,useCallback:U0,useContext:sn,useEffect:Yg,useImperativeHandle:B0,useInsertionEffect:k0,useLayoutEffect:z0,useMemo:j0,useReducer:Oh,useRef:O0,useState:function(){return Oh(us)},useDebugValue:Qg,useDeferredValue:function(s,a){var l=we();return F0(l,re.memoizedState,s,a)},useTransition:function(){var s=Oh(us)[0],a=we().memoizedState;return[typeof s=="boolean"?s:fu(s),a]},useSyncExternalStore:y0,useId:K0,useHostTransitionStatus:$g,useFormState:D0,useActionState:D0,useOptimistic:function(s,a){var l=we();return S0(l,re,s,a)},useMemoCache:Fg,useCacheRefresh:Y0};Jg.useEffectEvent=P0;var Z0={readContext:sn,use:Vh,useCallback:U0,useContext:sn,useEffect:Yg,useImperativeHandle:B0,useInsertionEffect:k0,useLayoutEffect:z0,useMemo:j0,useReducer:qg,useRef:O0,useState:function(){return qg(us)},useDebugValue:Qg,useDeferredValue:function(s,a){var l=we();return re===null?Xg(l,s,a):F0(l,re.memoizedState,s,a)},useTransition:function(){var s=qg(us)[0],a=we().memoizedState;return[typeof s=="boolean"?s:fu(s),a]},useSyncExternalStore:y0,useId:K0,useHostTransitionStatus:$g,useFormState:V0,useActionState:V0,useOptimistic:function(s,a){var l=we();return re!==null?S0(l,re,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Fg,useCacheRefresh:Y0};Z0.useEffectEvent=P0;function tm(s,a,l,c){a=s.memoizedState,l=l(c,a),l=l==null?a:_({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var em={enqueueSetState:function(s,a,l){s=s._reactInternals;var c=Ln(),m=Gs(c);m.payload=a,l!=null&&(m.callback=l),a=Ks(s,m,c),a!==null&&(En(a,s,c),lu(a,s,c))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var c=Ln(),m=Gs(c);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=Ks(s,m,c),a!==null&&(En(a,s,c),lu(a,s,c))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Ln(),c=Gs(l);c.tag=2,a!=null&&(c.callback=a),a=Ks(s,c,l),a!==null&&(En(a,s,l),lu(a,s,l))}};function J0(s,a,l,c,m,p,v){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,p,v):a.prototype&&a.prototype.isPureReactComponent?!tu(l,c)||!tu(m,p):!0}function tb(s,a,l,c){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==s&&em.enqueueReplaceState(a,a.state,null)}function la(s,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(s=s.defaultProps){l===a&&(l=_({},l));for(var m in s)l[m]===void 0&&(l[m]=s[m])}return l}function eb(s){gh(s)}function nb(s){console.error(s)}function ib(s){gh(s)}function zh(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function sb(s,a,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function nm(s,a,l){return l=Gs(l),l.tag=3,l.payload={element:null},l.callback=function(){zh(s,a)},l}function rb(s){return s=Gs(s),s.tag=3,s}function ab(s,a,l,c){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var p=c.value;s.payload=function(){return m(p)},s.callback=function(){sb(a,l,c)}}var v=l.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){sb(a,l,c),typeof m!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})})}function s2(s,a,l,c,m){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&po(a,l,m,!0),l=Nn.current,l!==null){switch(l.tag){case 31:case 13:return ti===null?Xh():l.alternate===null&&Te===0&&(Te=3),l.flags&=-257,l.flags|=65536,l.lanes=m,c===Ah?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),Rm(s,c,m)),!1;case 22:return l.flags|=65536,c===Ah?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),Rm(s,c,m)),!1}throw Error(n(435,l.tag))}return Rm(s,c,m),Xh(),!1}if(Bt)return a=Nn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,c!==Tg&&(s=Error(n(422),{cause:c}),iu(Wn(s,l)))):(c!==Tg&&(a=Error(n(423),{cause:c}),iu(Wn(a,l))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,c=Wn(c,l),m=nm(s.stateNode,c,m),Vg(s,m),Te!==4&&(Te=2)),!1;var p=Error(n(520),{cause:c});if(p=Wn(p,l),Eu===null?Eu=[p]:Eu.push(p),Te!==4&&(Te=2),a===null)return!0;c=Wn(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=m&-m,l.lanes|=s,s=nm(l.stateNode,c,s),Vg(l,s),!1;case 1:if(a=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Zs===null||!Zs.has(p))))return l.flags|=65536,m&=-m,l.lanes|=m,m=rb(m),ab(m,s,l,c),Vg(l,m),!1}l=l.return}while(l!==null);return!1}var im=Error(n(461)),ze=!1;function rn(s,a,l,c){a.child=s===null?c0(a,null,l,c):aa(a,s.child,l,c)}function ob(s,a,l,c,m){l=l.render;var p=a.ref;if("ref"in c){var v={};for(var A in c)A!=="ref"&&(v[A]=c[A])}else v=c;return na(a),c=Lg(s,a,l,v,p,m),A=Bg(),s!==null&&!ze?(Ug(s,a,m),cs(s,a,m)):(Bt&&A&&bg(a),a.flags|=1,rn(s,a,c,m),a.child)}function lb(s,a,l,c,m){if(s===null){var p=l.type;return typeof p=="function"&&!pg(p)&&p.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=p,ub(s,a,p,c,m)):(s=_h(l.type,null,c,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(p=s.child,!hm(s,m)){var v=p.memoizedProps;if(l=l.compare,l=l!==null?l:tu,l(v,c)&&s.ref===a.ref)return cs(s,a,m)}return a.flags|=1,s=ss(p,c),s.ref=a.ref,s.return=a,a.child=s}function ub(s,a,l,c,m){if(s!==null){var p=s.memoizedProps;if(tu(p,c)&&s.ref===a.ref)if(ze=!1,a.pendingProps=c=p,hm(s,m))(s.flags&131072)!==0&&(ze=!0);else return a.lanes=s.lanes,cs(s,a,m)}return sm(s,a,l,c,m)}function cb(s,a,l,c){var m=c.children,p=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|l:l,s!==null){for(c=a.child=s.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~p}else c=0,a.child=null;return hb(s,a,p,l,c)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Eh(a,p!==null?p.cachePool:null),p!==null?d0(a,p):Ng(),g0(a);else return c=a.lanes=536870912,hb(s,a,p!==null?p.baseLanes|l:l,l,c)}else p!==null?(Eh(a,p.cachePool),d0(a,p),Qs(),a.memoizedState=null):(s!==null&&Eh(a,null),Ng(),Qs());return rn(s,a,m,l),a.child}function mu(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function hb(s,a,l,c,m){var p=Ig();return p=p===null?null:{parent:Pe._currentValue,pool:p},a.memoizedState={baseLanes:l,cachePool:p},s!==null&&Eh(a,null),Ng(),g0(a),s!==null&&po(s,a,c,!0),a.childLanes=m,null}function Lh(s,a){return a=Uh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function fb(s,a,l){return aa(a,s.child,null,l),s=Lh(a,a.pendingProps),s.flags|=2,Pn(a),a.memoizedState=null,s}function r2(s,a,l){var c=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Bt){if(c.mode==="hidden")return s=Lh(a,c),a.lanes=536870912,mu(null,s);if(kg(a),(s=he)?(s=Av(s,Jn),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Us!==null?{id:Bi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},l=X_(s),l.return=a,a.child=l,nn=a,he=null)):s=null,s===null)throw Fs(a);return a.lanes=536870912,null}return Lh(a,c)}var p=s.memoizedState;if(p!==null){var v=p.dehydrated;if(kg(a),m)if(a.flags&256)a.flags&=-257,a=fb(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(n(558));else if(ze||po(s,a,l,!1),m=(l&s.childLanes)!==0,ze||m){if(c=le,c!==null&&(v=kl(c,l),v!==0&&v!==p.retryLane))throw p.retryLane=v,Zr(s,v),En(c,s,v),im;Xh(),a=fb(s,a,l)}else s=p.treeContext,he=ei(v.nextSibling),nn=a,Bt=!0,js=null,Jn=!1,s!==null&&Z_(a,s),a=Lh(a,c),a.flags|=4096;return a}return s=ss(s.child,{mode:c.mode,children:c.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Bh(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function sm(s,a,l,c,m){return na(a),l=Lg(s,a,l,c,void 0,m),c=Bg(),s!==null&&!ze?(Ug(s,a,m),cs(s,a,m)):(Bt&&c&&bg(a),a.flags|=1,rn(s,a,l,m),a.child)}function db(s,a,l,c,m,p){return na(a),a.updateQueue=null,l=p0(a,c,l,m),m0(s),c=Bg(),s!==null&&!ze?(Ug(s,a,p),cs(s,a,p)):(Bt&&c&&bg(a),a.flags|=1,rn(s,a,l,p),a.child)}function gb(s,a,l,c,m){if(na(a),a.stateNode===null){var p=ho,v=l.contextType;typeof v=="object"&&v!==null&&(p=sn(v)),p=new l(c,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=em,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=c,p.state=a.memoizedState,p.refs={},Dg(a),v=l.contextType,p.context=typeof v=="object"&&v!==null?sn(v):ho,p.state=a.memoizedState,v=l.getDerivedStateFromProps,typeof v=="function"&&(tm(a,l,v,c),p.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&em.enqueueReplaceState(p,p.state,null),cu(a,c,p,m),uu(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(s===null){p=a.stateNode;var A=a.memoizedProps,N=la(l,A);p.props=N;var q=p.context,J=l.contextType;v=ho,typeof J=="object"&&J!==null&&(v=sn(J));var st=l.getDerivedStateFromProps;J=typeof st=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,J||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||q!==v)&&tb(a,p,c,v),qs=!1;var K=a.memoizedState;p.state=K,cu(a,c,p,m),uu(),q=a.memoizedState,A||K!==q||qs?(typeof st=="function"&&(tm(a,l,st,c),q=a.memoizedState),(N=qs||J0(a,l,N,c,K,q,v))?(J||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=q),p.props=c,p.state=q,p.context=v,c=N):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{p=a.stateNode,Mg(s,a),v=a.memoizedProps,J=la(l,v),p.props=J,st=a.pendingProps,K=p.context,q=l.contextType,N=ho,typeof q=="object"&&q!==null&&(N=sn(q)),A=l.getDerivedStateFromProps,(q=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==st||K!==N)&&tb(a,p,c,N),qs=!1,K=a.memoizedState,p.state=K,cu(a,c,p,m),uu();var W=a.memoizedState;v!==st||K!==W||qs||s!==null&&s.dependencies!==null&&vh(s.dependencies)?(typeof A=="function"&&(tm(a,l,A,c),W=a.memoizedState),(J=qs||J0(a,l,J,c,K,W,N)||s!==null&&s.dependencies!==null&&vh(s.dependencies))?(q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,W,N),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,W,N)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===s.memoizedProps&&K===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===s.memoizedProps&&K===s.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=W),p.props=c,p.state=W,p.context=N,c=J):(typeof p.componentDidUpdate!="function"||v===s.memoizedProps&&K===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===s.memoizedProps&&K===s.memoizedState||(a.flags|=1024),c=!1)}return p=c,Bh(s,a),c=(a.flags&128)!==0,p||c?(p=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,s!==null&&c?(a.child=aa(a,s.child,null,m),a.child=aa(a,null,l,m)):rn(s,a,l,m),a.memoizedState=p.state,s=a.child):s=cs(s,a,m),s}function mb(s,a,l,c){return ta(),a.flags|=256,rn(s,a,l,c),a.child}var rm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function am(s){return{baseLanes:s,cachePool:s0()}}function om(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=zn),s}function pb(s,a,l){var c=a.pendingProps,m=!1,p=(a.flags&128)!==0,v;if((v=p)||(v=s!==null&&s.memoizedState===null?!1:(xe.current&2)!==0),v&&(m=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,s===null){if(Bt){if(m?Ys(a):Qs(),(s=he)?(s=Av(s,Jn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Us!==null?{id:Bi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},l=X_(s),l.return=a,a.child=l,nn=a,he=null)):s=null,s===null)throw Fs(a);return Hm(s)?a.lanes=32:a.lanes=536870912,null}var A=c.children;return c=c.fallback,m?(Qs(),m=a.mode,A=Uh({mode:"hidden",children:A},m),c=Jr(c,m,l,null),A.return=a,c.return=a,A.sibling=c,a.child=A,c=a.child,c.memoizedState=am(l),c.childLanes=om(s,v,l),a.memoizedState=rm,mu(null,c)):(Ys(a),lm(a,A))}var N=s.memoizedState;if(N!==null&&(A=N.dehydrated,A!==null)){if(p)a.flags&256?(Ys(a),a.flags&=-257,a=um(s,a,l)):a.memoizedState!==null?(Qs(),a.child=s.child,a.flags|=128,a=null):(Qs(),A=c.fallback,m=a.mode,c=Uh({mode:"visible",children:c.children},m),A=Jr(A,m,l,null),A.flags|=2,c.return=a,A.return=a,c.sibling=A,a.child=c,aa(a,s.child,null,l),c=a.child,c.memoizedState=am(l),c.childLanes=om(s,v,l),a.memoizedState=rm,a=mu(null,c));else if(Ys(a),Hm(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var q=v.dgst;v=q,c=Error(n(419)),c.stack="",c.digest=v,iu({value:c,source:null,stack:null}),a=um(s,a,l)}else if(ze||po(s,a,l,!1),v=(l&s.childLanes)!==0,ze||v){if(v=le,v!==null&&(c=kl(v,l),c!==0&&c!==N.retryLane))throw N.retryLane=c,Zr(s,c),En(v,s,c),im;Fm(A)||Xh(),a=um(s,a,l)}else Fm(A)?(a.flags|=192,a.child=s.child,a=null):(s=N.treeContext,he=ei(A.nextSibling),nn=a,Bt=!0,js=null,Jn=!1,s!==null&&Z_(a,s),a=lm(a,c.children),a.flags|=4096);return a}return m?(Qs(),A=c.fallback,m=a.mode,N=s.child,q=N.sibling,c=ss(N,{mode:"hidden",children:c.children}),c.subtreeFlags=N.subtreeFlags&65011712,q!==null?A=ss(q,A):(A=Jr(A,m,l,null),A.flags|=2),A.return=a,c.return=a,c.sibling=A,a.child=c,mu(null,c),c=a.child,A=s.child.memoizedState,A===null?A=am(l):(m=A.cachePool,m!==null?(N=Pe._currentValue,m=m.parent!==N?{parent:N,pool:N}:m):m=s0(),A={baseLanes:A.baseLanes|l,cachePool:m}),c.memoizedState=A,c.childLanes=om(s,v,l),a.memoizedState=rm,mu(s.child,c)):(Ys(a),l=s.child,s=l.sibling,l=ss(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,s!==null&&(v=a.deletions,v===null?(a.deletions=[s],a.flags|=16):v.push(s)),a.child=l,a.memoizedState=null,l)}function lm(s,a){return a=Uh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Uh(s,a){return s=On(22,s,null,a),s.lanes=0,s}function um(s,a,l){return aa(a,s.child,null,l),s=lm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function yb(s,a,l){s.lanes|=a;var c=s.alternate;c!==null&&(c.lanes|=a),Ag(s.return,a,l)}function cm(s,a,l,c,m,p){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:m,treeForkCount:p}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=l,v.tailMode=m,v.treeForkCount=p)}function _b(s,a,l){var c=a.pendingProps,m=c.revealOrder,p=c.tail;c=c.children;var v=xe.current,A=(v&2)!==0;if(A?(v=v&1|2,a.flags|=128):v&=1,ct(xe,v),rn(s,a,c,l),c=Bt?nu:0,!A&&s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&yb(s,l,a);else if(s.tag===19)yb(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(m){case"forwards":for(l=a.child,m=null;l!==null;)s=l.alternate,s!==null&&Ih(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),cm(a,!1,m,l,p,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&Ih(s)===null){a.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}cm(a,!0,l,null,p,c);break;case"together":cm(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function cs(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),$s|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(po(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,l=ss(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=ss(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function hm(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&vh(s)))}function a2(s,a,l){switch(a.tag){case 3:Fe(a,a.stateNode.containerInfo),Hs(a,Pe,s.memoizedState.cache),ta();break;case 27:case 5:Nr(a);break;case 4:Fe(a,a.stateNode.containerInfo);break;case 10:Hs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,kg(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Ys(a),a.flags|=128,null):(l&a.child.childLanes)!==0?pb(s,a,l):(Ys(a),s=cs(s,a,l),s!==null?s.sibling:null);Ys(a);break;case 19:var m=(s.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(po(s,a,l,!1),c=(l&a.childLanes)!==0),m){if(c)return _b(s,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ct(xe,xe.current),c)break;return null;case 22:return a.lanes=0,cb(s,a,l,a.pendingProps);case 24:Hs(a,Pe,s.memoizedState.cache)}return cs(s,a,l)}function bb(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)ze=!0;else{if(!hm(s,l)&&(a.flags&128)===0)return ze=!1,a2(s,a,l);ze=(s.flags&131072)!==0}else ze=!1,Bt&&(a.flags&1048576)!==0&&$_(a,nu,a.index);switch(a.lanes=0,a.tag){case 16:t:{var c=a.pendingProps;if(s=sa(a.elementType),a.type=s,typeof s=="function")pg(s)?(c=la(s,c),a.tag=1,a=gb(null,a,s,c,l)):(a.tag=0,a=sm(null,a,s,c,l));else{if(s!=null){var m=s.$$typeof;if(m===Z){a.tag=11,a=ob(null,a,s,c,l);break t}else if(m===R){a.tag=14,a=lb(null,a,s,c,l);break t}}throw a=Vt(s)||s,Error(n(306,a,""))}}return a;case 0:return sm(s,a,a.type,a.pendingProps,l);case 1:return c=a.type,m=la(c,a.pendingProps),gb(s,a,c,m,l);case 3:t:{if(Fe(a,a.stateNode.containerInfo),s===null)throw Error(n(387));c=a.pendingProps;var p=a.memoizedState;m=p.element,Mg(s,a),cu(a,c,null,l);var v=a.memoizedState;if(c=v.cache,Hs(a,Pe,c),c!==p.cache&&xg(a,[Pe],l,!0),uu(),c=v.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=mb(s,a,c,l);break t}else if(c!==m){m=Wn(Error(n(424)),a),iu(m),a=mb(s,a,c,l);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(he=ei(s.firstChild),nn=a,Bt=!0,js=null,Jn=!0,l=c0(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ta(),c===m){a=cs(s,a,l);break t}rn(s,a,c,l)}a=a.child}return a;case 26:return Bh(s,a),s===null?(l=Dv(a.type,null,a.pendingProps,null))?a.memoizedState=l:Bt||(l=a.type,s=a.pendingProps,c=nf(At.current).createElement(l),c[Ve]=a,c[Qe]=s,an(c,l,s),Oe(c),a.stateNode=c):a.memoizedState=Dv(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Nr(a),s===null&&Bt&&(c=a.stateNode=Rv(a.type,a.pendingProps,At.current),nn=a,Jn=!0,m=he,nr(a.type)?(qm=m,he=ei(c.firstChild)):he=m),rn(s,a,a.pendingProps.children,l),Bh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Bt&&((m=c=he)&&(c=k2(c,a.type,a.pendingProps,Jn),c!==null?(a.stateNode=c,nn=a,he=ei(c.firstChild),Jn=!1,m=!0):m=!1),m||Fs(a)),Nr(a),m=a.type,p=a.pendingProps,v=s!==null?s.memoizedProps:null,c=p.children,Bm(m,p)?c=null:v!==null&&Bm(m,v)&&(a.flags|=32),a.memoizedState!==null&&(m=Lg(s,a,$w,null,null,l),Du._currentValue=m),Bh(s,a),rn(s,a,c,l),a.child;case 6:return s===null&&Bt&&((s=l=he)&&(l=z2(l,a.pendingProps,Jn),l!==null?(a.stateNode=l,nn=a,he=null,s=!0):s=!1),s||Fs(a)),null;case 13:return pb(s,a,l);case 4:return Fe(a,a.stateNode.containerInfo),c=a.pendingProps,s===null?a.child=aa(a,null,c,l):rn(s,a,c,l),a.child;case 11:return ob(s,a,a.type,a.pendingProps,l);case 7:return rn(s,a,a.pendingProps,l),a.child;case 8:return rn(s,a,a.pendingProps.children,l),a.child;case 12:return rn(s,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,Hs(a,a.type,c.value),rn(s,a,c.children,l),a.child;case 9:return m=a.type._context,c=a.pendingProps.children,na(a),m=sn(m),c=c(m),a.flags|=1,rn(s,a,c,l),a.child;case 14:return lb(s,a,a.type,a.pendingProps,l);case 15:return ub(s,a,a.type,a.pendingProps,l);case 19:return _b(s,a,l);case 31:return r2(s,a,l);case 22:return cb(s,a,l,a.pendingProps);case 24:return na(a),c=sn(Pe),s===null?(m=Ig(),m===null&&(m=le,p=wg(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=l),m=p),a.memoizedState={parent:c,cache:m},Dg(a),Hs(a,Pe,m)):((s.lanes&l)!==0&&(Mg(s,a),cu(a,null,null,l),uu()),m=s.memoizedState,p=a.memoizedState,m.parent!==c?(m={parent:c,cache:c},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Hs(a,Pe,c)):(c=p.cache,Hs(a,Pe,c),c!==m.cache&&xg(a,[Pe],l,!0))),rn(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function hs(s){s.flags|=4}function fm(s,a,l,c,m){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(m&335544128)===m)if(s.stateNode.complete)s.flags|=8192;else if(Kb())s.flags|=8192;else throw ra=Ah,Cg}else s.flags&=-16777217}function vb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Pv(a))if(Kb())s.flags|=8192;else throw ra=Ah,Cg}function jh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Yc():536870912,s.lanes|=a,Io|=a)}function pu(s,a){if(!Bt)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function fe(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(a)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=c,s.childLanes=l,a}function o2(s,a,l){var c=a.pendingProps;switch(vg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fe(a),null;case 1:return fe(a),null;case 3:return l=a.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),os(Pe),me(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(mo(a)?hs(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Eg())),fe(a),null;case 26:var m=a.type,p=a.memoizedState;return s===null?(hs(a),p!==null?(fe(a),vb(a,p)):(fe(a),fm(a,m,null,c,l))):p?p!==s.memoizedState?(hs(a),fe(a),vb(a,p)):(fe(a),a.flags&=-16777217):(s=s.memoizedProps,s!==c&&hs(a),fe(a),fm(a,m,s,c,l)),null;case 27:if(Ka(a),l=At.current,m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==c&&hs(a);else{if(!c){if(a.stateNode===null)throw Error(n(166));return fe(a),null}s=ft.current,mo(a)?J_(a):(s=Rv(m,c,l),a.stateNode=s,hs(a))}return fe(a),null;case 5:if(Ka(a),m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==c&&hs(a);else{if(!c){if(a.stateNode===null)throw Error(n(166));return fe(a),null}if(p=ft.current,mo(a))J_(a);else{var v=nf(At.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?v.createElement(m,{is:c.is}):v.createElement(m)}}p[Ve]=a,p[Qe]=c;t:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break t;for(;v.sibling===null;){if(v.return===null||v.return===a)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=p;t:switch(an(p,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&hs(a)}}return fe(a),fm(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==c&&hs(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(n(166));if(s=At.current,mo(a)){if(s=a.stateNode,l=a.memoizedProps,c=null,m=nn,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}s[Ve]=a,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||pv(s.nodeValue,l)),s||Fs(a,!0)}else s=nf(s).createTextNode(c),s[Ve]=a,a.stateNode=s}return fe(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(c=mo(a),l!==null){if(s===null){if(!c)throw Error(n(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[Ve]=a}else ta(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;fe(a),s=!1}else l=Eg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(Pn(a),a):(Pn(a),null);if((a.flags&128)!==0)throw Error(n(558))}return fe(a),null;case 13:if(c=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=mo(a),c!==null&&c.dehydrated!==null){if(s===null){if(!m)throw Error(n(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[Ve]=a}else ta(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;fe(a),m=!1}else m=Eg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(Pn(a),a):(Pn(a),null)}return Pn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=a.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==m&&(c.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),jh(a,a.updateQueue),fe(a),null);case 4:return me(),s===null&&Nm(a.stateNode.containerInfo),fe(a),null;case 10:return os(a.type),fe(a),null;case 19:if(et(xe),c=a.memoizedState,c===null)return fe(a),null;if(m=(a.flags&128)!==0,p=c.rendering,p===null)if(m)pu(c,!1);else{if(Te!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(p=Ih(s),p!==null){for(a.flags|=128,pu(c,!1),s=p.updateQueue,a.updateQueue=s,jh(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)Q_(l,s),l=l.sibling;return ct(xe,xe.current&1|2),Bt&&rs(a,c.treeForkCount),a.child}s=s.sibling}c.tail!==null&&fn()>Kh&&(a.flags|=128,m=!0,pu(c,!1),a.lanes=4194304)}else{if(!m)if(s=Ih(p),s!==null){if(a.flags|=128,m=!0,s=s.updateQueue,a.updateQueue=s,jh(a,s),pu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!Bt)return fe(a),null}else 2*fn()-c.renderingStartTime>Kh&&l!==536870912&&(a.flags|=128,m=!0,pu(c,!1),a.lanes=4194304);c.isBackwards?(p.sibling=a.child,a.child=p):(s=c.last,s!==null?s.sibling=p:a.child=p,c.last=p)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=fn(),s.sibling=null,l=xe.current,ct(xe,m?l&1|2:l&1),Bt&&rs(a,c.treeForkCount),s):(fe(a),null);case 22:case 23:return Pn(a),Pg(),c=a.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(fe(a),a.subtreeFlags&6&&(a.flags|=8192)):fe(a),l=a.updateQueue,l!==null&&jh(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),s!==null&&et(ia),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),os(Pe),fe(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function l2(s,a){switch(vg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return os(Pe),me(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Ka(a),null;case 31:if(a.memoizedState!==null){if(Pn(a),a.alternate===null)throw Error(n(340));ta()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Pn(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));ta()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return et(xe),null;case 4:return me(),null;case 10:return os(a.type),null;case 22:case 23:return Pn(a),Pg(),s!==null&&et(ia),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return os(Pe),null;case 25:return null;default:return null}}function Tb(s,a){switch(vg(a),a.tag){case 3:os(Pe),me();break;case 26:case 27:case 5:Ka(a);break;case 4:me();break;case 31:a.memoizedState!==null&&Pn(a);break;case 13:Pn(a);break;case 19:et(xe);break;case 10:os(a.type);break;case 22:case 23:Pn(a),Pg(),s!==null&&et(ia);break;case 24:os(Pe)}}function yu(s,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var m=c.next;l=m;do{if((l.tag&s)===s){c=void 0;var p=l.create,v=l.inst;c=p(),v.destroy=c}l=l.next}while(l!==m)}}catch(A){te(a,a.return,A)}}function Xs(s,a,l){try{var c=a.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var p=m.next;c=p;do{if((c.tag&s)===s){var v=c.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,m=a;var N=l,q=A;try{q()}catch(J){te(m,N,J)}}}c=c.next}while(c!==p)}}catch(J){te(a,a.return,J)}}function Eb(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{f0(a,l)}catch(c){te(s,s.return,c)}}}function Sb(s,a,l){l.props=la(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){te(s,a,c)}}function _u(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(m){te(s,a,m)}}function ji(s,a){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(m){te(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){te(s,a,m)}else l.current=null}function Ab(s){var a=s.type,l=s.memoizedProps,c=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break t;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(m){te(s,s.return,m)}}function dm(s,a,l){try{var c=s.stateNode;D2(c,s.type,l,a),c[Qe]=a}catch(m){te(s,s.return,m)}}function xb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&nr(s.type)||s.tag===4}function gm(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||xb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&nr(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function mm(s,a,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=hi));else if(c!==4&&(c===27&&nr(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(mm(s,a,l),s=s.sibling;s!==null;)mm(s,a,l),s=s.sibling}function Fh(s,a,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(c!==4&&(c===27&&nr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Fh(s,a,l),s=s.sibling;s!==null;)Fh(s,a,l),s=s.sibling}function wb(s){var a=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);an(a,c,l),a[Ve]=s,a[Qe]=l}catch(p){te(s,s.return,p)}}var fs=!1,Le=!1,pm=!1,Rb=typeof WeakSet=="function"?WeakSet:Set,We=null;function u2(s,a){if(s=s.containerInfo,zm=cf,s=B_(s),ug(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var m=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break t}var v=0,A=-1,N=-1,q=0,J=0,st=s,K=null;e:for(;;){for(var W;st!==l||m!==0&&st.nodeType!==3||(A=v+m),st!==p||c!==0&&st.nodeType!==3||(N=v+c),st.nodeType===3&&(v+=st.nodeValue.length),(W=st.firstChild)!==null;)K=st,st=W;for(;;){if(st===s)break e;if(K===l&&++q===m&&(A=v),K===p&&++J===c&&(N=v),(W=st.nextSibling)!==null)break;st=K,K=st.parentNode}st=W}l=A===-1||N===-1?null:{start:A,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(Lm={focusedElem:s,selectionRange:l},cf=!1,We=a;We!==null;)if(a=We,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,We=s;else for(;We!==null;){switch(a=We,p=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)m=s[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,l=a,m=p.memoizedProps,p=p.memoizedState,c=l.stateNode;try{var mt=la(l.type,m);s=c.getSnapshotBeforeUpdate(mt,p),c.__reactInternalSnapshotBeforeUpdate=s}catch(Et){te(l,l.return,Et)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)jm(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":jm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=a.sibling,s!==null){s.return=a.return,We=s;break}We=a.return}}function Ib(s,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:gs(s,l),c&4&&yu(5,l);break;case 1:if(gs(s,l),c&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(v){te(l,l.return,v)}else{var m=la(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(v){te(l,l.return,v)}}c&64&&Eb(l),c&512&&_u(l,l.return);break;case 3:if(gs(s,l),c&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{f0(s,a)}catch(v){te(l,l.return,v)}}break;case 27:a===null&&c&4&&wb(l);case 26:case 5:gs(s,l),a===null&&c&4&&Ab(l),c&512&&_u(l,l.return);break;case 12:gs(s,l);break;case 31:gs(s,l),c&4&&Mb(s,l);break;case 13:gs(s,l),c&4&&Vb(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=_2.bind(null,l),L2(s,l))));break;case 22:if(c=l.memoizedState!==null||fs,!c){a=a!==null&&a.memoizedState!==null||Le,m=fs;var p=Le;fs=c,(Le=a)&&!p?ms(s,l,(l.subtreeFlags&8772)!==0):gs(s,l),fs=m,Le=p}break;case 30:break;default:gs(s,l)}}function Cb(s){var a=s.alternate;a!==null&&(s.alternate=null,Cb(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&$a(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ye=null,_n=!1;function ds(s,a,l){for(l=l.child;l!==null;)Db(s,a,l),l=l.sibling}function Db(s,a,l){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(oi,l)}catch{}switch(l.tag){case 26:Le||ji(l,a),ds(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Le||ji(l,a);var c=ye,m=_n;nr(l.type)&&(ye=l.stateNode,_n=!1),ds(s,a,l),Ru(l.stateNode),ye=c,_n=m;break;case 5:Le||ji(l,a);case 6:if(c=ye,m=_n,ye=null,ds(s,a,l),ye=c,_n=m,ye!==null)if(_n)try{(ye.nodeType===9?ye.body:ye.nodeName==="HTML"?ye.ownerDocument.body:ye).removeChild(l.stateNode)}catch(p){te(l,a,p)}else try{ye.removeChild(l.stateNode)}catch(p){te(l,a,p)}break;case 18:ye!==null&&(_n?(s=ye,Ev(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),ko(s)):Ev(ye,l.stateNode));break;case 4:c=ye,m=_n,ye=l.stateNode.containerInfo,_n=!0,ds(s,a,l),ye=c,_n=m;break;case 0:case 11:case 14:case 15:Xs(2,l,a),Le||Xs(4,l,a),ds(s,a,l);break;case 1:Le||(ji(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Sb(l,a,c)),ds(s,a,l);break;case 21:ds(s,a,l);break;case 22:Le=(c=Le)||l.memoizedState!==null,ds(s,a,l),Le=c;break;default:ds(s,a,l)}}function Mb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ko(s)}catch(l){te(a,a.return,l)}}}function Vb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ko(s)}catch(l){te(a,a.return,l)}}function c2(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Rb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Rb),a;default:throw Error(n(435,s.tag))}}function Hh(s,a){var l=c2(s);a.forEach(function(c){if(!l.has(c)){l.add(c);var m=b2.bind(null,s,c);c.then(m,m)}})}function bn(s,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var m=l[c],p=s,v=a,A=v;t:for(;A!==null;){switch(A.tag){case 27:if(nr(A.type)){ye=A.stateNode,_n=!1;break t}break;case 5:ye=A.stateNode,_n=!1;break t;case 3:case 4:ye=A.stateNode.containerInfo,_n=!0;break t}A=A.return}if(ye===null)throw Error(n(160));Db(p,v,m),ye=null,_n=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Ob(a,s),a=a.sibling}var yi=null;function Ob(s,a){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:bn(a,s),vn(s),c&4&&(Xs(3,s,s.return),yu(3,s),Xs(5,s,s.return));break;case 1:bn(a,s),vn(s),c&512&&(Le||l===null||ji(l,l.return)),c&64&&fs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var m=yi;if(bn(a,s),vn(s),c&512&&(Le||l===null||ji(l,l.return)),c&4){var p=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){t:{c=s.type,l=s.memoizedProps,m=m.ownerDocument||m;e:switch(c){case"title":p=m.getElementsByTagName("title")[0],(!p||p[Ri]||p[Ve]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(c),m.head.insertBefore(p,m.querySelector("head > title"))),an(p,c,l),p[Ve]=s,Oe(p),c=p;break t;case"link":var v=Ov("link","href",m).get(c+(l.href||""));if(v){for(var A=0;A<v.length;A++)if(p=v[A],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){v.splice(A,1);break e}}p=m.createElement(c),an(p,c,l),m.head.appendChild(p);break;case"meta":if(v=Ov("meta","content",m).get(c+(l.content||""))){for(A=0;A<v.length;A++)if(p=v[A],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){v.splice(A,1);break e}}p=m.createElement(c),an(p,c,l),m.head.appendChild(p);break;default:throw Error(n(468,c))}p[Ve]=s,Oe(p),c=p}s.stateNode=c}else Nv(m,s.type,s.stateNode);else s.stateNode=Vv(m,c,s.memoizedProps);else p!==c?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,c===null?Nv(m,s.type,s.stateNode):Vv(m,c,s.memoizedProps)):c===null&&s.stateNode!==null&&dm(s,s.memoizedProps,l.memoizedProps)}break;case 27:bn(a,s),vn(s),c&512&&(Le||l===null||ji(l,l.return)),l!==null&&c&4&&dm(s,s.memoizedProps,l.memoizedProps);break;case 5:if(bn(a,s),vn(s),c&512&&(Le||l===null||ji(l,l.return)),s.flags&32){m=s.stateNode;try{yn(m,"")}catch(mt){te(s,s.return,mt)}}c&4&&s.stateNode!=null&&(m=s.memoizedProps,dm(s,m,l!==null?l.memoizedProps:m)),c&1024&&(pm=!0);break;case 6:if(bn(a,s),vn(s),c&4){if(s.stateNode===null)throw Error(n(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(mt){te(s,s.return,mt)}}break;case 3:if(af=null,m=yi,yi=sf(a.containerInfo),bn(a,s),yi=m,vn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{ko(a.containerInfo)}catch(mt){te(s,s.return,mt)}pm&&(pm=!1,Nb(s));break;case 4:c=yi,yi=sf(s.stateNode.containerInfo),bn(a,s),vn(s),yi=c;break;case 12:bn(a,s),vn(s);break;case 31:bn(a,s),vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Hh(s,c)));break;case 13:bn(a,s),vn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Gh=fn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Hh(s,c)));break;case 22:m=s.memoizedState!==null;var N=l!==null&&l.memoizedState!==null,q=fs,J=Le;if(fs=q||m,Le=J||N,bn(a,s),Le=J,fs=q,vn(s),c&8192)t:for(a=s.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(l===null||N||fs||Le||ua(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){N=l=a;try{if(p=N.stateNode,m)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=N.stateNode;var st=N.memoizedProps.style,K=st!=null&&st.hasOwnProperty("display")?st.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(mt){te(N,N.return,mt)}}}else if(a.tag===6){if(l===null){N=a;try{N.stateNode.nodeValue=m?"":N.memoizedProps}catch(mt){te(N,N.return,mt)}}}else if(a.tag===18){if(l===null){N=a;try{var W=N.stateNode;m?Sv(W,!0):Sv(N.stateNode,!1)}catch(mt){te(N,N.return,mt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Hh(s,l))));break;case 19:bn(a,s),vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Hh(s,c)));break;case 30:break;case 21:break;default:bn(a,s),vn(s)}}function vn(s){var a=s.flags;if(a&2){try{for(var l,c=s.return;c!==null;){if(xb(c)){l=c;break}c=c.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var m=l.stateNode,p=gm(s);Fh(s,p,m);break;case 5:var v=l.stateNode;l.flags&32&&(yn(v,""),l.flags&=-33);var A=gm(s);Fh(s,A,v);break;case 3:case 4:var N=l.stateNode.containerInfo,q=gm(s);mm(s,q,N);break;default:throw Error(n(161))}}catch(J){te(s,s.return,J)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Nb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Nb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function gs(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ib(s,a.alternate,a),a=a.sibling}function ua(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Xs(4,a,a.return),ua(a);break;case 1:ji(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Sb(a,a.return,l),ua(a);break;case 27:Ru(a.stateNode);case 26:case 5:ji(a,a.return),ua(a);break;case 22:a.memoizedState===null&&ua(a);break;case 30:ua(a);break;default:ua(a)}s=s.sibling}}function ms(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,m=s,p=a,v=p.flags;switch(p.tag){case 0:case 11:case 15:ms(m,p,l),yu(4,p);break;case 1:if(ms(m,p,l),c=p,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(q){te(c,c.return,q)}if(c=p,m=c.updateQueue,m!==null){var A=c.stateNode;try{var N=m.shared.hiddenCallbacks;if(N!==null)for(m.shared.hiddenCallbacks=null,m=0;m<N.length;m++)h0(N[m],A)}catch(q){te(c,c.return,q)}}l&&v&64&&Eb(p),_u(p,p.return);break;case 27:wb(p);case 26:case 5:ms(m,p,l),l&&c===null&&v&4&&Ab(p),_u(p,p.return);break;case 12:ms(m,p,l);break;case 31:ms(m,p,l),l&&v&4&&Mb(m,p);break;case 13:ms(m,p,l),l&&v&4&&Vb(m,p);break;case 22:p.memoizedState===null&&ms(m,p,l),_u(p,p.return);break;case 30:break;default:ms(m,p,l)}a=a.sibling}}function ym(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&su(l))}function _m(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&su(s))}function _i(s,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Pb(s,a,l,c),a=a.sibling}function Pb(s,a,l,c){var m=a.flags;switch(a.tag){case 0:case 11:case 15:_i(s,a,l,c),m&2048&&yu(9,a);break;case 1:_i(s,a,l,c);break;case 3:_i(s,a,l,c),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&su(s)));break;case 12:if(m&2048){_i(s,a,l,c),s=a.stateNode;try{var p=a.memoizedProps,v=p.id,A=p.onPostCommit;typeof A=="function"&&A(v,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(N){te(a,a.return,N)}}else _i(s,a,l,c);break;case 31:_i(s,a,l,c);break;case 13:_i(s,a,l,c);break;case 23:break;case 22:p=a.stateNode,v=a.alternate,a.memoizedState!==null?p._visibility&2?_i(s,a,l,c):bu(s,a):p._visibility&2?_i(s,a,l,c):(p._visibility|=2,xo(s,a,l,c,(a.subtreeFlags&10256)!==0||!1)),m&2048&&ym(v,a);break;case 24:_i(s,a,l,c),m&2048&&_m(a.alternate,a);break;default:_i(s,a,l,c)}}function xo(s,a,l,c,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=s,v=a,A=l,N=c,q=v.flags;switch(v.tag){case 0:case 11:case 15:xo(p,v,A,N,m),yu(8,v);break;case 23:break;case 22:var J=v.stateNode;v.memoizedState!==null?J._visibility&2?xo(p,v,A,N,m):bu(p,v):(J._visibility|=2,xo(p,v,A,N,m)),m&&q&2048&&ym(v.alternate,v);break;case 24:xo(p,v,A,N,m),m&&q&2048&&_m(v.alternate,v);break;default:xo(p,v,A,N,m)}a=a.sibling}}function bu(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,c=a,m=c.flags;switch(c.tag){case 22:bu(l,c),m&2048&&ym(c.alternate,c);break;case 24:bu(l,c),m&2048&&_m(c.alternate,c);break;default:bu(l,c)}a=a.sibling}}var vu=8192;function wo(s,a,l){if(s.subtreeFlags&vu)for(s=s.child;s!==null;)kb(s,a,l),s=s.sibling}function kb(s,a,l){switch(s.tag){case 26:wo(s,a,l),s.flags&vu&&s.memoizedState!==null&&W2(l,yi,s.memoizedState,s.memoizedProps);break;case 5:wo(s,a,l);break;case 3:case 4:var c=yi;yi=sf(s.stateNode.containerInfo),wo(s,a,l),yi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=vu,vu=16777216,wo(s,a,l),vu=c):wo(s,a,l));break;default:wo(s,a,l)}}function zb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Tu(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];We=c,Bb(c,s)}zb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Lb(s),s=s.sibling}function Lb(s){switch(s.tag){case 0:case 11:case 15:Tu(s),s.flags&2048&&Xs(9,s,s.return);break;case 3:Tu(s);break;case 12:Tu(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,qh(s)):Tu(s);break;default:Tu(s)}}function qh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];We=c,Bb(c,s)}zb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Xs(8,a,a.return),qh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,qh(a));break;default:qh(a)}s=s.sibling}}function Bb(s,a){for(;We!==null;){var l=We;switch(l.tag){case 0:case 11:case 15:Xs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:su(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,We=c;else t:for(l=s;We!==null;){c=We;var m=c.sibling,p=c.return;if(Cb(c),c===l){We=null;break t}if(m!==null){m.return=p,We=m;break t}We=p}}}var h2={getCacheForType:function(s){var a=sn(Pe),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return sn(Pe).controller.signal}},f2=typeof WeakMap=="function"?WeakMap:Map,Xt=0,le=null,Ot=null,kt=0,Jt=0,kn=null,Ws=!1,Ro=!1,bm=!1,ps=0,Te=0,$s=0,ca=0,vm=0,zn=0,Io=0,Eu=null,Tn=null,Tm=!1,Gh=0,Ub=0,Kh=1/0,Yh=null,Zs=null,qe=0,Js=null,Co=null,ys=0,Em=0,Sm=null,jb=null,Su=0,Am=null;function Ln(){return(Xt&2)!==0&&kt!==0?kt&-kt:Y.T!==null?Dm():Qc()}function Fb(){if(zn===0)if((kt&536870912)===0||Bt){var s=zr;zr<<=1,(zr&3932160)===0&&(zr=262144),zn=s}else zn=536870912;return s=Nn.current,s!==null&&(s.flags|=32),zn}function En(s,a,l){(s===le&&(Jt===2||Jt===9)||s.cancelPendingCommit!==null)&&(Do(s,0),tr(s,kt,zn,!1)),Lr(s,l),((Xt&2)===0||s!==le)&&(s===le&&((Xt&2)===0&&(ca|=l),Te===4&&tr(s,kt,zn,!1)),Fi(s))}function Hb(s,a,l){if((Xt&6)!==0)throw Error(n(327));var c=!l&&(a&127)===0&&(a&s.expiredLanes)===0||li(s,a),m=c?m2(s,a):wm(s,a,!0),p=c;do{if(m===0){Ro&&!c&&tr(s,a,0,!1);break}else{if(l=s.current.alternate,p&&!d2(l)){m=wm(s,a,!1),p=!1;continue}if(m===2){if(p=a,s.errorRecoveryDisabledLanes&p)var v=0;else v=s.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;t:{var A=s;m=Eu;var N=A.current.memoizedState.isDehydrated;if(N&&(Do(A,v).flags|=256),v=wm(A,v,!1),v!==2){if(bm&&!N){A.errorRecoveryDisabledLanes|=p,ca|=p,m=4;break t}p=Tn,Tn=m,p!==null&&(Tn===null?Tn=p:Tn.push.apply(Tn,p))}m=v}if(p=!1,m!==2)continue}}if(m===1){Do(s,0),tr(s,a,0,!0);break}t:{switch(c=s,p=m,p){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:tr(c,a,zn,!Ws);break t;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(m=Gh+300-fn(),10<m)){if(tr(c,a,zn,!Ws),Ai(c,0,!0)!==0)break t;ys=a,c.timeoutHandle=vv(qb.bind(null,c,l,Tn,Yh,Tm,a,zn,ca,Io,Ws,p,"Throttled",-0,0),m);break t}qb(c,l,Tn,Yh,Tm,a,zn,ca,Io,Ws,p,null,-0,0)}}break}while(!0);Fi(s)}function qb(s,a,l,c,m,p,v,A,N,q,J,st,K,W){if(s.timeoutHandle=-1,st=a.subtreeFlags,st&8192||(st&16785408)===16785408){st={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},kb(a,p,st);var mt=(p&62914560)===p?Gh-fn():(p&4194048)===p?Ub-fn():0;if(mt=$2(st,mt),mt!==null){ys=p,s.cancelPendingCommit=mt(Zb.bind(null,s,a,p,l,c,m,v,A,N,J,st,null,K,W)),tr(s,p,v,!q);return}}Zb(s,a,p,l,c,m,v,A,N)}function d2(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var m=l[c],p=m.getSnapshot;m=m.value;try{if(!Vn(p(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function tr(s,a,l,c){a&=~vm,a&=~ca,s.suspendedLanes|=a,s.pingedLanes&=~a,c&&(s.warmLanes|=a),c=s.expirationTimes;for(var m=a;0<m;){var p=31-Se(m),v=1<<p;c[p]=-1,m&=~v}l!==0&&Br(s,l,a)}function Qh(){return(Xt&6)===0?(Au(0),!1):!0}function xm(){if(Ot!==null){if(Jt===0)var s=Ot.return;else s=Ot,as=ea=null,jg(s),vo=null,au=0,s=Ot;for(;s!==null;)Tb(s.alternate,s),s=s.return;Ot=null}}function Do(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,O2(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ys=0,xm(),le=s,Ot=l=ss(s.current,null),kt=a,Jt=0,kn=null,Ws=!1,Ro=li(s,a),bm=!1,Io=zn=vm=ca=$s=Te=0,Tn=Eu=null,Tm=!1,(a&8)!==0&&(a|=a&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=a;0<c;){var m=31-Se(c),p=1<<m;a|=s[m],c&=~p}return ps=a,mh(),l}function Gb(s,a){Ct=null,Y.H=gu,a===bo||a===Sh?(a=o0(),Jt=3):a===Cg?(a=o0(),Jt=4):Jt=a===im?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,kn=a,Ot===null&&(Te=1,zh(s,Wn(a,s.current)))}function Kb(){var s=Nn.current;return s===null?!0:(kt&4194048)===kt?ti===null:(kt&62914560)===kt||(kt&536870912)!==0?s===ti:!1}function Yb(){var s=Y.H;return Y.H=gu,s===null?gu:s}function Qb(){var s=Y.A;return Y.A=h2,s}function Xh(){Te=4,Ws||(kt&4194048)!==kt&&Nn.current!==null||(Ro=!0),($s&134217727)===0&&(ca&134217727)===0||le===null||tr(le,kt,zn,!1)}function wm(s,a,l){var c=Xt;Xt|=2;var m=Yb(),p=Qb();(le!==s||kt!==a)&&(Yh=null,Do(s,a)),a=!1;var v=Te;t:do try{if(Jt!==0&&Ot!==null){var A=Ot,N=kn;switch(Jt){case 8:xm(),v=6;break t;case 3:case 2:case 9:case 6:Nn.current===null&&(a=!0);var q=Jt;if(Jt=0,kn=null,Mo(s,A,N,q),l&&Ro){v=0;break t}break;default:q=Jt,Jt=0,kn=null,Mo(s,A,N,q)}}g2(),v=Te;break}catch(J){Gb(s,J)}while(!0);return a&&s.shellSuspendCounter++,as=ea=null,Xt=c,Y.H=m,Y.A=p,Ot===null&&(le=null,kt=0,mh()),v}function g2(){for(;Ot!==null;)Xb(Ot)}function m2(s,a){var l=Xt;Xt|=2;var c=Yb(),m=Qb();le!==s||kt!==a?(Yh=null,Kh=fn()+500,Do(s,a)):Ro=li(s,a);t:do try{if(Jt!==0&&Ot!==null){a=Ot;var p=kn;e:switch(Jt){case 1:Jt=0,kn=null,Mo(s,a,p,1);break;case 2:case 9:if(r0(p)){Jt=0,kn=null,Wb(a);break}a=function(){Jt!==2&&Jt!==9||le!==s||(Jt=7),Fi(s)},p.then(a,a);break t;case 3:Jt=7;break t;case 4:Jt=5;break t;case 7:r0(p)?(Jt=0,kn=null,Wb(a)):(Jt=0,kn=null,Mo(s,a,p,7));break;case 5:var v=null;switch(Ot.tag){case 26:v=Ot.memoizedState;case 5:case 27:var A=Ot;if(v?Pv(v):A.stateNode.complete){Jt=0,kn=null;var N=A.sibling;if(N!==null)Ot=N;else{var q=A.return;q!==null?(Ot=q,Wh(q)):Ot=null}break e}}Jt=0,kn=null,Mo(s,a,p,5);break;case 6:Jt=0,kn=null,Mo(s,a,p,6);break;case 8:xm(),Te=6;break t;default:throw Error(n(462))}}p2();break}catch(J){Gb(s,J)}while(!0);return as=ea=null,Y.H=c,Y.A=m,Xt=l,Ot!==null?0:(le=null,kt=0,mh(),Te)}function p2(){for(;Ot!==null&&!ng();)Xb(Ot)}function Xb(s){var a=bb(s.alternate,s,ps);s.memoizedProps=s.pendingProps,a===null?Wh(s):Ot=a}function Wb(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=db(l,a,a.pendingProps,a.type,void 0,kt);break;case 11:a=db(l,a,a.pendingProps,a.type.render,a.ref,kt);break;case 5:jg(a);default:Tb(l,a),a=Ot=Q_(a,ps),a=bb(l,a,ps)}s.memoizedProps=s.pendingProps,a===null?Wh(s):Ot=a}function Mo(s,a,l,c){as=ea=null,jg(a),vo=null,au=0;var m=a.return;try{if(s2(s,m,a,l,kt)){Te=1,zh(s,Wn(l,s.current)),Ot=null;return}}catch(p){if(m!==null)throw Ot=m,p;Te=1,zh(s,Wn(l,s.current)),Ot=null;return}a.flags&32768?(Bt||c===1?s=!0:Ro||(kt&536870912)!==0?s=!1:(Ws=s=!0,(c===2||c===9||c===3||c===6)&&(c=Nn.current,c!==null&&c.tag===13&&(c.flags|=16384))),$b(a,s)):Wh(a)}function Wh(s){var a=s;do{if((a.flags&32768)!==0){$b(a,Ws);return}s=a.return;var l=o2(a.alternate,a,ps);if(l!==null){Ot=l;return}if(a=a.sibling,a!==null){Ot=a;return}Ot=a=s}while(a!==null);Te===0&&(Te=5)}function $b(s,a){do{var l=l2(s.alternate,s);if(l!==null){l.flags&=32767,Ot=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Ot=s;return}Ot=s=l}while(s!==null);Te=6,Ot=null}function Zb(s,a,l,c,m,p,v,A,N){s.cancelPendingCommit=null;do $h();while(qe!==0);if((Xt&6)!==0)throw Error(n(327));if(a!==null){if(a===s.current)throw Error(n(177));if(p=a.lanes|a.childLanes,p|=gg,rg(s,l,p,v,A,N),s===le&&(Ot=le=null,kt=0),Co=a,Js=s,ys=l,Em=p,Sm=m,jb=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,v2(Ds,function(){return iv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,m=ot.p,ot.p=2,v=Xt,Xt|=4;try{u2(s,a,l)}finally{Xt=v,ot.p=m,Y.T=c}}qe=1,Jb(),tv(),ev()}}function Jb(){if(qe===1){qe=0;var s=Js,a=Co,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var c=ot.p;ot.p=2;var m=Xt;Xt|=4;try{Ob(a,s);var p=Lm,v=B_(s.containerInfo),A=p.focusedElem,N=p.selectionRange;if(v!==A&&A&&A.ownerDocument&&L_(A.ownerDocument.documentElement,A)){if(N!==null&&ug(A)){var q=N.start,J=N.end;if(J===void 0&&(J=q),"selectionStart"in A)A.selectionStart=q,A.selectionEnd=Math.min(J,A.value.length);else{var st=A.ownerDocument||document,K=st&&st.defaultView||window;if(K.getSelection){var W=K.getSelection(),mt=A.textContent.length,Et=Math.min(N.start,mt),oe=N.end===void 0?Et:Math.min(N.end,mt);!W.extend&&Et>oe&&(v=oe,oe=Et,Et=v);var B=z_(A,Et),L=z_(A,oe);if(B&&L&&(W.rangeCount!==1||W.anchorNode!==B.node||W.anchorOffset!==B.offset||W.focusNode!==L.node||W.focusOffset!==L.offset)){var H=st.createRange();H.setStart(B.node,B.offset),W.removeAllRanges(),Et>oe?(W.addRange(H),W.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),W.addRange(H))}}}}for(st=[],W=A;W=W.parentNode;)W.nodeType===1&&st.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<st.length;A++){var nt=st[A];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}cf=!!zm,Lm=zm=null}finally{Xt=m,ot.p=c,Y.T=l}}s.current=a,qe=2}}function tv(){if(qe===2){qe=0;var s=Js,a=Co,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var c=ot.p;ot.p=2;var m=Xt;Xt|=4;try{Ib(s,a.alternate,a)}finally{Xt=m,ot.p=c,Y.T=l}}qe=3}}function ev(){if(qe===4||qe===3){qe=0,jc();var s=Js,a=Co,l=ys,c=jb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?qe=5:(qe=0,Co=Js=null,nv(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(Zs=null),ts(l),a=a.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(oi,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=Y.T,m=ot.p,ot.p=2,Y.T=null;try{for(var p=s.onRecoverableError,v=0;v<c.length;v++){var A=c[v];p(A.value,{componentStack:A.stack})}}finally{Y.T=a,ot.p=m}}(ys&3)!==0&&$h(),Fi(s),m=s.pendingLanes,(l&261930)!==0&&(m&42)!==0?s===Am?Su++:(Su=0,Am=s):Su=0,Au(0)}}function nv(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,su(a)))}function $h(){return Jb(),tv(),ev(),iv()}function iv(){if(qe!==5)return!1;var s=Js,a=Em;Em=0;var l=ts(ys),c=Y.T,m=ot.p;try{ot.p=32>l?32:l,Y.T=null,l=Sm,Sm=null;var p=Js,v=ys;if(qe=0,Co=Js=null,ys=0,(Xt&6)!==0)throw Error(n(331));var A=Xt;if(Xt|=4,Lb(p.current),Pb(p,p.current,v,l),Xt=A,Au(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(oi,p)}catch{}return!0}finally{ot.p=m,Y.T=c,nv(s,a)}}function sv(s,a,l){a=Wn(l,a),a=nm(s.stateNode,a,2),s=Ks(s,a,2),s!==null&&(Lr(s,2),Fi(s))}function te(s,a,l){if(s.tag===3)sv(s,s,l);else for(;a!==null;){if(a.tag===3){sv(a,s,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Zs===null||!Zs.has(c))){s=Wn(l,s),l=rb(2),c=Ks(a,l,2),c!==null&&(ab(l,c,a,s),Lr(c,2),Fi(c));break}}a=a.return}}function Rm(s,a,l){var c=s.pingCache;if(c===null){c=s.pingCache=new f2;var m=new Set;c.set(a,m)}else m=c.get(a),m===void 0&&(m=new Set,c.set(a,m));m.has(l)||(bm=!0,m.add(l),s=y2.bind(null,s,a,l),a.then(s,s))}function y2(s,a,l){var c=s.pingCache;c!==null&&c.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,le===s&&(kt&l)===l&&(Te===4||Te===3&&(kt&62914560)===kt&&300>fn()-Gh?(Xt&2)===0&&Do(s,0):vm|=l,Io===kt&&(Io=0)),Fi(s)}function rv(s,a){a===0&&(a=Yc()),s=Zr(s,a),s!==null&&(Lr(s,a),Fi(s))}function _2(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),rv(s,l)}function b2(s,a){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(n(314))}c!==null&&c.delete(a),rv(s,l)}function v2(s,a){return He(s,a)}var Zh=null,Vo=null,Im=!1,Jh=!1,Cm=!1,er=0;function Fi(s){s!==Vo&&s.next===null&&(Vo===null?Zh=Vo=s:Vo=Vo.next=s),Jh=!0,Im||(Im=!0,E2())}function Au(s,a){if(!Cm&&Jh){Cm=!0;do for(var l=!1,c=Zh;c!==null;){if(s!==0){var m=c.pendingLanes;if(m===0)var p=0;else{var v=c.suspendedLanes,A=c.pingedLanes;p=(1<<31-Se(42|s)+1)-1,p&=m&~(v&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,uv(c,p))}else p=kt,p=Ai(c,c===le?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||li(c,p)||(l=!0,uv(c,p));c=c.next}while(l);Cm=!1}}function T2(){av()}function av(){Jh=Im=!1;var s=0;er!==0&&V2()&&(s=er);for(var a=fn(),l=null,c=Zh;c!==null;){var m=c.next,p=ov(c,a);p===0?(c.next=null,l===null?Zh=m:l.next=m,m===null&&(Vo=l)):(l=c,(s!==0||(p&3)!==0)&&(Jh=!0)),c=m}qe!==0&&qe!==5||Au(s),er!==0&&(er=0)}function ov(s,a){for(var l=s.suspendedLanes,c=s.pingedLanes,m=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var v=31-Se(p),A=1<<v,N=m[v];N===-1?((A&l)===0||(A&c)!==0)&&(m[v]=sg(A,a)):N<=a&&(s.expiredLanes|=A),p&=~A}if(a=le,l=kt,l=Ai(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===a&&(Jt===2||Jt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Cs(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||li(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(c!==null&&Cs(c),ts(l)){case 2:case 8:l=Nl;break;case 32:l=Ds;break;case 268435456:l=Fc;break;default:l=Ds}return c=lv.bind(null,s),l=He(l,c),s.callbackPriority=a,s.callbackNode=l,a}return c!==null&&c!==null&&Cs(c),s.callbackPriority=2,s.callbackNode=null,2}function lv(s,a){if(qe!==0&&qe!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if($h()&&s.callbackNode!==l)return null;var c=kt;return c=Ai(s,s===le?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Hb(s,c,a),ov(s,fn()),s.callbackNode!=null&&s.callbackNode===l?lv.bind(null,s):null)}function uv(s,a){if($h())return null;Hb(s,a,!0)}function E2(){N2(function(){(Xt&6)!==0?He(Ol,T2):av()})}function Dm(){if(er===0){var s=yo;s===0&&(s=Ei,Ei<<=1,(Ei&261888)===0&&(Ei=256)),er=s}return er}function cv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:eo(""+s)}function hv(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function S2(s,a,l,c,m){if(a==="submit"&&l&&l.stateNode===m){var p=cv((m[Qe]||null).action),v=c.submitter;v&&(a=(a=v[Qe]||null)?cv(a.formAction):v.getAttribute("formAction"),a!==null&&(p=a,v=null));var A=new Pi("action","action",null,c,m);s.push({event:A,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(er!==0){var N=v?hv(m,v):new FormData(m);Wg(l,{pending:!0,data:N,method:m.method,action:p},null,N)}}else typeof p=="function"&&(A.preventDefault(),N=v?hv(m,v):new FormData(m),Wg(l,{pending:!0,data:N,method:m.method,action:p},p,N))},currentTarget:m}]})}}for(var Mm=0;Mm<dg.length;Mm++){var Vm=dg[Mm],A2=Vm.toLowerCase(),x2=Vm[0].toUpperCase()+Vm.slice(1);pi(A2,"on"+x2)}pi(F_,"onAnimationEnd"),pi(H_,"onAnimationIteration"),pi(q_,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(jw,"onTransitionRun"),pi(Fw,"onTransitionStart"),pi(Hw,"onTransitionCancel"),pi(G_,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xu));function fv(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],m=c.event;c=c.listeners;t:{var p=void 0;if(a)for(var v=c.length-1;0<=v;v--){var A=c[v],N=A.instance,q=A.currentTarget;if(A=A.listener,N!==p&&m.isPropagationStopped())break t;p=A,m.currentTarget=q;try{p(m)}catch(J){gh(J)}m.currentTarget=null,p=N}else for(v=0;v<c.length;v++){if(A=c[v],N=A.instance,q=A.currentTarget,A=A.listener,N!==p&&m.isPropagationStopped())break t;p=A,m.currentTarget=q;try{p(m)}catch(J){gh(J)}m.currentTarget=null,p=N}}}}function Nt(s,a){var l=a[Wa];l===void 0&&(l=a[Wa]=new Set);var c=s+"__bubble";l.has(c)||(dv(a,s,2,!1),l.add(c))}function Om(s,a,l){var c=0;a&&(c|=4),dv(l,s,c,a)}var tf="_reactListening"+Math.random().toString(36).slice(2);function Nm(s){if(!s[tf]){s[tf]=!0,zl.forEach(function(l){l!=="selectionchange"&&(w2.has(l)||Om(l,!1,s),Om(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[tf]||(a[tf]=!0,Om("selectionchange",!1,a))}}function dv(s,a,l,c){switch(Fv(a)){case 2:var m=tR;break;case 8:m=eR;break;default:m=Xm}l=m.bind(null,a,l,s),m=void 0,!qr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),c?m!==void 0?s.addEventListener(a,l,{capture:!0,passive:m}):s.addEventListener(a,l,!0):m!==void 0?s.addEventListener(a,l,{passive:m}):s.addEventListener(a,l,!1)}function Pm(s,a,l,c,m){var p=c;if((a&1)===0&&(a&2)===0&&c!==null)t:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var A=c.stateNode.containerInfo;if(A===m)break;if(v===4)for(v=c.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===m)return;v=v.return}for(;A!==null;){if(v=Ii(A),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){c=p=v;continue t}A=A.parentNode}}c=c.return}ks(function(){var q=p,J=Kn(l),st=[];t:{var K=K_.get(s);if(K!==void 0){var W=Pi,mt=s;switch(s){case"keypress":if(Kr(l)===0)break t;case"keydown":case"keyup":W=hh;break;case"focusin":mt="focus",W=Qr;break;case"focusout":mt="blur",W=Qr;break;case"beforeblur":case"afterblur":W=Qr;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=nh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=b;break;case F_:case H_:case q_:W=sh;break;case G_:W=w;break;case"scroll":case"scrollend":W=Xl;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=rh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=is;break;case"toggle":case"beforetoggle":W=It}var Et=(a&4)!==0,oe=!Et&&(s==="scroll"||s==="scrollend"),B=Et?K!==null?K+"Capture":null:K;Et=[];for(var L=q,H;L!==null;){var nt=L;if(H=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||H===null||B===null||(nt=fi(L,B),nt!=null&&Et.push(wu(L,nt,H))),oe)break;L=L.return}0<Et.length&&(K=new W(K,mt,null,l,J),st.push({event:K,listeners:Et}))}}if((a&7)===0){t:{if(K=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",K&&l!==Kl&&(mt=l.relatedTarget||l.fromElement)&&(Ii(mt)||mt[wi]))break t;if((W||K)&&(K=J.window===J?J:(K=J.ownerDocument)?K.defaultView||K.parentWindow:window,W?(mt=l.relatedTarget||l.toElement,W=q,mt=mt?Ii(mt):null,mt!==null&&(oe=o(mt),Et=mt.tag,mt!==oe||Et!==5&&Et!==27&&Et!==6)&&(mt=null)):(W=null,mt=q),W!==mt)){if(Et=Wl,nt="onMouseLeave",B="onMouseEnter",L="mouse",(s==="pointerout"||s==="pointerover")&&(Et=is,nt="onPointerLeave",B="onPointerEnter",L="pointer"),oe=W==null?K:Dn(W),H=mt==null?K:Dn(mt),K=new Et(nt,L+"leave",W,l,J),K.target=oe,K.relatedTarget=H,nt=null,Ii(J)===q&&(Et=new Et(B,L+"enter",mt,l,J),Et.target=H,Et.relatedTarget=oe,nt=Et),oe=nt,W&&mt)e:{for(Et=R2,B=W,L=mt,H=0,nt=B;nt;nt=Et(nt))H++;nt=0;for(var bt=L;bt;bt=Et(bt))nt++;for(;0<H-nt;)B=Et(B),H--;for(;0<nt-H;)L=Et(L),nt--;for(;H--;){if(B===L||L!==null&&B===L.alternate){Et=B;break e}B=Et(B),L=Et(L)}Et=null}else Et=null;W!==null&&gv(st,K,W,Et,!1),mt!==null&&oe!==null&&gv(st,oe,mt,Et,!0)}}t:{if(K=q?Dn(q):window,W=K.nodeName&&K.nodeName.toLowerCase(),W==="select"||W==="input"&&K.type==="file")var Kt=M_;else if(C_(K))if(V_)Kt=Lw;else{Kt=kw;var yt=Pw}else W=K.nodeName,!W||W.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?q&&to(q.elementType)&&(Kt=M_):Kt=zw;if(Kt&&(Kt=Kt(s,q))){D_(st,Kt,l,J);break t}yt&&yt(s,K,q),s==="focusout"&&q&&K.type==="number"&&q.memoizedProps.value!=null&&Hl(K,"number",K.value)}switch(yt=q?Dn(q):window,s){case"focusin":(C_(yt)||yt.contentEditable==="true")&&(lo=yt,cg=q,eu=null);break;case"focusout":eu=cg=lo=null;break;case"mousedown":hg=!0;break;case"contextmenu":case"mouseup":case"dragend":hg=!1,U_(st,l,J);break;case"selectionchange":if(Uw)break;case"keydown":case"keyup":U_(st,l,J)}var Dt;if(Qt)t:{switch(s){case"compositionstart":var zt="onCompositionStart";break t;case"compositionend":zt="onCompositionEnd";break t;case"compositionupdate":zt="onCompositionUpdate";break t}zt=void 0}else oo?Xr(s,l)&&(zt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(zt="onCompositionStart");zt&&(Li&&l.locale!=="ko"&&(oo||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&oo&&(Dt=Ql()):(Ni=J,Yl="value"in Ni?Ni.value:Ni.textContent,oo=!0)),yt=ef(q,zt),0<yt.length&&(zt=new zi(zt,s,null,l,J),st.push({event:zt,listeners:yt}),Dt?zt.data=Dt:(Dt=ao(l),Dt!==null&&(zt.data=Dt)))),(Dt=Qn?Mw(s,l):Vw(s,l))&&(zt=ef(q,"onBeforeInput"),0<zt.length&&(yt=new zi("onBeforeInput","beforeinput",null,l,J),st.push({event:yt,listeners:zt}),yt.data=Dt)),S2(st,s,q,l,J)}fv(st,a)})}function wu(s,a,l){return{instance:s,listener:a,currentTarget:l}}function ef(s,a){for(var l=a+"Capture",c=[];s!==null;){var m=s,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=fi(s,l),m!=null&&c.unshift(wu(s,m,p)),m=fi(s,a),m!=null&&c.push(wu(s,m,p))),s.tag===3)return c;s=s.return}return[]}function R2(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function gv(s,a,l,c,m){for(var p=a._reactName,v=[];l!==null&&l!==c;){var A=l,N=A.alternate,q=A.stateNode;if(A=A.tag,N!==null&&N===c)break;A!==5&&A!==26&&A!==27||q===null||(N=q,m?(q=fi(l,p),q!=null&&v.unshift(wu(l,q,N))):m||(q=fi(l,p),q!=null&&v.push(wu(l,q,N)))),l=l.return}v.length!==0&&s.push({event:a,listeners:v})}var I2=/\r\n?/g,C2=/\u0000|\uFFFD/g;function mv(s){return(typeof s=="string"?s:""+s).replace(I2,`
`).replace(C2,"")}function pv(s,a){return a=mv(a),mv(s)===a}function ae(s,a,l,c,m,p){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||yn(s,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&yn(s,""+c);break;case"className":Mn(s,"class",c);break;case"tabIndex":Mn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(s,l,c);break;case"style":Gl(s,c,p);break;case"data":if(a!=="object"){Mn(s,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=eo(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(a!=="input"&&ae(s,a,"name",m.name,m,null),ae(s,a,"formEncType",m.formEncType,m,null),ae(s,a,"formMethod",m.formMethod,m,null),ae(s,a,"formTarget",m.formTarget,m,null)):(ae(s,a,"encType",m.encType,m,null),ae(s,a,"method",m.method,m,null),ae(s,a,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=eo(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=hi);break;case"onScroll":c!=null&&Nt("scroll",s);break;case"onScrollEnd":c!=null&&Nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(n(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=eo(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Nt("beforetoggle",s),Nt("toggle",s),Za(s,"popover",c);break;case"xlinkActuate":Ne(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ne(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ne(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ne(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ne(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ne(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ne(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ne(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ne(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Za(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=eh.get(l)||l,Za(s,l,c))}}function km(s,a,l,c,m,p){switch(l){case"style":Gl(s,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(n(60));s.innerHTML=l}}break;case"children":typeof c=="string"?yn(s,c):(typeof c=="number"||typeof c=="bigint")&&yn(s,""+c);break;case"onScroll":c!=null&&Nt("scroll",s);break;case"onScrollEnd":c!=null&&Nt("scrollend",s);break;case"onClick":c!=null&&(s.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ll.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),p=s[Qe]||null,p=p!=null?p[l]:null,typeof p=="function"&&s.removeEventListener(a,p,m),typeof c=="function")){typeof p!="function"&&p!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,c,m);break t}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Za(s,l,c)}}}function an(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",s),Nt("load",s);var c=!1,m=!1,p;for(p in l)if(l.hasOwnProperty(p)){var v=l[p];if(v!=null)switch(p){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:ae(s,a,p,v,l,null)}}m&&ae(s,a,"srcSet",l.srcSet,l,null),c&&ae(s,a,"src",l.src,l,null);return;case"input":Nt("invalid",s);var A=p=v=m=null,N=null,q=null;for(c in l)if(l.hasOwnProperty(c)){var J=l[c];if(J!=null)switch(c){case"name":m=J;break;case"type":v=J;break;case"checked":N=J;break;case"defaultChecked":q=J;break;case"value":p=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(137,a));break;default:ae(s,a,c,J,l,null)}}Zc(s,p,A,N,q,v,m,!1);return;case"select":Nt("invalid",s),c=v=p=null;for(m in l)if(l.hasOwnProperty(m)&&(A=l[m],A!=null))switch(m){case"value":p=A;break;case"defaultValue":v=A;break;case"multiple":c=A;default:ae(s,a,m,A,l,null)}a=p,l=v,s.multiple=!!c,a!=null?Vs(s,!!c,a,!1):l!=null&&Vs(s,!!c,l,!0);return;case"textarea":Nt("invalid",s),p=m=c=null;for(v in l)if(l.hasOwnProperty(v)&&(A=l[v],A!=null))switch(v){case"value":c=A;break;case"defaultValue":m=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:ae(s,a,v,A,l,null)}Os(s,c,m,p);return;case"option":for(N in l)if(l.hasOwnProperty(N)&&(c=l[N],c!=null))switch(N){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ae(s,a,N,c,l,null)}return;case"dialog":Nt("beforetoggle",s),Nt("toggle",s),Nt("cancel",s),Nt("close",s);break;case"iframe":case"object":Nt("load",s);break;case"video":case"audio":for(c=0;c<xu.length;c++)Nt(xu[c],s);break;case"image":Nt("error",s),Nt("load",s);break;case"details":Nt("toggle",s);break;case"embed":case"source":case"link":Nt("error",s),Nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in l)if(l.hasOwnProperty(q)&&(c=l[q],c!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:ae(s,a,q,c,l,null)}return;default:if(to(a)){for(J in l)l.hasOwnProperty(J)&&(c=l[J],c!==void 0&&km(s,a,J,c,l,void 0));return}}for(A in l)l.hasOwnProperty(A)&&(c=l[A],c!=null&&ae(s,a,A,c,l,null))}function D2(s,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,v=null,A=null,N=null,q=null,J=null;for(W in l){var st=l[W];if(l.hasOwnProperty(W)&&st!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":N=st;default:c.hasOwnProperty(W)||ae(s,a,W,null,c,st)}}for(var K in c){var W=c[K];if(st=l[K],c.hasOwnProperty(K)&&(W!=null||st!=null))switch(K){case"type":p=W;break;case"name":m=W;break;case"checked":q=W;break;case"defaultChecked":J=W;break;case"value":v=W;break;case"defaultValue":A=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(137,a));break;default:W!==st&&ae(s,a,K,W,c,st)}}Ja(s,v,A,N,q,J,p,m);return;case"select":W=v=A=K=null;for(p in l)if(N=l[p],l.hasOwnProperty(p)&&N!=null)switch(p){case"value":break;case"multiple":W=N;default:c.hasOwnProperty(p)||ae(s,a,p,null,c,N)}for(m in c)if(p=c[m],N=l[m],c.hasOwnProperty(m)&&(p!=null||N!=null))switch(m){case"value":K=p;break;case"defaultValue":A=p;break;case"multiple":v=p;default:p!==N&&ae(s,a,m,p,c,N)}a=A,l=v,c=W,K!=null?Vs(s,!!l,K,!1):!!c!=!!l&&(a!=null?Vs(s,!!l,a,!0):Vs(s,!!l,l?[]:"",!1));return;case"textarea":W=K=null;for(A in l)if(m=l[A],l.hasOwnProperty(A)&&m!=null&&!c.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ae(s,a,A,null,c,m)}for(v in c)if(m=c[v],p=l[v],c.hasOwnProperty(v)&&(m!=null||p!=null))switch(v){case"value":K=m;break;case"defaultValue":W=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==p&&ae(s,a,v,m,c,p)}Jc(s,K,W);return;case"option":for(var mt in l)if(K=l[mt],l.hasOwnProperty(mt)&&K!=null&&!c.hasOwnProperty(mt))switch(mt){case"selected":s.selected=!1;break;default:ae(s,a,mt,null,c,K)}for(N in c)if(K=c[N],W=l[N],c.hasOwnProperty(N)&&K!==W&&(K!=null||W!=null))switch(N){case"selected":s.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:ae(s,a,N,K,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Et in l)K=l[Et],l.hasOwnProperty(Et)&&K!=null&&!c.hasOwnProperty(Et)&&ae(s,a,Et,null,c,K);for(q in c)if(K=c[q],W=l[q],c.hasOwnProperty(q)&&K!==W&&(K!=null||W!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,a));break;default:ae(s,a,q,K,c,W)}return;default:if(to(a)){for(var oe in l)K=l[oe],l.hasOwnProperty(oe)&&K!==void 0&&!c.hasOwnProperty(oe)&&km(s,a,oe,void 0,c,K);for(J in c)K=c[J],W=l[J],!c.hasOwnProperty(J)||K===W||K===void 0&&W===void 0||km(s,a,J,K,c,W);return}}for(var B in l)K=l[B],l.hasOwnProperty(B)&&K!=null&&!c.hasOwnProperty(B)&&ae(s,a,B,null,c,K);for(st in c)K=c[st],W=l[st],!c.hasOwnProperty(st)||K===W||K==null&&W==null||ae(s,a,st,K,c,W)}function yv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M2(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var m=l[c],p=m.transferSize,v=m.initiatorType,A=m.duration;if(p&&A&&yv(v)){for(v=0,A=m.responseEnd,c+=1;c<l.length;c++){var N=l[c],q=N.startTime;if(q>A)break;var J=N.transferSize,st=N.initiatorType;J&&yv(st)&&(N=N.responseEnd,v+=J*(N<A?1:(A-q)/(N-q)))}if(--c,a+=8*(p+v)/(m.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var zm=null,Lm=null;function nf(s){return s.nodeType===9?s:s.ownerDocument}function _v(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bv(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Bm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Um=null;function V2(){var s=window.event;return s&&s.type==="popstate"?s===Um?!1:(Um=s,!0):(Um=null,!1)}var vv=typeof setTimeout=="function"?setTimeout:void 0,O2=typeof clearTimeout=="function"?clearTimeout:void 0,Tv=typeof Promise=="function"?Promise:void 0,N2=typeof queueMicrotask=="function"?queueMicrotask:typeof Tv<"u"?function(s){return Tv.resolve(null).then(s).catch(P2)}:vv;function P2(s){setTimeout(function(){throw s})}function nr(s){return s==="head"}function Ev(s,a){var l=a,c=0;do{var m=l.nextSibling;if(s.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(m),ko(a);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Ru(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Ru(l);for(var p=l.firstChild;p;){var v=p.nextSibling,A=p.nodeName;p[Ri]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||l.removeChild(p),p=v}}else l==="body"&&Ru(s.ownerDocument.body);l=m}while(l);ko(a)}function Sv(s,a){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function jm(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":jm(l),$a(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function k2(s,a,l,c){for(;s.nodeType===1;){var m=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Ri])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=ei(s.nextSibling),s===null)break}return null}function z2(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ei(s.nextSibling),s===null))return null;return s}function Av(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ei(s.nextSibling),s===null))return null;return s}function Fm(s){return s.data==="$?"||s.data==="$~"}function Hm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function L2(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function ei(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var qm=null;function xv(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return ei(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function wv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function Rv(s,a,l){switch(a=nf(l),s){case"html":if(s=a.documentElement,!s)throw Error(n(452));return s;case"head":if(s=a.head,!s)throw Error(n(453));return s;case"body":if(s=a.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function Ru(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);$a(s)}var ni=new Map,Iv=new Set;function sf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var _s=ot.d;ot.d={f:B2,r:U2,D:j2,C:F2,L:H2,m:q2,X:K2,S:G2,M:Y2};function B2(){var s=_s.f(),a=Qh();return s||a}function U2(s){var a=Gn(s);a!==null&&a.tag===5&&a.type==="form"?G0(a):_s.r(s)}var Oo=typeof document>"u"?null:document;function Cv(s,a,l){var c=Oo;if(c&&typeof a=="string"&&a){var m=pn(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Iv.has(m)||(Iv.add(m),s={rel:s,crossOrigin:l,href:a},c.querySelector(m)===null&&(a=c.createElement("link"),an(a,"link",s),Oe(a),c.head.appendChild(a)))}}function j2(s){_s.D(s),Cv("dns-prefetch",s,null)}function F2(s,a){_s.C(s,a),Cv("preconnect",s,a)}function H2(s,a,l){_s.L(s,a,l);var c=Oo;if(c&&s&&a){var m='link[rel="preload"][as="'+pn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+pn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+pn(l.imageSizes)+'"]')):m+='[href="'+pn(s)+'"]';var p=m;switch(a){case"style":p=No(s);break;case"script":p=Po(s)}ni.has(p)||(s=_({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),ni.set(p,s),c.querySelector(m)!==null||a==="style"&&c.querySelector(Iu(p))||a==="script"&&c.querySelector(Cu(p))||(a=c.createElement("link"),an(a,"link",s),Oe(a),c.head.appendChild(a)))}}function q2(s,a){_s.m(s,a);var l=Oo;if(l&&s){var c=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+pn(c)+'"][href="'+pn(s)+'"]',p=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Po(s)}if(!ni.has(p)&&(s=_({rel:"modulepreload",href:s},a),ni.set(p,s),l.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Cu(p)))return}c=l.createElement("link"),an(c,"link",s),Oe(c),l.head.appendChild(c)}}}function G2(s,a,l){_s.S(s,a,l);var c=Oo;if(c&&s){var m=Ci(c).hoistableStyles,p=No(s);a=a||"default";var v=m.get(p);if(!v){var A={loading:0,preload:null};if(v=c.querySelector(Iu(p)))A.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":a},l),(l=ni.get(p))&&Gm(s,l);var N=v=c.createElement("link");Oe(N),an(N,"link",s),N._p=new Promise(function(q,J){N.onload=q,N.onerror=J}),N.addEventListener("load",function(){A.loading|=1}),N.addEventListener("error",function(){A.loading|=2}),A.loading|=4,rf(v,a,c)}v={type:"stylesheet",instance:v,count:1,state:A},m.set(p,v)}}}function K2(s,a){_s.X(s,a);var l=Oo;if(l&&s){var c=Ci(l).hoistableScripts,m=Po(s),p=c.get(m);p||(p=l.querySelector(Cu(m)),p||(s=_({src:s,async:!0},a),(a=ni.get(m))&&Km(s,a),p=l.createElement("script"),Oe(p),an(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function Y2(s,a){_s.M(s,a);var l=Oo;if(l&&s){var c=Ci(l).hoistableScripts,m=Po(s),p=c.get(m);p||(p=l.querySelector(Cu(m)),p||(s=_({src:s,async:!0,type:"module"},a),(a=ni.get(m))&&Km(s,a),p=l.createElement("script"),Oe(p),an(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function Dv(s,a,l,c){var m=(m=At.current)?sf(m):null;if(!m)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=No(l.href),l=Ci(m).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=No(l.href);var p=Ci(m).hoistableStyles,v=p.get(s);if(v||(m=m.ownerDocument||m,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,v),(p=m.querySelector(Iu(s)))&&!p._p&&(v.instance=p,v.state.loading=5),ni.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ni.set(s,l),p||Q2(m,s,l,v.state))),a&&c===null)throw Error(n(528,""));return v}if(a&&c!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Po(l),l=Ci(m).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function No(s){return'href="'+pn(s)+'"'}function Iu(s){return'link[rel="stylesheet"]['+s+"]"}function Mv(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function Q2(s,a,l,c){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=s.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),an(a,"link",l),Oe(a),s.head.appendChild(a))}function Po(s){return'[src="'+pn(s)+'"]'}function Cu(s){return"script[async]"+s}function Vv(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=s.querySelector('style[data-href~="'+pn(l.href)+'"]');if(c)return a.instance=c,Oe(c),c;var m=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Oe(c),an(c,"style",m),rf(c,l.precedence,s),a.instance=c;case"stylesheet":m=No(l.href);var p=s.querySelector(Iu(m));if(p)return a.state.loading|=4,a.instance=p,Oe(p),p;c=Mv(l),(m=ni.get(m))&&Gm(c,m),p=(s.ownerDocument||s).createElement("link"),Oe(p);var v=p;return v._p=new Promise(function(A,N){v.onload=A,v.onerror=N}),an(p,"link",c),a.state.loading|=4,rf(p,l.precedence,s),a.instance=p;case"script":return p=Po(l.src),(m=s.querySelector(Cu(p)))?(a.instance=m,Oe(m),m):(c=l,(m=ni.get(p))&&(c=_({},l),Km(c,m)),s=s.ownerDocument||s,m=s.createElement("script"),Oe(m),an(m,"link",c),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,rf(c,l.precedence,s));return a.instance}function rf(s,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,p=m,v=0;v<c.length;v++){var A=c[v];if(A.dataset.precedence===a)p=A;else if(p!==m)break}p?p.parentNode.insertBefore(s,p.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function Gm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Km(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var af=null;function Ov(s,a,l){if(af===null){var c=new Map,m=af=new Map;m.set(l,c)}else m=af,c=m.get(l),c||(c=new Map,m.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),m=0;m<l.length;m++){var p=l[m];if(!(p[Ri]||p[Ve]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(a)||"";v=s+v;var A=c.get(v);A?A.push(p):c.set(v,[p])}}return c}function Nv(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function X2(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Pv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function W2(s,a,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=No(c.href),p=a.querySelector(Iu(m));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=of.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=p,Oe(p);return}p=a.ownerDocument||a,c=Mv(c),(m=ni.get(m))&&Gm(c,m),p=p.createElement("link"),Oe(p);var v=p;v._p=new Promise(function(A,N){v.onload=A,v.onerror=N}),an(p,"link",c),l.instance=p}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=of.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var Ym=0;function $2(s,a){return s.stylesheets&&s.count===0&&uf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&uf(s,s.stylesheets),s.unsuspend){var p=s.unsuspend;s.unsuspend=null,p()}},6e4+a);0<s.imgBytes&&Ym===0&&(Ym=62500*M2());var m=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&uf(s,s.stylesheets),s.unsuspend)){var p=s.unsuspend;s.unsuspend=null,p()}},(s.imgBytes>Ym?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function of(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var lf=null;function uf(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,lf=new Map,a.forEach(Z2,s),lf=null,of.call(s))}function Z2(s,a){if(!(a.state.loading&4)){var l=lf.get(s);if(l)var c=l.get(null);else{l=new Map,lf.set(s,l);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var v=m[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(l.set(v.dataset.precedence,v),c=v)}c&&l.set(null,c)}m=a.instance,v=m.getAttribute("data-precedence"),p=l.get(v)||c,p===c&&l.set(null,m),l.set(v,m),this.count++,c=of.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),p?p.parentNode.insertBefore(m,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var Du={$$typeof:Q,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function J2(s,a,l,c,m,p,v,A,N){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xi(0),this.hiddenUpdates=xi(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function kv(s,a,l,c,m,p,v,A,N,q,J,st){return s=new J2(s,a,l,v,N,q,J,st,A),a=1,p===!0&&(a|=24),p=On(3,null,null,a),s.current=p,p.stateNode=s,a=wg(),a.refCount++,s.pooledCache=a,a.refCount++,p.memoizedState={element:c,isDehydrated:l,cache:a},Dg(p),s}function zv(s){return s?(s=ho,s):ho}function Lv(s,a,l,c,m,p){m=zv(m),c.context===null?c.context=m:c.pendingContext=m,c=Gs(a),c.payload={element:l},p=p===void 0?null:p,p!==null&&(c.callback=p),l=Ks(s,c,a),l!==null&&(En(l,s,a),lu(l,s,a))}function Bv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function Qm(s,a){Bv(s,a),(s=s.alternate)&&Bv(s,a)}function Uv(s){if(s.tag===13||s.tag===31){var a=Zr(s,67108864);a!==null&&En(a,s,67108864),Qm(s,67108864)}}function jv(s){if(s.tag===13||s.tag===31){var a=Ln();a=Ur(a);var l=Zr(s,a);l!==null&&En(l,s,a),Qm(s,a)}}var cf=!0;function tR(s,a,l,c){var m=Y.T;Y.T=null;var p=ot.p;try{ot.p=2,Xm(s,a,l,c)}finally{ot.p=p,Y.T=m}}function eR(s,a,l,c){var m=Y.T;Y.T=null;var p=ot.p;try{ot.p=8,Xm(s,a,l,c)}finally{ot.p=p,Y.T=m}}function Xm(s,a,l,c){if(cf){var m=Wm(c);if(m===null)Pm(s,a,c,hf,l),Hv(s,c);else if(iR(m,s,a,l,c))c.stopPropagation();else if(Hv(s,c),a&4&&-1<nR.indexOf(s)){for(;m!==null;){var p=Gn(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Si(p.pendingLanes);if(v!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var N=1<<31-Se(v);A.entanglements[1]|=N,v&=~N}Fi(p),(Xt&6)===0&&(Kh=fn()+500,Au(0))}}break;case 31:case 13:A=Zr(p,2),A!==null&&En(A,p,2),Qh(),Qm(p,2)}if(p=Wm(c),p===null&&Pm(s,a,c,hf,l),p===m)break;m=p}m!==null&&c.stopPropagation()}else Pm(s,a,c,null,l)}}function Wm(s){return s=Kn(s),$m(s)}var hf=null;function $m(s){if(hf=null,s=Ii(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=u(a),s!==null)return s;s=null}else if(l===31){if(s=h(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return hf=s,null}function Fv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kr()){case Ol:return 2;case Nl:return 8;case Ds:case ig:return 32;case Fc:return 268435456;default:return 32}default:return 32}}var Zm=!1,ir=null,sr=null,rr=null,Mu=new Map,Vu=new Map,ar=[],nR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hv(s,a){switch(s){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":Mu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vu.delete(a.pointerId)}}function Ou(s,a,l,c,m,p){return s===null||s.nativeEvent!==p?(s={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:p,targetContainers:[m]},a!==null&&(a=Gn(a),a!==null&&Uv(a)),s):(s.eventSystemFlags|=c,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function iR(s,a,l,c,m){switch(a){case"focusin":return ir=Ou(ir,s,a,l,c,m),!0;case"dragenter":return sr=Ou(sr,s,a,l,c,m),!0;case"mouseover":return rr=Ou(rr,s,a,l,c,m),!0;case"pointerover":var p=m.pointerId;return Mu.set(p,Ou(Mu.get(p)||null,s,a,l,c,m)),!0;case"gotpointercapture":return p=m.pointerId,Vu.set(p,Ou(Vu.get(p)||null,s,a,l,c,m)),!0}return!1}function qv(s){var a=Ii(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){s.blockedOn=a,ui(s.priority,function(){jv(l)});return}}else if(a===31){if(a=h(l),a!==null){s.blockedOn=a,ui(s.priority,function(){jv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ff(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=Wm(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Kl=c,l.target.dispatchEvent(c),Kl=null}else return a=Gn(l),a!==null&&Uv(a),s.blockedOn=l,!1;a.shift()}return!0}function Gv(s,a,l){ff(s)&&l.delete(a)}function sR(){Zm=!1,ir!==null&&ff(ir)&&(ir=null),sr!==null&&ff(sr)&&(sr=null),rr!==null&&ff(rr)&&(rr=null),Mu.forEach(Gv),Vu.forEach(Gv)}function df(s,a){s.blockedOn===a&&(s.blockedOn=null,Zm||(Zm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,sR)))}var gf=null;function Kv(s){gf!==s&&(gf=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){gf===s&&(gf=null);for(var a=0;a<s.length;a+=3){var l=s[a],c=s[a+1],m=s[a+2];if(typeof c!="function"){if($m(c||l)===null)continue;break}var p=Gn(l);p!==null&&(s.splice(a,3),a-=3,Wg(p,{pending:!0,data:m,method:l.method,action:c},c,m))}}))}function ko(s){function a(N){return df(N,s)}ir!==null&&df(ir,s),sr!==null&&df(sr,s),rr!==null&&df(rr,s),Mu.forEach(a),Vu.forEach(a);for(var l=0;l<ar.length;l++){var c=ar[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<ar.length&&(l=ar[0],l.blockedOn===null);)qv(l),l.blockedOn===null&&ar.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var m=l[c],p=l[c+1],v=m[Qe]||null;if(typeof p=="function")v||Kv(l);else if(v){var A=null;if(p&&p.hasAttribute("formAction")){if(m=p,v=p[Qe]||null)A=v.formAction;else if($m(m)!==null)continue}else A=v.action;typeof A=="function"?l[c+1]=A:(l.splice(c,3),c-=3),Kv(l)}}}function Yv(){function s(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return m=v})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function Jm(s){this._internalRoot=s}mf.prototype.render=Jm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,c=Ln();Lv(l,c,s,a,null,null)},mf.prototype.unmount=Jm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Lv(s.current,2,null,s,null,null),Qh(),a[wi]=null}};function mf(s){this._internalRoot=s}mf.prototype.unstable_scheduleHydration=function(s){if(s){var a=Qc();s={blockedOn:null,target:s,priority:a};for(var l=0;l<ar.length&&a!==0&&a<ar[l].priority;l++);ar.splice(l,0,s),l===0&&qv(s)}};var Qv=t.version;if(Qv!=="19.2.3")throw Error(n(527,Qv,"19.2.3"));ot.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=g(a),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var rR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pf.isDisabled&&pf.supportsFiber)try{oi=pf.inject(rR),tn=pf}catch{}}return Pu.createRoot=function(s,a){if(!r(s))throw Error(n(299));var l=!1,c="",m=eb,p=nb,v=ib;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=kv(s,1,!1,null,null,l,c,null,m,p,v,Yv),s[wi]=a.current,Nm(s),new Jm(a)},Pu.hydrateRoot=function(s,a,l){if(!r(s))throw Error(n(299));var c=!1,m="",p=eb,v=nb,A=ib,N=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.formState!==void 0&&(N=l.formState)),a=kv(s,1,!0,a,l??null,c,m,N,p,v,A,Yv),a.context=zv(null),l=a.current,c=Ln(),c=Ur(c),m=Gs(c),m.callback=null,Ks(l,m,c),l=c,a.current.lanes=l,Lr(a,l),Fi(a),s[wi]=a.current,Nm(s),new mf(a)},Pu.version="19.2.3",Pu}var sT;function mR(){if(sT)return np.exports;sT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),np.exports=gR(),np.exports}var pR=mR();const e1=Ht.createContext(),Mp=[{id:"u1",name:"Claudio",avatar:""},{id:"u2",name:"Giovanna",avatar:""},{id:"u3",name:"Tailma",avatar:""},{id:"u4",name:"Victor",avatar:""}],yR=({children:i})=>{const[t,e]=Ht.useState(null),[n,r]=Ht.useState(!0);Ht.useEffect(()=>{const h=localStorage.getItem("expenses_user_id");if(h){const f=Mp.find(g=>g.id===h);f&&e(f)}r(!1)},[]);const o=h=>{const f=Mp.find(g=>g.id===h);f&&(e(f),localStorage.setItem("expenses_user_id",h))},u=()=>{e(null),localStorage.removeItem("expenses_user_id")};return at.jsx(e1.Provider,{value:{currentUser:t,login:o,logout:u,loading:n},children:i})},yy=()=>Ht.useContext(e1),_R=()=>{};var rT={};const n1=function(i){const t=[];let e=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},bR=function(i){const t=[];let e=0,n=0;for(;e<i.length;){const r=i[e++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const o=i[e++];t[n++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=i[e++],u=i[e++],h=i[e++],f=((r&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;t[n++]=String.fromCharCode(55296+(f>>10)),t[n++]=String.fromCharCode(56320+(f&1023))}else{const o=i[e++],u=i[e++];t[n++]=String.fromCharCode((r&15)<<12|(o&63)<<6|u&63)}}return t.join("")},i1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const o=i[r],u=r+1<i.length,h=u?i[r+1]:0,f=r+2<i.length,g=f?i[r+2]:0,y=o>>2,_=(o&3)<<4|h>>4;let T=(h&15)<<2|g>>6,S=g&63;f||(S=64,u||(T=64)),n.push(e[y],e[_],e[T],e[S])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(n1(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):bR(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const o=e[i.charAt(r++)],h=r<i.length?e[i.charAt(r)]:0;++r;const g=r<i.length?e[i.charAt(r)]:64;++r;const _=r<i.length?e[i.charAt(r)]:64;if(++r,o==null||h==null||g==null||_==null)throw new vR;const T=o<<2|h>>4;if(n.push(T),g!==64){const S=h<<4&240|g>>2;if(n.push(S),_!==64){const C=g<<6&192|_;n.push(C)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class vR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TR=function(i){const t=n1(i);return i1.encodeByteArray(t,!0)},$f=function(i){return TR(i).replace(/\./g,"")},ER=function(i){try{return i1.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function s1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const SR=()=>s1().__FIREBASE_DEFAULTS__,AR=()=>{if(typeof process>"u"||typeof rT>"u")return;const i=rT.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},xR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&ER(i[1]);return t&&JSON.parse(t)},_y=()=>{try{return _R()||SR()||AR()||xR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},wR=i=>_y()?.emulatorHosts?.[i],RR=i=>{const t=wR(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},r1=()=>_y()?.config;class IR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}function by(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CR(i){return(await fetch(i,{credentials:"include"})).ok}function DR(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",r=i.iat||0,o=i.sub||i.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...i};return[$f(JSON.stringify(e)),$f(JSON.stringify(u)),""].join(".")}const tc={};function MR(){const i={prod:[],emulator:[]};for(const t of Object.keys(tc))tc[t]?i.emulator.push(t):i.prod.push(t);return i}function VR(i){let t=document.getElementById(i),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),e=!0),{created:e,element:t}}let aT=!1;function OR(i,t){if(typeof window>"u"||typeof document>"u"||!by(window.location.host)||tc[i]===t||tc[i]||aT)return;tc[i]=t;function e(T){return`__firebase__banner__${T}`}const n="__firebase__banner",o=MR().prod.length>0;function u(){const T=document.getElementById(n);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,S){T.setAttribute("width","24"),T.setAttribute("id",S),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{aT=!0,u()},T}function y(T,S){T.setAttribute("id",S),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=VR(n),S=e("text"),C=document.getElementById(S)||document.createElement("span"),D=e("learnmore"),M=document.getElementById(D)||document.createElement("a"),U=e("preprendIcon"),G=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Q=T.element;h(Q),y(M,D);const Z=g();f(G,U),Q.append(G,C,M,Z),document.body.appendChild(Q)}o?(C.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function Zf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a1(){const i=_y()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o1(){return!a1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function l1(){return!a1()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function u1(){try{return typeof indexedDB=="object"}catch{return!1}}function NR(){return new Promise((i,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{t(r.error?.message||"")}}catch(e){t(e)}})}const PR="FirebaseError";class vl extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=PR,Object.setPrototypeOf(this,vl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,c1.prototype.create)}}class c1{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],u=o?kR(o,n):"Error",h=`${this.serviceName}: ${u} (${r}).`;return new vl(r,h,n)}}function kR(i,t){return i.replace(zR,(e,n)=>{const r=t[n];return r!=null?String(r):`<${n}?>`})}const zR=/\{\$([^}]+)}/g;function Jf(i,t){if(i===t)return!0;const e=Object.keys(i),n=Object.keys(t);for(const r of e){if(!n.includes(r))return!1;const o=i[r],u=t[r];if(oT(o)&&oT(u)){if(!Jf(o,u))return!1}else if(o!==u)return!1}for(const r of n)if(!e.includes(r))return!1;return!0}function oT(i){return i!==null&&typeof i=="object"}function Ma(i){return i&&i._delegate?i._delegate:i}class dc{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ma="[DEFAULT]";class LR{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new IR;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),n=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(UR(t))try{this.getOrInitializeService({instanceIdentifier:ma})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:r});n.resolve(o)}catch{}}}}clearInstance(t=ma){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ma){return this.instances.has(t)}getOptions(t=ma){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);n===h&&u.resolve(r)}return r}onInit(t,e){const n=this.normalizeInstanceIdentifier(e),r=this.onInitCallbacks.get(n)??new Set;r.add(t),this.onInitCallbacks.set(n,r);const o=this.instances.get(n);return o&&t(o,n),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:BR(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=ma){return this.component?this.component.multipleInstances?t:ma:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BR(i){return i===ma?void 0:i}function UR(i){return i.instantiationMode==="EAGER"}class jR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new LR(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Ft;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ft||(Ft={}));const FR={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},HR=Ft.INFO,qR={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},GR=(i,t,...e)=>{if(t<i.logLevel)return;const n=new Date().toISOString(),r=qR[t];if(r)console[r](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class h1{constructor(t){this.name=t,this._logLevel=HR,this._logHandler=GR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?FR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...t),this._logHandler(this,Ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...t),this._logHandler(this,Ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...t),this._logHandler(this,Ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...t),this._logHandler(this,Ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...t),this._logHandler(this,Ft.ERROR,...t)}}const KR=(i,t)=>t.some(e=>i instanceof e);let lT,uT;function YR(){return lT||(lT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QR(){return uT||(uT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const f1=new WeakMap,Vp=new WeakMap,d1=new WeakMap,ap=new WeakMap,vy=new WeakMap;function XR(i){const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("success",o),i.removeEventListener("error",u)},o=()=>{e(yr(i.result)),r()},u=()=>{n(i.error),r()};i.addEventListener("success",o),i.addEventListener("error",u)});return t.then(e=>{e instanceof IDBCursor&&f1.set(e,i)}).catch(()=>{}),vy.set(t,i),t}function WR(i){if(Vp.has(i))return;const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("complete",o),i.removeEventListener("error",u),i.removeEventListener("abort",u)},o=()=>{e(),r()},u=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",o),i.addEventListener("error",u),i.addEventListener("abort",u)});Vp.set(i,t)}let Op={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return Vp.get(i);if(t==="objectStoreNames")return i.objectStoreNames||d1.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return yr(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function $R(i){Op=i(Op)}function ZR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=i.call(op(this),t,...e);return d1.set(n,t.sort?t.sort():[t]),yr(n)}:QR().includes(i)?function(...t){return i.apply(op(this),t),yr(f1.get(this))}:function(...t){return yr(i.apply(op(this),t))}}function JR(i){return typeof i=="function"?ZR(i):(i instanceof IDBTransaction&&WR(i),KR(i,YR())?new Proxy(i,Op):i)}function yr(i){if(i instanceof IDBRequest)return XR(i);if(ap.has(i))return ap.get(i);const t=JR(i);return t!==i&&(ap.set(i,t),vy.set(t,i)),t}const op=i=>vy.get(i);function tI(i,t,{blocked:e,upgrade:n,blocking:r,terminated:o}={}){const u=indexedDB.open(i,t),h=yr(u);return n&&u.addEventListener("upgradeneeded",f=>{n(yr(u.result),f.oldVersion,f.newVersion,yr(u.transaction),f)}),e&&u.addEventListener("blocked",f=>e(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",g=>r(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const eI=["get","getKey","getAll","getAllKeys","count"],nI=["put","add","delete","clear"],lp=new Map;function cT(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(lp.get(t))return lp.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,r=nI.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(r||eI.includes(e)))return;const o=async function(u,...h){const f=this.transaction(u,r?"readwrite":"readonly");let g=f.store;return n&&(g=g.index(h.shift())),(await Promise.all([g[e](...h),r&&f.done]))[0]};return lp.set(t,o),o}$R(i=>({...i,get:(t,e,n)=>cT(t,e)||i.get(t,e,n),has:(t,e)=>!!cT(t,e)||i.has(t,e)}));class iI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(sI(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function sI(i){return i.getComponent()?.type==="VERSION"}const Np="@firebase/app",hT="0.14.6";const xs=new h1("@firebase/app"),rI="@firebase/app-compat",aI="@firebase/analytics-compat",oI="@firebase/analytics",lI="@firebase/app-check-compat",uI="@firebase/app-check",cI="@firebase/auth",hI="@firebase/auth-compat",fI="@firebase/database",dI="@firebase/data-connect",gI="@firebase/database-compat",mI="@firebase/functions",pI="@firebase/functions-compat",yI="@firebase/installations",_I="@firebase/installations-compat",bI="@firebase/messaging",vI="@firebase/messaging-compat",TI="@firebase/performance",EI="@firebase/performance-compat",SI="@firebase/remote-config",AI="@firebase/remote-config-compat",xI="@firebase/storage",wI="@firebase/storage-compat",RI="@firebase/firestore",II="@firebase/ai",CI="@firebase/firestore-compat",DI="firebase",MI="12.6.0";const Pp="[DEFAULT]",VI={[Np]:"fire-core",[rI]:"fire-core-compat",[oI]:"fire-analytics",[aI]:"fire-analytics-compat",[uI]:"fire-app-check",[lI]:"fire-app-check-compat",[cI]:"fire-auth",[hI]:"fire-auth-compat",[fI]:"fire-rtdb",[dI]:"fire-data-connect",[gI]:"fire-rtdb-compat",[mI]:"fire-fn",[pI]:"fire-fn-compat",[yI]:"fire-iid",[_I]:"fire-iid-compat",[bI]:"fire-fcm",[vI]:"fire-fcm-compat",[TI]:"fire-perf",[EI]:"fire-perf-compat",[SI]:"fire-rc",[AI]:"fire-rc-compat",[xI]:"fire-gcs",[wI]:"fire-gcs-compat",[RI]:"fire-fst",[CI]:"fire-fst-compat",[II]:"fire-vertex","fire-js":"fire-js",[DI]:"fire-js-all"};const td=new Map,OI=new Map,kp=new Map;function fT(i,t){try{i.container.addComponent(t)}catch(e){xs.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function ed(i){const t=i.name;if(kp.has(t))return xs.debug(`There were multiple attempts to register component ${t}.`),!1;kp.set(t,i);for(const e of td.values())fT(e,i);for(const e of OI.values())fT(e,i);return!0}function NI(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}function PI(i){return i==null?!1:i.settings!==void 0}const kI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new c1("app","Firebase",kI);class zI{constructor(t,e,n){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new dc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}const LI=MI;function g1(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const n={name:Pp,automaticDataCollectionEnabled:!0,...t},r=n.name;if(typeof r!="string"||!r)throw _r.create("bad-app-name",{appName:String(r)});if(e||(e=r1()),!e)throw _r.create("no-options");const o=td.get(r);if(o){if(Jf(e,o.options)&&Jf(n,o.config))return o;throw _r.create("duplicate-app",{appName:r})}const u=new jR(r);for(const f of kp.values())u.addComponent(f);const h=new zI(e,n,u);return td.set(r,h),h}function BI(i=Pp){const t=td.get(i);if(!t&&i===Pp&&r1())return g1();if(!t)throw _r.create("no-app",{appName:i});return t}function Wo(i,t,e){let n=VI[i]??i;e&&(n+=`-${e}`);const r=n.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const u=[`Unable to register library "${n}" with version "${t}":`];r&&u.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&o&&u.push("and"),o&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),xs.warn(u.join(" "));return}ed(new dc(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}const UI="firebase-heartbeat-database",jI=1,gc="firebase-heartbeat-store";let up=null;function m1(){return up||(up=tI(UI,jI,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(gc)}catch(e){console.warn(e)}}}}).catch(i=>{throw _r.create("idb-open",{originalErrorMessage:i.message})})),up}async function FI(i){try{const e=(await m1()).transaction(gc),n=await e.objectStore(gc).get(p1(i));return await e.done,n}catch(t){if(t instanceof vl)xs.warn(t.message);else{const e=_r.create("idb-get",{originalErrorMessage:t?.message});xs.warn(e.message)}}}async function dT(i,t){try{const n=(await m1()).transaction(gc,"readwrite");await n.objectStore(gc).put(t,p1(i)),await n.done}catch(e){if(e instanceof vl)xs.warn(e.message);else{const n=_r.create("idb-set",{originalErrorMessage:e?.message});xs.warn(n.message)}}}function p1(i){return`${i.name}!${i.options.appId}`}const HI=1024,qI=30;class GI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new YI(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=gT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(r=>r.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>qI){const r=QI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){xs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=gT(),{heartbeatsToSend:e,unsentEntries:n}=KI(this._heartbeatsCache.heartbeats),r=$f(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return xs.warn(t),""}}}function gT(){return new Date().toISOString().substring(0,10)}function KI(i,t=HI){const e=[];let n=i.slice();for(const r of i){const o=e.find(u=>u.agent===r.agent);if(o){if(o.dates.push(r.date),mT(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),mT(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class YI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return u1()?NR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await FI(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return dT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return dT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function mT(i){return $f(JSON.stringify({version:2,heartbeats:i})).length}function QI(i){if(i.length===0)return-1;let t=0,e=i[0].date;for(let n=1;n<i.length;n++)i[n].date<e&&(e=i[n].date,t=n);return t}function XI(i){ed(new dc("platform-logger",t=>new iI(t),"PRIVATE")),ed(new dc("heartbeat",t=>new GI(t),"PRIVATE")),Wo(Np,hT,i),Wo(Np,hT,"esm2020"),Wo("fire-js","")}XI("");var WI="firebase",$I="12.6.0";Wo(WI,$I,"app");var pT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var br,y1;(function(){var i;function t(R,x){function I(){}I.prototype=x.prototype,R.F=x.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(P,O,k){for(var V=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)V[Vt-2]=arguments[Vt];return x.prototype[O].apply(P,V)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(n,e),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,x,I){I||(I=0);const P=Array(16);if(typeof x=="string")for(var O=0;O<16;++O)P[O]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(O=0;O<16;++O)P[O]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=R.g[0],I=R.g[1],O=R.g[2];let k=R.g[3],V;V=x+(k^I&(O^k))+P[0]+3614090360&4294967295,x=I+(V<<7&4294967295|V>>>25),V=k+(O^x&(I^O))+P[1]+3905402710&4294967295,k=x+(V<<12&4294967295|V>>>20),V=O+(I^k&(x^I))+P[2]+606105819&4294967295,O=k+(V<<17&4294967295|V>>>15),V=I+(x^O&(k^x))+P[3]+3250441966&4294967295,I=O+(V<<22&4294967295|V>>>10),V=x+(k^I&(O^k))+P[4]+4118548399&4294967295,x=I+(V<<7&4294967295|V>>>25),V=k+(O^x&(I^O))+P[5]+1200080426&4294967295,k=x+(V<<12&4294967295|V>>>20),V=O+(I^k&(x^I))+P[6]+2821735955&4294967295,O=k+(V<<17&4294967295|V>>>15),V=I+(x^O&(k^x))+P[7]+4249261313&4294967295,I=O+(V<<22&4294967295|V>>>10),V=x+(k^I&(O^k))+P[8]+1770035416&4294967295,x=I+(V<<7&4294967295|V>>>25),V=k+(O^x&(I^O))+P[9]+2336552879&4294967295,k=x+(V<<12&4294967295|V>>>20),V=O+(I^k&(x^I))+P[10]+4294925233&4294967295,O=k+(V<<17&4294967295|V>>>15),V=I+(x^O&(k^x))+P[11]+2304563134&4294967295,I=O+(V<<22&4294967295|V>>>10),V=x+(k^I&(O^k))+P[12]+1804603682&4294967295,x=I+(V<<7&4294967295|V>>>25),V=k+(O^x&(I^O))+P[13]+4254626195&4294967295,k=x+(V<<12&4294967295|V>>>20),V=O+(I^k&(x^I))+P[14]+2792965006&4294967295,O=k+(V<<17&4294967295|V>>>15),V=I+(x^O&(k^x))+P[15]+1236535329&4294967295,I=O+(V<<22&4294967295|V>>>10),V=x+(O^k&(I^O))+P[1]+4129170786&4294967295,x=I+(V<<5&4294967295|V>>>27),V=k+(I^O&(x^I))+P[6]+3225465664&4294967295,k=x+(V<<9&4294967295|V>>>23),V=O+(x^I&(k^x))+P[11]+643717713&4294967295,O=k+(V<<14&4294967295|V>>>18),V=I+(k^x&(O^k))+P[0]+3921069994&4294967295,I=O+(V<<20&4294967295|V>>>12),V=x+(O^k&(I^O))+P[5]+3593408605&4294967295,x=I+(V<<5&4294967295|V>>>27),V=k+(I^O&(x^I))+P[10]+38016083&4294967295,k=x+(V<<9&4294967295|V>>>23),V=O+(x^I&(k^x))+P[15]+3634488961&4294967295,O=k+(V<<14&4294967295|V>>>18),V=I+(k^x&(O^k))+P[4]+3889429448&4294967295,I=O+(V<<20&4294967295|V>>>12),V=x+(O^k&(I^O))+P[9]+568446438&4294967295,x=I+(V<<5&4294967295|V>>>27),V=k+(I^O&(x^I))+P[14]+3275163606&4294967295,k=x+(V<<9&4294967295|V>>>23),V=O+(x^I&(k^x))+P[3]+4107603335&4294967295,O=k+(V<<14&4294967295|V>>>18),V=I+(k^x&(O^k))+P[8]+1163531501&4294967295,I=O+(V<<20&4294967295|V>>>12),V=x+(O^k&(I^O))+P[13]+2850285829&4294967295,x=I+(V<<5&4294967295|V>>>27),V=k+(I^O&(x^I))+P[2]+4243563512&4294967295,k=x+(V<<9&4294967295|V>>>23),V=O+(x^I&(k^x))+P[7]+1735328473&4294967295,O=k+(V<<14&4294967295|V>>>18),V=I+(k^x&(O^k))+P[12]+2368359562&4294967295,I=O+(V<<20&4294967295|V>>>12),V=x+(I^O^k)+P[5]+4294588738&4294967295,x=I+(V<<4&4294967295|V>>>28),V=k+(x^I^O)+P[8]+2272392833&4294967295,k=x+(V<<11&4294967295|V>>>21),V=O+(k^x^I)+P[11]+1839030562&4294967295,O=k+(V<<16&4294967295|V>>>16),V=I+(O^k^x)+P[14]+4259657740&4294967295,I=O+(V<<23&4294967295|V>>>9),V=x+(I^O^k)+P[1]+2763975236&4294967295,x=I+(V<<4&4294967295|V>>>28),V=k+(x^I^O)+P[4]+1272893353&4294967295,k=x+(V<<11&4294967295|V>>>21),V=O+(k^x^I)+P[7]+4139469664&4294967295,O=k+(V<<16&4294967295|V>>>16),V=I+(O^k^x)+P[10]+3200236656&4294967295,I=O+(V<<23&4294967295|V>>>9),V=x+(I^O^k)+P[13]+681279174&4294967295,x=I+(V<<4&4294967295|V>>>28),V=k+(x^I^O)+P[0]+3936430074&4294967295,k=x+(V<<11&4294967295|V>>>21),V=O+(k^x^I)+P[3]+3572445317&4294967295,O=k+(V<<16&4294967295|V>>>16),V=I+(O^k^x)+P[6]+76029189&4294967295,I=O+(V<<23&4294967295|V>>>9),V=x+(I^O^k)+P[9]+3654602809&4294967295,x=I+(V<<4&4294967295|V>>>28),V=k+(x^I^O)+P[12]+3873151461&4294967295,k=x+(V<<11&4294967295|V>>>21),V=O+(k^x^I)+P[15]+530742520&4294967295,O=k+(V<<16&4294967295|V>>>16),V=I+(O^k^x)+P[2]+3299628645&4294967295,I=O+(V<<23&4294967295|V>>>9),V=x+(O^(I|~k))+P[0]+4096336452&4294967295,x=I+(V<<6&4294967295|V>>>26),V=k+(I^(x|~O))+P[7]+1126891415&4294967295,k=x+(V<<10&4294967295|V>>>22),V=O+(x^(k|~I))+P[14]+2878612391&4294967295,O=k+(V<<15&4294967295|V>>>17),V=I+(k^(O|~x))+P[5]+4237533241&4294967295,I=O+(V<<21&4294967295|V>>>11),V=x+(O^(I|~k))+P[12]+1700485571&4294967295,x=I+(V<<6&4294967295|V>>>26),V=k+(I^(x|~O))+P[3]+2399980690&4294967295,k=x+(V<<10&4294967295|V>>>22),V=O+(x^(k|~I))+P[10]+4293915773&4294967295,O=k+(V<<15&4294967295|V>>>17),V=I+(k^(O|~x))+P[1]+2240044497&4294967295,I=O+(V<<21&4294967295|V>>>11),V=x+(O^(I|~k))+P[8]+1873313359&4294967295,x=I+(V<<6&4294967295|V>>>26),V=k+(I^(x|~O))+P[15]+4264355552&4294967295,k=x+(V<<10&4294967295|V>>>22),V=O+(x^(k|~I))+P[6]+2734768916&4294967295,O=k+(V<<15&4294967295|V>>>17),V=I+(k^(O|~x))+P[13]+1309151649&4294967295,I=O+(V<<21&4294967295|V>>>11),V=x+(O^(I|~k))+P[4]+4149444226&4294967295,x=I+(V<<6&4294967295|V>>>26),V=k+(I^(x|~O))+P[11]+3174756917&4294967295,k=x+(V<<10&4294967295|V>>>22),V=O+(x^(k|~I))+P[2]+718787259&4294967295,O=k+(V<<15&4294967295|V>>>17),V=I+(k^(O|~x))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+x&4294967295,R.g[1]=R.g[1]+(O+(V<<21&4294967295|V>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+k&4294967295}n.prototype.v=function(R,x){x===void 0&&(x=R.length);const I=x-this.blockSize,P=this.C;let O=this.h,k=0;for(;k<x;){if(O==0)for(;k<=I;)r(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<x;)if(P[O++]=R.charCodeAt(k++),O==this.blockSize){r(this,P),O=0;break}}else for(;k<x;)if(P[O++]=R[k++],O==this.blockSize){r(this,P),O=0;break}}this.h=O,this.o+=x},n.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var x=1;x<R.length-8;++x)R[x]=0;x=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=x&255,x/=256;for(this.v(R),R=Array(16),x=0,I=0;I<4;++I)for(let P=0;P<32;P+=8)R[x++]=this.g[I]>>>P&255;return R};function o(R,x){var I=h;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=x(R)}function u(R,x){this.h=x;const I=[];let P=!0;for(let O=R.length-1;O>=0;O--){const k=R[O]|0;P&&k==x||(I[O]=k,P=!1)}this.g=I}var h={};function f(R){return-128<=R&&R<128?o(R,function(x){return new u([x|0],x<0?-1:0)}):new u([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return _;if(R<0)return M(g(-R));const x=[];let I=1;for(let P=0;R>=I;P++)x[P]=R/I|0,I*=4294967296;return new u(x,0)}function y(R,x){if(R.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(R.charAt(0)=="-")return M(y(R.substring(1),x));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(x,8));let P=_;for(let k=0;k<R.length;k+=8){var O=Math.min(8,R.length-k);const V=parseInt(R.substring(k,k+O),x);O<8?(O=g(Math.pow(x,O)),P=P.j(O).add(g(V))):(P=P.j(I),P=P.add(g(V)))}return P}var _=f(0),T=f(1),S=f(16777216);i=u.prototype,i.m=function(){if(D(this))return-M(this).m();let R=0,x=1;for(let I=0;I<this.g.length;I++){const P=this.i(I);R+=(P>=0?P:4294967296+P)*x,x*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C(this))return"0";if(D(this))return"-"+M(this).toString(R);const x=g(Math.pow(R,6));var I=this;let P="";for(;;){const O=Z(I,x).g;I=U(I,O.j(x));let k=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=O,C(I))return k+P;for(;k.length<6;)k="0"+k;P=k+P}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function C(R){if(R.h!=0)return!1;for(let x=0;x<R.g.length;x++)if(R.g[x]!=0)return!1;return!0}function D(R){return R.h==-1}i.l=function(R){return R=U(this,R),D(R)?-1:C(R)?0:1};function M(R){const x=R.g.length,I=[];for(let P=0;P<x;P++)I[P]=~R.g[P];return new u(I,~R.h).add(T)}i.abs=function(){return D(this)?M(this):this},i.add=function(R){const x=Math.max(this.g.length,R.g.length),I=[];let P=0;for(let O=0;O<=x;O++){let k=P+(this.i(O)&65535)+(R.i(O)&65535),V=(k>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);P=V>>>16,k&=65535,V&=65535,I[O]=V<<16|k}return new u(I,I[I.length-1]&-2147483648?-1:0)};function U(R,x){return R.add(M(x))}i.j=function(R){if(C(this)||C(R))return _;if(D(this))return D(R)?M(this).j(M(R)):M(M(this).j(R));if(D(R))return M(this.j(M(R)));if(this.l(S)<0&&R.l(S)<0)return g(this.m()*R.m());const x=this.g.length+R.g.length,I=[];for(var P=0;P<2*x;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(let O=0;O<R.g.length;O++){const k=this.i(P)>>>16,V=this.i(P)&65535,Vt=R.i(O)>>>16,xt=R.i(O)&65535;I[2*P+2*O]+=V*xt,G(I,2*P+2*O),I[2*P+2*O+1]+=k*xt,G(I,2*P+2*O+1),I[2*P+2*O+1]+=V*Vt,G(I,2*P+2*O+1),I[2*P+2*O+2]+=k*Vt,G(I,2*P+2*O+2)}for(R=0;R<x;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=x;R<2*x;R++)I[R]=0;return new u(I,0)};function G(R,x){for(;(R[x]&65535)!=R[x];)R[x+1]+=R[x]>>>16,R[x]&=65535,x++}function Q(R,x){this.g=R,this.h=x}function Z(R,x){if(C(x))throw Error("division by zero");if(C(R))return new Q(_,_);if(D(R))return x=Z(M(R),x),new Q(M(x.g),M(x.h));if(D(x))return x=Z(R,M(x)),new Q(M(x.g),x.h);if(R.g.length>30){if(D(R)||D(x))throw Error("slowDivide_ only works with positive integers.");for(var I=T,P=x;P.l(R)<=0;)I=$(I),P=$(P);var O=it(I,1),k=it(P,1);for(P=it(P,2),I=it(I,2);!C(P);){var V=k.add(P);V.l(R)<=0&&(O=O.add(I),k=V),P=it(P,1),I=it(I,1)}return x=U(R,O.j(x)),new Q(O,x)}for(O=_;R.l(x)>=0;){for(I=Math.max(1,Math.floor(R.m()/x.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),k=g(I),V=k.j(x);D(V)||V.l(R)>0;)I-=P,k=g(I),V=k.j(x);C(k)&&(k=T),O=O.add(k),R=U(R,V)}return new Q(O,R)}i.B=function(R){return Z(this,R).h},i.and=function(R){const x=Math.max(this.g.length,R.g.length),I=[];for(let P=0;P<x;P++)I[P]=this.i(P)&R.i(P);return new u(I,this.h&R.h)},i.or=function(R){const x=Math.max(this.g.length,R.g.length),I=[];for(let P=0;P<x;P++)I[P]=this.i(P)|R.i(P);return new u(I,this.h|R.h)},i.xor=function(R){const x=Math.max(this.g.length,R.g.length),I=[];for(let P=0;P<x;P++)I[P]=this.i(P)^R.i(P);return new u(I,this.h^R.h)};function $(R){const x=R.g.length+1,I=[];for(let P=0;P<x;P++)I[P]=R.i(P)<<1|R.i(P-1)>>>31;return new u(I,R.h)}function it(R,x){const I=x>>5;x%=32;const P=R.g.length-I,O=[];for(let k=0;k<P;k++)O[k]=x>0?R.i(k+I)>>>x|R.i(k+I+1)<<32-x:R.i(k+I);return new u(O,R.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,y1=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=y,br=u}).apply(typeof pT<"u"?pT:typeof self<"u"?self:typeof window<"u"?window:{});var yf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _1,Ku,b1,kf,zp,v1,T1,E1;(function(){var i,t=Object.defineProperty;function e(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof yf=="object"&&yf];for(var b=0;b<d.length;++b){var E=d[b];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var n=e(this);function r(d,b){if(b)t:{var E=n;d=d.split(".");for(var w=0;w<d.length-1;w++){var F=d[w];if(!(F in E))break t;E=E[F]}d=d[d.length-1],w=E[d],b=b(w),b!=w&&b!=null&&t(E,d,{configurable:!0,writable:!0,value:b})}}r("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(d){return d||function(b){var E=[],w;for(w in b)Object.prototype.hasOwnProperty.call(b,w)&&E.push([w,b[w]]);return E}});var o=o||{},u=this||self;function h(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function f(d,b,E){return d.call.apply(d.bind,arguments)}function g(d,b,E){return g=f,g.apply(null,arguments)}function y(d,b){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),d.apply(this,w)}}function _(d,b){function E(){}E.prototype=b.prototype,d.Z=b.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(w,F,X){for(var lt=Array(arguments.length-2),It=2;It<arguments.length;It++)lt[It-2]=arguments[It];return b.prototype[F].apply(w,lt)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function S(d){const b=d.length;if(b>0){const E=Array(b);for(let w=0;w<b;w++)E[w]=d[w];return E}return[]}function C(d,b){for(let w=1;w<arguments.length;w++){const F=arguments[w];var E=typeof F;if(E=E!="object"?E:F?Array.isArray(F)?"array":E:"null",E=="array"||E=="object"&&typeof F.length=="number"){E=d.length||0;const X=F.length||0;d.length=E+X;for(let lt=0;lt<X;lt++)d[E+lt]=F[lt]}else d.push(F)}}class D{constructor(b,E){this.i=b,this.j=E,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function M(d){u.setTimeout(()=>{throw d},0)}function U(){var d=R;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class G{constructor(){this.h=this.g=null}add(b,E){const w=Q.get();w.set(b,E),this.h?this.h.next=w:this.g=w,this.h=w}}var Q=new D(()=>new Z,d=>d.reset());class Z{constructor(){this.next=this.g=this.h=null}set(b,E){this.h=b,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let $,it=!1,R=new G,x=()=>{const d=Promise.resolve(void 0);$=()=>{d.then(I)}};function I(){for(var d;d=U();){try{d.h.call(d.g)}catch(E){M(E)}var b=Q;b.j(d),b.h<100&&(b.h++,d.next=b.g,b.g=d)}it=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};u.addEventListener("test",E,b),u.removeEventListener("test",E,b)}catch{}return d})();function V(d){return/^[\s\xa0]*$/.test(d)}function Vt(d,b){O.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,b)}_(Vt,O),Vt.prototype.init=function(d,b){const E=this.type=d.type,w=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget,b||(E=="mouseover"?b=d.fromElement:E=="mouseout"&&(b=d.toElement)),this.relatedTarget=b,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Vt.Z.h.call(this)},Vt.prototype.h=function(){Vt.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var xt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ot(d,b,E,w,F){this.listener=d,this.proxy=null,this.src=b,this.type=E,this.capture=!!w,this.ha=F,this.key=++Y,this.da=this.fa=!1}function gt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function St(d,b,E){for(const w in d)b.call(E,d[w],w,d)}function Pt(d,b){for(const E in d)b.call(void 0,d[E],E,d)}function z(d){const b={};for(const E in d)b[E]=d[E];return b}const et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ct(d,b){let E,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(E in w)d[E]=w[E];for(let X=0;X<et.length;X++)E=et[X],Object.prototype.hasOwnProperty.call(w,E)&&(d[E]=w[E])}}function ft(d){this.src=d,this.g={},this.h=0}ft.prototype.add=function(d,b,E,w,F){const X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);const lt=At(d,b,w,F);return lt>-1?(b=d[lt],E||(b.fa=!1)):(b=new ot(b,this.src,X,!!w,F),b.fa=E,d.push(b)),b};function Tt(d,b){const E=b.type;if(E in d.g){var w=d.g[E],F=Array.prototype.indexOf.call(w,b,void 0),X;(X=F>=0)&&Array.prototype.splice.call(w,F,1),X&&(gt(b),d.g[E].length==0&&(delete d.g[E],d.h--))}}function At(d,b,E,w){for(let F=0;F<d.length;++F){const X=d[F];if(!X.da&&X.listener==b&&X.capture==!!E&&X.ha==w)return F}return-1}var Ut="closure_lm_"+(Math.random()*1e6|0),Fe={};function me(d,b,E,w,F){if(Array.isArray(b)){for(let X=0;X<b.length;X++)me(d,b[X],E,w,F);return null}return E=Vl(E),d&&d[xt]?d.J(b,E,h(w)?!!w.capture:!1,F):Nr(d,b,E,!1,w,F)}function Nr(d,b,E,w,F,X){if(!b)throw Error("Invalid event type");const lt=h(F)?!!F.capture:!!F;let It=Pr(d);if(It||(d[Ut]=It=new ft(d)),E=It.add(b,E,w,lt,X),E.proxy)return E;if(w=Ka(),E.proxy=w,w.src=d,w.listener=E,d.addEventListener)k||(F=lt),F===void 0&&(F=!1),d.addEventListener(b.toString(),w,F);else if(d.attachEvent)d.attachEvent(Ti(b.toString()),w);else if(d.addListener&&d.removeListener)d.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ka(){function d(E){return b.call(d.src,d.listener,E)}const b=Dl;return d}function Ya(d,b,E,w,F){if(Array.isArray(b))for(var X=0;X<b.length;X++)Ya(d,b[X],E,w,F);else w=h(w)?!!w.capture:!!w,E=Vl(E),d&&d[xt]?(d=d.i,X=String(b).toString(),X in d.g&&(b=d.g[X],E=At(b,E,w,F),E>-1&&(gt(b[E]),Array.prototype.splice.call(b,E,1),b.length==0&&(delete d.g[X],d.h--)))):d&&(d=Pr(d))&&(b=d.g[b.toString()],d=-1,b&&(d=At(b,E,w,F)),(E=d>-1?b[d]:null)&&Qa(E))}function Qa(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[xt])Tt(b.i,d);else{var E=d.type,w=d.proxy;b.removeEventListener?b.removeEventListener(E,w,d.capture):b.detachEvent?b.detachEvent(Ti(E),w):b.addListener&&b.removeListener&&b.removeListener(w),(E=Pr(b))?(Tt(E,d),E.h==0&&(E.src=null,b[Ut]=null)):gt(d)}}}function Ti(d){return d in Fe?Fe[d]:Fe[d]="on"+d}function Dl(d,b){if(d.da)d=!0;else{b=new Vt(b,this);const E=d.listener,w=d.ha||d.src;d.fa&&Qa(d),d=E.call(w,b)}return d}function Pr(d){return d=d[Ut],d instanceof ft?d:null}var Ml="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vl(d){return typeof d=="function"?d:(d[Ml]||(d[Ml]=function(b){return d.handleEvent(b)}),d[Ml])}function De(){P.call(this),this.i=new ft(this),this.M=this,this.G=null}_(De,P),De.prototype[xt]=!0,De.prototype.removeEventListener=function(d,b,E,w){Ya(this,d,b,E,w)};function He(d,b){var E,w=d.G;if(w)for(E=[];w;w=w.G)E.push(w);if(d=d.M,w=b.type||b,typeof b=="string")b=new O(b,d);else if(b instanceof O)b.target=b.target||d;else{var F=b;b=new O(w,d),ct(b,F)}F=!0;let X,lt;if(E)for(lt=E.length-1;lt>=0;lt--)X=b.g=E[lt],F=Cs(X,w,!0,b)&&F;if(X=b.g=d,F=Cs(X,w,!0,b)&&F,F=Cs(X,w,!1,b)&&F,E)for(lt=0;lt<E.length;lt++)X=b.g=E[lt],F=Cs(X,w,!1,b)&&F}De.prototype.N=function(){if(De.Z.N.call(this),this.i){var d=this.i;for(const b in d.g){const E=d.g[b];for(let w=0;w<E.length;w++)gt(E[w]);delete d.g[b],d.h--}}this.G=null},De.prototype.J=function(d,b,E,w){return this.i.add(String(d),b,!1,E,w)},De.prototype.K=function(d,b,E,w){return this.i.add(String(d),b,!0,E,w)};function Cs(d,b,E,w){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();let F=!0;for(let X=0;X<b.length;++X){const lt=b[X];if(lt&&!lt.da&&lt.capture==E){const It=lt.listener,Ae=lt.ha||lt.src;lt.fa&&Tt(d.i,lt),F=It.call(Ae,w)!==!1&&F}}return F&&!w.defaultPrevented}function ng(d,b){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=g(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:u.setTimeout(d,b||0)}function jc(d){d.g=ng(()=>{d.g=null,d.i&&(d.i=!1,jc(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class fn extends P{constructor(b,E){super(),this.m=b,this.l=E,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:jc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(d){P.call(this),this.h=d,this.g={}}_(kr,P);var Ol=[];function Nl(d){St(d.g,function(b,E){this.g.hasOwnProperty(E)&&Qa(b)},d),d.g={}}kr.prototype.N=function(){kr.Z.N.call(this),Nl(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ds=u.JSON.stringify,ig=u.JSON.parse,Fc=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function Hc(){}function qc(){}var oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tn(){O.call(this,"d")}_(tn,O);function qn(){O.call(this,"c")}_(qn,O);var Se={},Gc=null;function Xa(){return Gc=Gc||new De}Se.Ia="serverreachability";function Kc(d){O.call(this,Se.Ia,d)}_(Kc,O);function Ei(d){const b=Xa();He(b,new Kc(b))}Se.STAT_EVENT="statevent";function zr(d,b){O.call(this,Se.STAT_EVENT,d),this.stat=b}_(zr,O);function Me(d){const b=Xa();He(b,new zr(b,d))}Se.Ja="timingevent";function Si(d,b){O.call(this,Se.Ja,d),this.size=b}_(Si,O);function Ai(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},b)}function li(){this.g=!0}li.prototype.ua=function(){this.g=!1};function sg(d,b,E,w,F,X){d.info(function(){if(d.g)if(X){var lt="",It=X.split("&");for(let Qt=0;Qt<It.length;Qt++){var Ae=It[Qt].split("=");if(Ae.length>1){const pe=Ae[0];Ae=Ae[1];const Qn=pe.split("_");lt=Qn.length>=2&&Qn[1]=="type"?lt+(pe+"="+Ae+"&"):lt+(pe+"=redacted&")}}}else lt=null;else lt=X;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+b+`
`+E+`
`+lt})}function Yc(d,b,E,w,F,X,lt){d.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+b+`
`+E+`
`+X+" "+lt})}function xi(d,b,E,w){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+rg(d,E)+(w?" "+w:"")})}function Lr(d,b){d.info(function(){return"TIMEOUT: "+b})}li.prototype.info=function(){};function rg(d,b){if(!d.g)return b;if(!b)return null;try{const X=JSON.parse(b);if(X){for(d=0;d<X.length;d++)if(Array.isArray(X[d])){var E=X[d];if(!(E.length<2)){var w=E[1];if(Array.isArray(w)&&!(w.length<1)){var F=w[0];if(F!="noop"&&F!="stop"&&F!="close")for(let lt=1;lt<w.length;lt++)w[lt]=""}}}}return Ds(X)}catch{return b}}var Br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kl;function Ur(){}_(Ur,Hc),Ur.prototype.g=function(){return new XMLHttpRequest},kl=new Ur;function ts(d){return encodeURIComponent(String(d))}function Qc(d){var b=1;d=d.split(":");const E=[];for(;b>0&&d.length;)E.push(d.shift()),b--;return d.length&&E.push(d.join(":")),E}function ui(d,b,E,w){this.j=d,this.i=b,this.l=E,this.S=w||1,this.V=new kr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ci}function ci(){this.i=null,this.g="",this.h=!1}var Ve={},Qe={};function wi(d,b,E){d.M=1,d.A=jr(Ne(b)),d.u=E,d.R=!0,Wa(d,null)}function Wa(d,b){d.F=Date.now(),Ri(d),d.B=Ne(d.A);var E=d.B,w=d.S;Array.isArray(w)||(w=[String(w)]),to(E.i,"t",w),d.C=0,E=d.j.L,d.h=new ci,d.g=uh(d.j,E?b:null,!d.u),d.P>0&&(d.O=new fn(g(d.Y,d,d.g),d.P)),b=d.V,E=d.g,w=d.ba;var F="readystatechange";Array.isArray(F)||(F&&(Ol[0]=F.toString()),F=Ol);for(let X=0;X<F.length;X++){const lt=me(E,F[X],w||b.handleEvent,!1,b.h||b);if(!lt)break;b.g[lt.key]=lt}b=d.J?z(d.J):{},d.u?(d.v||(d.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,b)):(d.v="GET",d.g.ea(d.B,d.v,null,b)),Ei(),sg(d.i,d.v,d.B,d.l,d.S,d.u)}ui.prototype.ba=function(d){d=d.target;const b=this.O;b&&di(d)==3?b.j():this.Y(d)},ui.prototype.Y=function(d){try{if(d==this.g)t:{const It=di(this.g),Ae=this.g.ya(),Qt=this.g.ca();if(!(It<3)&&(It!=3||this.g&&(this.h.h||this.g.la()||en(this.g)))){this.K||It!=4||Ae==7||(Ae==8||Qt<=0?Ei(3):Ei(2)),Ii(this);var b=this.g.ca();this.X=b;var E=ag(this);if(this.o=b==200,Yc(this.i,this.v,this.B,this.l,this.S,It,b),this.o){if(this.U&&!this.L){e:{if(this.g){var w,F=this.g;if((w=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(w)){var X=w;break e}}X=null}if(d=X)xi(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ci(this,d);else{this.o=!1,this.m=3,Me(12),Dn(this),Gn(this);break t}}if(this.R){d=!0;let pe;for(;!this.K&&this.C<E.length;)if(pe=Wc(this,E),pe==Qe){It==4&&(this.m=4,Me(14),d=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(pe==Ve){this.m=4,Me(15),xi(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else xi(this.i,this.l,pe,null),Ci(this,pe);if(Xc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||E.length!=0||this.h.h||(this.m=1,Me(16),d=!1),this.o=this.o&&d,!d)xi(this.i,this.l,E,"[Invalid Chunked Response]"),Dn(this),Gn(this);else if(E.length>0&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.aa&&!lt.P&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),$l(lt),lt.P=!0,Me(11))}}else xi(this.i,this.l,E,null),Ci(this,E);It==4&&Dn(this),this.o&&!this.K&&(It==4?rh(this.j,this):(this.o=!1,Ri(this)))}else ns(this.g),b==400&&E.indexOf("Unknown SID")>0?(this.m=3,Me(12)):(this.m=0,Me(13)),Dn(this),Gn(this)}}}catch{}finally{}};function ag(d){if(!Xc(d))return d.g.la();const b=en(d.g);if(b==="")return"";let E="";const w=b.length,F=di(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Dn(d),Gn(d),"";d.h.i=new u.TextDecoder}for(let X=0;X<w;X++)d.h.h=!0,E+=d.h.i.decode(b[X],{stream:!(F&&X==w-1)});return b.length=0,d.h.g+=E,d.C=0,d.h.g}function Xc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Wc(d,b){var E=d.C,w=b.indexOf(`
`,E);return w==-1?Qe:(E=Number(b.substring(E,w)),isNaN(E)?Ve:(w+=1,w+E>b.length?Qe:(b=b.slice(w,w+E),d.C=w+E,b)))}ui.prototype.cancel=function(){this.K=!0,Dn(this)};function Ri(d){d.T=Date.now()+d.H,$a(d,d.H)}function $a(d,b){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ai(g(d.aa,d),b)}function Ii(d){d.D&&(u.clearTimeout(d.D),d.D=null)}ui.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Lr(this.i,this.B),this.M!=2&&(Ei(),Me(17)),Dn(this),this.m=2,Gn(this)):$a(this,this.T-d)};function Gn(d){d.j.I==0||d.K||rh(d.j,d)}function Dn(d){Ii(d);var b=d.O;b&&typeof b.dispose=="function"&&b.dispose(),d.O=null,Nl(d.V),d.g&&(b=d.g,d.g=null,b.abort(),b.dispose())}function Ci(d,b){try{var E=d.j;if(E.I!=0&&(E.g==d||Mi(E.h,d))){if(!d.L&&Mi(E.h,d)&&E.I==3){try{var w=E.Ba.g.parse(b)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){t:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)ro(E),Ls(E);else break t;Qr(E),Me(18)}}else E.xa=F[1],0<E.xa-E.K&&F[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ai(g(E.Va,E),6e3));Di(E.h)<=1&&E.ta&&(E.ta=void 0)}else zi(E,11)}else if((d.L||E.g==d)&&ro(E),!V(b))for(F=E.Ba.g.parse(b),b=0;b<F.length;b++){let Qt=F[b];const pe=Qt[0];if(!(pe<=E.K))if(E.K=pe,Qt=Qt[1],E.I==2)if(Qt[0]=="c"){E.M=Qt[1],E.ba=Qt[2];const Qn=Qt[3];Qn!=null&&(E.ka=Qn,E.j.info("VER="+E.ka));const Li=Qt[4];Li!=null&&(E.za=Li,E.j.info("SVER="+E.za));const gi=Qt[5];gi!=null&&typeof gi=="number"&&gi>0&&(w=1.5*gi,E.O=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const mi=d.g;if(mi){const Xr=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xr){var X=w.h;X.g||Xr.indexOf("spdy")==-1&&Xr.indexOf("quic")==-1&&Xr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Bl(X,X.h),X.h=null))}if(w.G){const ao=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&(w.wa=ao,Zt(w.J,w.G,ao))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),w=E;var lt=d;if(w.na=lh(w,w.L?w.ba:null,w.W),lt.L){Ul(w.h,lt);var It=lt,Ae=w.O;Ae&&(It.H=Ae),It.D&&(Ii(It),Ri(It)),w.g=lt}else ih(w);E.i.length>0&&ki(E)}else Qt[0]!="stop"&&Qt[0]!="close"||zi(E,7);else E.I==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?zi(E,7):Xl(E):Qt[0]!="noop"&&E.l&&E.l.qa(Qt),E.A=0)}}Ei(4)}catch{}}var Oe=class{constructor(d,b){this.g=d,this.map=b}};function zl(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ll(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Di(d){return d.h?1:d.g?d.g.size:0}function Mi(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function Bl(d,b){d.g?d.g.add(b):d.h=b}function Ul(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}zl.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function jl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const E of d.g.values())b=b.concat(E.G);return b}return S(d.i)}var $c=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Za(d,b){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const w=d[E].indexOf("=");let F,X=null;w>=0?(F=d[E].substring(0,w),X=d[E].substring(w+1)):F=d[E],b(F,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Mn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;d instanceof Mn?(this.l=d.l,Xe(this,d.j),this.o=d.o,this.g=d.g,Ms(this,d.u),this.h=d.h,Fl(this,eh(d.i)),this.m=d.m):d&&(b=String(d).match($c))?(this.l=!1,Xe(this,b[1]||"",!0),this.o=Vi(b[2]||""),this.g=Vi(b[3]||"",!0),Ms(this,b[4]),this.h=Vi(b[5]||"",!0),Fl(this,b[6]||"",!0),this.m=Vi(b[7]||"")):(this.l=!1,this.i=new Os(null,this.l))}Mn.prototype.toString=function(){const d=[];var b=this.j;b&&d.push(Fr(b,Ja,!0),":");var E=this.g;return(E||b=="file")&&(d.push("//"),(b=this.o)&&d.push(Fr(b,Ja,!0),"@"),d.push(ts(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Fr(E,E.charAt(0)=="/"?Hl:Zc,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Fr(E,Jc)),d.join("")},Mn.prototype.resolve=function(d){const b=Ne(this);let E=!!d.j;E?Xe(b,d.j):E=!!d.o,E?b.o=d.o:E=!!d.g,E?b.g=d.g:E=d.u!=null;var w=d.h;if(E)Ms(b,d.u);else if(E=!!d.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var F=b.h.lastIndexOf("/");F!=-1&&(w=b.h.slice(0,F+1)+w)}if(F=w,F==".."||F==".")w="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){w=F.lastIndexOf("/",0)==0,F=F.split("/");const X=[];for(let lt=0;lt<F.length;){const It=F[lt++];It=="."?w&&lt==F.length&&X.push(""):It==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),w&&lt==F.length&&X.push("")):(X.push(It),w=!0)}w=X.join("/")}else w=F}return E?b.h=w:E=d.i.toString()!=="",E?Fl(b,eh(d.i)):E=!!d.m,E&&(b.m=d.m),b};function Ne(d){return new Mn(d)}function Xe(d,b,E){d.j=E?Vi(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function Ms(d,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);d.u=b}else d.u=null}function Fl(d,b,E){b instanceof Os?(d.i=b,eo(d.i,d.l)):(E||(b=Fr(b,Vs)),d.i=new Os(b,d.l))}function Zt(d,b,E){d.i.set(b,E)}function jr(d){return Zt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Vi(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Fr(d,b,E){return typeof d=="string"?(d=encodeURI(d).replace(b,pn),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function pn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ja=/[#\/\?@]/g,Zc=/[#\?:]/g,Hl=/[#\?]/g,Vs=/[#\?@]/g,Jc=/#/g;function Os(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function yn(d){d.g||(d.g=new Map,d.h=0,d.i&&Za(d.i,function(b,E){d.add(decodeURIComponent(b.replace(/\+/g," ")),E)}))}i=Os.prototype,i.add=function(d,b){yn(this),this.i=null,d=Ns(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(b),this.h+=1,this};function th(d,b){yn(d),b=Ns(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function ql(d,b){return yn(d),b=Ns(d,b),d.g.has(b)}i.forEach=function(d,b){yn(this),this.g.forEach(function(E,w){E.forEach(function(F){d.call(b,F,w,this)},this)},this)};function Gl(d,b){yn(d);let E=[];if(typeof b=="string")ql(d,b)&&(E=E.concat(d.g.get(Ns(d,b))));else for(d=Array.from(d.g.values()),b=0;b<d.length;b++)E=E.concat(d[b]);return E}i.set=function(d,b){return yn(this),this.i=null,d=Ns(this,d),ql(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},i.get=function(d,b){return d?(d=Gl(this,d),d.length>0?String(d[0]):b):b};function to(d,b,E){th(d,b),E.length>0&&(d.i=null,d.g.set(Ns(d,b),S(E)),d.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(let w=0;w<b.length;w++){var E=b[w];const F=ts(E);E=Gl(this,E);for(let X=0;X<E.length;X++){let lt=F;E[X]!==""&&(lt+="="+ts(E[X])),d.push(lt)}}return this.i=d.join("&")};function eh(d){const b=new Os;return b.i=d.i,d.g&&(b.g=new Map(d.g),b.h=d.h),b}function Ns(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function eo(d,b){b&&!d.j&&(yn(d),d.i=null,d.g.forEach(function(E,w){const F=w.toLowerCase();w!=F&&(th(this,w),to(this,F,E))},d)),d.j=b}function hi(d,b){const E=new li;if(u.Image){const w=new Image;w.onload=y(Kn,E,"TestLoadImage: loaded",!0,b,w),w.onerror=y(Kn,E,"TestLoadImage: error",!1,b,w),w.onabort=y(Kn,E,"TestLoadImage: abort",!1,b,w),w.ontimeout=y(Kn,E,"TestLoadImage: timeout",!1,b,w),u.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=d}else b(!1)}function Kl(d,b){const E=new li,w=new AbortController,F=setTimeout(()=>{w.abort(),Kn(E,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:w.signal}).then(X=>{clearTimeout(F),X.ok?Kn(E,"TestPingServer: ok",!0,b):Kn(E,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(F),Kn(E,"TestPingServer: error",!1,b)})}function Kn(d,b,E,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(E)}catch{}}function Ps(){this.g=new Fc}function Oi(d){this.i=d.Sb||null,this.h=d.ab||!1}_(Oi,Hc),Oi.prototype.g=function(){return new Hr(this.i,this.h)};function Hr(d,b){De.call(this),this.H=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Hr,De),i=Hr.prototype,i.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=b,this.readyState=1,fi(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(b.body=d),(this.H||u).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ks(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;no(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function no(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?ks(this):fi(this),this.readyState==3&&no(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,ks(this))},i.Na=function(d){this.g&&(this.response=d,ks(this))},i.ga=function(){this.g&&ks(this)};function ks(d){d.readyState=4,d.l=null,d.j=null,d.B=null,fi(d)}i.setRequestHeader=function(d,b){this.A.append(d,b)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var E=b.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=b.next();return d.join(`\r
`)};function fi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Yn(d){let b="";return St(d,function(E,w){b+=w,b+=":",b+=E,b+=`\r
`}),b}function qr(d,b,E){t:{for(w in E){var w=!1;break t}w=!0}w||(E=Yn(E),typeof d=="string"?E!=null&&ts(E):Zt(d,b,E))}function se(d){De.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(se,De);var Ni=/^https?$/i,Yl=["POST","PUT"];i=se.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,b,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kl.g(),this.g.onreadystatechange=T(g(this.Ca,this));try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(X){Gr(this,X);return}if(d=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)E.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const X of w.keys())E.set(X,w.get(X));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),F=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(Yl,b,void 0)>=0)||w||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,lt]of E)this.g.setRequestHeader(X,lt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(X){Gr(this,X)}};function Gr(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.o=5,Ql(d),es(d)}function Ql(d){d.A||(d.A=!0,He(d,"complete"),He(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,He(this,"complete"),He(this,"abort"),es(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),es(this,!0)),se.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Kr(this):this.Xa())},i.Xa=function(){Kr(this)};function Kr(d){if(d.h&&typeof o<"u"){if(d.v&&di(d)==4)setTimeout(d.Ca.bind(d),0);else if(He(d,"readystatechange"),di(d)==4){d.h=!1;try{const X=d.ca();t:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break t;default:b=!1}var E;if(!(E=b)){var w;if(w=X===0){let lt=String(d.D).match($c)[1]||null;!lt&&u.self&&u.self.location&&(lt=u.self.location.protocol.slice(0,-1)),w=!Ni.test(lt?lt.toLowerCase():"")}E=w}if(E)He(d,"complete"),He(d,"success");else{d.o=6;try{var F=di(d)>2?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.ca()+"]",Ql(d)}}finally{es(d)}}}}function es(d,b){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,b||He(d,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function di(d){return d.g?d.g.readyState:0}i.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),ig(b)}};function en(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(d){const b={};d=(d.g&&di(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<d.length;w++){if(V(d[w]))continue;var E=Qc(d[w]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=b[F]||[];b[F]=X,X.push(E)}Pt(b,function(w){return w.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pi(d,b,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||b}function zs(d){this.za=0,this.i=[],this.j=new li,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Pi("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Pi("baseRetryDelayMs",5e3,d),this.Za=Pi("retryDelaySeedMs",1e4,d),this.Ta=Pi("forwardChannelMaxRetries",2,d),this.va=Pi("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new zl(d&&d.concurrentRequestLimit),this.Ba=new Ps,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=zs.prototype,i.ka=8,i.I=1,i.connect=function(d,b,E,w){Me(0),this.W=d,this.H=b||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.J=lh(this,null,this.W),ki(this)};function Xl(d){if(io(d),d.I==3){var b=d.V++,E=Ne(d.J);if(Zt(E,"SID",d.M),Zt(E,"RID",b),Zt(E,"TYPE","terminate"),Yr(d,E),b=new ui(d,d.j,b),b.M=2,b.A=jr(Ne(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(b.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=b.A,E=!0),E||(b.g=uh(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Ri(b)}oh(d)}function Ls(d){d.g&&($l(d),d.g.cancel(),d.g=null)}function io(d){Ls(d),d.v&&(u.clearTimeout(d.v),d.v=null),ro(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function ki(d){if(!Ll(d.h)&&!d.m){d.m=!0;var b=d.Ea;$||x(),it||($(),it=!0),R.add(b,d),d.D=0}}function so(d,b){return Di(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=b.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ai(g(d.Ea,d,b),ah(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const F=new ui(this,this.j,d);let X=this.o;if(this.U&&(X?(X=z(X),ct(X,this.U)):X=this.U),this.u!==null||this.R||(F.J=X,X=null),this.S)t:{for(var b=0,E=0;E<this.i.length;E++){e:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(b+=w,b>4096){b=E;break t}if(b===4096||E===this.i.length-1){b=E+1;break t}}b=1e3}else b=1e3;b=nh(this,F,b),E=Ne(this.J),Zt(E,"RID",d),Zt(E,"CVER",22),this.G&&Zt(E,"X-HTTP-Session-Id",this.G),Yr(this,E),X&&(this.R?b="headers="+ts(Yn(X))+"&"+b:this.u&&qr(E,this.u,X)),Bl(this.h,F),this.Ra&&Zt(E,"TYPE","init"),this.S?(Zt(E,"$req",b),Zt(E,"SID","null"),F.U=!0,wi(F,E,null)):wi(F,E,b),this.I=2}}else this.I==3&&(d?Wl(this,d):this.i.length==0||Ll(this.h)||Wl(this))};function Wl(d,b){var E;b?E=b.l:E=d.V++;const w=Ne(d.J);Zt(w,"SID",d.M),Zt(w,"RID",E),Zt(w,"AID",d.K),Yr(d,w),d.u&&d.o&&qr(w,d.u,d.o),E=new ui(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),b&&(d.i=b.G.concat(d.i)),b=nh(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Bl(d.h,E),wi(E,w,b)}function Yr(d,b){d.H&&St(d.H,function(E,w){Zt(b,w,E)}),d.l&&St({},function(E,w){Zt(b,w,E)})}function nh(d,b,E){E=Math.min(d.i.length,E);const w=d.l?g(d.l.Ka,d.l,d):null;t:{var F=d.i;let It=-1;for(;;){const Ae=["count="+E];It==-1?E>0?(It=F[0].g,Ae.push("ofs="+It)):It=0:Ae.push("ofs="+It);let Qt=!0;for(let pe=0;pe<E;pe++){var X=F[pe].g;const Qn=F[pe].map;if(X-=It,X<0)It=Math.max(0,F[pe].g-100),Qt=!1;else try{X="req"+X+"_"||"";try{var lt=Qn instanceof Map?Qn:Object.entries(Qn);for(const[Li,gi]of lt){let mi=gi;h(gi)&&(mi=Ds(gi)),Ae.push(X+Li+"="+encodeURIComponent(mi))}}catch(Li){throw Ae.push(X+"type="+encodeURIComponent("_badmap")),Li}}catch{w&&w(Qn)}}if(Qt){lt=Ae.join("&");break t}}lt=void 0}return d=d.i.splice(0,E),b.G=d,lt}function ih(d){if(!d.g&&!d.v){d.Y=1;var b=d.Da;$||x(),it||($(),it=!0),R.add(b,d),d.A=0}}function Qr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ai(g(d.Da,d),ah(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,sh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ai(g(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Me(10),Ls(this),sh(this))};function $l(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function sh(d){d.g=new ui(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var b=Ne(d.na);Zt(b,"RID","rpc"),Zt(b,"SID",d.M),Zt(b,"AID",d.K),Zt(b,"CI",d.F?"0":"1"),!d.F&&d.ia&&Zt(b,"TO",d.ia),Zt(b,"TYPE","xmlhttp"),Yr(d,b),d.u&&d.o&&qr(b,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=jr(Ne(b)),E.u=null,E.R=!0,Wa(E,d)}i.Va=function(){this.C!=null&&(this.C=null,Ls(this),Qr(this),Me(19))};function ro(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function rh(d,b){var E=null;if(d.g==b){ro(d),$l(d),d.g=null;var w=2}else if(Mi(d.h,b))E=b.G,Ul(d.h,b),w=1;else return;if(d.I!=0){if(b.o)if(w==1){E=b.u?b.u.length:0,b=Date.now()-b.F;var F=d.D;w=Xa(),He(w,new Si(w,E)),ki(d)}else ih(d);else if(F=b.m,F==3||F==0&&b.X>0||!(w==1&&so(d,b)||w==2&&Qr(d)))switch(E&&E.length>0&&(b=d.h,b.i=b.i.concat(E)),F){case 1:zi(d,5);break;case 4:zi(d,10);break;case 3:zi(d,6);break;default:zi(d,2)}}}function ah(d,b){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*b}function zi(d,b){if(d.j.info("Error code "+b),b==2){var E=g(d.bb,d),w=d.Ua;const F=!w;w=new Mn(w||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Xe(w,"https"),jr(w),F?hi(w.toString(),E):Kl(w.toString(),E)}else Me(2);d.I=0,d.l&&d.l.pa(b),oh(d),io(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function oh(d){if(d.I=0,d.ja=[],d.l){const b=jl(d.h);(b.length!=0||d.i.length!=0)&&(C(d.ja,b),C(d.ja,d.i),d.h.i.length=0,S(d.i),d.i.length=0),d.l.oa()}}function lh(d,b,E){var w=E instanceof Mn?Ne(E):new Mn(E);if(w.g!="")b&&(w.g=b+"."+w.g),Ms(w,w.u);else{var F=u.location;w=F.protocol,b=b?b+"."+F.hostname:F.hostname,F=+F.port;const X=new Mn(null);w&&Xe(X,w),b&&(X.g=b),F&&Ms(X,F),E&&(X.h=E),w=X}return E=d.G,b=d.wa,E&&b&&Zt(w,E,b),Zt(w,"VER",d.ka),Yr(d,w),w}function uh(d,b,E){if(b&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Aa&&!d.ma?new se(new Oi({ab:E})):new se(d.ma),b.Fa(d.L),b}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ch(){}i=ch.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Bs(){}Bs.prototype.g=function(d,b){return new dn(d,b)};function dn(d,b){De.call(this),this.g=new zs(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(d?d["X-WebChannel-Client-Profile"]=b.sa:d={"X-WebChannel-Client-Profile":b.sa}),this.g.U=d,(d=b&&b.Qb)&&!V(d)&&(this.g.u=d),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!V(b)&&(this.g.G=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new is(this)}_(dn,De),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Xl(this.g)},dn.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=Ds(d),d=E);b.i.push(new Oe(b.Ya++,d)),b.I==3&&ki(b)},dn.prototype.N=function(){this.g.l=null,delete this.j,Xl(this.g),delete this.g,dn.Z.N.call(this)};function hh(d){tn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){t:{for(const E in b){d=E;break t}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}_(hh,tn);function fh(){qn.call(this),this.status=1}_(fh,qn);function is(d){this.g=d}_(is,ch),is.prototype.ra=function(){He(this.g,"a")},is.prototype.qa=function(d){He(this.g,new hh(d))},is.prototype.pa=function(d){He(this.g,new fh)},is.prototype.oa=function(){He(this.g,"b")},Bs.prototype.createWebChannel=Bs.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,E1=function(){return new Bs},T1=function(){return Xa()},v1=Se,zp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Br.NO_ERROR=0,Br.TIMEOUT=8,Br.HTTP_ERROR=6,kf=Br,Pl.COMPLETE="complete",b1=Pl,qc.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",De.prototype.listen=De.prototype.J,Ku=qc,se.prototype.listenOnce=se.prototype.K,se.prototype.getLastError=se.prototype.Ha,se.prototype.getLastErrorCode=se.prototype.ya,se.prototype.getStatus=se.prototype.ca,se.prototype.getResponseJson=se.prototype.La,se.prototype.getResponseText=se.prototype.la,se.prototype.send=se.prototype.ea,se.prototype.setWithCredentials=se.prototype.Fa,_1=se}).apply(typeof yf<"u"?yf:typeof self<"u"?self:typeof window<"u"?window:{});const yT="@firebase/firestore",_T="4.9.2";class Ze{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");let Tl="12.3.0";const Va=new h1("@firebase/firestore");function Go(){return Va.logLevel}function rt(i,...t){if(Va.logLevel<=Ft.DEBUG){const e=t.map(Ty);Va.debug(`Firestore (${Tl}): ${i}`,...e)}}function Re(i,...t){if(Va.logLevel<=Ft.ERROR){const e=t.map(Ty);Va.error(`Firestore (${Tl}): ${i}`,...e)}}function Oa(i,...t){if(Va.logLevel<=Ft.WARN){const e=t.map(Ty);Va.warn(`Firestore (${Tl}): ${i}`,...e)}}function Ty(i){if(typeof i=="string")return i;try{return(function(e){return JSON.stringify(e)})(i)}catch{return i}}function dt(i,t,e){let n="Unexpected state";typeof t=="string"?n=t:e=t,S1(i,n,e)}function S1(i,t,e){let n=`FIRESTORE (${Tl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(e!==void 0)try{n+=" CONTEXT: "+JSON.stringify(e)}catch{n+=" CONTEXT: "+e}throw Re(n),new Error(n)}function _t(i,t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,i||S1(t,r,n)}function pt(i,t){return i}const tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends vl{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class A1{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ZI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Ze.UNAUTHENTICATED)))}shutdown(){}}class JI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class tC{constructor(t){this.t=t,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){_t(this.o===void 0,42304);let n=this.i;const r=f=>this.i!==n?(n=this.i,e(f)):Promise.resolve();let o=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vr,t.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const f=o;t.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},h=f=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vr)}}),0),u()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((n=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_t(typeof n.accessToken=="string",31837,{l:n}),new A1(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _t(t===null||typeof t=="string",2055,{h:t}),new Ze(t)}}class eC{constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nC{constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new eC(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Ze.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iC{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,PI(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){_t(this.o===void 0,3512);const n=o=>{o.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,rt("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>n(o)))};const r=o=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(_t(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new bT(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function sC(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}class Ey{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const r=sC(40);for(let o=0;o<r.length;++o)n.length<20&&r[o]<e&&(n+=t.charAt(r[o]%62))}return n}}function wt(i,t){return i<t?-1:i>t?1:0}function Lp(i,t){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++){const r=i.charAt(n),o=t.charAt(n);if(r!==o)return cp(r)===cp(o)?wt(r,o):cp(r)?1:-1}return wt(i.length,t.length)}const rC=55296,aC=57343;function cp(i){const t=i.charCodeAt(0);return t>=rC&&t<=aC}function el(i,t,e){return i.length===t.length&&i.every(((n,r)=>e(n,t[r])))}function x1(i){return i+"\0"}const vT="__name__";class Ki{constructor(t,e,n){e===void 0?e=0:e>t.length&&dt(637,{offset:e,range:t.length}),n===void 0?n=t.length-e:n>t.length-e&&dt(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return Ki.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ki?t.forEach((n=>{e.push(n)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const o=Ki.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return wt(t.length,e.length)}static compareSegments(t,e){const n=Ki.isNumericId(t),r=Ki.isNumericId(e);return n&&!r?-1:!n&&r?1:n&&r?Ki.extractNumericId(t).compare(Ki.extractNumericId(e)):Lp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return br.fromString(t.substring(4,t.length-2))}}class Wt extends Ki{construct(t,e,n){return new Wt(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new ut(tt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((r=>r.length>0)))}return new Wt(e)}static emptyPath(){return new Wt([])}}const oC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class be extends Ki{construct(t,e,n){return new be(t,e,n)}static isValidIdentifier(t){return oC.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),be.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vT}static keyField(){return new be([vT])}static fromServerFormat(t){const e=[];let n="",r=0;const o=()=>{if(n.length===0)throw new ut(tt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let u=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new ut(tt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ut(tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=f,r+=2}else h==="`"?(u=!u,r++):h!=="."||u?(n+=h,r++):(o(),r++)}if(o(),u)throw new ut(tt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new be(e)}static emptyPath(){return new be([])}}class ht{constructor(t){this.path=t}static fromPath(t){return new ht(Wt.fromString(t))}static fromName(t){return new ht(Wt.fromString(t).popFirst(5))}static empty(){return new ht(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Wt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Wt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ht(new Wt(t.slice()))}}function w1(i,t,e){if(!e)throw new ut(tt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function lC(i,t,e,n){if(t===!0&&n===!0)throw new ut(tt.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function TT(i){if(!ht.isDocumentKey(i))throw new ut(tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ET(i){if(ht.isDocumentKey(i))throw new ut(tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function R1(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Md(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":dt(12329,{type:typeof i})}function xa(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new ut(tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Md(i);throw new ut(tt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}function Ue(i,t){const e={typeString:i};return t&&(e.value=t),e}function Vc(i,t){if(!R1(i))throw new ut(tt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const n in t)if(t[n]){const r=t[n].typeString,o="value"in t[n]?{value:t[n].value}:void 0;if(!(n in i)){e=`JSON missing required field: '${n}'`;break}const u=i[n];if(r&&typeof u!==r){e=`JSON field '${n}' must be a ${r}.`;break}if(o!==void 0&&u!==o.value){e=`Expected '${n}' field to equal '${o.value}'`;break}}if(e)throw new ut(tt.INVALID_ARGUMENT,e);return!0}const ST=-62135596800,AT=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(t){return $t.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*AT);return new $t(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ut(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ut(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<ST)throw new ut(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ut(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AT}_compareTo(t){return this.seconds===t.seconds?wt(this.nanoseconds,t.nanoseconds):wt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Vc(t,$t._jsonSchema))return new $t(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-ST;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:Ue("string",$t._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};class vt{static fromTimestamp(t){return new vt(t)}static min(){return new vt(new $t(0,0))}static max(){return new vt(new $t(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const nl=-1;class nd{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}}function Bp(i){return i.fields.find((t=>t.kind===2))}function pa(i){return i.fields.filter((t=>t.kind!==2))}nd.UNKNOWN_ID=-1;class zf{constructor(t,e){this.fieldPath=t,this.kind=e}}class mc{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new mc(0,Hn.min())}}function I1(i,t){const e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=vt.fromTimestamp(n===1e9?new $t(e+1,0):new $t(e,n));return new Hn(r,ht.empty(),t)}function C1(i){return new Hn(i.readTime,i.key,nl)}class Hn{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Hn(vt.min(),ht.empty(),nl)}static max(){return new Hn(vt.max(),ht.empty(),nl)}}function Sy(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=ht.comparator(i.documentKey,t.documentKey),e!==0?e:wt(i.largestBatchId,t.largestBatchId))}const D1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Dr(i){if(i.code!==tt.FAILED_PRECONDITION||i.message!==D1)throw i;rt("LocalStore","Unexpectedly lost primary lease")}class j{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new j(((n,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(n,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof j?e:j.resolve(e)}catch(e){return j.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):j.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):j.reject(e)}static resolve(t){return new j(((e,n)=>{e(t)}))}static reject(t){return new j(((e,n)=>{n(t)}))}static waitFor(t){return new j(((e,n)=>{let r=0,o=0,u=!1;t.forEach((h=>{++r,h.next((()=>{++o,u&&o===r&&e()}),(f=>n(f)))})),u=!0,o===r&&e()}))}static or(t){let e=j.resolve(!1);for(const n of t)e=e.next((r=>r?j.resolve(r):n()));return e}static forEach(t,e){const n=[];return t.forEach(((r,o)=>{n.push(e.call(this,r,o))})),this.waitFor(n)}static mapArray(t,e){return new j(((n,r)=>{const o=t.length,u=new Array(o);let h=0;for(let f=0;f<o;f++){const g=f;e(t[g]).next((y=>{u[g]=y,++h,h===o&&n(u)}),(y=>r(y)))}}))}static doWhile(t,e){return new j(((n,r)=>{const o=()=>{t()===!0?e().next((()=>{o()}),r):n()};o()}))}}const Un="SimpleDb";class Vd{static open(t,e,n,r){try{return new Vd(e,t.transaction(r,n))}catch(o){throw new ec(e,o)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new vr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new ec(t,e.error)):this.S.resolve()},this.transaction.onerror=n=>{const r=Ay(n.target.error);this.S.reject(new ec(t,r))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(rt(Un,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new cC(e)}}class Tr{static delete(t){return rt(Un,"Removing database:",t),ba(s1().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!u1())return!1;if(Tr.F())return!0;const t=Zf(),e=Tr.M(t),n=0<e&&e<10,r=V1(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(t,e,n){this.name=t,this.version=e,this.N=n,this.B=null,Tr.M(Zf())===12.2&&Re("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(rt(Un,"Opening database:",this.name),this.db=await new Promise(((e,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{const u=o.target.result;e(u)},r.onblocked=()=>{n(new ec(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{const u=o.target.error;u.name==="VersionError"?n(new ut(tt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?n(new ut(tt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):n(new ec(t,u))},r.onupgradeneeded=o=>{rt(Un,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const u=o.target.result;this.N.k(u,r.transaction,o.oldVersion,this.version).next((()=>{rt(Un,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,r){const o=e==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(t);const h=Vd.open(this.db,t,o?"readonly":"readwrite",n),f=r(h).next((g=>(h.C(),g))).catch((g=>(h.abort(g),j.reject(g)))).toPromise();return f.catch((()=>{})),await h.D,f}catch(h){const f=h,g=f.name!=="FirebaseError"&&u<3;if(rt(Un,"Transaction failed with error:",f.message,"Retrying:",g),this.close(),!g)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function V1(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class uC{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return ba(this.U.delete())}}class ec extends ut{constructor(t,e){super(tt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Mr(i){return i.name==="IndexedDbTransactionError"}class cC{constructor(t){this.store=t}put(t,e){let n;return e!==void 0?(rt(Un,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(rt(Un,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ba(n)}add(t){return rt(Un,"ADD",this.store.name,t,t),ba(this.store.add(t))}get(t){return ba(this.store.get(t)).next((e=>(e===void 0&&(e=null),rt(Un,"GET",this.store.name,t,e),e)))}delete(t){return rt(Un,"DELETE",this.store.name,t),ba(this.store.delete(t))}count(){return rt(Un,"COUNT",this.store.name),ba(this.store.count())}J(t,e){const n=this.options(t,e),r=n.index?this.store.index(n.index):this.store;if(typeof r.getAll=="function"){const o=r.getAll(n.range);return new j(((u,h)=>{o.onerror=f=>{h(f.target.error)},o.onsuccess=f=>{u(f.target.result)}}))}{const o=this.cursor(n),u=[];return this.H(o,((h,f)=>{u.push(f)})).next((()=>u))}}Y(t,e){const n=this.store.getAll(t,e===null?void 0:e);return new j(((r,o)=>{n.onerror=u=>{o(u.target.error)},n.onsuccess=u=>{r(u.target.result)}}))}Z(t,e){rt(Un,"DELETE ALL",this.store.name);const n=this.options(t,e);n.X=!1;const r=this.cursor(n);return this.H(r,((o,u,h)=>h.delete()))}ee(t,e){let n;e?n=t:(n={},e=t);const r=this.cursor(n);return this.H(r,e)}te(t){const e=this.cursor({});return new j(((n,r)=>{e.onerror=o=>{const u=Ay(o.target.error);r(u)},e.onsuccess=o=>{const u=o.target.result;u?t(u.primaryKey,u.value).next((h=>{h?u.continue():n()})):n()}}))}H(t,e){const n=[];return new j(((r,o)=>{t.onerror=u=>{o(u.target.error)},t.onsuccess=u=>{const h=u.target.result;if(!h)return void r();const f=new uC(h),g=e(h.primaryKey,h.value,f);if(g instanceof j){const y=g.catch((_=>(f.done(),j.reject(_))));n.push(y)}f.isDone?r():f.G===null?h.continue():h.continue(f.G)}})).next((()=>j.waitFor(n)))}options(t,e){let n;return t!==void 0&&(typeof t=="string"?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.X?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function ba(i){return new j(((t,e)=>{i.onsuccess=n=>{const r=n.target.result;t(r)},i.onerror=n=>{const r=Ay(n.target.error);e(r)}}))}let xT=!1;function Ay(i){const t=Tr.M(Zf());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(e)>=0){const n=new ut("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xT||(xT=!0,setTimeout((()=>{throw n}),0)),n}}return i}const nc="IndexBackfiller";class hC{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){rt(nc,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();rt(nc,`Documents written: ${e}`)}catch(e){Mr(e)?rt(nc,"Ignoring IndexedDB error during index backfill: ",e):await Dr(e)}await this.re(6e4)}))}}class fC{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const n=new Set;let r=e,o=!0;return j.doWhile((()=>o===!0&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((u=>{if(u!==null&&!n.has(u))return rt(nc,`Processing collection: ${u}`),this.oe(t,u,r).next((h=>{r-=h,n.add(u)}));o=!1})))).next((()=>e-r))}oe(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((r=>this.localStore.localDocuments.getNextDocuments(t,e,r,n).next((o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(t,u).next((()=>this._e(r,o))).next((h=>(rt(nc,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(t,e,h)))).next((()=>u.size))}))))}_e(t,e){let n=t;return e.changes.forEach(((r,o)=>{const u=C1(o);Sy(u,n)>0&&(n=u)})),new Hn(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}}class wn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>e.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}wn.ce=-1;const wa=-1;function Od(i){return i==null}function pc(i){return i===0&&1/i==-1/0}function O1(i){return typeof i=="number"&&Number.isInteger(i)&&!pc(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const id="";function hn(i){let t="";for(let e=0;e<i.length;e++)t.length>0&&(t=wT(t)),t=dC(i.get(e),t);return wT(t)}function dC(i,t){let e=t;const n=i.length;for(let r=0;r<n;r++){const o=i.charAt(r);switch(o){case"\0":e+="";break;case id:e+="";break;default:e+=o}}return e}function wT(i){return i+id+""}function Xi(i){const t=i.length;if(_t(t>=2,64408,{path:i}),t===2)return _t(i.charAt(0)===id&&i.charAt(1)==="",56145,{path:i}),Wt.emptyPath();const e=t-2,n=[];let r="";for(let o=0;o<t;){const u=i.indexOf(id,o);switch((u<0||u>e)&&dt(50515,{path:i}),i.charAt(u+1)){case"":const h=i.substring(o,u);let f;r.length===0?f=h:(r+=h,f=r,r=""),n.push(f);break;case"":r+=i.substring(o,u),r+="\0";break;case"":r+=i.substring(o,u+1);break;default:dt(61167,{path:i})}o=u+2}return new Wt(n)}const ya="remoteDocuments",Oc="owner",zo="owner",yc="mutationQueues",gC="userId",bi="mutations",RT="batchId",Sa="userMutationsIndex",IT=["userId","batchId"];function Lf(i,t){return[i,hn(t)]}function N1(i,t,e){return[i,hn(t),e]}const mC={},il="documentMutations",sd="remoteDocumentsV14",pC=["prefixPath","collectionGroup","readTime","documentId"],Bf="documentKeyIndex",yC=["prefixPath","collectionGroup","documentId"],P1="collectionGroupIndex",_C=["collectionGroup","readTime","prefixPath","documentId"],_c="remoteDocumentGlobal",Up="remoteDocumentGlobalKey",sl="targets",k1="queryTargetsIndex",bC=["canonicalId","targetId"],rl="targetDocuments",vC=["targetId","path"],xy="documentTargetsIndex",TC=["path","targetId"],rd="targetGlobalKey",Ra="targetGlobal",bc="collectionParents",EC=["collectionId","parent"],al="clientMetadata",SC="clientId",Nd="bundles",AC="bundleId",Pd="namedQueries",xC="name",wy="indexConfiguration",wC="indexId",jp="collectionGroupIndex",RC="collectionGroup",ic="indexState",IC=["indexId","uid"],z1="sequenceNumberIndex",CC=["uid","sequenceNumber"],sc="indexEntries",DC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],L1="documentKeyIndex",MC=["indexId","uid","orderedDocumentKey"],kd="documentOverlays",VC=["userId","collectionPath","documentId"],Fp="collectionPathOverlayIndex",OC=["userId","collectionPath","largestBatchId"],B1="collectionGroupOverlayIndex",NC=["userId","collectionGroup","largestBatchId"],Ry="globals",PC="name",U1=[yc,bi,il,ya,sl,Oc,Ra,rl,al,_c,bc,Nd,Pd],kC=[...U1,kd],j1=[yc,bi,il,sd,sl,Oc,Ra,rl,al,_c,bc,Nd,Pd,kd],F1=j1,Iy=[...F1,wy,ic,sc],zC=Iy,H1=[...Iy,Ry],LC=H1;class Hp extends M1{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Ye(i,t){const e=pt(i);return Tr.O(e.le,t)}function CT(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Fa(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function q1(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}class ce{constructor(t,e){this.comparator=t,this.root=e||on.EMPTY}insert(t,e){return new ce(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,on.BLACK,null,null))}remove(t){return new ce(this.comparator,this.root.remove(t,this.comparator).copy(null,null,on.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _f(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _f(this.root,t,this.comparator,!1)}getReverseIterator(){return new _f(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _f(this.root,t,this.comparator,!0)}}class _f{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?n(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class on{constructor(t,e,n,r,o){this.key=t,this.value=e,this.color=n??on.RED,this.left=r??on.EMPTY,this.right=o??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,o){return new on(t??this.key,e??this.value,n??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const o=n(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,n),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return on.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw dt(27949);return t+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw dt(57766)}get value(){throw dt(16141)}get color(){throw dt(16727)}get left(){throw dt(29726)}get right(){throw dt(36894)}copy(t,e,n,r,o){return this}insert(t,e,n){return new on(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ie{constructor(t){this.comparator=t,this.data=new ce(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new DT(this.data.getIterator())}getIteratorFrom(t){return new DT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((n=>{e=e.add(n)})),e}isEqual(t){if(!(t instanceof ie)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=n.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new ie(this.comparator);return e.data=t,e}}class DT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Lo(i){return i.hasNext()?i.getNext():void 0}class ri{constructor(t){this.fields=t,t.sort(be.comparator)}static empty(){return new ri([])}unionWith(t){let e=new ie(be.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new ri(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return el(this.fields,t.fields,((e,n)=>e.isEqual(n)))}}class G1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ce{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new G1("Invalid base64 string: "+o):o}})(t);return new Ce(e)}static fromUint8Array(t){const e=(function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o})(t);return new Ce(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return wt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ce.EMPTY_BYTE_STRING=new Ce("");const BC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(i){if(_t(!!i,39018),typeof i=="string"){let t=0;const e=BC.exec(i);if(_t(!!e,46558,{timestamp:i}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:_e(i.seconds),nanos:_e(i.nanos)}}function _e(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Rs(i){return typeof i=="string"?Ce.fromBase64String(i):Ce.fromUint8Array(i)}const K1="server_timestamp",Y1="__type__",Q1="__previous_value__",X1="__local_write_time__";function Cy(i){return(i?.mapValue?.fields||{})[Y1]?.stringValue===K1}function zd(i){const t=i.mapValue.fields[Q1];return Cy(t)?zd(t):t}function vc(i){const t=ws(i.mapValue.fields[X1].timestampValue);return new $t(t.seconds,t.nanos)}class UC{constructor(t,e,n,r,o,u,h,f,g,y){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=g,this.isUsingEmulator=y}}const ad="(default)";class Na{constructor(t,e){this.projectId=t,this.database=e||ad}static empty(){return new Na("","")}get isDefaultDatabase(){return this.database===ad}isEqual(t){return t instanceof Na&&t.projectId===this.projectId&&t.database===this.database}}const Dy="__type__",W1="__max__",fr={mapValue:{fields:{__type__:{stringValue:W1}}}},My="__vector__",ol="value",Uf={nullValue:"NULL_VALUE"};function xr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Cy(i)?4:$1(i)?9007199254740991:Ld(i)?10:11:dt(28295,{value:i})}function Ji(i,t){if(i===t)return!0;const e=xr(i);if(e!==xr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return vc(i).isEqual(vc(t));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=ws(r.timestampValue),h=ws(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(i,t);case 5:return i.stringValue===t.stringValue;case 6:return(function(r,o){return Rs(r.bytesValue).isEqual(Rs(o.bytesValue))})(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return(function(r,o){return _e(r.geoPointValue.latitude)===_e(o.geoPointValue.latitude)&&_e(r.geoPointValue.longitude)===_e(o.geoPointValue.longitude)})(i,t);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return _e(r.integerValue)===_e(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=_e(r.doubleValue),h=_e(o.doubleValue);return u===h?pc(u)===pc(h):isNaN(u)&&isNaN(h)}return!1})(i,t);case 9:return el(i.arrayValue.values||[],t.arrayValue.values||[],Ji);case 10:case 11:return(function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(CT(u)!==CT(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Ji(u[f],h[f])))return!1;return!0})(i,t);default:return dt(52216,{left:i})}}function Tc(i,t){return(i.values||[]).find((e=>Ji(e,t)))!==void 0}function wr(i,t){if(i===t)return 0;const e=xr(i),n=xr(t);if(e!==n)return wt(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return wt(i.booleanValue,t.booleanValue);case 2:return(function(o,u){const h=_e(o.integerValue||o.doubleValue),f=_e(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(i,t);case 3:return MT(i.timestampValue,t.timestampValue);case 4:return MT(vc(i),vc(t));case 5:return Lp(i.stringValue,t.stringValue);case 6:return(function(o,u){const h=Rs(o),f=Rs(u);return h.compareTo(f)})(i.bytesValue,t.bytesValue);case 7:return(function(o,u){const h=o.split("/"),f=u.split("/");for(let g=0;g<h.length&&g<f.length;g++){const y=wt(h[g],f[g]);if(y!==0)return y}return wt(h.length,f.length)})(i.referenceValue,t.referenceValue);case 8:return(function(o,u){const h=wt(_e(o.latitude),_e(u.latitude));return h!==0?h:wt(_e(o.longitude),_e(u.longitude))})(i.geoPointValue,t.geoPointValue);case 9:return VT(i.arrayValue,t.arrayValue);case 10:return(function(o,u){const h=o.fields||{},f=u.fields||{},g=h[ol]?.arrayValue,y=f[ol]?.arrayValue,_=wt(g?.values?.length||0,y?.values?.length||0);return _!==0?_:VT(g,y)})(i.mapValue,t.mapValue);case 11:return(function(o,u){if(o===fr.mapValue&&u===fr.mapValue)return 0;if(o===fr.mapValue)return 1;if(u===fr.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),g=u.fields||{},y=Object.keys(g);f.sort(),y.sort();for(let _=0;_<f.length&&_<y.length;++_){const T=Lp(f[_],y[_]);if(T!==0)return T;const S=wr(h[f[_]],g[y[_]]);if(S!==0)return S}return wt(f.length,y.length)})(i.mapValue,t.mapValue);default:throw dt(23264,{he:e})}}function MT(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return wt(i,t);const e=ws(i),n=ws(t),r=wt(e.seconds,n.seconds);return r!==0?r:wt(e.nanos,n.nanos)}function VT(i,t){const e=i.values||[],n=t.values||[];for(let r=0;r<e.length&&r<n.length;++r){const o=wr(e[r],n[r]);if(o)return o}return wt(e.length,n.length)}function ll(i){return qp(i)}function qp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(e){const n=ws(e);return`time(${n.seconds},${n.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(e){return Rs(e).toBase64()})(i.bytesValue):"referenceValue"in i?(function(e){return ht.fromName(e).toString()})(i.referenceValue):"geoPointValue"in i?(function(e){return`geo(${e.latitude},${e.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(e){let n="[",r=!0;for(const o of e.values||[])r?r=!1:n+=",",n+=qp(o);return n+"]"})(i.arrayValue):"mapValue"in i?(function(e){const n=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const u of n)o?o=!1:r+=",",r+=`${u}:${qp(e.fields[u])}`;return r+"}"})(i.mapValue):dt(61005,{value:i})}function jf(i){switch(xr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=zd(i);return t?16+jf(t):16;case 5:return 2*i.stringValue.length;case 6:return Rs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((r,o)=>r+jf(o)),0)})(i.arrayValue);case 10:case 11:return(function(n){let r=0;return Fa(n.fields,((o,u)=>{r+=o.length+jf(u)})),r})(i.mapValue);default:throw dt(13486,{value:i})}}function Ec(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function Gp(i){return!!i&&"integerValue"in i}function Sc(i){return!!i&&"arrayValue"in i}function OT(i){return!!i&&"nullValue"in i}function NT(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ff(i){return!!i&&"mapValue"in i}function Ld(i){return(i?.mapValue?.fields||{})[Dy]?.stringValue===My}function rc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return Fa(i.mapValue.fields,((e,n)=>t.mapValue.fields[e]=rc(n))),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=rc(i.arrayValue.values[e]);return t}return{...i}}function $1(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===W1}const Z1={mapValue:{fields:{[Dy]:{stringValue:My},[ol]:{arrayValue:{}}}}};function jC(i){return"nullValue"in i?Uf:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ec(Na.empty(),ht.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Ld(i)?Z1:{mapValue:{}}:dt(35942,{value:i})}function FC(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ec(Na.empty(),ht.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?Z1:"mapValue"in i?Ld(i)?{mapValue:{}}:fr:dt(61959,{value:i})}function PT(i,t){const e=wr(i.value,t.value);return e!==0?e:i.inclusive&&!t.inclusive?-1:!i.inclusive&&t.inclusive?1:0}function kT(i,t){const e=wr(i.value,t.value);return e!==0?e:i.inclusive&&!t.inclusive?1:!i.inclusive&&t.inclusive?-1:0}class An{constructor(t){this.value=t}static empty(){return new An({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Ff(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=rc(e)}setAll(t){let e=be.emptyPath(),n={},r=[];t.forEach(((u,h)=>{if(!e.isImmediateParentOf(h)){const f=this.getFieldsMap(e);this.applyChanges(f,n,r),n={},r=[],e=h.popLast()}u?n[h.lastSegment()]=rc(u):r.push(h.lastSegment())}));const o=this.getFieldsMap(e);this.applyChanges(o,n,r)}delete(t){const e=this.field(t.popLast());Ff(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ji(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Ff(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Fa(e,((r,o)=>t[r]=o));for(const r of n)delete t[r]}clone(){return new An(rc(this.value))}}function J1(i){const t=[];return Fa(i.fields,((e,n)=>{const r=new be([e]);if(Ff(n)){const o=J1(n.mapValue).fields;if(o.length===0)t.push(r);else for(const u of o)t.push(r.child(u))}else t.push(r)})),new ri(t)}class Ee{constructor(t,e,n,r,o,u,h){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(t){return new Ee(t,0,vt.min(),vt.min(),vt.min(),An.empty(),0)}static newFoundDocument(t,e,n,r){return new Ee(t,1,e,vt.min(),n,r,0)}static newNoDocument(t,e){return new Ee(t,2,e,vt.min(),vt.min(),An.empty(),0)}static newUnknownDocument(t,e){return new Ee(t,3,e,vt.min(),vt.min(),An.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ee&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ee(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ul{constructor(t,e){this.position=t,this.inclusive=e}}function zT(i,t,e){let n=0;for(let r=0;r<i.position.length;r++){const o=t[r],u=i.position[r];if(o.field.isKeyField()?n=ht.comparator(ht.fromName(u.referenceValue),e.key):n=wr(u,e.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function LT(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!Ji(i.position[e],t.position[e]))return!1;return!0}class Ac{constructor(t,e="asc"){this.field=t,this.dir=e}}function HC(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}class tA{}class Lt extends tA{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new qC(t,e,n):e==="array-contains"?new YC(t,n):e==="in"?new aA(t,n):e==="not-in"?new QC(t,n):e==="array-contains-any"?new XC(t,n):new Lt(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new GC(t,n):new KC(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(wr(e,this.value)):e!==null&&xr(this.value)===xr(e)&&this.matchesComparison(wr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ne extends tA{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ne(t,e)}matches(t){return cl(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cl(i){return i.op==="and"}function Kp(i){return i.op==="or"}function Vy(i){return eA(i)&&cl(i)}function eA(i){for(const t of i.filters)if(t instanceof ne)return!1;return!0}function Yp(i){if(i instanceof Lt)return i.field.canonicalString()+i.op.toString()+ll(i.value);if(Vy(i))return i.filters.map((t=>Yp(t))).join(",");{const t=i.filters.map((e=>Yp(e))).join(",");return`${i.op}(${t})`}}function nA(i,t){return i instanceof Lt?(function(n,r){return r instanceof Lt&&n.op===r.op&&n.field.isEqual(r.field)&&Ji(n.value,r.value)})(i,t):i instanceof ne?(function(n,r){return r instanceof ne&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce(((o,u,h)=>o&&nA(u,r.filters[h])),!0):!1})(i,t):void dt(19439)}function iA(i,t){const e=i.filters.concat(t);return ne.create(e,i.op)}function sA(i){return i instanceof Lt?(function(e){return`${e.field.canonicalString()} ${e.op} ${ll(e.value)}`})(i):i instanceof ne?(function(e){return e.op.toString()+" {"+e.getFilters().map(sA).join(" ,")+"}"})(i):"Filter"}class qC extends Lt{constructor(t,e,n){super(t,e,n),this.key=ht.fromName(n.referenceValue)}matches(t){const e=ht.comparator(t.key,this.key);return this.matchesComparison(e)}}class GC extends Lt{constructor(t,e){super(t,"in",e),this.keys=rA("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class KC extends Lt{constructor(t,e){super(t,"not-in",e),this.keys=rA("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function rA(i,t){return(t.arrayValue?.values||[]).map((e=>ht.fromName(e.referenceValue)))}class YC extends Lt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Sc(e)&&Tc(e.arrayValue,this.value)}}class aA extends Lt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Tc(this.value.arrayValue,e)}}class QC extends Lt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Tc(this.value.arrayValue,e)}}class XC extends Lt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Sc(e)||!e.arrayValue.values)&&e.arrayValue.values.some((n=>Tc(this.value.arrayValue,n)))}}class WC{constructor(t,e=null,n=[],r=[],o=null,u=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=u,this.endAt=h,this.Te=null}}function Qp(i,t=null,e=[],n=[],r=null,o=null,u=null){return new WC(i,t,e,n,r,o,u)}function Pa(i){const t=pt(i);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((n=>Yp(n))).join(","),e+="|ob:",e+=t.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),Od(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((n=>ll(n))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((n=>ll(n))).join(",")),t.Te=e}return t.Te}function Nc(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!HC(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!nA(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!LT(i.startAt,t.startAt)&&LT(i.endAt,t.endAt)}function od(i){return ht.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function ld(i,t){return i.filters.filter((e=>e instanceof Lt&&e.field.isEqual(t)))}function BT(i,t,e){let n=Uf,r=!0;for(const o of ld(i,t)){let u=Uf,h=!0;switch(o.op){case"<":case"<=":u=jC(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=Uf}PT({value:n,inclusive:r},{value:u,inclusive:h})<0&&(n=u,r=h)}if(e!==null){for(let o=0;o<i.orderBy.length;++o)if(i.orderBy[o].field.isEqual(t)){const u=e.position[o];PT({value:n,inclusive:r},{value:u,inclusive:e.inclusive})<0&&(n=u,r=e.inclusive);break}}return{value:n,inclusive:r}}function UT(i,t,e){let n=fr,r=!0;for(const o of ld(i,t)){let u=fr,h=!0;switch(o.op){case">=":case">":u=FC(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=fr}kT({value:n,inclusive:r},{value:u,inclusive:h})>0&&(n=u,r=h)}if(e!==null){for(let o=0;o<i.orderBy.length;++o)if(i.orderBy[o].field.isEqual(t)){const u=e.position[o];kT({value:n,inclusive:r},{value:u,inclusive:e.inclusive})>0&&(n=u,r=e.inclusive);break}}return{value:n,inclusive:r}}class El{constructor(t,e=null,n=[],r=[],o=null,u="F",h=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oA(i,t,e,n,r,o,u,h){return new El(i,t,e,n,r,o,u,h)}function Bd(i){return new El(i)}function jT(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function lA(i){return i.collectionGroup!==null}function ac(i){const t=pt(i);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new ie(be.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new Ac(o,n))})),e.has(be.keyField().canonicalString())||t.Ie.push(new Ac(be.keyField(),n))}return t.Ie}function Fn(i){const t=pt(i);return t.Ee||(t.Ee=$C(t,ac(i))),t.Ee}function $C(i,t){if(i.limitType==="F")return Qp(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new Ac(r.field,o)}));const e=i.endAt?new ul(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new ul(i.startAt.position,i.startAt.inclusive):null;return Qp(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function Xp(i,t){const e=i.filters.concat([t]);return new El(i.path,i.collectionGroup,i.explicitOrderBy.slice(),e,i.limit,i.limitType,i.startAt,i.endAt)}function Wp(i,t,e){return new El(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function Ud(i,t){return Nc(Fn(i),Fn(t))&&i.limitType===t.limitType}function uA(i){return`${Pa(Fn(i))}|lt:${i.limitType}`}function Ko(i){return`Query(target=${(function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map((r=>sA(r))).join(", ")}]`),Od(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ll(r))).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ll(r))).join(",")),`Target(${n})`})(Fn(i))}; limitType=${i.limitType})`}function Pc(i,t){return t.isFoundDocument()&&(function(n,r){const o=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):ht.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(i,t)&&(function(n,r){for(const o of ac(n))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(i,t)&&(function(n,r){for(const o of n.filters)if(!o.matches(r))return!1;return!0})(i,t)&&(function(n,r){return!(n.startAt&&!(function(u,h,f){const g=zT(u,h,f);return u.inclusive?g<=0:g<0})(n.startAt,ac(n),r)||n.endAt&&!(function(u,h,f){const g=zT(u,h,f);return u.inclusive?g>=0:g>0})(n.endAt,ac(n),r))})(i,t)}function cA(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function hA(i){return(t,e)=>{let n=!1;for(const r of ac(i)){const o=ZC(r,t,e);if(o!==0)return o;n=n||r.field.isKeyField()}return 0}}function ZC(i,t,e){const n=i.field.isKeyField()?ht.comparator(t.key,e.key):(function(o,u,h){const f=u.data.field(o),g=h.data.field(o);return f!==null&&g!==null?wr(f,g):dt(42886)})(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return dt(19790,{direction:i.dir})}}class Is{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[r,o]of n)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Fa(this.inner,((e,n)=>{for(const[r,o]of n)t(r,o)}))}isEmpty(){return q1(this.inner)}size(){return this.innerSize}}const JC=new ce(ht.comparator);function jn(){return JC}const fA=new ce(ht.comparator);function Yu(...i){let t=fA;for(const e of i)t=t.insert(e.key,e);return t}function dA(i){let t=fA;return i.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Wi(){return oc()}function gA(){return oc()}function oc(){return new Is((i=>i.toString()),((i,t)=>i.isEqual(t)))}const tD=new ce(ht.comparator),eD=new ie(ht.comparator);function Mt(...i){let t=eD;for(const e of i)t=t.add(e);return t}const nD=new ie(wt);function Oy(){return nD}function Ny(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(t)?"-0":t}}function mA(i){return{integerValue:""+i}}function iD(i,t){return O1(t)?mA(t):Ny(i,t)}class jd{constructor(){this._=void 0}}function sD(i,t,e){return i instanceof xc?(function(r,o){const u={fields:{[Y1]:{stringValue:K1},[X1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Cy(o)&&(o=zd(o)),o&&(u.fields[Q1]=o),{mapValue:u}})(e,t):i instanceof hl?yA(i,t):i instanceof fl?_A(i,t):(function(r,o){const u=pA(r,o),h=FT(u)+FT(r.Ae);return Gp(u)&&Gp(r.Ae)?mA(h):Ny(r.serializer,h)})(i,t)}function rD(i,t,e){return i instanceof hl?yA(i,t):i instanceof fl?_A(i,t):e}function pA(i,t){return i instanceof wc?(function(n){return Gp(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(t)?t:{integerValue:0}:null}class xc extends jd{}class hl extends jd{constructor(t){super(),this.elements=t}}function yA(i,t){const e=bA(t);for(const n of i.elements)e.some((r=>Ji(r,n)))||e.push(n);return{arrayValue:{values:e}}}class fl extends jd{constructor(t){super(),this.elements=t}}function _A(i,t){let e=bA(t);for(const n of i.elements)e=e.filter((r=>!Ji(r,n)));return{arrayValue:{values:e}}}class wc extends jd{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function FT(i){return _e(i.integerValue||i.doubleValue)}function bA(i){return Sc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class aD{constructor(t,e){this.field=t,this.transform=e}}function oD(i,t){return i.field.isEqual(t.field)&&(function(n,r){return n instanceof hl&&r instanceof hl||n instanceof fl&&r instanceof fl?el(n.elements,r.elements,Ji):n instanceof wc&&r instanceof wc?Ji(n.Ae,r.Ae):n instanceof xc&&r instanceof xc})(i.transform,t.transform)}class lD{constructor(t,e){this.version=t,this.transformResults=e}}class Rn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Rn}static exists(t){return new Rn(void 0,t)}static updateTime(t){return new Rn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Hf(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Fd{}function vA(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new Hd(i.key,Rn.none()):new Sl(i.key,i.data,Rn.none());{const e=i.data,n=An.empty();let r=new ie(be.comparator);for(let o of t.fields)if(!r.has(o)){let u=e.field(o);u===null&&o.length>1&&(o=o.popLast(),u=e.field(o)),u===null?n.delete(o):n.set(o,u),r=r.add(o)}return new Vr(i.key,n,new ri(r.toArray()),Rn.none())}}function uD(i,t,e){i instanceof Sl?(function(r,o,u){const h=r.value.clone(),f=qT(r.fieldTransforms,o,u.transformResults);h.setAll(f),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(i,t,e):i instanceof Vr?(function(r,o,u){if(!Hf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=qT(r.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(TA(r)),f.setAll(h),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(i,t,e):(function(r,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,t,e)}function lc(i,t,e,n){return i instanceof Sl?(function(o,u,h,f){if(!Hf(o.precondition,u))return h;const g=o.value.clone(),y=GT(o.fieldTransforms,f,u);return g.setAll(y),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(i,t,e,n):i instanceof Vr?(function(o,u,h,f){if(!Hf(o.precondition,u))return h;const g=GT(o.fieldTransforms,f,u),y=u.data;return y.setAll(TA(o)),y.setAll(g),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(i,t,e,n):(function(o,u,h){return Hf(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(i,t,e)}function cD(i,t){let e=null;for(const n of i.fieldTransforms){const r=t.data.field(n.field),o=pA(n.transform,r||null);o!=null&&(e===null&&(e=An.empty()),e.set(n.field,o))}return e||null}function HT(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!(function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&el(n,r,((o,u)=>oD(o,u)))})(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class Sl extends Fd{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vr extends Fd{constructor(t,e,n,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function TA(i){const t=new Map;return i.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const n=i.data.field(e);t.set(e,n)}})),t}function qT(i,t,e){const n=new Map;_t(i.length===e.length,32656,{Re:e.length,Ve:i.length});for(let r=0;r<e.length;r++){const o=i[r],u=o.transform,h=t.data.field(o.field);n.set(o.field,rD(u,h,e[r]))}return n}function GT(i,t,e){const n=new Map;for(const r of i){const o=r.transform,u=e.data.field(r.field);n.set(r.field,sD(o,u,t))}return n}class Hd extends Fd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EA extends Fd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Py{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&uD(o,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=lc(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=lc(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=gA();return this.mutations.forEach((r=>{const o=t.get(r.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=e.has(r.key)?null:h;const f=vA(u,h);f!==null&&n.set(r.key,f),u.isValidDocument()||u.convertToNoDocument(vt.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Mt())}isEqual(t){return this.batchId===t.batchId&&el(this.mutations,t.mutations,((e,n)=>HT(e,n)))&&el(this.baseMutations,t.baseMutations,((e,n)=>HT(e,n)))}}class ky{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){_t(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let r=(function(){return tD})();const o=t.mutations;for(let u=0;u<o.length;u++)r=r.insert(o[u].key,n[u].version);return new ky(t,e,n,r)}}class zy{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class hD{constructor(t,e){this.count=t,this.unchangedNames=e}}var Be,jt;function fD(i){switch(i){case tt.OK:return dt(64938);case tt.CANCELLED:case tt.UNKNOWN:case tt.DEADLINE_EXCEEDED:case tt.RESOURCE_EXHAUSTED:case tt.INTERNAL:case tt.UNAVAILABLE:case tt.UNAUTHENTICATED:return!1;case tt.INVALID_ARGUMENT:case tt.NOT_FOUND:case tt.ALREADY_EXISTS:case tt.PERMISSION_DENIED:case tt.FAILED_PRECONDITION:case tt.ABORTED:case tt.OUT_OF_RANGE:case tt.UNIMPLEMENTED:case tt.DATA_LOSS:return!0;default:return dt(15467,{code:i})}}function SA(i){if(i===void 0)return Re("GRPC error has no .code"),tt.UNKNOWN;switch(i){case Be.OK:return tt.OK;case Be.CANCELLED:return tt.CANCELLED;case Be.UNKNOWN:return tt.UNKNOWN;case Be.DEADLINE_EXCEEDED:return tt.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return tt.RESOURCE_EXHAUSTED;case Be.INTERNAL:return tt.INTERNAL;case Be.UNAVAILABLE:return tt.UNAVAILABLE;case Be.UNAUTHENTICATED:return tt.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return tt.INVALID_ARGUMENT;case Be.NOT_FOUND:return tt.NOT_FOUND;case Be.ALREADY_EXISTS:return tt.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return tt.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return tt.FAILED_PRECONDITION;case Be.ABORTED:return tt.ABORTED;case Be.OUT_OF_RANGE:return tt.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return tt.UNIMPLEMENTED;case Be.DATA_LOSS:return tt.DATA_LOSS;default:return dt(39323,{code:i})}}(jt=Be||(Be={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";function dD(){return new TextEncoder}const gD=new br([4294967295,4294967295],0);function KT(i){const t=dD().encode(i),e=new y1;return e.update(t),new Uint8Array(e.digest())}function YT(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new br([e,n],0),new br([r,o],0)]}class Ly{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Qu(`Invalid padding: ${e}`);if(n<0)throw new Qu(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Qu(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new Qu(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=br.fromNumber(this.ge)}ye(t,e,n){let r=t.add(e.multiply(br.fromNumber(n)));return r.compare(gD)===1&&(r=new br([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=KT(t),[n,r]=YT(e);for(let o=0;o<this.hashCount;o++){const u=this.ye(n,r,o);if(!this.we(u))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),u=new Ly(o,r,e);return n.forEach((h=>u.insert(h))),u}insert(t){if(this.ge===0)return;const e=KT(t),[n,r]=YT(e);for(let o=0;o<this.hashCount;o++){const u=this.ye(n,r,o);this.Se(u)}}Se(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kc{constructor(t,e,n,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,zc.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new kc(vt.min(),r,new ce(wt),jn(),Mt())}}class zc{constructor(t,e,n,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new zc(n,e,Mt(),Mt(),Mt())}}class qf{constructor(t,e,n,r){this.be=t,this.removedTargetIds=e,this.key=n,this.De=r}}class AA{constructor(t,e){this.targetId=t,this.Ce=e}}class xA{constructor(t,e,n=Ce.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class QT{constructor(){this.ve=0,this.Fe=XT(),this.Me=Ce.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Mt(),e=Mt(),n=Mt();return this.Fe.forEach(((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:dt(38017,{changeType:o})}})),new zc(this.Me,this.xe,t,e,n)}qe(){this.Oe=!1,this.Fe=XT()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mD{constructor(t){this.Ge=t,this.ze=new Map,this.je=jn(),this.Je=bf(),this.He=bf(),this.Ye=new ce(wt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const n=this.nt(e);switch(t.state){case 0:this.rt(e)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),n.Le(t.resumeToken));break;default:dt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((n,r)=>{this.rt(r)&&e(r)}))}st(t){const e=t.targetId,n=t.Ce.count,r=this.ot(e);if(r){const o=r.target;if(od(o))if(n===0){const u=new ht(o.path);this.et(e,u,Ee.newNoDocument(u,vt.min()))}else _t(n===1,20013,{expectedCount:n});else{const u=this._t(e);if(u!==n){const h=this.ut(t),f=h?this.ct(h,t,u):1;if(f!==0){this.it(e);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:o=0}=e;let u,h;try{u=Rs(n).toUint8Array()}catch(f){if(f instanceof G1)return Oa("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Ly(u,r,o)}catch(f){return Oa(f instanceof Qu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(t,e,n){return e.Ce.count===n-this.Pt(t,e.targetId)?0:2}Pt(t,e){const n=this.Ge.getRemoteKeysForTarget(e);let r=0;return n.forEach((o=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;t.mightContain(h)||(this.et(e,o,null),r++)})),r}Tt(t){const e=new Map;this.ze.forEach(((o,u)=>{const h=this.ot(u);if(h){if(o.current&&od(h.target)){const f=new ht(h.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,Ee.newNoDocument(f,t))}o.Be&&(e.set(u,o.ke()),o.qe())}}));let n=Mt();this.He.forEach(((o,u)=>{let h=!0;u.forEachWhile((f=>{const g=this.ot(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(n=n.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(t)));const r=new kc(t,e,this.Ye,this.je,n);return this.je=jn(),this.Je=bf(),this.He=bf(),this.Ye=new ce(wt),r}Xe(t,e){if(!this.rt(t))return;const n=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,n),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,n){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,e)?r.Qe(e,1):r.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),n&&(this.je=this.je.insert(e,n))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new QT,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new ie(wt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new ie(wt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||rt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new QT),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function bf(){return new ce(ht.comparator)}function XT(){return new ce(ht.comparator)}const pD={asc:"ASCENDING",desc:"DESCENDING"},yD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_D={and:"AND",or:"OR"};class bD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function $p(i,t){return i.useProto3Json||Od(t)?t:{value:t}}function dl(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function wA(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function vD(i,t){return dl(i,t.toTimestamp())}function mn(i){return _t(!!i,49232),vt.fromTimestamp((function(e){const n=ws(e);return new $t(n.seconds,n.nanos)})(i))}function By(i,t){return Zp(i,t).canonicalString()}function Zp(i,t){const e=(function(r){return new Wt(["projects",r.projectId,"databases",r.database])})(i).child("documents");return t===void 0?e:e.child(t)}function RA(i){const t=Wt.fromString(i);return _t(kA(t),10190,{key:t.toString()}),t}function ud(i,t){return By(i.databaseId,t.path)}function Ia(i,t){const e=RA(t);if(e.get(1)!==i.databaseId.projectId)throw new ut(tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new ut(tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new ht(DA(e))}function IA(i,t){return By(i.databaseId,t)}function CA(i){const t=RA(i);return t.length===4?Wt.emptyPath():DA(t)}function Jp(i){return new Wt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function DA(i){return _t(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function WT(i,t,e){return{name:ud(i,t),fields:e.value.mapValue.fields}}function TD(i,t,e){const n=Ia(i,t.name),r=mn(t.updateTime),o=t.createTime?mn(t.createTime):vt.min(),u=new An({mapValue:{fields:t.fields}}),h=Ee.newFoundDocument(n,r,o,u);return e&&h.setHasCommittedMutations(),e?h.setHasCommittedMutations():h}function ED(i,t){let e;if("targetChange"in t){t.targetChange;const n=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:dt(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=(function(g,y){return g.useProto3Json?(_t(y===void 0||typeof y=="string",58123),Ce.fromBase64String(y||"")):(_t(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Ce.fromUint8Array(y||new Uint8Array))})(i,t.targetChange.resumeToken),u=t.targetChange.cause,h=u&&(function(g){const y=g.code===void 0?tt.UNKNOWN:SA(g.code);return new ut(y,g.message||"")})(u);e=new xA(n,r,o,h||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const r=Ia(i,n.document.name),o=mn(n.document.updateTime),u=n.document.createTime?mn(n.document.createTime):vt.min(),h=new An({mapValue:{fields:n.document.fields}}),f=Ee.newFoundDocument(r,o,u,h),g=n.targetIds||[],y=n.removedTargetIds||[];e=new qf(g,y,f.key,f)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const r=Ia(i,n.document),o=n.readTime?mn(n.readTime):vt.min(),u=Ee.newNoDocument(r,o),h=n.removedTargetIds||[];e=new qf([],h,u.key,u)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const r=Ia(i,n.document),o=n.removedTargetIds||[];e=new qf([],o,r,null)}else{if(!("filter"in t))return dt(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:r=0,unchangedNames:o}=n,u=new hD(r,o),h=n.targetId;e=new AA(h,u)}}return e}function cd(i,t){let e;if(t instanceof Sl)e={update:WT(i,t.key,t.value)};else if(t instanceof Hd)e={delete:ud(i,t.key)};else if(t instanceof Vr)e={update:WT(i,t.key,t.data),updateMask:ID(t.fieldMask)};else{if(!(t instanceof EA))return dt(16599,{Vt:t.type});e={verify:ud(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((n=>(function(o,u){const h=u.transform;if(h instanceof xc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof hl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof wc)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw dt(20930,{transform:u.transform})})(0,n)))),t.precondition.isNone||(e.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:vD(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:dt(27497)})(i,t.precondition)),e}function ty(i,t){const e=t.currentDocument?(function(o){return o.updateTime!==void 0?Rn.updateTime(mn(o.updateTime)):o.exists!==void 0?Rn.exists(o.exists):Rn.none()})(t.currentDocument):Rn.none(),n=t.updateTransforms?t.updateTransforms.map((r=>(function(u,h){let f=null;if("setToServerValue"in h)_t(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),f=new xc;else if("appendMissingElements"in h){const y=h.appendMissingElements.values||[];f=new hl(y)}else if("removeAllFromArray"in h){const y=h.removeAllFromArray.values||[];f=new fl(y)}else"increment"in h?f=new wc(u,h.increment):dt(16584,{proto:h});const g=be.fromServerFormat(h.fieldPath);return new aD(g,f)})(i,r))):[];if(t.update){t.update.name;const r=Ia(i,t.update.name),o=new An({mapValue:{fields:t.update.fields}});if(t.updateMask){const u=(function(f){const g=f.fieldPaths||[];return new ri(g.map((y=>be.fromServerFormat(y))))})(t.updateMask);return new Vr(r,o,u,e,n)}return new Sl(r,o,e,n)}if(t.delete){const r=Ia(i,t.delete);return new Hd(r,e)}if(t.verify){const r=Ia(i,t.verify);return new EA(r,e)}return dt(1463,{proto:t})}function SD(i,t){return i&&i.length>0?(_t(t!==void 0,14353),i.map((e=>(function(r,o){let u=r.updateTime?mn(r.updateTime):mn(o);return u.isEqual(vt.min())&&(u=mn(o)),new lD(u,r.transformResults||[])})(e,t)))):[]}function MA(i,t){return{documents:[IA(i,t.path)]}}function VA(i,t){const e={structuredQuery:{}},n=t.path;let r;t.collectionGroup!==null?(r=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=IA(i,r);const o=(function(g){if(g.length!==0)return PA(ne.create(g,"and"))})(t.filters);o&&(e.structuredQuery.where=o);const u=(function(g){if(g.length!==0)return g.map((y=>(function(T){return{field:Yo(T.field),direction:xD(T.dir)}})(y)))})(t.orderBy);u&&(e.structuredQuery.orderBy=u);const h=$p(i,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:r}}function OA(i){let t=CA(i.parent);const e=i.structuredQuery,n=e.from?e.from.length:0;let r=null;if(n>0){_t(n===1,65062);const y=e.from[0];y.allDescendants?r=y.collectionId:t=t.child(y.collectionId)}let o=[];e.where&&(o=(function(_){const T=NA(_);return T instanceof ne&&Vy(T)?T.getFilters():[T]})(e.where));let u=[];e.orderBy&&(u=(function(_){return _.map((T=>(function(C){return new Ac(Qo(C.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(T)))})(e.orderBy));let h=null;e.limit&&(h=(function(_){let T;return T=typeof _=="object"?_.value:_,Od(T)?null:T})(e.limit));let f=null;e.startAt&&(f=(function(_){const T=!!_.before,S=_.values||[];return new ul(S,T)})(e.startAt));let g=null;return e.endAt&&(g=(function(_){const T=!_.before,S=_.values||[];return new ul(S,T)})(e.endAt)),oA(t,r,u,o,h,"F",f,g)}function AD(i,t){const e=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt(28987,{purpose:r})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function NA(i){return i.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Qo(e.unaryFilter.field);return Lt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Qo(e.unaryFilter.field);return Lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Qo(e.unaryFilter.field);return Lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Qo(e.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return dt(61313);default:return dt(60726)}})(i):i.fieldFilter!==void 0?(function(e){return Lt.create(Qo(e.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return dt(58110);default:return dt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(e){return ne.create(e.compositeFilter.filters.map((n=>NA(n))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return dt(1026)}})(e.compositeFilter.op))})(i):dt(30097,{filter:i})}function xD(i){return pD[i]}function wD(i){return yD[i]}function RD(i){return _D[i]}function Yo(i){return{fieldPath:i.canonicalString()}}function Qo(i){return be.fromServerFormat(i.fieldPath)}function PA(i){return i instanceof Lt?(function(e){if(e.op==="=="){if(NT(e.value))return{unaryFilter:{field:Yo(e.field),op:"IS_NAN"}};if(OT(e.value))return{unaryFilter:{field:Yo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(NT(e.value))return{unaryFilter:{field:Yo(e.field),op:"IS_NOT_NAN"}};if(OT(e.value))return{unaryFilter:{field:Yo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(e.field),op:wD(e.op),value:e.value}}})(i):i instanceof ne?(function(e){const n=e.getFilters().map((r=>PA(r)));return n.length===1?n[0]:{compositeFilter:{op:RD(e.op),filters:n}}})(i):dt(54877,{filter:i})}function ID(i){const t=[];return i.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function kA(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Ss{constructor(t,e,n,r,o=vt.min(),u=vt.min(),h=Ce.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(t){return new Ss(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class zA{constructor(t){this.yt=t}}function CD(i,t){let e;if(t.document)e=TD(i.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const n=ht.fromSegments(t.noDocument.path),r=za(t.noDocument.readTime);e=Ee.newNoDocument(n,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return dt(56709);{const n=ht.fromSegments(t.unknownDocument.path),r=za(t.unknownDocument.version);e=Ee.newUnknownDocument(n,r)}}return t.readTime&&e.setReadTime((function(r){const o=new $t(r[0],r[1]);return vt.fromTimestamp(o)})(t.readTime)),e}function $T(i,t){const e=t.key,n={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:hd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=(function(o,u){return{name:ud(o,u.key),fields:u.data.value.mapValue.fields,updateTime:dl(o,u.version.toTimestamp()),createTime:dl(o,u.createTime.toTimestamp())}})(i.yt,t);else if(t.isNoDocument())n.noDocument={path:e.path.toArray(),readTime:ka(t.version)};else{if(!t.isUnknownDocument())return dt(57904,{document:t});n.unknownDocument={path:e.path.toArray(),version:ka(t.version)}}return n}function hd(i){const t=i.toTimestamp();return[t.seconds,t.nanoseconds]}function ka(i){const t=i.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function za(i){const t=new $t(i.seconds,i.nanoseconds);return vt.fromTimestamp(t)}function va(i,t){const e=(t.baseMutations||[]).map((o=>ty(i.yt,o)));for(let o=0;o<t.mutations.length-1;++o){const u=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){const h=t.mutations[o+1];u.updateTransforms=h.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const n=t.mutations.map((o=>ty(i.yt,o))),r=$t.fromMillis(t.localWriteTimeMs);return new Py(t.batchId,r,e,n)}function Xu(i){const t=za(i.readTime),e=i.lastLimboFreeSnapshotVersion!==void 0?za(i.lastLimboFreeSnapshotVersion):vt.min();let n;return n=(function(o){return o.documents!==void 0})(i.query)?(function(o){const u=o.documents.length;return _t(u===1,1966,{count:u}),Fn(Bd(CA(o.documents[0])))})(i.query):(function(o){return Fn(OA(o))})(i.query),new Ss(n,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,t,e,Ce.fromBase64String(i.resumeToken))}function LA(i,t){const e=ka(t.snapshotVersion),n=ka(t.lastLimboFreeSnapshotVersion);let r;r=od(t.target)?MA(i.yt,t.target):VA(i.yt,t.target).ft;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Pa(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:r}}function BA(i){const t=OA({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Wp(t,t.limit,"L"):t}function hp(i,t){return new zy(t.largestBatchId,ty(i.yt,t.overlayMutation))}function ZT(i,t){const e=t.path.lastSegment();return[i,hn(t.path.popLast()),e]}function JT(i,t,e,n){return{indexId:i,uid:t,sequenceNumber:e,readTime:ka(n.readTime),documentKey:hn(n.documentKey.path),largestBatchId:n.largestBatchId}}class DD{getBundleMetadata(t,e){return tE(t).get(e).next((n=>{if(n)return(function(o){return{id:o.bundleId,createTime:za(o.createTime),version:o.version}})(n)}))}saveBundleMetadata(t,e){return tE(t).put((function(r){return{bundleId:r.id,createTime:ka(mn(r.createTime)),version:r.version}})(e))}getNamedQuery(t,e){return eE(t).get(e).next((n=>{if(n)return(function(o){return{name:o.name,query:BA(o.bundledQuery),readTime:za(o.readTime)}})(n)}))}saveNamedQuery(t,e){return eE(t).put((function(r){return{name:r.name,readTime:ka(mn(r.readTime)),bundledQuery:r.bundledQuery}})(e))}}function tE(i){return Ye(i,Nd)}function eE(i){return Ye(i,Pd)}class qd{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const n=e.uid||"";return new qd(t,n)}getOverlay(t,e){return ku(t).get(ZT(this.userId,e)).next((n=>n?hp(this.serializer,n):null))}getOverlays(t,e){const n=Wi();return j.forEach(e,(r=>this.getOverlay(t,r).next((o=>{o!==null&&n.set(r,o)})))).next((()=>n))}saveOverlays(t,e,n){const r=[];return n.forEach(((o,u)=>{const h=new zy(e,u);r.push(this.St(t,h))})),j.waitFor(r)}removeOverlaysForBatchId(t,e,n){const r=new Set;e.forEach((u=>r.add(hn(u.getCollectionPath()))));const o=[];return r.forEach((u=>{const h=IDBKeyRange.bound([this.userId,u,n],[this.userId,u,n+1],!1,!0);o.push(ku(t).Z(Fp,h))})),j.waitFor(o)}getOverlaysForCollection(t,e,n){const r=Wi(),o=hn(e),u=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ku(t).J(Fp,u).next((h=>{for(const f of h){const g=hp(this.serializer,f);r.set(g.getKey(),g)}return r}))}getOverlaysForCollectionGroup(t,e,n,r){const o=Wi();let u;const h=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return ku(t).ee({index:B1,range:h},((f,g,y)=>{const _=hp(this.serializer,g);o.size()<r||_.largestBatchId===u?(o.set(_.getKey(),_),u=_.largestBatchId):y.done()})).next((()=>o))}St(t,e){return ku(t).put((function(r,o,u){const[h,f,g]=ZT(o,u.mutation.key);return{userId:o,collectionPath:f,documentId:g,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:cd(r.yt,u.mutation)}})(this.serializer,this.userId,e))}}function ku(i){return Ye(i,kd)}class MD{bt(t){return Ye(t,Ry)}getSessionToken(t){return this.bt(t).get("sessionToken").next((e=>{const n=e?.value;return n?Ce.fromUint8Array(n):Ce.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}class Ta{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(_e(t.integerValue));else if("doubleValue"in t){const n=_e(t.doubleValue);isNaN(n)?this.Ft(e,13):(this.Ft(e,15),pc(n)?e.Mt(0):e.Mt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Ft(e,20),typeof n=="string"&&(n=ws(n)),e.xt(`${n.seconds||""}`),e.Mt(n.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Rs(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Ft(e,45),e.Mt(n.latitude||0),e.Mt(n.longitude||0)}else"mapValue"in t?$1(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):Ld(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):dt(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const n=t.fields||{};this.Ft(e,55);for(const r of Object.keys(n))this.Ot(r,e),this.Ct(n[r],e)}kt(t,e){const n=t.fields||{};this.Ft(e,53);const r=ol,o=n[r].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(_e(o)),this.Ot(r,e),this.Ct(n[r],e)}Qt(t,e){const n=t.values||[];this.Ft(e,50);for(const r of n)this.Ct(r,e)}Lt(t,e){this.Ft(e,37),ht.fromName(t).path.forEach((n=>{this.Ft(e,60),this.Ut(n,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Ta.Kt=new Ta;const Bo=255;function VD(i){if(i===0)return 8;let t=0;return i>>4||(t+=4,i<<=4),i>>6||(t+=2,i<<=2),i>>7||(t+=1),t}function nE(i){const t=64-(function(n){let r=0;for(let o=0;o<8;++o){const u=VD(255&n[o]);if(r+=u,u!==8)break}return r})(i);return Math.ceil(t/8)}class OD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Gt(n.value),n=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Jt(n.value),n=e.next();this.Ht()}Yt(t){for(const e of t){const n=e.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const r=e.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(t){for(const e of t){const n=e.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const r=e.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(t){const e=this.en(t),n=nE(e);this.tn(1+n),this.buffer[this.position++]=255&n;for(let r=e.length-n;r<e.length;++r)this.buffer[this.position++]=255&e[r]}nn(t){const e=this.en(t),n=nE(e);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let r=e.length-n;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}rn(){this.sn(Bo),this.sn(255)}_n(){this.an(Bo),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)})(t),n=!!(128&e[0]);e[0]^=n?255:128;for(let r=1;r<e.length;++r)e[r]^=n?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Bo?(this.sn(Bo),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Bo?(this.an(Bo),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class ND{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class PD{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class zu{constructor(){this.cn=new OD,this.ln=new ND(this.cn),this.hn=new PD(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Ea{constructor(t,e,n,r){this.Tn=t,this.In=e,this.En=n,this.dn=r}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,n=new Uint8Array(e);return n.set(this.dn,0),e!==t?n.set([0],this.dn.length):++n[n.length-1],new Ea(this.Tn,this.In,this.En,n)}Rn(t,e,n){return{indexId:this.Tn,uid:t,arrayValue:Gf(this.En),directionalValue:Gf(this.dn),orderedDocumentKey:Gf(e),documentKey:n.path.toArray()}}Vn(t,e,n){const r=this.Rn(t,e,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function lr(i,t){let e=i.Tn-t.Tn;return e!==0?e:(e=iE(i.En,t.En),e!==0?e:(e=iE(i.dn,t.dn),e!==0?e:ht.comparator(i.In,t.In)))}function iE(i,t){for(let e=0;e<i.length&&e<t.length;++e){const n=i[e]-t[e];if(n!==0)return n}return i.length-t.length}function Gf(i){return l1()?(function(e){let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return n})(i):i}function sE(i){return typeof i!="string"?i:(function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n})(i)}class rE{constructor(t){this.mn=new ie(((e,n)=>be.comparator(e.field,n.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const n=e;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(t){if(_t(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Bp(t);if(e!==void 0&&!this.wn(e))return!1;const n=pa(t);let r=new Set,o=0,u=0;for(;o<n.length&&this.wn(n[o]);++o)r=r.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!r.has(h.field.canonicalString())){const f=n[o];if(!this.Sn(h,f)||!this.bn(this.fn[u++],f))return!1}++o}for(;o<n.length;++o){const h=n[o];if(u>=this.fn.length||!this.bn(this.fn[u++],h))return!1}return!0}Dn(){if(this.pn)return null;let t=new ie(be.comparator);const e=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")e.push(new zf(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),e.push(new zf(n.field,0))}for(const n of this.fn)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),e.push(new zf(n.field,n.dir==="asc"?0:1)));return new nd(nd.UNKNOWN_ID,this.collectionId,e,mc.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const n=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===n}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}function UA(i){if(_t(i instanceof Lt||i instanceof ne,20012),i instanceof Lt){if(i instanceof aA){const e=i.value.arrayValue?.values?.map((n=>Lt.create(i.field,"==",n)))||[];return ne.create(e,"or")}return i}const t=i.filters.map((e=>UA(e)));return ne.create(t,i.op)}function kD(i){if(i.getFilters().length===0)return[];const t=iy(UA(i));return _t(jA(t),7391),ey(t)||ny(t)?[t]:t.getFilters()}function ey(i){return i instanceof Lt}function ny(i){return i instanceof ne&&Vy(i)}function jA(i){return ey(i)||ny(i)||(function(e){if(e instanceof ne&&Kp(e)){for(const n of e.getFilters())if(!ey(n)&&!ny(n))return!1;return!0}return!1})(i)}function iy(i){if(_t(i instanceof Lt||i instanceof ne,34018),i instanceof Lt)return i;if(i.filters.length===1)return iy(i.filters[0]);const t=i.filters.map((n=>iy(n)));let e=ne.create(t,i.op);return e=fd(e),jA(e)?e:(_t(e instanceof ne,64498),_t(cl(e),40251),_t(e.filters.length>1,57927),e.filters.reduce(((n,r)=>Uy(n,r))))}function Uy(i,t){let e;return _t(i instanceof Lt||i instanceof ne,38388),_t(t instanceof Lt||t instanceof ne,25473),e=i instanceof Lt?t instanceof Lt?(function(r,o){return ne.create([r,o],"and")})(i,t):aE(i,t):t instanceof Lt?aE(t,i):(function(r,o){if(_t(r.filters.length>0&&o.filters.length>0,48005),cl(r)&&cl(o))return iA(r,o.getFilters());const u=Kp(r)?r:o,h=Kp(r)?o:r,f=u.filters.map((g=>Uy(g,h)));return ne.create(f,"or")})(i,t),fd(e)}function aE(i,t){if(cl(t))return iA(t,i.getFilters());{const e=t.filters.map((n=>Uy(i,n)));return ne.create(e,"or")}}function fd(i){if(_t(i instanceof Lt||i instanceof ne,11850),i instanceof Lt)return i;const t=i.getFilters();if(t.length===1)return fd(t[0]);if(eA(i))return i;const e=t.map((r=>fd(r))),n=[];return e.forEach((r=>{r instanceof Lt?n.push(r):r instanceof ne&&(r.op===i.op?n.push(...r.filters):n.push(r))})),n.length===1?n[0]:ne.create(n,i.op)}class zD{constructor(){this.Cn=new jy}addToCollectionParentIndex(t,e){return this.Cn.add(e),j.resolve()}getCollectionParents(t,e){return j.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return j.resolve()}deleteFieldIndex(t,e){return j.resolve()}deleteAllFieldIndexes(t){return j.resolve()}createTargetIndexes(t,e){return j.resolve()}getDocumentsMatchingTarget(t,e){return j.resolve(null)}getIndexType(t,e){return j.resolve(0)}getFieldIndexes(t,e){return j.resolve([])}getNextCollectionGroupToUpdate(t){return j.resolve(null)}getMinOffset(t,e){return j.resolve(Hn.min())}getMinOffsetFromCollectionGroup(t,e){return j.resolve(Hn.min())}updateCollectionGroup(t,e,n){return j.resolve()}updateIndexEntries(t,e){return j.resolve()}}class jy{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ie(Wt.comparator),o=!r.has(n);return this.index[e]=r.add(n),o}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new ie(Wt.comparator)).toArray()}}const oE="IndexedDbIndexManager",vf=new Uint8Array(0);class LD{constructor(t,e){this.databaseId=e,this.vn=new jy,this.Fn=new Is((n=>Pa(n)),((n,r)=>Nc(n,r))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const n=e.lastSegment(),r=e.popLast();t.addOnCommittedListener((()=>{this.vn.add(e)}));const o={collectionId:n,parent:hn(r)};return lE(t).put(o)}return j.resolve()}getCollectionParents(t,e){const n=[],r=IDBKeyRange.bound([e,""],[x1(e),""],!1,!0);return lE(t).J(r).next((o=>{for(const u of o){if(u.collectionId!==e)break;n.push(Xi(u.parent))}return n}))}addFieldIndex(t,e){const n=Lu(t),r=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(e);delete r.indexId;const o=n.add(r);if(e.indexState){const u=jo(t);return o.next((h=>{u.put(JT(h,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return o.next()}deleteFieldIndex(t,e){const n=Lu(t),r=jo(t),o=Uo(t);return n.delete(e.indexId).next((()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=Lu(t),n=Uo(t),r=jo(t);return e.Z().next((()=>n.Z())).next((()=>r.Z()))}createTargetIndexes(t,e){return j.forEach(this.Mn(e),(n=>this.getIndexType(t,n).next((r=>{if(r===0||r===1){const o=new rE(n).Dn();if(o!=null)return this.addFieldIndex(t,o)}}))))}getDocumentsMatchingTarget(t,e){const n=Uo(t);let r=!0;const o=new Map;return j.forEach(this.Mn(e),(u=>this.xn(t,u).next((h=>{r&&(r=!!h),o.set(u,h)})))).next((()=>{if(r){let u=Mt();const h=[];return j.forEach(o,((f,g)=>{rt(oE,`Using index ${(function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map((Z=>`${Z.fieldPath}:${Z.kind}`)).join(",")}`})(f)} to execute ${Pa(e)}`);const y=(function(Q,Z){const $=Bp(Z);if($===void 0)return null;for(const it of ld(Q,$.fieldPath))switch(it.op){case"array-contains-any":return it.value.arrayValue.values||[];case"array-contains":return[it.value]}return null})(g,f),_=(function(Q,Z){const $=new Map;for(const it of pa(Z))for(const R of ld(Q,it.fieldPath))switch(R.op){case"==":case"in":$.set(it.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return $.set(it.fieldPath.canonicalString(),R.value),Array.from($.values())}return null})(g,f),T=(function(Q,Z){const $=[];let it=!0;for(const R of pa(Z)){const x=R.kind===0?BT(Q,R.fieldPath,Q.startAt):UT(Q,R.fieldPath,Q.startAt);$.push(x.value),it&&(it=x.inclusive)}return new ul($,it)})(g,f),S=(function(Q,Z){const $=[];let it=!0;for(const R of pa(Z)){const x=R.kind===0?UT(Q,R.fieldPath,Q.endAt):BT(Q,R.fieldPath,Q.endAt);$.push(x.value),it&&(it=x.inclusive)}return new ul($,it)})(g,f),C=this.On(f,g,T),D=this.On(f,g,S),M=this.Nn(f,g,_),U=this.Bn(f.indexId,y,C,T.inclusive,D,S.inclusive,M);return j.forEach(U,(G=>n.Y(G,e.limit).next((Q=>{Q.forEach((Z=>{const $=ht.fromSegments(Z.documentKey);u.has($)||(u=u.add($),h.push($))}))}))))})).next((()=>h))}return j.resolve(null)}))}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=kD(ne.create(t.filters,"and")).map((n=>Qp(t.path,t.collectionGroup,t.orderBy,n.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,e),e)}Bn(t,e,n,r,o,u,h){const f=(e!=null?e.length:1)*Math.max(n.length,o.length),g=f/(e!=null?e.length:1),y=[];for(let _=0;_<f;++_){const T=e?this.Ln(e[_/g]):vf,S=this.kn(t,T,n[_%g],r),C=this.qn(t,T,o[_%g],u),D=h.map((M=>this.kn(t,T,M,!0)));y.push(...this.createRange(S,C,D))}return y}kn(t,e,n,r){const o=new Ea(t,ht.empty(),e,n);return r?o:o.An()}qn(t,e,n,r){const o=new Ea(t,ht.empty(),e,n);return r?o.An():o}xn(t,e){const n=new rE(e),r=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next((o=>{let u=null;for(const h of o)n.yn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u}))}getIndexType(t,e){let n=2;const r=this.Mn(e);return j.forEach(r,(o=>this.xn(t,o).next((u=>{u?n!==0&&u.fields.length<(function(f){let g=new ie(be.comparator),y=!1;for(const _ of f.filters)for(const T of _.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?y=!0:g=g.add(T.field));for(const _ of f.orderBy)_.field.isKeyField()||(g=g.add(_.field));return g.size+(y?1:0)})(o)&&(n=1):n=0})))).next((()=>(function(u){return u.limit!==null})(e)&&r.length>1&&n===2?1:n))}Qn(t,e){const n=new zu;for(const r of pa(t)){const o=e.data.field(r.fieldPath);if(o==null)return null;const u=n.Pn(r.kind);Ta.Kt.Dt(o,u)}return n.un()}Ln(t){const e=new zu;return Ta.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const n=new zu;return Ta.Kt.Dt(Ec(this.databaseId,e),n.Pn((function(o){const u=pa(o);return u.length===0?0:u[u.length-1].kind})(t))),n.un()}Nn(t,e,n){if(n===null)return[];let r=[];r.push(new zu);let o=0;for(const u of pa(t)){const h=n[o++];for(const f of r)if(this.Un(e,u.fieldPath)&&Sc(h))r=this.Kn(r,u,h);else{const g=f.Pn(u.kind);Ta.Kt.Dt(h,g)}}return this.Wn(r)}On(t,e,n){return this.Nn(t,e,n.position)}Wn(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].un();return e}Kn(t,e,n){const r=[...t],o=[];for(const u of n.arrayValue.values||[])for(const h of r){const f=new zu;f.seed(h.un()),Ta.Kt.Dt(u,f.Pn(e.kind)),o.push(f)}return o}Un(t,e){return!!t.filters.find((n=>n instanceof Lt&&n.field.isEqual(e)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(t,e){const n=Lu(t),r=jo(t);return(e?n.J(jp,IDBKeyRange.bound(e,e)):n.J()).next((o=>{const u=[];return j.forEach(o,(h=>r.get([h.indexId,this.uid]).next((f=>{u.push((function(y,_){const T=_?new mc(_.sequenceNumber,new Hn(za(_.readTime),new ht(Xi(_.documentKey)),_.largestBatchId)):mc.empty(),S=y.fields.map((([C,D])=>new zf(be.fromServerFormat(C),D)));return new nd(y.indexId,y.collectionGroup,S,T)})(h,f))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((n,r)=>{const o=n.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:wt(n.collectionGroup,r.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,n){const r=Lu(t),o=jo(t);return this.Gn(t).next((u=>r.J(jp,IDBKeyRange.bound(e,e)).next((h=>j.forEach(h,(f=>o.put(JT(f.indexId,this.uid,u,n))))))))}updateIndexEntries(t,e){const n=new Map;return j.forEach(e,((r,o)=>{const u=n.get(r.collectionGroup);return(u?j.resolve(u):this.getFieldIndexes(t,r.collectionGroup)).next((h=>(n.set(r.collectionGroup,h),j.forEach(h,(f=>this.zn(t,r,f).next((g=>{const y=this.jn(o,f);return g.isEqual(y)?j.resolve():this.Jn(t,o,f,g,y)})))))))}))}Hn(t,e,n,r){return Uo(t).put(r.Rn(this.uid,this.$n(n,e.key),e.key))}Yn(t,e,n,r){return Uo(t).delete(r.Vn(this.uid,this.$n(n,e.key),e.key))}zn(t,e,n){const r=Uo(t);let o=new ie(lr);return r.ee({index:L1,range:IDBKeyRange.only([n.indexId,this.uid,Gf(this.$n(n,e))])},((u,h)=>{o=o.add(new Ea(n.indexId,e,sE(h.arrayValue),sE(h.directionalValue)))})).next((()=>o))}jn(t,e){let n=new ie(lr);const r=this.Qn(e,t);if(r==null)return n;const o=Bp(e);if(o!=null){const u=t.data.field(o.fieldPath);if(Sc(u))for(const h of u.arrayValue.values||[])n=n.add(new Ea(e.indexId,t.key,this.Ln(h),r))}else n=n.add(new Ea(e.indexId,t.key,vf,r));return n}Jn(t,e,n,r,o){rt(oE,"Updating index entries for document '%s'",e.key);const u=[];return(function(f,g,y,_,T){const S=f.getIterator(),C=g.getIterator();let D=Lo(S),M=Lo(C);for(;D||M;){let U=!1,G=!1;if(D&&M){const Q=y(D,M);Q<0?G=!0:Q>0&&(U=!0)}else D!=null?G=!0:U=!0;U?(_(M),M=Lo(C)):G?(T(D),D=Lo(S)):(D=Lo(S),M=Lo(C))}})(r,o,lr,(h=>{u.push(this.Hn(t,e,n,h))}),(h=>{u.push(this.Yn(t,e,n,h))})),j.waitFor(u)}Gn(t){let e=1;return jo(t).ee({index:z1,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,r,o)=>{o.done(),e=r.sequenceNumber+1})).next((()=>e))}createRange(t,e,n){n=n.sort(((u,h)=>lr(u,h))).filter(((u,h,f)=>!h||lr(u,f[h-1])!==0));const r=[];r.push(t);for(const u of n){const h=lr(u,t),f=lr(u,e);if(h===0)r[0]=t.An();else if(h>0&&f<0)r.push(u),r.push(u.An());else if(f>0)break}r.push(e);const o=[];for(let u=0;u<r.length;u+=2){if(this.Zn(r[u],r[u+1]))return[];const h=r[u].Vn(this.uid,vf,ht.empty()),f=r[u+1].Vn(this.uid,vf,ht.empty());o.push(IDBKeyRange.bound(h,f))}return o}Zn(t,e){return lr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(uE)}getMinOffset(t,e){return j.mapArray(this.Mn(e),(n=>this.xn(t,n).next((r=>r||dt(44426))))).next(uE)}}function lE(i){return Ye(i,bc)}function Uo(i){return Ye(i,sc)}function Lu(i){return Ye(i,wy)}function jo(i){return Ye(i,ic)}function uE(i){_t(i.length!==0,28825);let t=i[0].indexState.offset,e=t.largestBatchId;for(let n=1;n<i.length;n++){const r=i[n].indexState.offset;Sy(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Hn(t.readTime,t.documentKey,e)}const cE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FA=41943040;class cn{static withCacheSize(t){return new cn(t,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}function HA(i,t,e){const n=i.store(bi),r=i.store(il),o=[],u=IDBKeyRange.only(e.batchId);let h=0;const f=n.ee({range:u},((y,_,T)=>(h++,T.delete())));o.push(f.next((()=>{_t(h===1,47070,{batchId:e.batchId})})));const g=[];for(const y of e.mutations){const _=N1(t,y.key.path,e.batchId);o.push(r.delete(_)),g.push(y.key)}return j.waitFor(o).next((()=>g))}function dd(i){if(!i)return 0;let t;if(i.document)t=i.document;else if(i.unknownDocument)t=i.unknownDocument;else{if(!i.noDocument)throw dt(14731);t=i.noDocument}return JSON.stringify(t).length}cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(FA,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);class Gd{constructor(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.Xn={}}static wt(t,e,n,r){_t(t.uid!=="",64387);const o=t.isAuthenticated()?t.uid:"";return new Gd(o,e,n,r)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ur(t).ee({index:Sa,range:n},((r,o,u)=>{e=!1,u.done()})).next((()=>e))}addMutationBatch(t,e,n,r){const o=Xo(t),u=ur(t);return u.add({}).next((h=>{_t(typeof h=="number",49019);const f=new Py(h,e,n,r),g=(function(S,C,D){const M=D.baseMutations.map((G=>cd(S.yt,G))),U=D.mutations.map((G=>cd(S.yt,G)));return{userId:C,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:M,mutations:U}})(this.serializer,this.userId,f),y=[];let _=new ie(((T,S)=>wt(T.canonicalString(),S.canonicalString())));for(const T of r){const S=N1(this.userId,T.key.path,h);_=_.add(T.key.path.popLast()),y.push(u.put(g)),y.push(o.put(S,mC))}return _.forEach((T=>{y.push(this.indexManager.addToCollectionParentIndex(t,T))})),t.addOnCommittedListener((()=>{this.Xn[h]=f.keys()})),j.waitFor(y).next((()=>f))}))}lookupMutationBatch(t,e){return ur(t).get(e).next((n=>n?(_t(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:e}),va(this.serializer,n)):null))}er(t,e){return this.Xn[e]?j.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next((n=>{if(n){const r=n.keys();return this.Xn[e]=r,r}return null}))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return ur(t).ee({index:Sa,range:r},((u,h,f)=>{h.userId===this.userId&&(_t(h.batchId>=n,47524,{tr:n}),o=va(this.serializer,h)),f.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=wa;return ur(t).ee({index:Sa,range:e,reverse:!0},((r,o,u)=>{n=o.batchId,u.done()})).next((()=>n))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,wa],[this.userId,Number.POSITIVE_INFINITY]);return ur(t).J(Sa,e).next((n=>n.map((r=>va(this.serializer,r)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=Lf(this.userId,e.path),r=IDBKeyRange.lowerBound(n),o=[];return Xo(t).ee({range:r},((u,h,f)=>{const[g,y,_]=u,T=Xi(y);if(g===this.userId&&e.path.isEqual(T))return ur(t).get(_).next((S=>{if(!S)throw dt(61480,{nr:u,batchId:_});_t(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:_}),o.push(va(this.serializer,S))}));f.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ie(wt);const r=[];return e.forEach((o=>{const u=Lf(this.userId,o.path),h=IDBKeyRange.lowerBound(u),f=Xo(t).ee({range:h},((g,y,_)=>{const[T,S,C]=g,D=Xi(S);T===this.userId&&o.path.isEqual(D)?n=n.add(C):_.done()}));r.push(f)})),j.waitFor(r).next((()=>this.rr(t,n)))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1,o=Lf(this.userId,n),u=IDBKeyRange.lowerBound(o);let h=new ie(wt);return Xo(t).ee({range:u},((f,g,y)=>{const[_,T,S]=f,C=Xi(T);_===this.userId&&n.isPrefixOf(C)?C.length===r&&(h=h.add(S)):y.done()})).next((()=>this.rr(t,h)))}rr(t,e){const n=[],r=[];return e.forEach((o=>{r.push(ur(t).get(o).next((u=>{if(u===null)throw dt(35274,{batchId:o});_t(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:o}),n.push(va(this.serializer,u))})))})),j.waitFor(r).next((()=>n))}removeMutationBatch(t,e){return HA(t.le,this.userId,e).next((n=>(t.addOnCommittedListener((()=>{this.ir(e.batchId)})),j.forEach(n,(r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return j.resolve();const n=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),r=[];return Xo(t).ee({range:n},((o,u,h)=>{if(o[0]===this.userId){const f=Xi(o[1]);r.push(f)}else h.done()})).next((()=>{_t(r.length===0,56720,{sr:r.map((o=>o.canonicalString()))})}))}))}containsKey(t,e){return qA(t,this.userId,e)}_r(t){return GA(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:wa,lastStreamToken:""}))}}function qA(i,t,e){const n=Lf(t,e.path),r=n[1],o=IDBKeyRange.lowerBound(n);let u=!1;return Xo(i).ee({range:o,X:!0},((h,f,g)=>{const[y,_,T]=h;y===t&&_===r&&(u=!0),g.done()})).next((()=>u))}function ur(i){return Ye(i,bi)}function Xo(i){return Ye(i,il)}function GA(i){return Ye(i,yc)}class La{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new La(0)}static cr(){return new La(-1)}}class BD{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next((e=>{const n=new La(e.highestTargetId);return e.highestTargetId=n.next(),this.hr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((e=>vt.fromTimestamp(new $t(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,n){return this.lr(t).next((r=>(r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.hr(t,r))))}addTargetData(t,e){return this.Pr(t,e).next((()=>this.lr(t).next((n=>(n.targetCount+=1,this.Tr(e,n),this.hr(t,n))))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Fo(t).delete(e.targetId))).next((()=>this.lr(t))).next((n=>(_t(n.targetCount>0,8065),n.targetCount-=1,this.hr(t,n))))}removeTargets(t,e,n){let r=0;const o=[];return Fo(t).ee(((u,h)=>{const f=Xu(h);f.sequenceNumber<=e&&n.get(f.targetId)===null&&(r++,o.push(this.removeTargetData(t,f)))})).next((()=>j.waitFor(o))).next((()=>r))}forEachTarget(t,e){return Fo(t).ee(((n,r)=>{const o=Xu(r);e(o)}))}lr(t){return hE(t).get(rd).next((e=>(_t(e!==null,2888),e)))}hr(t,e){return hE(t).put(rd,e)}Pr(t,e){return Fo(t).put(LA(this.serializer,e))}Tr(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.lr(t).next((e=>e.targetCount))}getTargetData(t,e){const n=Pa(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return Fo(t).ee({range:r,index:k1},((u,h,f)=>{const g=Xu(h);Nc(e,g.target)&&(o=g,f.done())})).next((()=>o))}addMatchingKeys(t,e,n){const r=[],o=hr(t);return e.forEach((u=>{const h=hn(u.path);r.push(o.put({targetId:n,path:h})),r.push(this.referenceDelegate.addReference(t,n,u))})),j.waitFor(r)}removeMatchingKeys(t,e,n){const r=hr(t);return j.forEach(e,(o=>{const u=hn(o.path);return j.waitFor([r.delete([n,u]),this.referenceDelegate.removeReference(t,n,o)])}))}removeMatchingKeysForTargetId(t,e){const n=hr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),r=hr(t);let o=Mt();return r.ee({range:n,X:!0},((u,h,f)=>{const g=Xi(u[1]),y=new ht(g);o=o.add(y)})).next((()=>o))}containsKey(t,e){const n=hn(e.path),r=IDBKeyRange.bound([n],[x1(n)],!1,!0);let o=0;return hr(t).ee({index:xy,X:!0,range:r},(([u,h],f,g)=>{u!==0&&(o++,g.done())})).next((()=>o>0))}At(t,e){return Fo(t).get(e).next((n=>n?Xu(n):null))}}function Fo(i){return Ye(i,sl)}function hE(i){return Ye(i,Ra)}function hr(i){return Ye(i,rl)}const fE="LruGarbageCollector",UD=1048576;function dE([i,t],[e,n]){const r=wt(i,e);return r===0?wt(t,n):r}class jD{constructor(t){this.Ir=t,this.buffer=new ie(dE),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const n=this.buffer.last();dE(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}}get maxValue(){return this.buffer.last()[0]}}class KA{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){rt(fE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Mr(e)?rt(fE,"Ignoring IndexedDB error during garbage collection: ",e):await Dr(e)}await this.Vr(3e5)}))}}class FD{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((n=>Math.floor(e/100*n)))}nthSequenceNumber(t,e){if(e===0)return j.resolve(wn.ce);const n=new jD(e);return this.mr.forEachTarget(t,(r=>n.Ar(r.sequenceNumber))).next((()=>this.mr.pr(t,(r=>n.Ar(r))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.mr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(cE)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cE):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let n,r,o,u,h,f,g;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,u=Date.now(),this.nthSequenceNumber(t,r)))).next((_=>(n=_,h=Date.now(),this.removeTargets(t,n,e)))).next((_=>(o=_,f=Date.now(),this.removeOrphanedDocuments(t,n)))).next((_=>(g=Date.now(),Go()<=Ft.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${r} in `+(h-u)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${_} documents in `+(g-f)+`ms
Total Duration: ${g-y}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function YA(i,t){return new FD(i,t)}class HD{constructor(t,e){this.db=t,this.garbageCollector=YA(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((n=>e.next((r=>n+r))))}wr(t){let e=0;return this.pr(t,(n=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,((n,r)=>e(r)))}addReference(t,e,n){return Tf(t,n)}removeReference(t,e,n){return Tf(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return Tf(t,e)}br(t,e){return(function(r,o){let u=!1;return GA(r).te((h=>qA(r,h,o).next((f=>(f&&(u=!0),j.resolve(!f)))))).next((()=>u))})(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Sr(t,((u,h)=>{if(h<=e){const f=this.br(t,u).next((g=>{if(!g)return o++,n.getEntry(t,u).next((()=>(n.removeEntry(u,vt.min()),hr(t).delete((function(_){return[0,hn(_.path)]})(u)))))}));r.push(f)}})).next((()=>j.waitFor(r))).next((()=>n.apply(t))).next((()=>o))}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return Tf(t,e)}Sr(t,e){const n=hr(t);let r,o=wn.ce;return n.ee({index:xy},(([u,h],{path:f,sequenceNumber:g})=>{u===0?(o!==wn.ce&&e(new ht(Xi(r)),o),o=g,r=f):o=wn.ce})).next((()=>{o!==wn.ce&&e(new ht(Xi(r)),o)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Tf(i,t){return hr(i).put((function(n,r){return{targetId:0,path:hn(n.path),sequenceNumber:r}})(t,i.currentSequenceNumber))}class QA{constructor(){this.changes=new Is((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ee.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?j.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class qD{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return ha(t).put(n)}removeEntry(t,e,n){return ha(t).delete((function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],hd(u),h[h.length-1]]})(e,n))}updateMetadata(t,e){return this.getMetadata(t).next((n=>(n.byteSize+=e,this.Dr(t,n))))}getEntry(t,e){let n=Ee.newInvalidDocument(e);return ha(t).ee({index:Bf,range:IDBKeyRange.only(Bu(e))},((r,o)=>{n=this.Cr(e,o)})).next((()=>n))}vr(t,e){let n={size:0,document:Ee.newInvalidDocument(e)};return ha(t).ee({index:Bf,range:IDBKeyRange.only(Bu(e))},((r,o)=>{n={document:this.Cr(e,o),size:dd(o)}})).next((()=>n))}getEntries(t,e){let n=jn();return this.Fr(t,e,((r,o)=>{const u=this.Cr(r,o);n=n.insert(r,u)})).next((()=>n))}Mr(t,e){let n=jn(),r=new ce(ht.comparator);return this.Fr(t,e,((o,u)=>{const h=this.Cr(o,u);n=n.insert(o,h),r=r.insert(o,dd(u))})).next((()=>({documents:n,Or:r})))}Fr(t,e,n){if(e.isEmpty())return j.resolve();let r=new ie(pE);e.forEach((f=>r=r.add(f)));const o=IDBKeyRange.bound(Bu(r.first()),Bu(r.last())),u=r.getIterator();let h=u.getNext();return ha(t).ee({index:Bf,range:o},((f,g,y)=>{const _=ht.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;h&&pE(h,_)<0;)n(h,null),h=u.getNext();h&&h.isEqual(_)&&(n(h,g),h=u.hasNext()?u.getNext():null),h?y.j(Bu(h)):y.done()})).next((()=>{for(;h;)n(h,null),h=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(t,e,n,r,o){const u=e.path,h=[u.popLast().toArray(),u.lastSegment(),hd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ha(t).J(IDBKeyRange.bound(h,f,!0)).next((g=>{o?.incrementDocumentReadCount(g.length);let y=jn();for(const _ of g){const T=this.Cr(ht.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);T.isFoundDocument()&&(Pc(e,T)||r.has(T.key))&&(y=y.insert(T.key,T))}return y}))}getAllFromCollectionGroup(t,e,n,r){let o=jn();const u=mE(e,n),h=mE(e,Hn.max());return ha(t).ee({index:P1,range:IDBKeyRange.bound(u,h,!0)},((f,g,y)=>{const _=this.Cr(ht.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);o=o.insert(_.key,_),o.size===r&&y.done()})).next((()=>o))}newChangeBuffer(t){return new GD(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return gE(t).get(Up).next((e=>(_t(!!e,20021),e)))}Dr(t,e){return gE(t).put(Up,e)}Cr(t,e){if(e){const n=CD(this.serializer,e);if(!(n.isNoDocument()&&n.version.isEqual(vt.min())))return n}return Ee.newInvalidDocument(t)}}function XA(i){return new qD(i)}class GD extends QA{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new Is((n=>n.toString()),((n,r)=>n.isEqual(r)))}applyChanges(t){const e=[];let n=0,r=new ie(((o,u)=>wt(o.canonicalString(),u.canonicalString())));return this.changes.forEach(((o,u)=>{const h=this.Br.get(o);if(e.push(this.Nr.removeEntry(t,o,h.readTime)),u.isValidDocument()){const f=$T(this.Nr.serializer,u);r=r.add(o.path.popLast());const g=dd(f);n+=g-h.size,e.push(this.Nr.addEntry(t,o,f))}else if(n-=h.size,this.trackRemovals){const f=$T(this.Nr.serializer,u.convertToNoDocument(vt.min()));e.push(this.Nr.addEntry(t,o,f))}})),r.forEach((o=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,o))})),e.push(this.Nr.updateMetadata(t,n)),j.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next((n=>(this.Br.set(e,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next((({documents:n,Or:r})=>(r.forEach(((o,u)=>{this.Br.set(o,{size:u,readTime:n.get(o).readTime})})),n)))}}function gE(i){return Ye(i,_c)}function ha(i){return Ye(i,sd)}function Bu(i){const t=i.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function mE(i,t){const e=t.documentKey.path.toArray();return[i,hd(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function pE(i,t){const e=i.path.toArray(),n=t.path.toArray();let r=0;for(let o=0;o<e.length-2&&o<n.length-2;++o)if(r=wt(e[o],n[o]),r)return r;return r=wt(e.length,n.length),r||(r=wt(e[e.length-2],n[n.length-2]),r||wt(e[e.length-1],n[n.length-1]))}class KD{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class WA{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((r=>(n!==null&&lc(n.mutation,r,ri.empty(),$t.now()),r)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.getLocalViewOfDocuments(t,n,Mt()).next((()=>n))))}getLocalViewOfDocuments(t,e,n=Mt()){const r=Wi();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((o=>{let u=Yu();return o.forEach(((h,f)=>{u=u.insert(h,f.overlayedDocument)})),u}))))}getOverlayedDocuments(t,e){const n=Wi();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Mt())))}populateOverlays(t,e,n){const r=[];return n.forEach((o=>{e.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(t,r).next((o=>{o.forEach(((u,h)=>{e.set(u,h)}))}))}computeViews(t,e,n,r){let o=jn();const u=oc(),h=(function(){return oc()})();return e.forEach(((f,g)=>{const y=n.get(g.key);r.has(g.key)&&(y===void 0||y.mutation instanceof Vr)?o=o.insert(g.key,g):y!==void 0?(u.set(g.key,y.mutation.getFieldMask()),lc(y.mutation,g,y.mutation.getFieldMask(),$t.now())):u.set(g.key,ri.empty())})),this.recalculateAndSaveOverlays(t,o).next((f=>(f.forEach(((g,y)=>u.set(g,y))),e.forEach(((g,y)=>h.set(g,new KD(y,u.get(g)??null)))),h)))}recalculateAndSaveOverlays(t,e){const n=oc();let r=new ce(((u,h)=>u-h)),o=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((u=>{for(const h of u)h.keys().forEach((f=>{const g=e.get(f);if(g===null)return;let y=n.get(f)||ri.empty();y=h.applyToLocalView(g,y),n.set(f,y);const _=(r.get(h.batchId)||Mt()).add(f);r=r.insert(h.batchId,_)}))})).next((()=>{const u=[],h=r.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),g=f.key,y=f.value,_=gA();y.forEach((T=>{if(!o.has(T)){const S=vA(e.get(T),n.get(T));S!==null&&_.set(T,S),o=o.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(t,g,_))}return j.waitFor(u)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.recalculateAndSaveOverlays(t,n)))}getDocumentsMatchingQuery(t,e,n,r){return(function(u){return ht.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):lA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((o=>{const u=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-o.size):j.resolve(Wi());let h=nl,f=o;return u.next((g=>j.forEach(g,((y,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),o.get(y)?j.resolve():this.remoteDocumentCache.getEntry(t,y).next((T=>{f=f.insert(y,T)}))))).next((()=>this.populateOverlays(t,g,o))).next((()=>this.computeViews(t,f,g,Mt()))).next((y=>({batchId:h,changes:dA(y)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ht(e)).next((n=>{let r=Yu();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const o=e.collectionGroup;let u=Yu();return this.indexManager.getCollectionParents(t,o).next((h=>j.forEach(h,(f=>{const g=(function(_,T){return new El(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(e,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,g,n,r).next((y=>{y.forEach(((_,T)=>{u=u.insert(_,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,o,r)))).next((u=>{o.forEach(((f,g)=>{const y=g.getKey();u.get(y)===null&&(u=u.insert(y,Ee.newInvalidDocument(y)))}));let h=Yu();return u.forEach(((f,g)=>{const y=o.get(f);y!==void 0&&lc(y.mutation,g,ri.empty(),$t.now()),Pc(e,g)&&(h=h.insert(f,g))})),h}))}}class YD{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return j.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(r){return{id:r.id,version:r.version,createTime:mn(r.createTime)}})(e)),j.resolve()}getNamedQuery(t,e){return j.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(r){return{name:r.name,query:BA(r.bundledQuery),readTime:mn(r.readTime)}})(e)),j.resolve()}}class QD{constructor(){this.overlays=new ce(ht.comparator),this.qr=new Map}getOverlay(t,e){return j.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Wi();return j.forEach(e,(r=>this.getOverlay(t,r).next((o=>{o!==null&&n.set(r,o)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((r,o)=>{this.St(t,e,o)})),j.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.qr.get(n);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),j.resolve()}getOverlaysForCollection(t,e,n){const r=Wi(),o=e.length+1,u=new ht(e.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,g=f.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===o&&f.largestBatchId>n&&r.set(f.getKey(),f)}return j.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let o=new ce(((g,y)=>g-y));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>n){let y=o.get(g.largestBatchId);y===null&&(y=Wi(),o=o.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const h=Wi(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((g,y)=>h.set(g,y))),!(h.size()>=r)););return j.resolve(h)}St(t,e,n){const r=this.overlays.get(n.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new zy(e,n));let o=this.qr.get(e);o===void 0&&(o=Mt(),this.qr.set(e,o)),this.qr.set(e,o.add(n.key))}}class XD{constructor(){this.sessionToken=Ce.EMPTY_BYTE_STRING}getSessionToken(t){return j.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,j.resolve()}}class Fy{constructor(){this.Qr=new ie($e.$r),this.Ur=new ie($e.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const n=new $e(t,e);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,e){t.forEach((n=>this.addReference(n,e)))}removeReference(t,e){this.Gr(new $e(t,e))}zr(t,e){t.forEach((n=>this.removeReference(n,e)))}jr(t){const e=new ht(new Wt([])),n=new $e(e,t),r=new $e(e,t+1),o=[];return this.Ur.forEachInRange([n,r],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new ht(new Wt([])),n=new $e(e,t),r=new $e(e,t+1);let o=Mt();return this.Ur.forEachInRange([n,r],(u=>{o=o.add(u.key)})),o}containsKey(t){const e=new $e(t,0),n=this.Qr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class $e{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return ht.comparator(t.key,e.key)||wt(t.Yr,e.Yr)}static Kr(t,e){return wt(t.Yr,e.Yr)||ht.comparator(t.key,e.key)}}class WD{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new ie($e.$r)}checkEmpty(t){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Py(o,e,n,r);this.mutationQueue.push(u);for(const h of r)this.Zr=this.Zr.add(new $e(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return j.resolve(u)}lookupMutationBatch(t,e){return j.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.ei(n),o=r<0?0:r;return j.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?wa:this.tr-1)}getAllMutationBatches(t){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new $e(e,0),r=new $e(e,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,r],(u=>{const h=this.Xr(u.Yr);o.push(h)})),j.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ie(wt);return e.forEach((r=>{const o=new $e(r,0),u=new $e(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(h=>{n=n.add(h.Yr)}))})),j.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let o=n;ht.isDocumentKey(o)||(o=o.child(""));const u=new $e(new ht(o),0);let h=new ie(wt);return this.Zr.forEachWhile((f=>{const g=f.key.path;return!!n.isPrefixOf(g)&&(g.length===r&&(h=h.add(f.Yr)),!0)}),u),j.resolve(this.ti(h))}ti(t){const e=[];return t.forEach((n=>{const r=this.Xr(n);r!==null&&e.push(r)})),e}removeMutationBatch(t,e){_t(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return j.forEach(e.mutations,(r=>{const o=new $e(r.key,e.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=n}))}ir(t){}containsKey(t,e){const n=new $e(e,0),r=this.Zr.firstAfterOrEqual(n);return j.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,j.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class $D{constructor(t){this.ri=t,this.docs=(function(){return new ce(ht.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),o=r?r.size:0,u=this.ri(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return j.resolve(n?n.document.mutableCopy():Ee.newInvalidDocument(e))}getEntries(t,e){let n=jn();return e.forEach((r=>{const o=this.docs.get(r);n=n.insert(r,o?o.document.mutableCopy():Ee.newInvalidDocument(r))})),j.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let o=jn();const u=e.path,h=new ht(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:g,value:{document:y}}=f.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||Sy(C1(y),n)<=0||(r.has(y.key)||Pc(e,y))&&(o=o.insert(y.key,y.mutableCopy()))}return j.resolve(o)}getAllFromCollectionGroup(t,e,n,r){dt(9500)}ii(t,e){return j.forEach(this.docs,(n=>e(n)))}newChangeBuffer(t){return new ZD(this)}getSize(t){return j.resolve(this.size)}}class ZD extends QA{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(n)})),j.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class JD{constructor(t){this.persistence=t,this.si=new Is((e=>Pa(e)),Nc),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.oi=0,this._i=new Fy,this.targetCount=0,this.ai=La.ur()}forEachTarget(t,e){return this.si.forEach(((n,r)=>e(r))),j.resolve()}getLastRemoteSnapshotVersion(t){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return j.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.oi&&(this.oi=e),j.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new La(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,j.resolve()}updateTargetData(t,e){return this.Pr(e),j.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,j.resolve()}removeTargets(t,e,n){let r=0;const o=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=e&&n.get(h.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)})),j.waitFor(o).next((()=>r))}getTargetCount(t){return j.resolve(this.targetCount)}getTargetData(t,e){const n=this.si.get(e)||null;return j.resolve(n)}addMatchingKeys(t,e,n){return this._i.Wr(e,n),j.resolve()}removeMatchingKeys(t,e,n){this._i.zr(e,n);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach((u=>{o.push(r.markPotentiallyOrphaned(t,u))})),j.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),j.resolve()}getMatchingKeysForTargetId(t,e){const n=this._i.Hr(e);return j.resolve(n)}containsKey(t,e){return j.resolve(this._i.containsKey(e))}}class Hy{constructor(t,e){this.ui={},this.overlays={},this.ci=new wn(0),this.li=!1,this.li=!0,this.hi=new XD,this.referenceDelegate=t(this),this.Pi=new JD(this),this.indexManager=new zD,this.remoteDocumentCache=(function(r){return new $D(r)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new zA(e),this.Ii=new YD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new QD,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.ui[t.toKey()];return n||(n=new WD(e,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,n){rt("MemoryPersistence","Starting transaction:",t);const r=new tM(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(t,e){return j.or(Object.values(this.ui).map((n=>()=>n.containsKey(t,e))))}}class tM extends M1{constructor(t){super(),this.currentSequenceNumber=t}}class Kd{constructor(t){this.persistence=t,this.Ri=new Fy,this.Vi=null}static mi(t){return new Kd(t)}get fi(){if(this.Vi)return this.Vi;throw dt(60996)}addReference(t,e,n){return this.Ri.addReference(n,e),this.fi.delete(n.toString()),j.resolve()}removeReference(t,e,n){return this.Ri.removeReference(n,e),this.fi.add(n.toString()),j.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),j.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((r=>this.fi.add(r.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(n=>{const r=ht.fromPath(n);return this.gi(t,r).next((o=>{o||e.removeEntry(r,vt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((n=>{n?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return j.or([()=>j.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class gd{constructor(t,e){this.persistence=t,this.pi=new Is((n=>hn(n.path)),((n,r)=>n.isEqual(r))),this.garbageCollector=YA(this,e)}static mi(t,e){return new gd(t,e)}Ei(){}di(t){return j.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((n=>e.next((r=>n+r))))}wr(t){let e=0;return this.pr(t,(n=>{e++})).next((()=>e))}pr(t,e){return j.forEach(this.pi,((n,r)=>this.br(t,n,r).next((o=>o?j.resolve():e(r)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(t,(u=>this.br(t,u,e).next((h=>{h||(n++,o.removeEntry(u,vt.min()))})))).next((()=>o.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),j.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),j.resolve()}removeReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),j.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),j.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=jf(t.data.value)),e}br(t,e,n){return j.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.pi.get(e);return j.resolve(r!==void 0&&r>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class eM{constructor(t){this.serializer=t}k(t,e,n,r){const o=new Vd("createOrUpgrade",e);n<1&&r>=1&&((function(f){f.createObjectStore(Oc)})(t),(function(f){f.createObjectStore(yc,{keyPath:gC}),f.createObjectStore(bi,{keyPath:RT,autoIncrement:!0}).createIndex(Sa,IT,{unique:!0}),f.createObjectStore(il)})(t),yE(t),(function(f){f.createObjectStore(ya)})(t));let u=j.resolve();return n<3&&r>=3&&(n!==0&&((function(f){f.deleteObjectStore(rl),f.deleteObjectStore(sl),f.deleteObjectStore(Ra)})(t),yE(t)),u=u.next((()=>(function(f){const g=f.store(Ra),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return g.put(rd,y)})(o)))),n<4&&r>=4&&(n!==0&&(u=u.next((()=>(function(f,g){return g.store(bi).J().next((_=>{f.deleteObjectStore(bi),f.createObjectStore(bi,{keyPath:RT,autoIncrement:!0}).createIndex(Sa,IT,{unique:!0});const T=g.store(bi),S=_.map((C=>T.put(C)));return j.waitFor(S)}))})(t,o)))),u=u.next((()=>{(function(f){f.createObjectStore(al,{keyPath:SC})})(t)}))),n<5&&r>=5&&(u=u.next((()=>this.yi(o)))),n<6&&r>=6&&(u=u.next((()=>((function(f){f.createObjectStore(_c)})(t),this.wi(o))))),n<7&&r>=7&&(u=u.next((()=>this.Si(o)))),n<8&&r>=8&&(u=u.next((()=>this.bi(t,o)))),n<9&&r>=9&&(u=u.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(t)}))),n<10&&r>=10&&(u=u.next((()=>this.Di(o)))),n<11&&r>=11&&(u=u.next((()=>{(function(f){f.createObjectStore(Nd,{keyPath:AC})})(t),(function(f){f.createObjectStore(Pd,{keyPath:xC})})(t)}))),n<12&&r>=12&&(u=u.next((()=>{(function(f){const g=f.createObjectStore(kd,{keyPath:VC});g.createIndex(Fp,OC,{unique:!1}),g.createIndex(B1,NC,{unique:!1})})(t)}))),n<13&&r>=13&&(u=u.next((()=>(function(f){const g=f.createObjectStore(sd,{keyPath:pC});g.createIndex(Bf,yC),g.createIndex(P1,_C)})(t))).next((()=>this.Ci(t,o))).next((()=>t.deleteObjectStore(ya)))),n<14&&r>=14&&(u=u.next((()=>this.Fi(t,o)))),n<15&&r>=15&&(u=u.next((()=>(function(f){f.createObjectStore(wy,{keyPath:wC,autoIncrement:!0}).createIndex(jp,RC,{unique:!1}),f.createObjectStore(ic,{keyPath:IC}).createIndex(z1,CC,{unique:!1}),f.createObjectStore(sc,{keyPath:DC}).createIndex(L1,MC,{unique:!1})})(t)))),n<16&&r>=16&&(u=u.next((()=>{e.objectStore(ic).clear()})).next((()=>{e.objectStore(sc).clear()}))),n<17&&r>=17&&(u=u.next((()=>{(function(f){f.createObjectStore(Ry,{keyPath:PC})})(t)}))),n<18&&r>=18&&l1()&&(u=u.next((()=>{e.objectStore(ic).clear()})).next((()=>{e.objectStore(sc).clear()}))),u}wi(t){let e=0;return t.store(ya).ee(((n,r)=>{e+=dd(r)})).next((()=>{const n={byteSize:e};return t.store(_c).put(Up,n)}))}yi(t){const e=t.store(yc),n=t.store(bi);return e.J().next((r=>j.forEach(r,(o=>{const u=IDBKeyRange.bound([o.userId,wa],[o.userId,o.lastAcknowledgedBatchId]);return n.J(Sa,u).next((h=>j.forEach(h,(f=>{_t(f.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const g=va(this.serializer,f);return HA(t,o.userId,g).next((()=>{}))}))))}))))}Si(t){const e=t.store(rl),n=t.store(ya);return t.store(Ra).get(rd).next((r=>{const o=[];return n.ee(((u,h)=>{const f=new Wt(u),g=(function(_){return[0,hn(_)]})(f);o.push(e.get(g).next((y=>y?j.resolve():(_=>e.put({targetId:0,path:hn(_),sequenceNumber:r.highestListenSequenceNumber}))(f))))})).next((()=>j.waitFor(o)))}))}bi(t,e){t.createObjectStore(bc,{keyPath:EC});const n=e.store(bc),r=new jy,o=u=>{if(r.add(u)){const h=u.lastSegment(),f=u.popLast();return n.put({collectionId:h,parent:hn(f)})}};return e.store(ya).ee({X:!0},((u,h)=>{const f=new Wt(u);return o(f.popLast())})).next((()=>e.store(il).ee({X:!0},(([u,h,f],g)=>{const y=Xi(h);return o(y.popLast())}))))}Di(t){const e=t.store(sl);return e.ee(((n,r)=>{const o=Xu(r),u=LA(this.serializer,o);return e.put(u)}))}Ci(t,e){const n=e.store(ya),r=[];return n.ee(((o,u)=>{const h=e.store(sd),f=(function(_){return _.document?new ht(Wt.fromString(_.document.name).popFirst(5)):_.noDocument?ht.fromSegments(_.noDocument.path):_.unknownDocument?ht.fromSegments(_.unknownDocument.path):dt(36783)})(u).path.toArray(),g={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};r.push(h.put(g))})).next((()=>j.waitFor(r)))}Fi(t,e){const n=e.store(bi),r=XA(this.serializer),o=new Hy(Kd.mi,this.serializer.yt);return n.J().next((u=>{const h=new Map;return u.forEach((f=>{let g=h.get(f.userId)??Mt();va(this.serializer,f).keys().forEach((y=>g=g.add(y))),h.set(f.userId,g)})),j.forEach(h,((f,g)=>{const y=new Ze(g),_=qd.wt(this.serializer,y),T=o.getIndexManager(y),S=Gd.wt(y,this.serializer,T,o.referenceDelegate);return new WA(r,S,_,T).recalculateAndSaveOverlaysForDocumentKeys(new Hp(e,wn.ce),f).next()}))}))}}function yE(i){i.createObjectStore(rl,{keyPath:vC}).createIndex(xy,TC,{unique:!0}),i.createObjectStore(sl,{keyPath:"targetId"}).createIndex(k1,bC,{unique:!0}),i.createObjectStore(Ra)}const cr="IndexedDbPersistence",fp=18e5,dp=5e3,gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nM="main";class qy{constructor(t,e,n,r,o,u,h,f,g,y,_=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Mi=o,this.window=u,this.document=h,this.xi=g,this.Oi=y,this.Ni=_,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=T=>Promise.resolve(),!qy.v())throw new ut(tt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HD(this,r),this.$i=e+nM,this.serializer=new zA(f),this.Ui=new Tr(this.$i,this.Ni,new eM(this.serializer)),this.hi=new MD,this.Pi=new BD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=XA(this.serializer),this.Ii=new DD,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,y===!1&&Re(cr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ut(tt.FAILED_PRECONDITION,gp);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new wn(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Ef(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((e=>this.isPrimary&&!e?this.Zi(t).next((()=>!1)):!!e&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(Mr(t))return rt(cr,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return rt(cr,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return Uu(t).get(zo).next((e=>j.resolve(this.es(e))))}ts(t){return Ef(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,fp)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const n=Ye(e,al);return n.J().next((r=>{const o=this.ss(r,fp),u=r.filter((h=>o.indexOf(h)===-1));return j.forEach(u,(h=>n.delete(h.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?j.resolve(!0):Uu(t).get(zo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,dp)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new ut(tt.FAILED_PRECONDITION,gp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ef(t).J().next((n=>this.ss(n,dp).find((r=>{if(this.clientId!==r.clientId){const o=!this.networkEnabled&&r.networkEnabled,u=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(o||u&&h)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&rt(cr,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Oc,al],(t=>{const e=new Hp(t,wn.ce);return this.Zi(e).next((()=>this.ts(e)))})),this.Ui.close(),this.Ps()}ss(t,e){return t.filter((n=>this.rs(n.updateTimeMs,e)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>Ef(t).J().next((e=>this.ss(e,fp).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return Gd.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new LD(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return qd.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,n){rt(cr,"Starting transaction:",t);const r=e==="readonly"?"readonly":"readwrite",o=(function(f){return f===18?LC:f===17?H1:f===16?zC:f===15?Iy:f===14?F1:f===13?j1:f===12?kC:f===11?U1:void dt(60245)})(this.Ni);let u;return this.Ui.runTransaction(t,r,o,(h=>(u=new Hp(h,this.ci?this.ci.next():wn.ce),e==="readwrite-primary"?this.Hi(u).next((f=>!!f||this.Yi(u))).next((f=>{if(!f)throw Re(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ut(tt.FAILED_PRECONDITION,D1);return n(u)})).next((f=>this.Xi(u).next((()=>f)))):this.Is(u).next((()=>n(u)))))).then((h=>(u.raiseOnCommittedEvent(),h)))}Is(t){return Uu(t).get(zo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,dp)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ut(tt.FAILED_PRECONDITION,gp)}))}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uu(t).put(zo,e)}static v(){return Tr.v()}Zi(t){const e=Uu(t);return e.get(zo).next((n=>this.es(n)?(rt(cr,"Releasing primary lease."),e.delete(zo)):j.resolve()))}rs(t,e){const n=Date.now();return!(t<n-e)&&(!(t>n)||(Re(`Detected an update time that is in the future: ${t} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;o1()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){try{const e=this.Ki?.getItem(this._s(t))!==null;return rt(cr,`Client '${t}' ${e?"is":"is not"} zombied in LocalStorage`),e}catch(e){return Re(cr,"Failed to get zombied client id.",e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Re("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Uu(i){return Ye(i,Oc)}function Ef(i){return Ye(i,al)}function $A(i,t){let e=i.projectId;return i.isDefaultDatabase||(e+="."+i.database),"firestore/"+t+"/"+e+"/"}class Gy{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Es=n,this.ds=r}static As(t,e){let n=Mt(),r=Mt();for(const o of e.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Gy(t,e.fromCache,n,r)}}class iM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class ZA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return o1()?8:V1(Zf())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,n,r){const o={result:null};return this.ys(t,e).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(t,e,r,n).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new iM;return this.Ss(t,e,u).next((h=>{if(o.result=h,this.Vs)return this.bs(t,e,u,h.size)}))})).next((()=>o.result))}bs(t,e,n,r){return n.documentReadCount<this.fs?(Go()<=Ft.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",Ko(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Go()<=Ft.DEBUG&&rt("QueryEngine","Query:",Ko(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Go()<=Ft.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",Ko(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fn(e))):j.resolve())}ys(t,e){if(jT(e))return j.resolve(null);let n=Fn(e);return this.indexManager.getIndexType(t,n).next((r=>r===0?null:(e.limit!==null&&r===1&&(e=Wp(e,null,"F"),n=Fn(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((o=>{const u=Mt(...o);return this.ps.getDocuments(t,u).next((h=>this.indexManager.getMinOffset(t,n).next((f=>{const g=this.Ds(e,h);return this.Cs(e,g,u,f.readTime)?this.ys(t,Wp(e,null,"F")):this.vs(t,g,e,f)}))))})))))}ws(t,e,n,r){return jT(e)||r.isEqual(vt.min())?j.resolve(null):this.ps.getDocuments(t,n).next((o=>{const u=this.Ds(e,o);return this.Cs(e,u,n,r)?j.resolve(null):(Go()<=Ft.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ko(e)),this.vs(t,u,e,I1(r,nl)).next((h=>h)))}))}Ds(t,e){let n=new ie(hA(t));return e.forEach(((r,o)=>{Pc(t,o)&&(n=n.add(o))})),n}Cs(t,e,n,r){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(t,e,n){return Go()<=Ft.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",Ko(e)),this.ps.getDocumentsMatchingQuery(t,e,Hn.min(),n)}vs(t,e,n,r){return this.ps.getDocumentsMatchingQuery(t,n,r).next((o=>(e.forEach((u=>{o=o.insert(u.key,u)})),o)))}}const Ky="LocalStore",sM=3e8;class rM{constructor(t,e,n,r){this.persistence=t,this.Fs=e,this.serializer=r,this.Ms=new ce(wt),this.xs=new Is((o=>Pa(o)),Nc),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new WA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function JA(i,t,e,n){return new rM(i,t,e,n)}async function tx(i,t){const e=pt(i);return await e.persistence.runTransaction("Handle user change","readonly",(n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next((o=>(r=o,e.Bs(t),e.mutationQueue.getAllMutationBatches(n)))).next((o=>{const u=[],h=[];let f=Mt();for(const g of r){u.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}for(const g of o){h.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}return e.localDocuments.getDocuments(n,f).next((g=>({Ls:g,removedBatchIds:u,addedBatchIds:h})))}))}))}function aM(i,t){const e=pt(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const r=t.batch.keys(),o=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,g,y){const _=g.batch,T=_.keys();let S=j.resolve();return T.forEach((C=>{S=S.next((()=>y.getEntry(f,C))).next((D=>{const M=g.docVersions.get(C);_t(M!==null,48541),D.version.compareTo(M)<0&&(_.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),y.addEntry(D)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(f,_)))})(e,n,t,o).next((()=>o.apply(n))).next((()=>e.mutationQueue.performConsistencyCheck(n))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(h){let f=Mt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(f=f.add(h.batch.mutations[g].key));return f})(t)))).next((()=>e.localDocuments.getDocuments(n,r)))}))}function ex(i){const t=pt(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function oM(i,t){const e=pt(i),n=t.snapshotVersion;let r=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=e.Ns.newChangeBuffer({trackRemovals:!0});r=e.Ms;const h=[];t.targetChanges.forEach(((y,_)=>{const T=r.get(_);if(!T)return;h.push(e.Pi.removeMatchingKeys(o,y.removedDocuments,_).next((()=>e.Pi.addMatchingKeys(o,y.addedDocuments,_))));let S=T.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(_)!==null?S=S.withResumeToken(Ce.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,n)),r=r.insert(_,S),(function(D,M,U){return D.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=sM?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(T,S,y)&&h.push(e.Pi.updateTargetData(o,S))}));let f=jn(),g=Mt();if(t.documentUpdates.forEach((y=>{t.resolvedLimboDocuments.has(y)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,y))})),h.push(lM(o,u,t.documentUpdates).next((y=>{f=y.ks,g=y.qs}))),!n.isEqual(vt.min())){const y=e.Pi.getLastRemoteSnapshotVersion(o).next((_=>e.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));h.push(y)}return j.waitFor(h).next((()=>u.apply(o))).next((()=>e.localDocuments.getLocalViewOfDocuments(o,f,g))).next((()=>f))})).then((o=>(e.Ms=r,o)))}function lM(i,t,e){let n=Mt(),r=Mt();return e.forEach((o=>n=n.add(o))),t.getEntries(i,n).next((o=>{let u=jn();return e.forEach(((h,f)=>{const g=o.get(h);f.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(h)),f.isNoDocument()&&f.version.isEqual(vt.min())?(t.removeEntry(h,f.readTime),u=u.insert(h,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(f),u=u.insert(h,f)):rt(Ky,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",f.version)})),{ks:u,qs:r}}))}function uM(i,t){const e=pt(i);return e.persistence.runTransaction("Get next mutation batch","readonly",(n=>(t===void 0&&(t=wa),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t))))}function md(i,t){const e=pt(i);return e.persistence.runTransaction("Allocate target","readwrite",(n=>{let r;return e.Pi.getTargetData(n,t).next((o=>o?(r=o,j.resolve(r)):e.Pi.allocateTargetId(n).next((u=>(r=new Ss(t,u,"TargetPurposeListen",n.currentSequenceNumber),e.Pi.addTargetData(n,r).next((()=>r)))))))})).then((n=>{const r=e.Ms.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(n.targetId,n),e.xs.set(t,n.targetId)),n}))}async function gl(i,t,e){const n=pt(i),r=n.Ms.get(t),o=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",o,(u=>n.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Mr(u))throw u;rt(Ky,`Failed to update sequence numbers for target ${t}: ${u}`)}n.Ms=n.Ms.remove(t),n.xs.delete(r.target)}function sy(i,t,e){const n=pt(i);let r=vt.min(),o=Mt();return n.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,g,y){const _=pt(f),T=_.xs.get(y);return T!==void 0?j.resolve(_.Ms.get(T)):_.Pi.getTargetData(g,y)})(n,u,Fn(t)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(u,h.targetId).next((f=>{o=f}))})).next((()=>n.Fs.getDocumentsMatchingQuery(u,t,e?r:vt.min(),e?o:Mt()))).next((h=>(sx(n,cA(t),h),{documents:h,Qs:o})))))}function nx(i,t){const e=pt(i),n=pt(e.Pi),r=e.Ms.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",(o=>n.At(o,t).next((u=>u?u.target:null))))}function ix(i,t){const e=pt(i),n=e.Os.get(t)||vt.min();return e.persistence.runTransaction("Get new document changes","readonly",(r=>e.Ns.getAllFromCollectionGroup(r,t,I1(n,nl),Number.MAX_SAFE_INTEGER))).then((r=>(sx(e,t,r),r)))}function sx(i,t,e){let n=i.Os.get(t)||vt.min();e.forEach(((r,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),i.Os.set(t,n)}const rx="firestore_clients";function _E(i,t){return`${rx}_${i}_${t}`}const ax="firestore_mutations";function bE(i,t,e){let n=`${ax}_${i}_${e}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}const ox="firestore_targets";function mp(i,t){return`${ox}_${i}_${t}`}const Qi="SharedClientState";class pd{constructor(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}static Ws(t,e,n){const r=JSON.parse(n);let o,u=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new ut(r.error.code,r.error.message))),u?new pd(t,e,r.state,o):(Re(Qi,`Failed to parse mutation state for ID '${e}': ${n}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class uc{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static Ws(t,e){const n=JSON.parse(e);let r,o=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return o&&n.error&&(o=typeof n.error.message=="string"&&typeof n.error.code=="string",o&&(r=new ut(n.error.code,n.error.message))),o?new uc(t,n.state,r):(Re(Qi,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class yd{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const n=JSON.parse(e);let r=typeof n=="object"&&n.activeTargetIds instanceof Array,o=Oy();for(let u=0;r&&u<n.activeTargetIds.length;++u)r=O1(n.activeTargetIds[u]),o=o.add(n.activeTargetIds[u]);return r?new yd(t,o):(Re(Qi,`Failed to parse client data for instance '${t}': ${e}`),null)}}class Yy{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new Yy(e.clientId,e.onlineState):(Re(Qi,`Failed to parse online state: ${t}`),null)}}class ry{constructor(){this.activeTargetIds=Oy()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class pp{constructor(t,e,n,r,o){this.window=t,this.Mi=e,this.persistenceKey=n,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ce(wt),this.started=!1,this.Xs=[];const u=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=_E(this.persistenceKey,this.Js),this.no=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new ry),this.ro=new RegExp(`^${rx}_${u}_([^_]*)$`),this.io=new RegExp(`^${ax}_${u}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${ox}_${u}_(\\d+)$`),this.oo=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this._o=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const n of t){if(n===this.Js)continue;const r=this.getItem(_E(this.persistenceKey,n));if(r){const o=yd.Ws(n,r);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const n=this.uo(e);n&&this.co(n)}for(const n of this.Xs)this.Ys(n);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach(((n,r)=>{r.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,n){this.ho(t,e,n),this.Po(t)}addLocalQueryTarget(t,e=!0){let n="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(mp(this.persistenceKey,t));if(r){const o=uc.Ws(t,r);o&&(n=o.state)}}return e&&this.To.zs(t),this.ao(),n}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(mp(this.persistenceKey,t))}updateQueryState(t,e,n){this.Io(t,e,n)}handleUserChange(t,e,n){e.forEach((r=>{this.Po(r)})),this.currentUser=t,n.forEach((r=>{this.addPendingMutation(r)}))}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return rt(Qi,"READ",t,e),e}setItem(t,e){rt(Qi,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){rt(Qi,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(rt(Qi,"EVENT",e.key,e.newValue),e.key===this.eo)return void Re("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const n=this.Ro(e.key);return this.Vo(n,null)}{const n=this.mo(e.key,e.newValue);if(n)return this.Vo(n.clientId,n)}}else if(this.io.test(e.key)){if(e.newValue!==null){const n=this.fo(e.key,e.newValue);if(n)return this.po(n)}}else if(this.so.test(e.key)){if(e.newValue!==null){const n=this.yo(e.key,e.newValue);if(n)return this.wo(n)}}else if(e.key===this.oo){if(e.newValue!==null){const n=this.uo(e.newValue);if(n)return this.co(n)}}else if(e.key===this.no){const n=(function(o){let u=wn.ce;if(o!=null)try{const h=JSON.parse(o);_t(typeof h=="number",30636,{So:o}),u=h}catch(h){Re(Qi,"Failed to read sequence number from WebStorage",h)}return u})(e.newValue);n!==wn.ce&&this.sequenceNumberHandler(n)}else if(e.key===this._o){const n=this.bo(e.newValue);await Promise.all(n.map((r=>this.syncEngine.Do(r))))}}}else this.Xs.push(e)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,n){const r=new pd(this.currentUser,t,e,n),o=bE(this.persistenceKey,this.currentUser,t);this.setItem(o,r.Gs())}Po(t){const e=bE(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,n){const r=mp(this.persistenceKey,t),o=new uc(t,e,n);this.setItem(r,o.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const n=this.Ro(t);return yd.Ws(n,e)}fo(t,e){const n=this.io.exec(t),r=Number(n[1]),o=n[2]!==void 0?n[2]:null;return pd.Ws(new Ze(o),r,e)}yo(t,e){const n=this.so.exec(t),r=Number(n[1]);return uc.Ws(r,e)}uo(t){return Yy.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);rt(Qi,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const n=e?this.Zs.insert(t,e):this.Zs.remove(t),r=this.lo(this.Zs),o=this.lo(n),u=[],h=[];return o.forEach((f=>{r.has(f)||u.push(f)})),r.forEach((f=>{o.has(f)||h.push(f)})),this.syncEngine.Fo(u,h).then((()=>{this.Zs=n}))}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=Oy();return t.forEach(((n,r)=>{e=e.unionWith(r.activeTargetIds)})),e}}class lx{constructor(){this.Mo=new ry,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,n){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new ry,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class cM{Oo(t){}shutdown(){}}const vE="ConnectivityMonitor";class TE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){rt(vE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){rt(vE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Sf=null;function ay(){return Sf===null?Sf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sf++,"0x"+Sf.toString(16)}const yp="RestConnection",hM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fM{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===ad?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(t,e,n,r,o){const u=ay(),h=this.zo(t,e.toUriEncodedString());rt(yp,`Sending RPC '${t}' ${u}:`,h,n);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,o);const{host:g}=new URL(h),y=by(g);return this.Jo(t,h,f,n,y).then((_=>(rt(yp,`Received RPC '${t}' ${u}: `,_),_)),(_=>{throw Oa(yp,`RPC '${t}' ${u} failed with error: `,_,"url: ",h,"request:",n),_}))}Ho(t,e,n,r,o,u){return this.Go(t,e,n,r,o)}jo(t,e,n){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Tl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((r,o)=>t[o]=r)),n&&n.headers.forEach(((r,o)=>t[o]=r))}zo(t,e){const n=hM[t];return`${this.Uo}/v1/${e}:${n}`}terminate(){}}class dM{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const un="WebChannelConnection";class gM extends fM{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,n,r,o){const u=ay();return new Promise(((h,f)=>{const g=new _1;g.setWithCredentials(!0),g.listenOnce(b1.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case kf.NO_ERROR:const _=g.getResponseJson();rt(un,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(_)),h(_);break;case kf.TIMEOUT:rt(un,`RPC '${t}' ${u} timed out`),f(new ut(tt.DEADLINE_EXCEEDED,"Request time out"));break;case kf.HTTP_ERROR:const T=g.getStatus();if(rt(un,`RPC '${t}' ${u} failed with status:`,T,"response text:",g.getResponseText()),T>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const C=S?.error;if(C&&C.status&&C.message){const D=(function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(tt).indexOf(G)>=0?G:tt.UNKNOWN})(C.status);f(new ut(D,C.message))}else f(new ut(tt.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ut(tt.UNAVAILABLE,"Connection failed."));break;default:dt(9055,{l_:t,streamId:u,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{rt(un,`RPC '${t}' ${u} completed.`)}}));const y=JSON.stringify(r);rt(un,`RPC '${t}' ${u} sending request:`,r),g.send(e,"POST",y,n,15)}))}T_(t,e,n){const r=ay(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],u=E1(),h=T1(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,e,n),f.encodeInitMessageHeaders=!0;const y=o.join("");rt(un,`Creating RPC '${t}' stream ${r}: ${y}`,f);const _=u.createWebChannel(y,f);this.I_(_);let T=!1,S=!1;const C=new dM({Yo:M=>{S?rt(un,`Not sending because RPC '${t}' stream ${r} is closed:`,M):(T||(rt(un,`Opening RPC '${t}' stream ${r} transport.`),_.open(),T=!0),rt(un,`RPC '${t}' stream ${r} sending:`,M),_.send(M))},Zo:()=>_.close()}),D=(M,U,G)=>{M.listen(U,(Q=>{try{G(Q)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return D(_,Ku.EventType.OPEN,(()=>{S||(rt(un,`RPC '${t}' stream ${r} transport opened.`),C.o_())})),D(_,Ku.EventType.CLOSE,(()=>{S||(S=!0,rt(un,`RPC '${t}' stream ${r} transport closed`),C.a_(),this.E_(_))})),D(_,Ku.EventType.ERROR,(M=>{S||(S=!0,Oa(un,`RPC '${t}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),C.a_(new ut(tt.UNAVAILABLE,"The operation could not be completed")))})),D(_,Ku.EventType.MESSAGE,(M=>{if(!S){const U=M.data[0];_t(!!U,16349);const G=U,Q=G?.error||G[0]?.error;if(Q){rt(un,`RPC '${t}' stream ${r} received error:`,Q);const Z=Q.status;let $=(function(x){const I=Be[x];if(I!==void 0)return SA(I)})(Z),it=Q.message;$===void 0&&($=tt.INTERNAL,it="Unknown error status: "+Z+" with message "+Q.message),S=!0,C.a_(new ut($,it)),_.close()}else rt(un,`RPC '${t}' stream ${r} received:`,U),C.u_(U)}})),D(h,v1.STAT_EVENT,(M=>{M.stat===zp.PROXY?rt(un,`RPC '${t}' stream ${r} detected buffering proxy`):M.stat===zp.NOPROXY&&rt(un,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function ux(){return typeof window<"u"?window:null}function Kf(){return typeof document<"u"?document:null}function Yd(i){return new bD(i,!0)}class cx{constructor(t,e,n=1e3,r=1.5,o=6e4){this.Mi=t,this.timerId=e,this.d_=n,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,e-n);r>0&&rt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const EE="PersistentStream";class hx{constructor(t,e,n,r,o,u,h,f){this.Mi=t,this.S_=n,this.b_=r,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cx(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===tt.RESOURCE_EXHAUSTED?(Re(e.toString()),Re("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===tt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,r])=>{this.D_===e&&this.G_(n,r)}),(n=>{t((()=>{const r=new ut(tt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(r)}))}))}G_(t,e){const n=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{n((()=>this.z_(r)))})),this.stream.onMessage((r=>{n((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return rt(EE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(rt(EE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mM extends hx{constructor(t,e,n,r,o,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,u),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=ED(this.serializer,t),n=(function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?mn(u.readTime):vt.min()})(t);return this.listener.H_(e,n)}Y_(t){const e={};e.database=Jp(this.serializer),e.addTarget=(function(o,u){let h;const f=u.target;if(h=od(f)?{documents:MA(o,f)}:{query:VA(o,f).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=wA(o,u.resumeToken);const g=$p(o,u.expectedCount);g!==null&&(h.expectedCount=g)}else if(u.snapshotVersion.compareTo(vt.min())>0){h.readTime=dl(o,u.snapshotVersion.toTimestamp());const g=$p(o,u.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,t);const n=AD(this.serializer,t);n&&(e.labels=n),this.q_(e)}Z_(t){const e={};e.database=Jp(this.serializer),e.removeTarget=t,this.q_(e)}}class pM extends hx{constructor(t,e,n,r,o,u){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return _t(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,_t(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){_t(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=SD(t.writeResults,t.commitTime),n=mn(t.commitTime);return this.listener.na(n,e)}ra(){const t={};t.database=Jp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((n=>cd(this.serializer,n)))};this.q_(e)}}class yM{}class _M extends yM{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ut(tt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(t,Zp(e,n),r,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ut(tt.UNKNOWN,o.toString())}))}Ho(t,e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(t,Zp(e,n),r,u,h,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ut(tt.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bM{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Re(e),this.aa=!1):rt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ba="RemoteStore";class vM{constructor(t,e,n,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{n.enqueueAndForget((async()=>{Ha(this)&&(rt(Ba,"Restarting streams for network reachability change."),await(async function(f){const g=pt(f);g.Ea.add(4),await Lc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Qd(g)})(this))}))})),this.Ra=new bM(n,r)}}async function Qd(i){if(Ha(i))for(const t of i.da)await t(!0)}async function Lc(i){for(const t of i.da)await t(!1)}function Xd(i,t){const e=pt(i);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Wy(e)?Xy(e):xl(e).O_()&&Qy(e,t))}function ml(i,t){const e=pt(i),n=xl(e);e.Ia.delete(t),n.O_()&&fx(e,t),e.Ia.size===0&&(n.O_()?n.L_():Ha(e)&&e.Ra.set("Unknown"))}function Qy(i,t){if(i.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vt.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}xl(i).Y_(t)}function fx(i,t){i.Va.Ue(t),xl(i).Z_(t)}function Xy(i){i.Va=new mD({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),xl(i).start(),i.Ra.ua()}function Wy(i){return Ha(i)&&!xl(i).x_()&&i.Ia.size>0}function Ha(i){return pt(i).Ea.size===0}function dx(i){i.Va=void 0}async function TM(i){i.Ra.set("Online")}async function EM(i){i.Ia.forEach(((t,e)=>{Qy(i,t)}))}async function SM(i,t){dx(i),Wy(i)?(i.Ra.ha(t),Xy(i)):i.Ra.set("Unknown")}async function AM(i,t,e){if(i.Ra.set("Online"),t instanceof xA&&t.state===2&&t.cause)try{await(async function(r,o){const u=o.cause;for(const h of o.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,u),r.Ia.delete(h),r.Va.removeTarget(h))})(i,t)}catch(n){rt(Ba,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await _d(i,n)}else if(t instanceof qf?i.Va.Ze(t):t instanceof AA?i.Va.st(t):i.Va.tt(t),!e.isEqual(vt.min()))try{const n=await ex(i.localStore);e.compareTo(n)>=0&&await(function(o,u){const h=o.Va.Tt(u);return h.targetChanges.forEach(((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.Ia.get(g);y&&o.Ia.set(g,y.withResumeToken(f.resumeToken,u))}})),h.targetMismatches.forEach(((f,g)=>{const y=o.Ia.get(f);if(!y)return;o.Ia.set(f,y.withResumeToken(Ce.EMPTY_BYTE_STRING,y.snapshotVersion)),fx(o,f);const _=new Ss(y.target,f,g,y.sequenceNumber);Qy(o,_)})),o.remoteSyncer.applyRemoteEvent(h)})(i,e)}catch(n){rt(Ba,"Failed to raise snapshot:",n),await _d(i,n)}}async function _d(i,t,e){if(!Mr(t))throw t;i.Ea.add(1),await Lc(i),i.Ra.set("Offline"),e||(e=()=>ex(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{rt(Ba,"Retrying IndexedDB access"),await e(),i.Ea.delete(1),await Qd(i)}))}function gx(i,t){return t().catch((e=>_d(i,e,t)))}async function Al(i){const t=pt(i),e=Rr(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:wa;for(;xM(t);)try{const r=await uM(t.localStore,n);if(r===null){t.Ta.length===0&&e.L_();break}n=r.batchId,wM(t,r)}catch(r){await _d(t,r)}mx(t)&&px(t)}function xM(i){return Ha(i)&&i.Ta.length<10}function wM(i,t){i.Ta.push(t);const e=Rr(i);e.O_()&&e.X_&&e.ea(t.mutations)}function mx(i){return Ha(i)&&!Rr(i).x_()&&i.Ta.length>0}function px(i){Rr(i).start()}async function RM(i){Rr(i).ra()}async function IM(i){const t=Rr(i);for(const e of i.Ta)t.ea(e.mutations)}async function CM(i,t,e){const n=i.Ta.shift(),r=ky.from(n,t,e);await gx(i,(()=>i.remoteSyncer.applySuccessfulWrite(r))),await Al(i)}async function DM(i,t){t&&Rr(i).X_&&await(async function(n,r){if((function(u){return fD(u)&&u!==tt.ABORTED})(r.code)){const o=n.Ta.shift();Rr(n).B_(),await gx(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Al(n)}})(i,t),mx(i)&&px(i)}async function SE(i,t){const e=pt(i);e.asyncQueue.verifyOperationInProgress(),rt(Ba,"RemoteStore received new credentials");const n=Ha(e);e.Ea.add(3),await Lc(e),n&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Qd(e)}async function oy(i,t){const e=pt(i);t?(e.Ea.delete(2),await Qd(e)):t||(e.Ea.add(2),await Lc(e),e.Ra.set("Unknown"))}function xl(i){return i.ma||(i.ma=(function(e,n,r){const o=pt(e);return o.sa(),new mM(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(i.datastore,i.asyncQueue,{Xo:TM.bind(null,i),t_:EM.bind(null,i),r_:SM.bind(null,i),H_:AM.bind(null,i)}),i.da.push((async t=>{t?(i.ma.B_(),Wy(i)?Xy(i):i.Ra.set("Unknown")):(await i.ma.stop(),dx(i))}))),i.ma}function Rr(i){return i.fa||(i.fa=(function(e,n,r){const o=pt(e);return o.sa(),new pM(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:RM.bind(null,i),r_:DM.bind(null,i),ta:IM.bind(null,i),na:CM.bind(null,i)}),i.da.push((async t=>{t?(i.fa.B_(),await Al(i)):(await i.fa.stop(),i.Ta.length>0&&(rt(Ba,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class $y{constructor(t,e,n,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,o){const u=Date.now()+n,h=new $y(t,e,u,r,o);return h.start(n),h}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(tt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zy(i,t){if(Re("AsyncQueue",`${t}: ${i}`),Mr(i))return new ut(tt.UNAVAILABLE,`${t}: ${i}`);throw i}class $o{static emptySet(t){return new $o(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||ht.comparator(e.key,n.key):(e,n)=>ht.comparator(e.key,n.key),this.keyedMap=Yu(),this.sortedSet=new ce(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof $o)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=n.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new $o;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class AE{constructor(){this.ga=new ce(ht.comparator)}track(t){const e=t.doc.key,n=this.ga.get(e);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(e,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(e):t.type===1&&n.type===2?this.ga=this.ga.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):dt(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,n)=>{t.push(n)})),t}}class pl{constructor(t,e,n,r,o,u,h,f,g){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(t,e,n,r,o){const u=[];return e.forEach((h=>{u.push({type:0,doc:h})})),new pl(t,e,$o.emptySet(e),u,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ud(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}class MM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class VM{constructor(){this.queries=xE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const r=pt(e),o=r.queries;r.queries=xE(),o.forEach(((u,h)=>{for(const f of h.Sa)f.onError(n)}))})(this,new ut(tt.ABORTED,"Firestore shutting down"))}}function xE(){return new Is((i=>uA(i)),Ud)}async function OM(i,t){const e=pt(i);let n=3;const r=t.query;let o=e.queries.get(r);o?!o.ba()&&t.Da()&&(n=2):(o=new MM,n=t.Da()?0:1);try{switch(n){case 0:o.wa=await e.onListen(r,!0);break;case 1:o.wa=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(u){const h=Zy(u,`Initialization of query '${Ko(t.query)}' failed`);return void t.onError(h)}e.queries.set(r,o),o.Sa.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&Jy(e)}async function NM(i,t){const e=pt(i),n=t.query;let r=3;const o=e.queries.get(n);if(o){const u=o.Sa.indexOf(t);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?r=t.Da()?0:1:!o.ba()&&t.Da()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function PM(i,t){const e=pt(i);let n=!1;for(const r of t){const o=r.query,u=e.queries.get(o);if(u){for(const h of u.Sa)h.Fa(r)&&(n=!0);u.wa=r}}n&&Jy(e)}function kM(i,t,e){const n=pt(i),r=n.queries.get(t);if(r)for(const o of r.Sa)o.onError(e);n.queries.delete(t)}function Jy(i){i.Ca.forEach((t=>{t.next()}))}var ly,wE;(wE=ly||(ly={})).Ma="default",wE.Cache="cache";class zM{constructor(t,e,n){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const r of t.docChanges)r.type!==3&&n.push(r);t=new pl(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const n=e!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=pl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==ly.Cache}}class yx{constructor(t){this.key=t}}class _x{constructor(t){this.key=t}}class LM{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mt(),this.mutatedKeys=Mt(),this.eu=hA(t),this.tu=new $o(this.eu)}get nu(){return this.Ya}ru(t,e){const n=e?e.iu:new AE,r=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,u=r,h=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,g=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((y,_)=>{const T=r.get(y),S=Pc(this.query,_)?_:null,C=!!T&&this.mutatedKeys.has(T.key),D=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let M=!1;T&&S?T.data.isEqual(S.data)?C!==D&&(n.track({type:3,doc:S}),M=!0):this.su(T,S)||(n.track({type:2,doc:S}),M=!0,(f&&this.eu(S,f)>0||g&&this.eu(S,g)<0)&&(h=!0)):!T&&S?(n.track({type:0,doc:S}),M=!0):T&&!S&&(n.track({type:1,doc:T}),M=!0,(f||g)&&(h=!0)),M&&(S?(u=u.add(S),o=D?o.add(y):o.delete(y)):(u=u.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),o=o.delete(y.key),n.track({type:1,doc:y})}return{tu:u,iu:n,Cs:h,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const u=t.iu.ya();u.sort(((y,_)=>(function(S,C){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt(20277,{Rt:M})}};return D(S)-D(C)})(y.type,_.type)||this.eu(y.doc,_.doc))),this.ou(n),r=r??!1;const h=e&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,g=f!==this.Za;return this.Za=f,u.length!==0||g?{snapshot:new pl(this.query,t.tu,o,u,t.mutatedKeys,f===0,g,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new AE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Mt(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const e=[];return t.forEach((n=>{this.Xa.has(n)||e.push(new _x(n))})),this.Xa.forEach((n=>{t.has(n)||e.push(new yx(n))})),e}cu(t){this.Ya=t.Qs,this.Xa=Mt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return pl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wl="SyncEngine";class BM{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class UM{constructor(t){this.key=t,this.hu=!1}}class jM{constructor(t,e,n,r,o,u){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Is((h=>uA(h)),Ud),this.Iu=new Map,this.Eu=new Set,this.du=new ce(ht.comparator),this.Au=new Map,this.Ru=new Fy,this.Vu={},this.mu=new Map,this.fu=La.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FM(i,t,e=!0){const n=Wd(i);let r;const o=n.Tu.get(t);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await bx(n,t,e,!0),r}async function HM(i,t){const e=Wd(i);await bx(e,t,!0,!1)}async function bx(i,t,e,n){const r=await md(i.localStore,Fn(t)),o=r.targetId,u=i.sharedClientState.addLocalQueryTarget(o,e);let h;return n&&(h=await t_(i,t,o,u==="current",r.resumeToken)),i.isPrimaryClient&&e&&Xd(i.remoteStore,r),h}async function t_(i,t,e,n,r){i.pu=(_,T,S)=>(async function(D,M,U,G){let Q=M.view.ru(U);Q.Cs&&(Q=await sy(D.localStore,M.query,!1).then((({documents:R})=>M.view.ru(R,Q))));const Z=G&&G.targetChanges.get(M.targetId),$=G&&G.targetMismatches.get(M.targetId)!=null,it=M.view.applyChanges(Q,D.isPrimaryClient,Z,$);return uy(D,M.targetId,it.au),it.snapshot})(i,_,T,S);const o=await sy(i.localStore,t,!0),u=new LM(t,o.Qs),h=u.ru(o.documents),f=zc.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",r),g=u.applyChanges(h,i.isPrimaryClient,f);uy(i,e,g.au);const y=new BM(t,e,u);return i.Tu.set(t,y),i.Iu.has(e)?i.Iu.get(e).push(t):i.Iu.set(e,[t]),g.snapshot}async function qM(i,t,e){const n=pt(i),r=n.Tu.get(t),o=n.Iu.get(r.targetId);if(o.length>1)return n.Iu.set(r.targetId,o.filter((u=>!Ud(u,t)))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await gl(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),e&&ml(n.remoteStore,r.targetId),yl(n,r.targetId)})).catch(Dr)):(yl(n,r.targetId),await gl(n.localStore,r.targetId,!0))}async function GM(i,t){const e=pt(i),n=e.Tu.get(t),r=e.Iu.get(n.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),ml(e.remoteStore,n.targetId))}async function KM(i,t,e){const n=s_(i);try{const r=await(function(u,h){const f=pt(u),g=$t.now(),y=h.reduce(((S,C)=>S.add(C.key)),Mt());let _,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let C=jn(),D=Mt();return f.Ns.getEntries(S,y).next((M=>{C=M,C.forEach(((U,G)=>{G.isValidDocument()||(D=D.add(U))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,C))).next((M=>{_=M;const U=[];for(const G of h){const Q=cD(G,_.get(G.key).overlayedDocument);Q!=null&&U.push(new Vr(G.key,Q,J1(Q.value.mapValue),Rn.exists(!0)))}return f.mutationQueue.addMutationBatch(S,g,U,h)})).next((M=>{T=M;const U=M.applyToLocalDocumentSet(_,D);return f.documentOverlayCache.saveOverlays(S,M.batchId,U)}))})).then((()=>({batchId:T.batchId,changes:dA(_)})))})(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),(function(u,h,f){let g=u.Vu[u.currentUser.toKey()];g||(g=new ce(wt)),g=g.insert(h,f),u.Vu[u.currentUser.toKey()]=g})(n,r.batchId,e),await Or(n,r.changes),await Al(n.remoteStore)}catch(r){const o=Zy(r,"Failed to persist write");e.reject(o)}}async function vx(i,t){const e=pt(i);try{const n=await oM(e.localStore,t);t.targetChanges.forEach(((r,o)=>{const u=e.Au.get(o);u&&(_t(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?_t(u.hu,14607):r.removedDocuments.size>0&&(_t(u.hu,42227),u.hu=!1))})),await Or(e,n,t)}catch(n){await Dr(n)}}function RE(i,t,e){const n=pt(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const r=[];n.Tu.forEach(((o,u)=>{const h=u.view.va(t);h.snapshot&&r.push(h.snapshot)})),(function(u,h){const f=pt(u);f.onlineState=h;let g=!1;f.queries.forEach(((y,_)=>{for(const T of _.Sa)T.va(h)&&(g=!0)})),g&&Jy(f)})(n.eventManager,t),r.length&&n.Pu.H_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function YM(i,t,e){const n=pt(i);n.sharedClientState.updateQueryState(t,"rejected",e);const r=n.Au.get(t),o=r&&r.key;if(o){let u=new ce(ht.comparator);u=u.insert(o,Ee.newNoDocument(o,vt.min()));const h=Mt().add(o),f=new kc(vt.min(),new Map,new ce(wt),u,h);await vx(n,f),n.du=n.du.remove(o),n.Au.delete(t),i_(n)}else await gl(n.localStore,t,!1).then((()=>yl(n,t,e))).catch(Dr)}async function QM(i,t){const e=pt(i),n=t.batch.batchId;try{const r=await aM(e.localStore,t);n_(e,n,null),e_(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await Or(e,r)}catch(r){await Dr(r)}}async function XM(i,t,e){const n=pt(i);try{const r=await(function(u,h){const f=pt(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return f.mutationQueue.lookupMutationBatch(g,h).next((_=>(_t(_!==null,37113),y=_.keys(),f.mutationQueue.removeMutationBatch(g,_)))).next((()=>f.mutationQueue.performConsistencyCheck(g))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(g,y,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>f.localDocuments.getDocuments(g,y)))}))})(n.localStore,t);n_(n,t,e),e_(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await Or(n,r)}catch(r){await Dr(r)}}function e_(i,t){(i.mu.get(t)||[]).forEach((e=>{e.resolve()})),i.mu.delete(t)}function n_(i,t,e){const n=pt(i);let r=n.Vu[n.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),n.Vu[n.currentUser.toKey()]=r}}function yl(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const n of i.Iu.get(t))i.Tu.delete(n),e&&i.Pu.yu(n,e);i.Iu.delete(t),i.isPrimaryClient&&i.Ru.jr(t).forEach((n=>{i.Ru.containsKey(n)||Tx(i,n)}))}function Tx(i,t){i.Eu.delete(t.path.canonicalString());const e=i.du.get(t);e!==null&&(ml(i.remoteStore,e),i.du=i.du.remove(t),i.Au.delete(e),i_(i))}function uy(i,t,e){for(const n of e)n instanceof yx?(i.Ru.addReference(n.key,t),WM(i,n)):n instanceof _x?(rt(wl,"Document no longer in limbo: "+n.key),i.Ru.removeReference(n.key,t),i.Ru.containsKey(n.key)||Tx(i,n.key)):dt(19791,{wu:n})}function WM(i,t){const e=t.key,n=e.path.canonicalString();i.du.get(e)||i.Eu.has(n)||(rt(wl,"New document in limbo: "+e),i.Eu.add(n),i_(i))}function i_(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const e=new ht(Wt.fromString(t)),n=i.fu.next();i.Au.set(n,new UM(e)),i.du=i.du.insert(e,n),Xd(i.remoteStore,new Ss(Fn(Bd(e.path)),n,"TargetPurposeLimboResolution",wn.ce))}}async function Or(i,t,e){const n=pt(i),r=[],o=[],u=[];n.Tu.isEmpty()||(n.Tu.forEach(((h,f)=>{u.push(n.pu(f,t,e).then((g=>{if((g||e)&&n.isPrimaryClient){const y=g?!g.fromCache:e?.targetChanges.get(f.targetId)?.current;n.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(g){r.push(g);const y=Gy.As(f.targetId,g);o.push(y)}})))})),await Promise.all(u),n.Pu.H_(r),await(async function(f,g){const y=pt(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>j.forEach(g,(T=>j.forEach(T.Es,(S=>y.persistence.referenceDelegate.addReference(_,T.targetId,S))).next((()=>j.forEach(T.ds,(S=>y.persistence.referenceDelegate.removeReference(_,T.targetId,S)))))))))}catch(_){if(!Mr(_))throw _;rt(Ky,"Failed to update sequence numbers: "+_)}for(const _ of g){const T=_.targetId;if(!_.fromCache){const S=y.Ms.get(T),C=S.snapshotVersion,D=S.withLastLimboFreeSnapshotVersion(C);y.Ms=y.Ms.insert(T,D)}}})(n.localStore,o))}async function $M(i,t){const e=pt(i);if(!e.currentUser.isEqual(t)){rt(wl,"User change. New user:",t.toKey());const n=await tx(e.localStore,t);e.currentUser=t,(function(o,u){o.mu.forEach((h=>{h.forEach((f=>{f.reject(new ut(tt.CANCELLED,u))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Or(e,n.Ls)}}function ZM(i,t){const e=pt(i),n=e.Au.get(t);if(n&&n.hu)return Mt().add(n.key);{let r=Mt();const o=e.Iu.get(t);if(!o)return r;for(const u of o){const h=e.Tu.get(u);r=r.unionWith(h.view.nu)}return r}}async function JM(i,t){const e=pt(i),n=await sy(e.localStore,t.query,!0),r=t.view.cu(n);return e.isPrimaryClient&&uy(e,t.targetId,r.au),r}async function tV(i,t){const e=pt(i);return ix(e.localStore,t).then((n=>Or(e,n)))}async function eV(i,t,e,n){const r=pt(i),o=await(function(h,f){const g=pt(h),y=pt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(_=>y.er(_,f).next((T=>T?g.localDocuments.getDocuments(_,T):j.resolve(null)))))})(r.localStore,t);o!==null?(e==="pending"?await Al(r.remoteStore):e==="acknowledged"||e==="rejected"?(n_(r,t,n||null),e_(r,t),(function(h,f){pt(pt(h).mutationQueue).ir(f)})(r.localStore,t)):dt(6720,"Unknown batchState",{Su:e}),await Or(r,o)):rt(wl,"Cannot apply mutation batch with id: "+t)}async function nV(i,t){const e=pt(i);if(Wd(e),s_(e),t===!0&&e.gu!==!0){const n=e.sharedClientState.getAllActiveQueryTargets(),r=await IE(e,n.toArray());e.gu=!0,await oy(e.remoteStore,!0);for(const o of r)Xd(e.remoteStore,o)}else if(t===!1&&e.gu!==!1){const n=[];let r=Promise.resolve();e.Iu.forEach(((o,u)=>{e.sharedClientState.isLocalQueryTarget(u)?n.push(u):r=r.then((()=>(yl(e,u),gl(e.localStore,u,!0)))),ml(e.remoteStore,u)})),await r,await IE(e,n),(function(u){const h=pt(u);h.Au.forEach(((f,g)=>{ml(h.remoteStore,g)})),h.Ru.Jr(),h.Au=new Map,h.du=new ce(ht.comparator)})(e),e.gu=!1,await oy(e.remoteStore,!1)}}async function IE(i,t,e){const n=pt(i),r=[],o=[];for(const u of t){let h;const f=n.Iu.get(u);if(f&&f.length!==0){h=await md(n.localStore,Fn(f[0]));for(const g of f){const y=n.Tu.get(g),_=await JM(n,y);_.snapshot&&o.push(_.snapshot)}}else{const g=await nx(n.localStore,u);h=await md(n.localStore,g),await t_(n,Ex(g),u,!1,h.resumeToken)}r.push(h)}return n.Pu.H_(o),r}function Ex(i){return oA(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function iV(i){return(function(e){return pt(pt(e).persistence).Ts()})(pt(i).localStore)}async function sV(i,t,e,n){const r=pt(i);if(r.gu)return void rt(wl,"Ignoring unexpected query state notification.");const o=r.Iu.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const u=await ix(r.localStore,cA(o[0])),h=kc.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Ce.EMPTY_BYTE_STRING);await Or(r,u,h);break}case"rejected":await gl(r.localStore,t,!0),yl(r,t,n);break;default:dt(64155,e)}}async function rV(i,t,e){const n=Wd(i);if(n.gu){for(const r of t){if(n.Iu.has(r)&&n.sharedClientState.isActiveQueryTarget(r)){rt(wl,"Adding an already active target "+r);continue}const o=await nx(n.localStore,r),u=await md(n.localStore,o);await t_(n,Ex(o),u.targetId,!1,u.resumeToken),Xd(n.remoteStore,u)}for(const r of e)n.Iu.has(r)&&await gl(n.localStore,r,!1).then((()=>{ml(n.remoteStore,r),yl(n,r)})).catch(Dr)}}function Wd(i){const t=pt(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=vx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YM.bind(null,t),t.Pu.H_=PM.bind(null,t.eventManager),t.Pu.yu=kM.bind(null,t.eventManager),t}function s_(i){const t=pt(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=QM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XM.bind(null,t),t}class Rc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Yd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return JA(this.persistence,new ZA,t.initialUser,this.serializer)}Cu(t){return new Hy(Kd.mi,this.serializer)}Du(t){return new lx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rc.provider={build:()=>new Rc};class aV extends Rc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){_t(this.persistence.referenceDelegate instanceof gd,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new KA(n,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Hy((n=>gd.mi(n,e)),this.serializer)}}class oV extends Rc{constructor(t,e,n){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await s_(this.xu.syncEngine),await Al(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return JA(this.persistence,new ZA,t.initialUser,this.serializer)}Fu(t,e){const n=this.persistence.referenceDelegate.garbageCollector;return new KA(n,t.asyncQueue,e)}Mu(t,e){const n=new fC(e,this.persistence);return new hC(t.asyncQueue,n)}Cu(t){const e=$A(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new qy(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,ux(),Kf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new lx}}class lV extends oV{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof pp&&(this.sharedClientState.syncEngine={Co:eV.bind(null,e),vo:sV.bind(null,e),Fo:rV.bind(null,e),Ts:iV.bind(null,e),Do:tV.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji((async n=>{await nV(this.xu.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Du(t){const e=ux();if(!pp.v(e))throw new ut(tt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=$A(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new pp(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class bd{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>RE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=$M.bind(null,this.syncEngine),await oy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new VM})()}createDatastore(t){const e=Yd(t.databaseInfo.databaseId),n=(function(o){return new gM(o)})(t.databaseInfo);return(function(o,u,h,f){return new _M(o,u,h,f)})(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return(function(n,r,o,u,h){return new vM(n,r,o,u,h)})(this.localStore,this.datastore,t.asyncQueue,(e=>RE(this.syncEngine,e,0)),(function(){return TE.v()?new TE:new cM})())}createSyncEngine(t,e){return(function(r,o,u,h,f,g,y){const _=new jM(r,o,u,h,f,g);return y&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const n=pt(e);rt(Ba,"RemoteStore shutting down."),n.Ea.add(5),await Lc(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bd.provider={build:()=>new bd};class uV{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Re("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const Ir="FirestoreClient";class cV{constructor(t,e,n,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Ze.UNAUTHENTICATED,this.clientId=Ey.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async u=>{rt(Ir,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(n,(u=>(rt(Ir,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Zy(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function _p(i,t){i.asyncQueue.verifyOperationInProgress(),rt(Ir,"Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener((async r=>{n.isEqual(r)||(await tx(t.localStore,r),n=r)})),t.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=t}async function CE(i,t){i.asyncQueue.verifyOperationInProgress();const e=await hV(i);rt(Ir,"Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener((n=>SE(t.remoteStore,n))),i.setAppCheckTokenChangeListener(((n,r)=>SE(t.remoteStore,r))),i._onlineComponents=t}async function hV(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){rt(Ir,"Using user provided OfflineComponentProvider");try{await _p(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(r){return r.name==="FirebaseError"?r.code===tt.FAILED_PRECONDITION||r.code===tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(e))throw e;Oa("Error using user provided cache. Falling back to memory cache: "+e),await _p(i,new Rc)}}else rt(Ir,"Using default OfflineComponentProvider"),await _p(i,new aV(void 0));return i._offlineComponents}async function Sx(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(rt(Ir,"Using user provided OnlineComponentProvider"),await CE(i,i._uninitializedComponentsProvider._online)):(rt(Ir,"Using default OnlineComponentProvider"),await CE(i,new bd))),i._onlineComponents}function fV(i){return Sx(i).then((t=>t.syncEngine))}async function DE(i){const t=await Sx(i),e=t.eventManager;return e.onListen=FM.bind(null,t.syncEngine),e.onUnlisten=qM.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=HM.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=GM.bind(null,t.syncEngine),e}function Ax(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}const ME=new Map;const xx="firestore.googleapis.com",VE=!0;class OE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ut(tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xx,this.ssl=VE}else this.host=t.host,this.ssl=t.ssl??VE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=FA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<UD)throw new ut(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}lC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ax(t.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ut(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ut(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ut(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,r){return n.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class $d{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ut(tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new ZI;switch(n.type){case"firstParty":return new nC(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ut(tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const n=ME.get(e);n&&(rt("ComponentProvider","Removing Datastore"),ME.delete(e),n.terminate())})(this),Promise.resolve()}}function dV(i,t,e,n={}){i=xa(i,$d);const r=by(t),o=i._getSettings(),u={...o,emulatorOptions:i._getEmulatorOptions()},h=`${t}:${e}`;r&&(CR(`https://${h}`),OR("Firestore",!0)),o.host!==xx&&o.host!==h&&Oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:h,ssl:r,emulatorOptions:n};if(!Jf(f,u)&&(i._setSettings(f),n.mockUserToken)){let g,y;if(typeof n.mockUserToken=="string")g=n.mockUserToken,y=Ze.MOCK_USER;else{g=DR(n.mockUserToken,i._app?.options.projectId);const _=n.mockUserToken.sub||n.mockUserToken.user_id;if(!_)throw new ut(tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ze(_)}i._authCredentials=new JI(new A1(g,y))}}class qa{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new qa(this.firestore,t,this._query)}}class Ge{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ge(this.firestore,t,this._key)}toJSON(){return{type:Ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,n){if(Vc(e,Ge._jsonSchema))return new Ge(t,n||null,new ht(Wt.fromString(e.referencePath)))}}Ge._jsonSchemaVersion="firestore/documentReference/1.0",Ge._jsonSchema={type:Ue("string",Ge._jsonSchemaVersion),referencePath:Ue("string")};class Er extends qa{constructor(t,e,n){super(t,e,Bd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ge(this.firestore,null,new ht(t))}withConverter(t){return new Er(this.firestore,t,this._path)}}function wx(i,t,...e){if(i=Ma(i),w1("collection","path",t),i instanceof $d){const n=Wt.fromString(t,...e);return ET(n),new Er(i,null,n)}{if(!(i instanceof Ge||i instanceof Er))throw new ut(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Wt.fromString(t,...e));return ET(n),new Er(i.firestore,null,n)}}function Rx(i,t,...e){if(i=Ma(i),arguments.length===1&&(t=Ey.newId()),w1("doc","path",t),i instanceof $d){const n=Wt.fromString(t,...e);return TT(n),new Ge(i,null,new ht(n))}{if(!(i instanceof Ge||i instanceof Er))throw new ut(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Wt.fromString(t,...e));return TT(n),new Ge(i.firestore,i instanceof Er?i.converter:null,new ht(n))}}const NE="AsyncQueue";class PE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cx(this,"async_queue_retry"),this._c=()=>{const n=Kf();n&&rt(NE,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const e=Kf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Kf();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new vr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Mr(t))throw t;rt(NE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((n=>{throw this.nc=n,this.rc=!1,Re("INTERNAL UNHANDLED ERROR: ",kE(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=e,e}enqueueAfterDelay(t,e,n){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const r=$y.createAndSchedule(this,t,e,n,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&dt(47125,{Pc:kE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,n)=>e.targetTimeMs-n.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function kE(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}function zE(i){return(function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const o of n)if(o in r&&typeof r[o]=="function")return!0;return!1})(i,["next","error","complete"])}class _l extends $d{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new PE,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new PE(t),this._firestoreClient=void 0,await t}}}function gV(i,t){const e=typeof i=="object"?i:BI(),n=typeof i=="string"?i:ad,r=NI(e,"firestore").getImmediate({identifier:n});if(!r._initialized){const o=RR("firestore");o&&dV(r,...o)}return r}function Ix(i){if(i._terminated)throw new ut(tt.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||Cx(i),i._firestoreClient}function Cx(i){const t=i._freezeSettings(),e=(function(r,o,u,h){return new UC(r,o,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Ax(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,t);i._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new cV(i._authCredentials,i._appCheckCredentials,i._queue,e,i._componentsProvider&&(function(r){const o=r?._online.build();return{_offline:r?._offline.build(o),_online:o}})(i._componentsProvider))}async function mV(i){Oa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();pV(i,bd.provider,{build:e=>new lV(e,t.cacheSizeBytes)})}function pV(i,t,e){if((i=xa(i,_l))._firestoreClient||i._terminated)throw new ut(tt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new ut(tt.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:t,_offline:e},Cx(i)}class si{constructor(t){this._byteString=t}static fromBase64String(t){try{return new si(Ce.fromBase64String(t))}catch(e){throw new ut(tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new si(Ce.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:si._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Vc(t,si._jsonSchema))return si.fromBase64String(t.bytes)}}si._jsonSchemaVersion="firestore/bytes/1.0",si._jsonSchema={type:Ue("string",si._jsonSchemaVersion),bytes:Ue("string")};class r_{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ut(tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new be(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Dx{constructor(t){this._methodName=t}}class $i{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ut(tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ut(tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return wt(this._lat,t._lat)||wt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$i._jsonSchemaVersion}}static fromJSON(t){if(Vc(t,$i._jsonSchema))return new $i(t.latitude,t.longitude)}}$i._jsonSchemaVersion="firestore/geoPoint/1.0",$i._jsonSchema={type:Ue("string",$i._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};class Zi{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,r){if(n.length!==r.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==r[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Vc(t,Zi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Zi(t.vectorValues);throw new ut(tt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zi._jsonSchemaVersion="firestore/vectorValue/1.0",Zi._jsonSchema={type:Ue("string",Zi._jsonSchemaVersion),vectorValues:Ue("object")};const yV=/^__.*__$/;class _V{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new Vr(t,this.data,this.fieldMask,e,this.fieldTransforms):new Sl(t,this.data,e,this.fieldTransforms)}}function Mx(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt(40011,{Ac:i})}}class a_{constructor(t,e,n,r,o,u){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new a_({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),n=this.Vc({path:e,fc:!1});return n.gc(t),n}yc(t){const e=this.path?.child(t),n=this.Vc({path:e,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return vd(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Mx(this.Ac)&&yV.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class bV{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Yd(t)}Cc(t,e,n,r=!1){return new a_({Ac:t,methodName:e,Dc:n,path:be.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vx(i){const t=i._freezeSettings(),e=Yd(i._databaseId);return new bV(i._databaseId,!!t.ignoreUndefinedProperties,e)}function vV(i,t,e,n,r,o={}){const u=i.Cc(o.merge||o.mergeFields?2:0,t,e,r);Px("Data must be an object, but it was:",u,n);const h=Ox(n,u);let f,g;if(o.merge)f=new ri(u.fieldMask),g=u.fieldTransforms;else if(o.mergeFields){const y=[];for(const _ of o.mergeFields){const T=EV(t,_,e);if(!u.contains(T))throw new ut(tt.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);AV(y,T)||y.push(T)}f=new ri(y),g=u.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,g=u.fieldTransforms;return new _V(new An(h),f,g)}function TV(i,t,e,n=!1){return o_(e,i.Cc(n?4:3,t))}function o_(i,t){if(Nx(i=Ma(i)))return Px("Unsupported field value:",t,i),Ox(i,t);if(i instanceof Dx)return(function(n,r){if(!Mx(r.Ac))throw r.Sc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(n,r){const o=[];let u=0;for(const h of n){let f=o_(h,r.wc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}})(i,t)}return(function(n,r){if((n=Ma(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return iD(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=$t.fromDate(n);return{timestampValue:dl(r.serializer,o)}}if(n instanceof $t){const o=new $t(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:dl(r.serializer,o)}}if(n instanceof $i)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof si)return{bytesValue:wA(r.serializer,n._byteString)};if(n instanceof Ge){const o=r.databaseId,u=n.firestore._databaseId;if(!u.isEqual(o))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:By(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Zi)return(function(u,h){return{mapValue:{fields:{[Dy]:{stringValue:My},[ol]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return Ny(h.serializer,g)}))}}}}}})(n,r);throw r.Sc(`Unsupported field value: ${Md(n)}`)})(i,t)}function Ox(i,t){const e={};return q1(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fa(i,((n,r)=>{const o=o_(r,t.mc(n));o!=null&&(e[n]=o)})),{mapValue:{fields:e}}}function Nx(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof $t||i instanceof $i||i instanceof si||i instanceof Ge||i instanceof Dx||i instanceof Zi)}function Px(i,t,e){if(!Nx(e)||!R1(e)){const n=Md(e);throw n==="an object"?t.Sc(i+" a custom object"):t.Sc(i+" "+n)}}function EV(i,t,e){if((t=Ma(t))instanceof r_)return t._internalPath;if(typeof t=="string")return kx(i,t);throw vd("Field path arguments must be of type string or ",i,!1,void 0,e)}const SV=new RegExp("[~\\*/\\[\\]]");function kx(i,t,e){if(t.search(SV)>=0)throw vd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new r_(...t.split("."))._internalPath}catch{throw vd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function vd(i,t,e,n,r){const o=n&&!n.isEmpty(),u=r!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${n}`),u&&(f+=` in document ${r}`),f+=")"),new ut(tt.INVALID_ARGUMENT,h+i+f)}function AV(i,t){return i.some((e=>e.isEqual(t)))}class zx{constructor(t,e,n,r,o){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new xV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(l_("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class xV extends zx{data(){return super.data()}}function l_(i,t){return typeof t=="string"?kx(i,t):t instanceof r_?t._internalPath:t._delegate._internalPath}function wV(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ut(tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u_{}class Lx extends u_{}function RV(i,t,...e){let n=[];t instanceof u_&&n.push(t),n=n.concat(e),(function(o){const u=o.filter((f=>f instanceof h_)).length,h=o.filter((f=>f instanceof c_)).length;if(u>1||u>0&&h>0)throw new ut(tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const r of n)i=r._apply(i);return i}class c_ extends Lx{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new c_(t,e,n)}_apply(t){const e=this._parse(t);return Bx(t._query,e),new qa(t.firestore,t.converter,Xp(t._query,e))}_parse(t){const e=Vx(t.firestore);return(function(o,u,h,f,g,y,_){let T;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ut(tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){BE(_,y);const C=[];for(const D of _)C.push(LE(f,o,D));T={arrayValue:{values:C}}}else T=LE(f,o,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||BE(_,y),T=TV(h,u,_,y==="in"||y==="not-in");return Lt.create(g,y,T)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class h_ extends u_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new h_(t,e)}_parse(t){const e=this._queryConstraints.map((n=>n._parse(t))).filter((n=>n.getFilters().length>0));return e.length===1?e[0]:ne.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(r,o){let u=r;const h=o.getFlattenedFilters();for(const f of h)Bx(u,f),u=Xp(u,f)})(t._query,e),new qa(t.firestore,t.converter,Xp(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class f_ extends Lx{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new f_(t,e)}_apply(t){const e=(function(r,o,u){if(r.startAt!==null)throw new ut(tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ut(tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ac(o,u)})(t._query,this._field,this._direction);return new qa(t.firestore,t.converter,(function(r,o){const u=r.explicitOrderBy.concat([o]);return new El(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(t._query,e))}}function IV(i,t="asc"){const e=t,n=l_("orderBy",i);return f_._create(n,e)}function LE(i,t,e){if(typeof(e=Ma(e))=="string"){if(e==="")throw new ut(tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lA(t)&&e.indexOf("/")!==-1)throw new ut(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const n=t.path.child(Wt.fromString(e));if(!ht.isDocumentKey(n))throw new ut(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Ec(i,new ht(n))}if(e instanceof Ge)return Ec(i,e._key);throw new ut(tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Md(e)}.`)}function BE(i,t){if(!Array.isArray(i)||i.length===0)throw new ut(tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Bx(i,t){const e=(function(r,o){for(const u of r)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(i.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new ut(tt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ut(tt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class CV{convertValue(t,e="none"){switch(xr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _e(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Rs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw dt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Fa(t,((r,o)=>{n[r]=this.convertValue(o,e)})),n}convertVectorValue(t){const e=t.fields?.[ol].arrayValue?.values?.map((n=>_e(n.doubleValue)));return new Zi(e)}convertGeoPoint(t){return new $i(_e(t.latitude),_e(t.longitude))}convertArray(t,e){return(t.values||[]).map((n=>this.convertValue(n,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=zd(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(vc(t));default:return null}}convertTimestamp(t){const e=ws(t);return new $t(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Wt.fromString(t);_t(kA(n),9688,{name:t});const r=new Na(n.get(1),n.get(3)),o=new ht(n.popFirst(5));return r.isEqual(e)||Re(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}function DV(i,t,e){let n;return n=i?i.toFirestore(t):t,n}class Wu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ca extends zx{constructor(t,e,n,r,o,u){super(t,e,n,r,u),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(l_("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(tt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Ca._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ca._jsonSchema={type:Ue("string",Ca._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class Yf extends Ca{data(t={}){return super.data(t)}}class Zo{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Wu(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Yf(this._firestore,this._userDataWriter,n.key,n,new Wu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ut(tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((h=>{const f=new Yf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Wu(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const f=new Yf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Wu(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return h.type!==0&&(g=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:MV(h.type),doc:f,oldIndex:g,newIndex:y}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(tt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Zo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Ey.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],n=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function MV(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt(61501,{type:i})}}Zo._jsonSchemaVersion="firestore/querySnapshot/1.0",Zo._jsonSchema={type:Ue("string",Zo._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class Ux extends CV{constructor(t){super(),this.firestore=t}convertBytes(t){return new si(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ge(this.firestore,null,e)}}function VV(i){return jx(xa(i.firestore,_l),[new Hd(i._key,Rn.none())])}function OV(i,t){const e=xa(i.firestore,_l),n=Rx(i),r=DV(i.converter,t);return jx(e,[vV(Vx(i.firestore),"addDoc",n._key,r,i.converter!==null,{}).toMutation(n._key,Rn.exists(!1))]).then((()=>n))}function NV(i,...t){i=Ma(i);let e={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||zE(t[n])||(e=t[n++]);const r={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(zE(t[n])){const f=t[n];t[n]=f.next?.bind(f),t[n+1]=f.error?.bind(f),t[n+2]=f.complete?.bind(f)}let o,u,h;if(i instanceof Ge)u=xa(i.firestore,_l),h=Bd(i._key.path),o={next:f=>{t[n]&&t[n](PV(u,i,f))},error:t[n+1],complete:t[n+2]};else{const f=xa(i,qa);u=xa(f.firestore,_l),h=f._query;const g=new Ux(u);o={next:y=>{t[n]&&t[n](new Zo(u,g,f,y))},error:t[n+1],complete:t[n+2]},wV(i._query)}return(function(g,y,_,T){const S=new uV(T),C=new zM(y,S,_);return g.asyncQueue.enqueueAndForget((async()=>OM(await DE(g),C))),()=>{S.Nu(),g.asyncQueue.enqueueAndForget((async()=>NM(await DE(g),C)))}})(Ix(u),h,r,o)}function jx(i,t){return(function(n,r){const o=new vr;return n.asyncQueue.enqueueAndForget((async()=>KM(await fV(n),r,o))),o.promise})(Ix(i),t)}function PV(i,t,e){const n=e.docs.get(t._key),r=new Ux(i);return new Ca(i,r,t._key,n,new Wu(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){Tl=r})(LI),ed(new dc("firestore",((n,{instanceIdentifier:r,options:o})=>{const u=n.getProvider("app").getImmediate(),h=new _l(new tC(n.getProvider("auth-internal")),new iC(u,n.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ut(tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Na(g.options.projectId,y)})(u,r),u);return o={useFetchStreams:e,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),Wo(yT,_T,t),Wo(yT,_T,"esm2020")})();const kV={apiKey:"AIzaSyDoPUzOwMfesfjp-Rjp8yWLEu57G6CYxvk",authDomain:"expenses-64ed1.firebaseapp.com",projectId:"expenses-64ed1",storageBucket:"expenses-64ed1.firebasestorage.app",messagingSenderId:"159598256090",appId:"1:159598256090:web:528d571c390e5870c9eae3"},zV=g1(kV),Bc=gV(zV);mV(Bc).catch(i=>{i.code=="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a a time."):i.code=="unimplemented"&&console.warn("The current browser does not support all of the features required to enable persistence")});const LV=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BV=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),UE=i=>{const t=BV(i);return t.charAt(0).toUpperCase()+t.slice(1)},Fx=(...i)=>i.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),UV=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var jV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const FV=Ht.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:r="",children:o,iconNode:u,...h},f)=>Ht.createElement("svg",{ref:f,...jV,width:t,height:t,stroke:i,strokeWidth:n?Number(e)*24/Number(t):e,className:Fx("lucide",r),...!o&&!UV(h)&&{"aria-hidden":"true"},...h},[...u.map(([g,y])=>Ht.createElement(g,y)),...Array.isArray(o)?o:[o]]));const Ga=(i,t)=>{const e=Ht.forwardRef(({className:n,...r},o)=>Ht.createElement(FV,{ref:o,iconNode:t,className:Fx(`lucide-${LV(UE(i))}`,`lucide-${i}`,n),...r}));return e.displayName=UE(i),e};const HV=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],qV=Ga("calendar",HV);const GV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],KV=Ga("circle-plus",GV);const YV=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],QV=Ga("download",YV);const XV=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],WV=Ga("layers",XV);const $V=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ZV=Ga("loader-circle",$V);const JV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],tO=Ga("log-out",JV);const eO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],nO=Ga("trash-2",eO),cy=["Mercado","Contas - Outras","Agua","Energia","Gas","Internet","Telefonia","Condominio e Manutencao Casa","Lazer","Transporte","Sade","Outros"],jE={Mercado:"#6366f1","Contas - Outras":"#f472b6",Agua:"#0ea5e9",Energia:"#eab308",Gas:"#f97316",Internet:"#8b5cf6",Telefonia:"#d946ef","Condominio e Manutencao Casa":"#10b981",Lazer:"#34d399",Transporte:"#facc15",Sade:"#a78bfa",Outros:"#fb923c"},iO=()=>{const{currentUser:i}=yy(),[t,e]=Ht.useState(""),[n,r]=Ht.useState(""),[o,u]=Ht.useState(cy[0]),[h,f]=Ht.useState(new Date().toISOString().split("T")[0]),[g,y]=Ht.useState(!1),_=async T=>{if(T.preventDefault(),!(!t||!n)){y(!0);try{await OV(wx(Bc,"expenses"),{amount:parseFloat(t),description:n,category:o,date:h,userId:i.id,userName:i.name,createdAt:$t.now()}),e(""),r("")}catch(S){console.error("Error adding document: ",S),alert("Falha ao salvar despesa")}finally{y(!1)}}};return at.jsxs("form",{onSubmit:_,className:"glass-panel",style:{padding:"20px",marginBottom:"20px"},children:[at.jsx("h3",{style:{marginBottom:"15px",color:"var(--color-primary-text)"},children:"Adicionar Nova Despesa"}),at.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[at.jsxs("div",{children:[at.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"0.9em",color:"var(--color-text-muted)"},children:"Valor ()"}),at.jsx("input",{type:"number",step:"0.01",value:t,onChange:T=>e(T.target.value),className:"input-field",placeholder:"0.00",required:!0})]}),at.jsxs("div",{children:[at.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"0.9em",color:"var(--color-text-muted)"},children:"Data"}),at.jsx("input",{type:"date",value:h,onChange:T=>f(T.target.value),className:"input-field",required:!0})]})]}),at.jsxs("div",{style:{marginBottom:"15px"},children:[at.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"0.9em",color:"var(--color-text-muted)"},children:"Descrio"}),at.jsx("input",{type:"text",value:n,onChange:T=>r(T.target.value),className:"input-field",placeholder:"ex: Compras da semana no Tesco",required:!0})]}),at.jsxs("div",{style:{marginBottom:"20px"},children:[at.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"0.9em",color:"var(--color-text-muted)"},children:"Categoria"}),at.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:cy.map(T=>at.jsx("button",{type:"button",onClick:()=>u(T),style:{background:o===T?"var(--color-primary)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",padding:"6px 12px",borderRadius:"20px",cursor:"pointer",fontSize:"0.85em",transition:"background 0.2s"},children:T},T))})]}),at.jsxs("button",{type:"submit",className:"btn-primary",style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",gap:"8px"},disabled:g,children:[g?at.jsx(ZV,{className:"animate-spin",size:20}):at.jsx(KV,{size:20}),"Adicionar Despesa"]})]})},sO=({expenses:i})=>{const t=async n=>{window.confirm("Apagar despesa?")&&await VV(Rx(Bc,"expenses",n))},e=()=>{if(!i.length)return;const r=[["Data","Descrio","Pessoa","Categoria","Valor"].join(","),...i.map(f=>[f.date,`"${f.description.replace(/"/g,'""')}"`,f.userName,f.category,f.amount].join(","))].join(`
`),o=new Blob([r],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a"),h=URL.createObjectURL(o);u.setAttribute("href",h),u.setAttribute("download",`despesas_${new Date().toISOString().slice(0,10)}.csv`),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u)};return i.length===0?at.jsx("div",{className:"glass-panel",style:{padding:"30px",textAlign:"center",color:"var(--color-text-muted)"},children:"Nenhuma despesa registrada este ms ainda."}):at.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[at.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[at.jsx("h3",{style:{margin:0},children:"Despesas Recentes"}),at.jsxs("button",{onClick:e,style:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"0.9em"},children:[at.jsx(QV,{size:16})," Exportar CSV"]})]}),at.jsx("div",{style:{overflowX:"auto"},children:at.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"500px"},children:[at.jsx("thead",{children:at.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)",textAlign:"left"},children:[at.jsx("th",{style:{padding:"10px",color:"var(--color-text-muted)",fontSize:"0.9em"},children:"Data"}),at.jsx("th",{style:{padding:"10px",color:"var(--color-text-muted)",fontSize:"0.9em"},children:"Descrio"}),at.jsx("th",{style:{padding:"10px",color:"var(--color-text-muted)",fontSize:"0.9em"},children:"Pessoa"}),at.jsx("th",{style:{padding:"10px",color:"var(--color-text-muted)",fontSize:"0.9em"},children:"Categoria"}),at.jsx("th",{style:{padding:"10px",color:"var(--color-text-muted)",fontSize:"0.9em",textAlign:"right"},children:"Valor"}),at.jsx("th",{style:{padding:"10px"}})]})}),at.jsx("tbody",{children:i.map(n=>at.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[at.jsx("td",{style:{padding:"12px 10px",fontSize:"0.9em"},children:new Date(n.date).toLocaleDateString()}),at.jsx("td",{style:{padding:"12px 10px",fontWeight:"500"},children:n.description}),at.jsx("td",{style:{padding:"12px 10px",fontSize:"0.9em",color:"var(--color-text-muted)"},children:n.userName}),at.jsx("td",{style:{padding:"12px 10px"},children:at.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",fontSize:"0.8em"},children:n.category})}),at.jsxs("td",{style:{padding:"12px 10px",textAlign:"right",fontWeight:"bold"},children:["",n.amount.toFixed(2)]}),at.jsx("td",{style:{padding:"12px 10px",textAlign:"right"},children:at.jsx("button",{onClick:()=>t(n.id),style:{background:"none",border:"none",cursor:"pointer",color:"#ef4444",padding:"5px"},title:"Delete",children:at.jsx(nO,{size:16})})})]},n.id))})]})})]})};function Uc(i){return i+.5|0}const dr=(i,t,e)=>Math.max(Math.min(i,e),t);function $u(i){return dr(Uc(i*2.55),0,255)}function Sr(i){return dr(Uc(i*255),0,255)}function Es(i){return dr(Uc(i/2.55)/100,0,1)}function FE(i){return dr(Uc(i*100),0,100)}const ii={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hy=[..."0123456789ABCDEF"],rO=i=>hy[i&15],aO=i=>hy[(i&240)>>4]+hy[i&15],Af=i=>(i&240)>>4===(i&15),oO=i=>Af(i.r)&&Af(i.g)&&Af(i.b)&&Af(i.a);function lO(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&ii[i[1]]*17,g:255&ii[i[2]]*17,b:255&ii[i[3]]*17,a:t===5?ii[i[4]]*17:255}:(t===7||t===9)&&(e={r:ii[i[1]]<<4|ii[i[2]],g:ii[i[3]]<<4|ii[i[4]],b:ii[i[5]]<<4|ii[i[6]],a:t===9?ii[i[7]]<<4|ii[i[8]]:255})),e}const uO=(i,t)=>i<255?t(i):"";function cO(i){var t=oO(i)?rO:aO;return i?"#"+t(i.r)+t(i.g)+t(i.b)+uO(i.a,t):void 0}const hO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Hx(i,t,e){const n=t*Math.min(e,1-e),r=(o,u=(o+i/30)%12)=>e-n*Math.max(Math.min(u-3,9-u,1),-1);return[r(0),r(8),r(4)]}function fO(i,t,e){const n=(r,o=(r+i/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function dO(i,t,e){const n=Hx(i,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)n[r]*=1-t-e,n[r]+=t;return n}function gO(i,t,e,n,r){return i===r?(t-e)/n+(t<e?6:0):t===r?(e-i)/n+2:(i-t)/n+4}function d_(i){const e=i.r/255,n=i.g/255,r=i.b/255,o=Math.max(e,n,r),u=Math.min(e,n,r),h=(o+u)/2;let f,g,y;return o!==u&&(y=o-u,g=h>.5?y/(2-o-u):y/(o+u),f=gO(e,n,r,y,o),f=f*60+.5),[f|0,g||0,h]}function g_(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(Sr)}function m_(i,t,e){return g_(Hx,i,t,e)}function mO(i,t,e){return g_(dO,i,t,e)}function pO(i,t,e){return g_(fO,i,t,e)}function qx(i){return(i%360+360)%360}function yO(i){const t=hO.exec(i);let e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?$u(+t[5]):Sr(+t[5]));const r=qx(+t[2]),o=+t[3]/100,u=+t[4]/100;return t[1]==="hwb"?n=mO(r,o,u):t[1]==="hsv"?n=pO(r,o,u):n=m_(r,o,u),{r:n[0],g:n[1],b:n[2],a:e}}function _O(i,t){var e=d_(i);e[0]=qx(e[0]+t),e=m_(e),i.r=e[0],i.g=e[1],i.b=e[2]}function bO(i){if(!i)return;const t=d_(i),e=t[0],n=FE(t[1]),r=FE(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${r}%, ${Es(i.a)})`:`hsl(${e}, ${n}%, ${r}%)`}const HE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},qE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function vO(){const i={},t=Object.keys(qE),e=Object.keys(HE);let n,r,o,u,h;for(n=0;n<t.length;n++){for(u=h=t[n],r=0;r<e.length;r++)o=e[r],h=h.replace(o,HE[o]);o=parseInt(qE[u],16),i[h]=[o>>16&255,o>>8&255,o&255]}return i}let xf;function TO(i){xf||(xf=vO(),xf.transparent=[0,0,0,0]);const t=xf[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const EO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function SO(i){const t=EO.exec(i);let e=255,n,r,o;if(t){if(t[7]!==n){const u=+t[7];e=t[8]?$u(u):dr(u*255,0,255)}return n=+t[1],r=+t[3],o=+t[5],n=255&(t[2]?$u(n):dr(n,0,255)),r=255&(t[4]?$u(r):dr(r,0,255)),o=255&(t[6]?$u(o):dr(o,0,255)),{r:n,g:r,b:o,a:e}}}function AO(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Es(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const bp=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,Ho=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function xO(i,t,e){const n=Ho(Es(i.r)),r=Ho(Es(i.g)),o=Ho(Es(i.b));return{r:Sr(bp(n+e*(Ho(Es(t.r))-n))),g:Sr(bp(r+e*(Ho(Es(t.g))-r))),b:Sr(bp(o+e*(Ho(Es(t.b))-o))),a:i.a+e*(t.a-i.a)}}function wf(i,t,e){if(i){let n=d_(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=m_(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function Gx(i,t){return i&&Object.assign(t||{},i)}function GE(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=Sr(i[3]))):(t=Gx(i,{r:0,g:0,b:0,a:1}),t.a=Sr(t.a)),t}function wO(i){return i.charAt(0)==="r"?SO(i):yO(i)}class Ic{constructor(t){if(t instanceof Ic)return t;const e=typeof t;let n;e==="object"?n=GE(t):e==="string"&&(n=lO(t)||TO(t)||wO(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Gx(this._rgb);return t&&(t.a=Es(t.a)),t}set rgb(t){this._rgb=GE(t)}rgbString(){return this._valid?AO(this._rgb):void 0}hexString(){return this._valid?cO(this._rgb):void 0}hslString(){return this._valid?bO(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let o;const u=e===o?.5:e,h=2*u-1,f=n.a-r.a,g=((h*f===-1?h:(h+f)/(1+h*f))+1)/2;o=1-g,n.r=255&g*n.r+o*r.r+.5,n.g=255&g*n.g+o*r.g+.5,n.b=255&g*n.b+o*r.b+.5,n.a=u*n.a+(1-u)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=xO(this._rgb,t._rgb,e)),this}clone(){return new Ic(this.rgb)}alpha(t){return this._rgb.a=Sr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Uc(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return wf(this._rgb,2,t),this}darken(t){return wf(this._rgb,2,-t),this}saturate(t){return wf(this._rgb,1,t),this}desaturate(t){return wf(this._rgb,1,-t),this}rotate(t){return _O(this._rgb,t),this}}function bs(){}const RO=(()=>{let i=0;return()=>i++})();function ue(i){return i==null}function Je(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Gt(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function ai(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Hi(i,t){return ai(i)?i:t}function qt(i,t){return typeof i>"u"?t:i}const IO=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,Kx=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function de(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function ee(i,t,e,n){let r,o,u;if(Je(i))for(o=i.length,r=0;r<o;r++)t.call(e,i[r],r);else if(Gt(i))for(u=Object.keys(i),o=u.length,r=0;r<o;r++)t.call(e,i[u[r]],u[r])}function Td(i,t){let e,n,r,o;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(r=i[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function Ed(i){if(Je(i))return i.map(Ed);if(Gt(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let r=0;for(;r<n;++r)t[e[r]]=Ed(i[e[r]]);return t}return i}function Yx(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function CO(i,t,e,n){if(!Yx(i))return;const r=t[i],o=e[i];Gt(r)&&Gt(o)?Cc(r,o,n):t[i]=Ed(o)}function Cc(i,t,e){const n=Je(t)?t:[t],r=n.length;if(!Gt(i))return i;e=e||{};const o=e.merger||CO;let u;for(let h=0;h<r;++h){if(u=n[h],!Gt(u))continue;const f=Object.keys(u);for(let g=0,y=f.length;g<y;++g)o(f[g],i,u,e)}return i}function cc(i,t){return Cc(i,t,{merger:DO})}function DO(i,t,e){if(!Yx(i))return;const n=t[i],r=e[i];Gt(n)&&Gt(r)?cc(n,r):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=Ed(r))}const KE={"":i=>i,x:i=>i.x,y:i=>i.y};function MO(i){const t=i.split("."),e=[];let n="";for(const r of t)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function VO(i){const t=MO(i);return e=>{for(const n of t){if(n==="")break;e=e&&e[n]}return e}}function Ua(i,t){return(KE[t]||(KE[t]=VO(t)))(i)}function p_(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Dc=i=>typeof i<"u",Cr=i=>typeof i=="function",YE=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0};function OO(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const ge=Math.PI,je=2*ge,Sd=Number.POSITIVE_INFINITY,NO=ge/180,Ke=ge/2,fa=ge/4,QE=ge*2/3,Qx=Math.log10,Ar=Math.sign;function Qf(i,t,e){return Math.abs(i-t)<e}function XE(i){const t=Math.round(i);i=Qf(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(Qx(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function PO(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n===0&&(t.push(n),t.push(i/n));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function kO(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function Ad(i){return!kO(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function zO(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}function LO(i,t,e){let n,r,o;for(n=0,r=i.length;n<r;n++)o=i[n][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function As(i){return i*(ge/180)}function BO(i){return i*(180/ge)}function WE(i){if(!ai(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function Xx(i,t){const e=t.x-i.x,n=t.y-i.y,r=Math.sqrt(e*e+n*n);let o=Math.atan2(n,e);return o<-.5*ge&&(o+=je),{angle:o,distance:r}}function UO(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Yi(i){return(i%je+je)%je}function xd(i,t,e,n){const r=Yi(i),o=Yi(t),u=Yi(e),h=Yi(o-r),f=Yi(u-r),g=Yi(r-o),y=Yi(r-u);return r===o||r===u||n&&o===u||h>f&&g<y}function In(i,t,e){return Math.max(t,Math.min(e,i))}function jO(i){return In(i,-32768,32767)}function Aa(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function y_(i,t,e){e=e||(u=>i[u]<t);let n=i.length-1,r=0,o;for(;n-r>1;)o=r+n>>1,e(o)?r=o:n=o;return{lo:r,hi:n}}const fy=(i,t,e,n)=>y_(i,e,n?r=>{const o=i[r][t];return o<e||o===e&&i[r+1][t]===e}:r=>i[r][t]<e),FO=(i,t,e)=>y_(i,e,n=>i[n][t]>=e);function HO(i,t,e){let n=0,r=i.length;for(;n<r&&i[n]<t;)n++;for(;r>n&&i[r-1]>e;)r--;return n>0||r<i.length?i.slice(n,r):i}const Wx=["push","pop","shift","splice","unshift"];function qO(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Wx.forEach(e=>{const n="_onData"+p_(e),r=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...o){const u=r.apply(this,o);return i._chartjs.listeners.forEach(h=>{typeof h[n]=="function"&&h[n](...o)}),u}})})}function $E(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,r=n.indexOf(t);r!==-1&&n.splice(r,1),!(n.length>0)&&(Wx.forEach(o=>{delete i[o]}),delete i._chartjs)}function $x(i){const t=new Set(i);return t.size===i.length?i:Array.from(t)}const Zx=(function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame})();function Jx(i,t){let e=[],n=!1;return function(...r){e=r,n||(n=!0,Zx.call(window,()=>{n=!1,i.apply(t,e)}))}}function GO(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}const tw=i=>i==="start"?"left":i==="end"?"right":"center",Bn=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,KO=(i,t,e,n)=>i===(n?"left":"right")?e:i==="center"?(t+e)/2:t,Rf=i=>i===0||i===1,ZE=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*je/e)),JE=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*je/e)+1,hc={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*Ke)+1,easeOutSine:i=>Math.sin(i*Ke),easeInOutSine:i=>-.5*(Math.cos(ge*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>Rf(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Rf(i)?i:ZE(i,.075,.3),easeOutElastic:i=>Rf(i)?i:JE(i,.075,.3),easeInOutElastic(i){return Rf(i)?i:i<.5?.5*ZE(i*2,.1125,.45):.5+.5*JE(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-hc.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?hc.easeInBounce(i*2)*.5:hc.easeOutBounce(i*2-1)*.5+.5};function ew(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function tS(i){return ew(i)?i:new Ic(i)}function vp(i){return ew(i)?i:new Ic(i).saturate(.5).darken(.1).hexString()}const YO=["x","y","borderWidth","radius","tension"],QO=["color","borderColor","backgroundColor"];function XO(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:QO},numbers:{type:"number",properties:YO}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function WO(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const eS=new Map;function $O(i,t){t=t||{};const e=i+JSON.stringify(t);let n=eS.get(e);return n||(n=new Intl.NumberFormat(i,t),eS.set(e,n)),n}function __(i,t,e){return $O(t,e).format(i)}const ZO={values(i){return Je(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";const n=this.chart.options.locale;let r,o=i;if(e.length>1){const g=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(g<1e-4||g>1e15)&&(r="scientific"),o=JO(i,e)}const u=Qx(Math.abs(o)),h=isNaN(u)?1:Math.max(Math.min(-1*Math.floor(u),20),0),f={notation:r,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(f,this.options.ticks.format),__(i,n,f)}};function JO(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var nw={formatters:ZO};function tN(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:nw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ja=Object.create(null),dy=Object.create(null);function fc(i,t){if(!t)return i;const e=t.split(".");for(let n=0,r=e.length;n<r;++n){const o=e[n];i=i[o]||(i[o]=Object.create(null))}return i}function Tp(i,t,e){return typeof t=="string"?Cc(fc(i,t),e):Cc(fc(i,""),t)}class eN{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>vp(r.backgroundColor),this.hoverBorderColor=(n,r)=>vp(r.borderColor),this.hoverColor=(n,r)=>vp(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Tp(this,t,e)}get(t){return fc(this,t)}describe(t,e){return Tp(dy,t,e)}override(t,e){return Tp(ja,t,e)}route(t,e,n,r){const o=fc(this,t),u=fc(this,n),h="_"+e;Object.defineProperties(o,{[h]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const f=this[h],g=u[r];return Gt(f)?Object.assign({},g,f):qt(f,g)},set(f){this[h]=f}}})}apply(t){t.forEach(e=>e(this))}}var Ie=new eN({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[XO,WO,tN]);function nN(i){return!i||ue(i.size)||ue(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function nS(i,t,e,n,r){let o=t[r];return o||(o=t[r]=i.measureText(r).width,e.push(r)),o>n&&(n=o),n}function da(i,t,e){const n=i.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*n)/n+r}function iS(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function sS(i,t,e,n){iw(i,t,e,n,null)}function iw(i,t,e,n,r){let o,u,h,f,g,y,_,T;const S=t.pointStyle,C=t.rotation,D=t.radius;let M=(C||0)*NO;if(S&&typeof S=="object"&&(o=S.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){i.save(),i.translate(e,n),i.rotate(M),i.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),i.restore();return}if(!(isNaN(D)||D<=0)){switch(i.beginPath(),S){default:r?i.ellipse(e,n,r/2,D,0,0,je):i.arc(e,n,D,0,je),i.closePath();break;case"triangle":y=r?r/2:D,i.moveTo(e+Math.sin(M)*y,n-Math.cos(M)*D),M+=QE,i.lineTo(e+Math.sin(M)*y,n-Math.cos(M)*D),M+=QE,i.lineTo(e+Math.sin(M)*y,n-Math.cos(M)*D),i.closePath();break;case"rectRounded":g=D*.516,f=D-g,u=Math.cos(M+fa)*f,_=Math.cos(M+fa)*(r?r/2-g:f),h=Math.sin(M+fa)*f,T=Math.sin(M+fa)*(r?r/2-g:f),i.arc(e-_,n-h,g,M-ge,M-Ke),i.arc(e+T,n-u,g,M-Ke,M),i.arc(e+_,n+h,g,M,M+Ke),i.arc(e-T,n+u,g,M+Ke,M+ge),i.closePath();break;case"rect":if(!C){f=Math.SQRT1_2*D,y=r?r/2:f,i.rect(e-y,n-f,2*y,2*f);break}M+=fa;case"rectRot":_=Math.cos(M)*(r?r/2:D),u=Math.cos(M)*D,h=Math.sin(M)*D,T=Math.sin(M)*(r?r/2:D),i.moveTo(e-_,n-h),i.lineTo(e+T,n-u),i.lineTo(e+_,n+h),i.lineTo(e-T,n+u),i.closePath();break;case"crossRot":M+=fa;case"cross":_=Math.cos(M)*(r?r/2:D),u=Math.cos(M)*D,h=Math.sin(M)*D,T=Math.sin(M)*(r?r/2:D),i.moveTo(e-_,n-h),i.lineTo(e+_,n+h),i.moveTo(e+T,n-u),i.lineTo(e-T,n+u);break;case"star":_=Math.cos(M)*(r?r/2:D),u=Math.cos(M)*D,h=Math.sin(M)*D,T=Math.sin(M)*(r?r/2:D),i.moveTo(e-_,n-h),i.lineTo(e+_,n+h),i.moveTo(e+T,n-u),i.lineTo(e-T,n+u),M+=fa,_=Math.cos(M)*(r?r/2:D),u=Math.cos(M)*D,h=Math.sin(M)*D,T=Math.sin(M)*(r?r/2:D),i.moveTo(e-_,n-h),i.lineTo(e+_,n+h),i.moveTo(e+T,n-u),i.lineTo(e-T,n+u);break;case"line":u=r?r/2:Math.cos(M)*D,h=Math.sin(M)*D,i.moveTo(e-u,n-h),i.lineTo(e+u,n+h);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(M)*(r?r/2:D),n+Math.sin(M)*D);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function sw(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function b_(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function v_(i){i.restore()}function iN(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),ue(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function sN(i,t,e,n,r){if(r.strikethrough||r.underline){const o=i.measureText(n),u=t-o.actualBoundingBoxLeft,h=t+o.actualBoundingBoxRight,f=e-o.actualBoundingBoxAscent,g=e+o.actualBoundingBoxDescent,y=r.strikethrough?(f+g)/2:g;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(u,y),i.lineTo(h,y),i.stroke()}}function rN(i,t){const e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function wd(i,t,e,n,r,o={}){const u=Je(t)?t:[t],h=o.strokeWidth>0&&o.strokeColor!=="";let f,g;for(i.save(),i.font=r.string,iN(i,o),f=0;f<u.length;++f)g=u[f],o.backdrop&&rN(i,o.backdrop),h&&(o.strokeColor&&(i.strokeStyle=o.strokeColor),ue(o.strokeWidth)||(i.lineWidth=o.strokeWidth),i.strokeText(g,e,n,o.maxWidth)),i.fillText(g,e,n,o.maxWidth),sN(i,e,n,g,o),n+=Number(r.lineHeight);i.restore()}function Rd(i,t){const{x:e,y:n,w:r,h:o,radius:u}=t;i.arc(e+u.topLeft,n+u.topLeft,u.topLeft,1.5*ge,ge,!0),i.lineTo(e,n+o-u.bottomLeft),i.arc(e+u.bottomLeft,n+o-u.bottomLeft,u.bottomLeft,ge,Ke,!0),i.lineTo(e+r-u.bottomRight,n+o),i.arc(e+r-u.bottomRight,n+o-u.bottomRight,u.bottomRight,Ke,0,!0),i.lineTo(e+r,n+u.topRight),i.arc(e+r-u.topRight,n+u.topRight,u.topRight,0,-Ke,!0),i.lineTo(e+u.topLeft,n)}const aN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,oN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function lN(i,t){const e=(""+i).match(aN);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}const uN=i=>+i||0;function T_(i,t){const e={},n=Gt(t),r=n?Object.keys(t):t,o=Gt(i)?n?u=>qt(i[u],i[t[u]]):u=>i[u]:()=>i;for(const u of r)e[u]=uN(o(u));return e}function rw(i){return T_(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Jo(i){return T_(i,["topLeft","topRight","bottomLeft","bottomRight"])}function vi(i){const t=rw(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Cn(i,t){i=i||{},t=t||Ie.font;let e=qt(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=qt(i.style,t.style);n&&!(""+n).match(oN)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:qt(i.family,t.family),lineHeight:lN(qt(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:qt(i.weight,t.weight),string:""};return r.string=nN(r),r}function If(i,t,e,n){let r,o,u;for(r=0,o=i.length;r<o;++r)if(u=i[r],u!==void 0&&u!==void 0)return u}function cN(i,t,e){const{min:n,max:r}=i,o=Kx(t,(r-n)/2),u=(h,f)=>e&&h===0?0:h+f;return{min:u(n,-Math.abs(o)),max:u(r,o)}}function Rl(i,t){return Object.assign(Object.create(i),t)}function E_(i,t=[""],e,n,r=()=>i[0]){const o=e||i;typeof n>"u"&&(n=uw("_fallback",i));const u={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:o,_fallback:n,_getTarget:r,override:h=>E_([h,...i],t,o,n)};return new Proxy(u,{deleteProperty(h,f){return delete h[f],delete h._keys,delete i[0][f],!0},get(h,f){return ow(h,f,()=>_N(f,t,i,h))},getOwnPropertyDescriptor(h,f){return Reflect.getOwnPropertyDescriptor(h._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(h,f){return aS(h).includes(f)},ownKeys(h){return aS(h)},set(h,f,g){const y=h._storage||(h._storage=r());return h[f]=y[f]=g,delete h._keys,!0}})}function bl(i,t,e,n){const r={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:aw(i,n),setContext:o=>bl(i,o,e,n),override:o=>bl(i.override(o),t,e,n)};return new Proxy(r,{deleteProperty(o,u){return delete o[u],delete i[u],!0},get(o,u,h){return ow(o,u,()=>fN(o,u,h))},getOwnPropertyDescriptor(o,u){return o._descriptors.allKeys?Reflect.has(i,u)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,u)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(o,u){return Reflect.has(i,u)},ownKeys(){return Reflect.ownKeys(i)},set(o,u,h){return i[u]=h,delete o[u],!0}})}function aw(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=i;return{allKeys:r,scriptable:e,indexable:n,isScriptable:Cr(e)?e:()=>e,isIndexable:Cr(n)?n:()=>n}}const hN=(i,t)=>i?i+p_(t):t,S_=(i,t)=>Gt(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ow(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];const n=e();return i[t]=n,n}function fN(i,t,e){const{_proxy:n,_context:r,_subProxy:o,_descriptors:u}=i;let h=n[t];return Cr(h)&&u.isScriptable(t)&&(h=dN(t,h,i,e)),Je(h)&&h.length&&(h=gN(t,h,i,u.isIndexable)),S_(t,h)&&(h=bl(h,r,o&&o[t],u)),h}function dN(i,t,e,n){const{_proxy:r,_context:o,_subProxy:u,_stack:h}=e;if(h.has(i))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+i);h.add(i);let f=t(o,u||n);return h.delete(i),S_(i,f)&&(f=A_(r._scopes,r,i,f)),f}function gN(i,t,e,n){const{_proxy:r,_context:o,_subProxy:u,_descriptors:h}=e;if(typeof o.index<"u"&&n(i))return t[o.index%t.length];if(Gt(t[0])){const f=t,g=r._scopes.filter(y=>y!==f);t=[];for(const y of f){const _=A_(g,r,i,y);t.push(bl(_,o,u&&u[i],h))}}return t}function lw(i,t,e){return Cr(i)?i(t,e):i}const mN=(i,t)=>i===!0?t:typeof i=="string"?Ua(t,i):void 0;function pN(i,t,e,n,r){for(const o of t){const u=mN(e,o);if(u){i.add(u);const h=lw(u._fallback,e,r);if(typeof h<"u"&&h!==e&&h!==n)return h}else if(u===!1&&typeof n<"u"&&e!==n)return null}return!1}function A_(i,t,e,n){const r=t._rootScopes,o=lw(t._fallback,e,n),u=[...i,...r],h=new Set;h.add(n);let f=rS(h,u,e,o||e,n);return f===null||typeof o<"u"&&o!==e&&(f=rS(h,u,o,f,n),f===null)?!1:E_(Array.from(h),[""],r,o,()=>yN(t,e,n))}function rS(i,t,e,n,r){for(;e;)e=pN(i,t,e,n,r);return e}function yN(i,t,e){const n=i._getTarget();t in n||(n[t]={});const r=n[t];return Je(r)&&Gt(e)?e:r||{}}function _N(i,t,e,n){let r;for(const o of t)if(r=uw(hN(o,i),e),typeof r<"u")return S_(i,r)?A_(e,n,i,r):r}function uw(i,t){for(const e of t){if(!e)continue;const n=e[i];if(typeof n<"u")return n}}function aS(i){let t=i._keys;return t||(t=i._keys=bN(i._scopes)),t}function bN(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(n);return Array.from(t)}function x_(){return typeof window<"u"&&typeof document<"u"}function w_(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Id(i,t,e){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=i,n}const Zd=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function vN(i,t){return Zd(i).getPropertyValue(t)}const TN=["top","right","bottom","left"];function Da(i,t,e){const n={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=TN[r];n[o]=parseFloat(i[t+"-"+o+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const EN=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function SN(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:r,offsetY:o}=n;let u=!1,h,f;if(EN(r,o,i.target))h=r,f=o;else{const g=t.getBoundingClientRect();h=n.clientX-g.left,f=n.clientY-g.top,u=!0}return{x:h,y:f,box:u}}function _a(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,r=Zd(e),o=r.boxSizing==="border-box",u=Da(r,"padding"),h=Da(r,"border","width"),{x:f,y:g,box:y}=SN(i,e),_=u.left+(y&&h.left),T=u.top+(y&&h.top);let{width:S,height:C}=t;return o&&(S-=u.width+h.width,C-=u.height+h.height),{x:Math.round((f-_)/S*e.width/n),y:Math.round((g-T)/C*e.height/n)}}function AN(i,t,e){let n,r;if(t===void 0||e===void 0){const o=i&&w_(i);if(!o)t=i.clientWidth,e=i.clientHeight;else{const u=o.getBoundingClientRect(),h=Zd(o),f=Da(h,"border","width"),g=Da(h,"padding");t=u.width-g.width-f.width,e=u.height-g.height-f.height,n=Id(h.maxWidth,o,"clientWidth"),r=Id(h.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:n||Sd,maxHeight:r||Sd}}const gr=i=>Math.round(i*10)/10;function xN(i,t,e,n){const r=Zd(i),o=Da(r,"margin"),u=Id(r.maxWidth,i,"clientWidth")||Sd,h=Id(r.maxHeight,i,"clientHeight")||Sd,f=AN(i,t,e);let{width:g,height:y}=f;if(r.boxSizing==="content-box"){const T=Da(r,"border","width"),S=Da(r,"padding");g-=S.width+T.width,y-=S.height+T.height}return g=Math.max(0,g-o.width),y=Math.max(0,n?g/n:y-o.height),g=gr(Math.min(g,u,f.maxWidth)),y=gr(Math.min(y,h,f.maxHeight)),g&&!y&&(y=gr(g/2)),(t!==void 0||e!==void 0)&&n&&f.height&&y>f.height&&(y=f.height,g=gr(Math.floor(y*n))),{width:g,height:y}}function oS(i,t,e){const n=t||1,r=gr(i.height*n),o=gr(i.width*n);i.height=gr(i.height),i.width=gr(i.width);const u=i.canvas;return u.style&&(e||!u.style.height&&!u.style.width)&&(u.style.height=`${i.height}px`,u.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||u.height!==r||u.width!==o?(i.currentDevicePixelRatio=n,u.height=r,u.width=o,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}const wN=(function(){let i=!1;try{const t={get passive(){return i=!0,!1}};x_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i})();function lS(i,t){const e=vN(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}const RN=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},IN=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function tl(i,t,e){return i?RN(t,e):IN()}function cw(i,t){let e,n;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function hw(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function Cf(i,t,e){return i.options.clip?i[e]:t[e]}function CN(i,t){const{xScale:e,yScale:n}=i;return e&&n?{left:Cf(e,t,"left"),right:Cf(e,t,"right"),top:Cf(n,t,"top"),bottom:Cf(n,t,"bottom")}:t}function DN(i,t){const e=t._clip;if(e.disabled)return!1;const n=CN(t,i.chartArea);return{left:e.left===!1?0:n.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:n.right+(e.right===!0?0:e.right),top:e.top===!1?0:n.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:n.bottom+(e.bottom===!0?0:e.bottom)}}class MN{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const o=e.listeners[r],u=e.duration;o.forEach(h=>h({chart:t,initial:e.initial,numSteps:u,currentStep:Math.min(n-e.start,u)}))}_refresh(){this._request||(this._running=!0,this._request=Zx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const o=n.items;let u=o.length-1,h=!1,f;for(;u>=0;--u)f=o[u],f._active?(f._total>n.duration&&(n.duration=f._total),f.tick(t),h=!0):(o[u]=o[o.length-1],o.pop());h&&(r.draw(),this._notify(r,n,t,"progress")),o.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var vs=new MN;const uS="transparent",VN={boolean(i,t,e){return e>.5?t:i},color(i,t,e){const n=tS(i||uS),r=n.valid&&tS(t||uS);return r&&r.valid?r.mix(n,e).hexString():t},number(i,t,e){return i+(t-i)*e}};class ON{constructor(t,e,n,r){const o=e[n];r=If([t.to,r,o,t.from]);const u=If([t.from,o,r]);this._active=!0,this._fn=t.fn||VN[t.type||typeof u],this._easing=hc[t.easing]||hc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=u,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],o=n-this._start,u=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(u,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=If([t.to,e,r,t.from]),this._from=If([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,o=this._from,u=this._loop,h=this._to;let f;if(this._active=o!==h&&(u||e<n),!this._active){this._target[r]=h,this._notify(!0);return}if(e<0){this._target[r]=o;return}f=e/n%2,f=u&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[r]=this._fn(o,h,f)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}}class fw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Gt(t))return;const e=Object.keys(Ie.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!Gt(o))return;const u={};for(const h of e)u[h]=o[h];(Je(o.properties)&&o.properties||[r]).forEach(h=>{(h===r||!n.has(h))&&n.set(h,u)})})}_animateOptions(t,e){const n=e.options,r=PN(t,n);if(!r)return[];const o=this._createAnimations(r,n);return n.$shared&&NN(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,e){const n=this._properties,r=[],o=t.$animations||(t.$animations={}),u=Object.keys(e),h=Date.now();let f;for(f=u.length-1;f>=0;--f){const g=u[f];if(g.charAt(0)==="$")continue;if(g==="options"){r.push(...this._animateOptions(t,e));continue}const y=e[g];let _=o[g];const T=n.get(g);if(_)if(T&&_.active()){_.update(T,y,h);continue}else _.cancel();if(!T||!T.duration){t[g]=y;continue}o[g]=_=new ON(T,t,g,y),r.push(_)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const n=this._createAnimations(t,e);if(n.length)return vs.add(this._chart,n),!0}}function NN(i,t){const e=[],n=Object.keys(t);for(let r=0;r<n.length;r++){const o=i[n[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function PN(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function cS(i,t){const e=i&&i.options||{},n=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:n?o:r,end:n?r:o}}function kN(i,t,e){if(e===!1)return!1;const n=cS(i,e),r=cS(t,e);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function zN(i){let t,e,n,r;return Gt(i)?(t=i.top,e=i.right,n=i.bottom,r=i.left):t=e=n=r=i,{top:t,right:e,bottom:n,left:r,disabled:i===!1}}function dw(i,t){const e=[],n=i._getSortedDatasetMetas(t);let r,o;for(r=0,o=n.length;r<o;++r)e.push(n[r].index);return e}function hS(i,t,e,n={}){const r=i.keys,o=n.mode==="single";let u,h,f,g;if(t===null)return;let y=!1;for(u=0,h=r.length;u<h;++u){if(f=+r[u],f===e){if(y=!0,n.all)continue;break}g=i.values[f],ai(g)&&(o||t===0||Ar(t)===Ar(g))&&(t+=g)}return!y&&!n.all?0:t}function LN(i,t){const{iScale:e,vScale:n}=t,r=e.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",u=Object.keys(i),h=new Array(u.length);let f,g,y;for(f=0,g=u.length;f<g;++f)y=u[f],h[f]={[r]:y,[o]:i[y]};return h}function Ep(i,t){const e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function BN(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function UN(i){const{min:t,max:e,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function jN(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function fS(i,t,e,n){for(const r of t.getMatchingVisibleMetas(n).reverse()){const o=i[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function dS(i,t){const{chart:e,_cachedMeta:n}=i,r=e._stacks||(e._stacks={}),{iScale:o,vScale:u,index:h}=n,f=o.axis,g=u.axis,y=BN(o,u,n),_=t.length;let T;for(let S=0;S<_;++S){const C=t[S],{[f]:D,[g]:M}=C,U=C._stacks||(C._stacks={});T=U[g]=jN(r,y,D),T[h]=M,T._top=fS(T,u,!0,n.type),T._bottom=fS(T,u,!1,n.type);const G=T._visualValues||(T._visualValues={});G[h]=M}}function Sp(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function FN(i,t){return Rl(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function HN(i,t,e){return Rl(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function ju(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const r of t){const o=r._stacks;if(!o||o[n]===void 0||o[n][e]===void 0)return;delete o[n][e],o[n]._visualValues!==void 0&&o[n]._visualValues[e]!==void 0&&delete o[n]._visualValues[e]}}}const Ap=i=>i==="reset"||i==="none",gS=(i,t)=>t?i:Object.assign({},i),qN=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:dw(e,!0),values:null};class R_{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ep(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ju(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),r=(_,T,S,C)=>_==="x"?T:_==="r"?C:S,o=e.xAxisID=qt(n.xAxisID,Sp(t,"x")),u=e.yAxisID=qt(n.yAxisID,Sp(t,"y")),h=e.rAxisID=qt(n.rAxisID,Sp(t,"r")),f=e.indexAxis,g=e.iAxisID=r(f,o,u,h),y=e.vAxisID=r(f,u,o,h);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(u),e.rScale=this.getScaleForId(h),e.iScale=this.getScaleForId(g),e.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&$E(this._data,this),t._stacked&&ju(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Gt(e)){const r=this._cachedMeta;this._data=LN(e,r)}else if(n!==e){if(n){$E(n,this);const r=this._cachedMeta;ju(r),r._parsed=[]}e&&Object.isExtensible(e)&&qO(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=Ep(e.vScale,e),e.stack!==n.stack&&(r=!0,ju(e),e.stack=n.stack),this._resyncElements(t),(r||o!==e._stacked)&&(dS(this,e._parsed),e._stacked=Ep(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:r}=this,{iScale:o,_stacked:u}=n,h=o.axis;let f=t===0&&e===r.length?!0:n._sorted,g=t>0&&n._parsed[t-1],y,_,T;if(this._parsing===!1)n._parsed=r,n._sorted=!0,T=r;else{Je(r[t])?T=this.parseArrayData(n,r,t,e):Gt(r[t])?T=this.parseObjectData(n,r,t,e):T=this.parsePrimitiveData(n,r,t,e);const S=()=>_[h]===null||g&&_[h]<g[h];for(y=0;y<e;++y)n._parsed[y+t]=_=T[y],f&&(S()&&(f=!1),g=_);n._sorted=f}u&&dS(this,T)}parsePrimitiveData(t,e,n,r){const{iScale:o,vScale:u}=t,h=o.axis,f=u.axis,g=o.getLabels(),y=o===u,_=new Array(r);let T,S,C;for(T=0,S=r;T<S;++T)C=T+n,_[T]={[h]:y||o.parse(g[C],C),[f]:u.parse(e[C],C)};return _}parseArrayData(t,e,n,r){const{xScale:o,yScale:u}=t,h=new Array(r);let f,g,y,_;for(f=0,g=r;f<g;++f)y=f+n,_=e[y],h[f]={x:o.parse(_[0],y),y:u.parse(_[1],y)};return h}parseObjectData(t,e,n,r){const{xScale:o,yScale:u}=t,{xAxisKey:h="x",yAxisKey:f="y"}=this._parsing,g=new Array(r);let y,_,T,S;for(y=0,_=r;y<_;++y)T=y+n,S=e[T],g[y]={x:o.parse(Ua(S,h),T),y:u.parse(Ua(S,f),T)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const r=this.chart,o=this._cachedMeta,u=e[t.axis],h={keys:dw(r,!0),values:e._stacks[t.axis]._visualValues};return hS(h,u,o.index,{mode:n})}updateRangeFromParsed(t,e,n,r){const o=n[e.axis];let u=o===null?NaN:o;const h=r&&n._stacks[e.axis];r&&h&&(r.values=h,u=hS(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,u),t.max=Math.max(t.max,u)}getMinMax(t,e){const n=this._cachedMeta,r=n._parsed,o=n._sorted&&t===n.iScale,u=r.length,h=this._getOtherScale(t),f=qN(e,n,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:_}=UN(h);let T,S;function C(){S=r[T];const D=S[h.axis];return!ai(S[t.axis])||y>D||_<D}for(T=0;T<u&&!(!C()&&(this.updateRangeFromParsed(g,t,S,f),o));++T);if(o){for(T=u-1;T>=0;--T)if(!C()){this.updateRangeFromParsed(g,t,S,f);break}}return g}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let r,o,u;for(r=0,o=e.length;r<o;++r)u=e[r][t.axis],ai(u)&&n.push(u);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=zN(qt(this.options.clip,kN(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,r=n.data||[],o=e.chartArea,u=[],h=this._drawStart||0,f=this._drawCount||r.length-h,g=this.options.drawActiveElementsOnTop;let y;for(n.dataset&&n.dataset.draw(t,o,h,f),y=h;y<h+f;++y){const _=r[y];_.hidden||(_.active&&g?u.push(_):_.draw(t,o))}for(y=0;y<u.length;++y)u[y].draw(t,o)}getStyle(t,e){const n=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const u=this._cachedMeta.data[t];o=u.$context||(u.$context=HN(this.getContext(),t,u)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=FN(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const r=e==="active",o=this._cachedDataOpts,u=t+"-"+e,h=o[u],f=this.enableOptionSharing&&Dc(n);if(h)return gS(h,f);const g=this.chart.config,y=g.datasetElementScopeKeys(this._type,t),_=r?[`${t}Hover`,"hover",t,""]:[t,""],T=g.getOptionScopes(this.getDataset(),y),S=Object.keys(Ie.elements[t]),C=()=>this.getContext(n,r,e),D=g.resolveNamedOptions(T,S,C,_);return D.$shared&&(D.$shared=f,o[u]=Object.freeze(gS(D,f))),D}_resolveAnimations(t,e,n){const r=this.chart,o=this._cachedDataOpts,u=`animation-${e}`,h=o[u];if(h)return h;let f;if(r.options.animation!==!1){const y=this.chart.config,_=y.datasetAnimationScopeKeys(this._type,e),T=y.getOptionScopes(this.getDataset(),_);f=y.createResolver(T,this.getContext(t,n,e))}const g=new fw(r,f&&f.animations);return f&&f._cacheable&&(o[u]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Ap(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(n),u=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,n),{sharedOptions:o,includeOptions:u}}updateElement(t,e,n,r){Ap(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}updateSharedOptions(t,e,n){t&&!Ap(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[h,f,g]of this._syncList)this[h](f,g);this._syncList=[];const r=n.length,o=e.length,u=Math.min(o,r);u&&this.parse(0,u),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,n=!0){const r=this._cachedMeta,o=r.data,u=t+e;let h;const f=g=>{for(g.length+=e,h=g.length-1;h>=u;h--)g[h]=g[h-e]};for(f(o),h=t;h<u;++h)o[h]=new this.dataElementType;this._parsing&&f(r._parsed),this.parse(t,e),n&&this.updateElements(o,t,e,"reset")}updateElements(t,e,n,r){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,e);n._stacked&&ju(n,r)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,r]=t;this[e](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function GN(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let n=[];for(let r=0,o=e.length;r<o;r++)n=n.concat(e[r].controller.getAllParsedValues(i));i._cache.$bar=$x(n.sort((r,o)=>r-o))}return i._cache.$bar}function KN(i){const t=i.iScale,e=GN(t,i.type);let n=t._length,r,o,u,h;const f=()=>{u===32767||u===-32768||(Dc(h)&&(n=Math.min(n,Math.abs(u-h)||n)),h=u)};for(r=0,o=e.length;r<o;++r)u=t.getPixelForValue(e[r]),f();for(h=void 0,r=0,o=t.ticks.length;r<o;++r)u=t.getPixelForTick(r),f();return n}function YN(i,t,e,n){const r=e.barThickness;let o,u;return ue(r)?(o=t.min*e.categoryPercentage,u=e.barPercentage):(o=r*n,u=1),{chunk:o/n,ratio:u,start:t.pixels[i]-o/2}}function QN(i,t,e,n){const r=t.pixels,o=r[i];let u=i>0?r[i-1]:null,h=i<r.length-1?r[i+1]:null;const f=e.categoryPercentage;u===null&&(u=o-(h===null?t.end-t.start:h-o)),h===null&&(h=o+o-u);const g=o-(o-Math.min(u,h))/2*f;return{chunk:Math.abs(h-u)/2*f/n,ratio:e.barPercentage,start:g}}function XN(i,t,e,n){const r=e.parse(i[0],n),o=e.parse(i[1],n),u=Math.min(r,o),h=Math.max(r,o);let f=u,g=h;Math.abs(u)>Math.abs(h)&&(f=h,g=u),t[e.axis]=g,t._custom={barStart:f,barEnd:g,start:r,end:o,min:u,max:h}}function gw(i,t,e,n){return Je(i)?XN(i,t,e,n):t[e.axis]=e.parse(i,n),t}function mS(i,t,e,n){const r=i.iScale,o=i.vScale,u=r.getLabels(),h=r===o,f=[];let g,y,_,T;for(g=e,y=e+n;g<y;++g)T=t[g],_={},_[r.axis]=h||r.parse(u[g],g),f.push(gw(T,_,o,g));return f}function xp(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function WN(i,t,e){return i!==0?Ar(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function $N(i){let t,e,n,r,o;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(r="end",o="start"):(r="start",o="end"),{start:e,end:n,reverse:t,top:r,bottom:o}}function ZN(i,t,e,n){let r=t.borderSkipped;const o={};if(!r){i.borderSkipped=o;return}if(r===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:u,end:h,reverse:f,top:g,bottom:y}=$N(i);r==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?r=g:(e._bottom||0)===n?r=y:(o[pS(y,u,h,f)]=!0,r=g)),o[pS(r,u,h,f)]=!0,i.borderSkipped=o}function pS(i,t,e,n){return n?(i=JN(i,t,e),i=yS(i,e,t)):i=yS(i,t,e),i}function JN(i,t,e){return i===t?e:i===e?t:i}function yS(i,t,e){return i==="start"?t:i==="end"?e:i}function t4(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}class e4 extends R_{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,r){return mS(t,e,n,r)}parseArrayData(t,e,n,r){return mS(t,e,n,r)}parseObjectData(t,e,n,r){const{iScale:o,vScale:u}=t,{xAxisKey:h="x",yAxisKey:f="y"}=this._parsing,g=o.axis==="x"?h:f,y=u.axis==="x"?h:f,_=[];let T,S,C,D;for(T=n,S=n+r;T<S;++T)D=e[T],C={},C[o.axis]=o.parse(Ua(D,g),T),_.push(gw(Ua(D,y),C,u,T));return _}updateRangeFromParsed(t,e,n,r){super.updateRangeFromParsed(t,e,n,r);const o=n._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:r}=e,o=this.getParsed(t),u=o._custom,h=xp(u)?"["+u.start+", "+u.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,r){const o=r==="reset",{index:u,_cachedMeta:{vScale:h}}=this,f=h.getBasePixel(),g=h.isHorizontal(),y=this._getRuler(),{sharedOptions:_,includeOptions:T}=this._getSharedOptions(e,r);for(let S=e;S<e+n;S++){const C=this.getParsed(S),D=o||ue(C[h.axis])?{base:f,head:f}:this._calculateBarValuePixels(S),M=this._calculateBarIndexPixels(S,y),U=(C._stacks||{})[h.axis],G={horizontal:g,base:D.base,enableBorderRadius:!U||xp(C._custom)||u===U._top||u===U._bottom,x:g?D.head:M.center,y:g?M.center:D.head,height:g?M.size:Math.abs(D.size),width:g?Math.abs(D.size):M.size};T&&(G.options=_||this.resolveDataElementOptions(S,t[S].active?"active":r));const Q=G.options||t[S].options;ZN(G,Q,U,u),t4(G,Q,y.ratio),this.updateElement(t[S],S,G,r)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(y=>y.controller.options.grouped),o=n.options.stacked,u=[],h=this._cachedMeta.controller.getParsed(e),f=h&&h[n.axis],g=y=>{const _=y._parsed.find(S=>S[n.axis]===f),T=_&&_[y.vScale.axis];if(ue(T)||isNaN(T))return!0};for(const y of r)if(!(e!==void 0&&g(y))&&((o===!1||u.indexOf(y.stack)===-1||o===void 0&&y.stack===void 0)&&u.push(y.stack),y.index===t))break;return u.length||u.push(void 0),u}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[qt(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const r=this._getStacks(t,n),o=e!==void 0?r.indexOf(e):-1;return o===-1?r.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,r=[];let o,u;for(o=0,u=e.data.length;o<u;++o)r.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const h=t.barThickness;return{min:h||KN(e),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:h?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:r},options:{base:o,minBarLength:u}}=this,h=o||0,f=this.getParsed(t),g=f._custom,y=xp(g);let _=f[e.axis],T=0,S=n?this.applyStack(e,f,n):_,C,D;S!==_&&(T=S-_,S=_),y&&(_=g.barStart,S=g.barEnd-g.barStart,_!==0&&Ar(_)!==Ar(g.barEnd)&&(T=0),T+=_);const M=!ue(o)&&!y?o:T;let U=e.getPixelForValue(M);if(this.chart.getDataVisibility(t)?C=e.getPixelForValue(T+S):C=U,D=C-U,Math.abs(D)<u){D=WN(D,e,h)*u,_===h&&(U-=D/2);const G=e.getPixelForDecimal(0),Q=e.getPixelForDecimal(1),Z=Math.min(G,Q),$=Math.max(G,Q);U=Math.max(Math.min(U,$),Z),C=U+D,n&&!y&&(f._stacks[e.axis]._visualValues[r]=e.getValueForPixel(C)-e.getValueForPixel(U))}if(U===e.getPixelForValue(h)){const G=Ar(D)*e.getLineWidthForValue(h)/2;U+=G,D-=G}return{size:D,base:U,head:C,center:C+D/2}}_calculateBarIndexPixels(t,e){const n=e.scale,r=this.options,o=r.skipNull,u=qt(r.maxBarThickness,1/0);let h,f;const g=this._getAxisCount();if(e.grouped){const y=o?this._getStackCount(t):e.stackCount,_=r.barThickness==="flex"?QN(t,e,r,y*g):YN(t,e,r,y*g),T=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,S=this._getAxis().indexOf(qt(T,this.getFirstScaleIdForIndexAxis())),C=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+S;h=_.start+_.chunk*C+_.chunk/2,f=Math.min(u,_.chunk*_.ratio)}else h=n.getPixelForValue(this.getParsed(t)[n.axis],t),f=Math.min(u,e.min*e.ratio);return{base:h-f/2,head:h+f/2,center:h,size:f}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length;let o=0;for(;o<r;++o)this.getParsed(o)[e.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}function n4(i,t,e){let n=1,r=1,o=0,u=0;if(t<je){const h=i,f=h+t,g=Math.cos(h),y=Math.sin(h),_=Math.cos(f),T=Math.sin(f),S=(Q,Z,$)=>xd(Q,h,f,!0)?1:Math.max(Z,Z*e,$,$*e),C=(Q,Z,$)=>xd(Q,h,f,!0)?-1:Math.min(Z,Z*e,$,$*e),D=S(0,g,_),M=S(Ke,y,T),U=C(ge,g,_),G=C(ge+Ke,y,T);n=(D-U)/2,r=(M-G)/2,o=-(D+U)/2,u=-(M+G)/2}return{ratioX:n,ratioY:r,offsetX:o,offsetY:u}}class i4 extends R_{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:n,textAlign:r,color:o,useBorderRadius:u,borderRadius:h}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((f,g)=>{const _=t.getDatasetMeta(0).controller.getStyle(g);return{text:f,fillStyle:_.backgroundColor,fontColor:o,hidden:!t.getDataVisibility(g),lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:_.borderWidth,strokeStyle:_.borderColor,textAlign:r,pointStyle:n,borderRadius:u&&(h||_.borderRadius),index:g}}):[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let o=f=>+n[f];if(Gt(n[t])){const{key:f="value"}=this._parsing;o=g=>+Ua(n[g],f)}let u,h;for(u=t,h=t+e;u<h;++u)r._parsed[u]=o(u)}}_getRotation(){return As(this.options.rotation-90)}_getCircumference(){return As(this.options.circumference)}_getRotationExtents(){let t=je,e=-je;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,o=r._getRotation(),u=r._getCircumference();t=Math.min(t,o),e=Math.max(e,o+u)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,r=this._cachedMeta,o=r.data,u=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,h=Math.max((Math.min(n.width,n.height)-u)/2,0),f=Math.min(IO(this.options.cutout,h),1),g=this._getRingWeight(this.index),{circumference:y,rotation:_}=this._getRotationExtents(),{ratioX:T,ratioY:S,offsetX:C,offsetY:D}=n4(_,y,f),M=(n.width-u)/T,U=(n.height-u)/S,G=Math.max(Math.min(M,U)/2,0),Q=Kx(this.options.radius,G),Z=Math.max(Q*f,0),$=(Q-Z)/this._getVisibleDatasetWeightTotal();this.offsetX=C*Q,this.offsetY=D*Q,r.total=this.calculateTotal(),this.outerRadius=Q-$*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-$*g,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const n=this.options,r=this._cachedMeta,o=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*o/je)}updateElements(t,e,n,r){const o=r==="reset",u=this.chart,h=u.chartArea,g=u.options.animation,y=(h.left+h.right)/2,_=(h.top+h.bottom)/2,T=o&&g.animateScale,S=T?0:this.innerRadius,C=T?0:this.outerRadius,{sharedOptions:D,includeOptions:M}=this._getSharedOptions(e,r);let U=this._getRotation(),G;for(G=0;G<e;++G)U+=this._circumference(G,o);for(G=e;G<e+n;++G){const Q=this._circumference(G,o),Z=t[G],$={x:y+this.offsetX,y:_+this.offsetY,startAngle:U,endAngle:U+Q,circumference:Q,outerRadius:C,innerRadius:S};M&&($.options=D||this.resolveDataElementOptions(G,Z.active?"active":r)),U+=Q,this.updateElement(Z,G,$,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n=0,r;for(r=0;r<e.length;r++){const o=t._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?je*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],o=__(e._parsed[t],n.options.locale);return{label:r[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const n=this.chart;let r,o,u,h,f;if(!t){for(r=0,o=n.data.datasets.length;r<o;++r)if(n.isDatasetVisible(r)){u=n.getDatasetMeta(r),t=u.data,h=u.controller;break}}if(!t)return 0;for(r=0,o=t.length;r<o;++r)f=h.resolveDataElementOptions(r),f.borderAlign!=="inner"&&(e=Math.max(e,f.borderWidth||0,f.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,r=t.length;n<r;++n){const o=this.resolveDataElementOptions(n);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(qt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class s4 extends i4{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function ga(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class I_{static override(t){Object.assign(I_.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ga()}parse(){return ga()}format(){return ga()}add(){return ga()}diff(){return ga()}startOf(){return ga()}endOf(){return ga()}}var r4={_date:I_};function a4(i,t,e,n){const{controller:r,data:o,_sorted:u}=i,h=r._cachedMeta.iScale,f=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&u&&o.length){const g=h._reversePixels?FO:fy;if(n){if(r._sharedOptions){const y=o[0],_=typeof y.getRange=="function"&&y.getRange(t);if(_){const T=g(o,t,e-_),S=g(o,t,e+_);return{lo:T.lo,hi:S.hi}}}}else{const y=g(o,t,e);if(f){const{vScale:_}=r._cachedMeta,{_parsed:T}=i,S=T.slice(0,y.lo+1).reverse().findIndex(D=>!ue(D[_.axis]));y.lo-=Math.max(0,S);const C=T.slice(y.hi).findIndex(D=>!ue(D[_.axis]));y.hi+=Math.max(0,C)}return y}}return{lo:0,hi:o.length-1}}function Jd(i,t,e,n,r){const o=i.getSortedVisibleDatasetMetas(),u=e[t];for(let h=0,f=o.length;h<f;++h){const{index:g,data:y}=o[h],{lo:_,hi:T}=a4(o[h],t,u,r);for(let S=_;S<=T;++S){const C=y[S];C.skip||n(C,g,S)}}}function o4(i){const t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(n,r){const o=t?Math.abs(n.x-r.x):0,u=e?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(u,2))}}function wp(i,t,e,n,r){const o=[];return!r&&!i.isPointInArea(t)||Jd(i,e,t,function(h,f,g){!r&&!sw(h,i.chartArea,0)||h.inRange(t.x,t.y,n)&&o.push({element:h,datasetIndex:f,index:g})},!0),o}function l4(i,t,e,n){let r=[];function o(u,h,f){const{startAngle:g,endAngle:y}=u.getProps(["startAngle","endAngle"],n),{angle:_}=Xx(u,{x:t.x,y:t.y});xd(_,g,y)&&r.push({element:u,datasetIndex:h,index:f})}return Jd(i,e,t,o),r}function u4(i,t,e,n,r,o){let u=[];const h=o4(e);let f=Number.POSITIVE_INFINITY;function g(y,_,T){const S=y.inRange(t.x,t.y,r);if(n&&!S)return;const C=y.getCenterPoint(r);if(!(!!o||i.isPointInArea(C))&&!S)return;const M=h(t,C);M<f?(u=[{element:y,datasetIndex:_,index:T}],f=M):M===f&&u.push({element:y,datasetIndex:_,index:T})}return Jd(i,e,t,g),u}function Rp(i,t,e,n,r,o){return!o&&!i.isPointInArea(t)?[]:e==="r"&&!n?l4(i,t,e,r):u4(i,t,e,n,r,o)}function _S(i,t,e,n,r){const o=[],u=e==="x"?"inXRange":"inYRange";let h=!1;return Jd(i,e,t,(f,g,y)=>{f[u]&&f[u](t[e],r)&&(o.push({element:f,datasetIndex:g,index:y}),h=h||f.inRange(t.x,t.y,r))}),n&&!h?[]:o}var c4={modes:{index(i,t,e,n){const r=_a(t,i),o=e.axis||"x",u=e.includeInvisible||!1,h=e.intersect?wp(i,r,o,n,u):Rp(i,r,o,!1,n,u),f=[];return h.length?(i.getSortedVisibleDatasetMetas().forEach(g=>{const y=h[0].index,_=g.data[y];_&&!_.skip&&f.push({element:_,datasetIndex:g.index,index:y})}),f):[]},dataset(i,t,e,n){const r=_a(t,i),o=e.axis||"xy",u=e.includeInvisible||!1;let h=e.intersect?wp(i,r,o,n,u):Rp(i,r,o,!1,n,u);if(h.length>0){const f=h[0].datasetIndex,g=i.getDatasetMeta(f).data;h=[];for(let y=0;y<g.length;++y)h.push({element:g[y],datasetIndex:f,index:y})}return h},point(i,t,e,n){const r=_a(t,i),o=e.axis||"xy",u=e.includeInvisible||!1;return wp(i,r,o,n,u)},nearest(i,t,e,n){const r=_a(t,i),o=e.axis||"xy",u=e.includeInvisible||!1;return Rp(i,r,o,e.intersect,n,u)},x(i,t,e,n){const r=_a(t,i);return _S(i,r,"x",e.intersect,n)},y(i,t,e,n){const r=_a(t,i);return _S(i,r,"y",e.intersect,n)}}};const mw=["left","top","right","bottom"];function Fu(i,t){return i.filter(e=>e.pos===t)}function bS(i,t){return i.filter(e=>mw.indexOf(e.pos)===-1&&e.box.axis===t)}function Hu(i,t){return i.sort((e,n)=>{const r=t?n:e,o=t?e:n;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function h4(i){const t=[];let e,n,r,o,u,h;for(e=0,n=(i||[]).length;e<n;++e)r=i[e],{position:o,options:{stack:u,stackWeight:h=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:u&&o+u,stackWeight:h});return t}function f4(i){const t={};for(const e of i){const{stack:n,pos:r,stackWeight:o}=e;if(!n||!mw.includes(r))continue;const u=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=o}return t}function d4(i,t){const e=f4(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t;let o,u,h;for(o=0,u=i.length;o<u;++o){h=i[o];const{fullSize:f}=h.box,g=e[h.stack],y=g&&h.stackWeight/g.weight;h.horizontal?(h.width=y?y*n:f&&t.availableWidth,h.height=r):(h.width=n,h.height=y?y*r:f&&t.availableHeight)}return e}function g4(i){const t=h4(i),e=Hu(t.filter(g=>g.box.fullSize),!0),n=Hu(Fu(t,"left"),!0),r=Hu(Fu(t,"right")),o=Hu(Fu(t,"top"),!0),u=Hu(Fu(t,"bottom")),h=bS(t,"x"),f=bS(t,"y");return{fullSize:e,leftAndTop:n.concat(o),rightAndBottom:r.concat(f).concat(u).concat(h),chartArea:Fu(t,"chartArea"),vertical:n.concat(r).concat(f),horizontal:o.concat(u).concat(h)}}function vS(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function pw(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function m4(i,t,e,n){const{pos:r,box:o}=e,u=i.maxPadding;if(!Gt(r)){e.size&&(i[r]-=e.size);const _=n[e.stack]||{size:0,count:1};_.size=Math.max(_.size,e.horizontal?o.height:o.width),e.size=_.size/_.count,i[r]+=e.size}o.getPadding&&pw(u,o.getPadding());const h=Math.max(0,t.outerWidth-vS(u,i,"left","right")),f=Math.max(0,t.outerHeight-vS(u,i,"top","bottom")),g=h!==i.w,y=f!==i.h;return i.w=h,i.h=f,e.horizontal?{same:g,other:y}:{same:y,other:g}}function p4(i){const t=i.maxPadding;function e(n){const r=Math.max(t[n]-i[n],0);return i[n]+=r,r}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function y4(i,t){const e=t.maxPadding;function n(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(u=>{o[u]=Math.max(t[u],e[u])}),o}return n(i?["left","right"]:["top","bottom"])}function Zu(i,t,e,n){const r=[];let o,u,h,f,g,y;for(o=0,u=i.length,g=0;o<u;++o){h=i[o],f=h.box,f.update(h.width||t.w,h.height||t.h,y4(h.horizontal,t));const{same:_,other:T}=m4(t,e,h,n);g|=_&&r.length,y=y||T,f.fullSize||r.push(h)}return g&&Zu(r,t,e,n)||y}function Df(i,t,e,n,r){i.top=e,i.left=t,i.right=t+n,i.bottom=e+r,i.width=n,i.height=r}function TS(i,t,e,n){const r=e.padding;let{x:o,y:u}=t;for(const h of i){const f=h.box,g=n[h.stack]||{placed:0,weight:1},y=h.stackWeight/g.weight||1;if(h.horizontal){const _=t.w*y,T=g.size||f.height;Dc(g.start)&&(u=g.start),f.fullSize?Df(f,r.left,u,e.outerWidth-r.right-r.left,T):Df(f,t.left+g.placed,u,_,T),g.start=u,g.placed+=_,u=f.bottom}else{const _=t.h*y,T=g.size||f.width;Dc(g.start)&&(o=g.start),f.fullSize?Df(f,o,r.top,T,e.outerHeight-r.bottom-r.top):Df(f,o,t.top+g.placed,T,_),g.start=o,g.placed+=_,o=f.right}}t.x=o,t.y=u}var mr={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const r=vi(i.options.layout.padding),o=Math.max(t-r.width,0),u=Math.max(e-r.height,0),h=g4(i.boxes),f=h.vertical,g=h.horizontal;ee(i.boxes,D=>{typeof D.beforeLayout=="function"&&D.beforeLayout()});const y=f.reduce((D,M)=>M.box.options&&M.box.options.display===!1?D:D+1,0)||1,_=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:u,vBoxMaxWidth:o/2/y,hBoxMaxHeight:u/2}),T=Object.assign({},r);pw(T,vi(n));const S=Object.assign({maxPadding:T,w:o,h:u,x:r.left,y:r.top},r),C=d4(f.concat(g),_);Zu(h.fullSize,S,_,C),Zu(f,S,_,C),Zu(g,S,_,C)&&Zu(f,S,_,C),p4(S),TS(h.leftAndTop,S,_,C),S.x+=S.w,S.y+=S.h,TS(h.rightAndBottom,S,_,C),i.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},ee(h.chartArea,D=>{const M=D.box;Object.assign(M,i.chartArea),M.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class yw{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class _4 extends yw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Xf="$chartjs",b4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ES=i=>i===null||i==="";function v4(i,t){const e=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[Xf]={initial:{height:n,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",ES(r)){const o=lS(i,"width");o!==void 0&&(i.width=o)}if(ES(n))if(i.style.height==="")i.height=i.width/(t||2);else{const o=lS(i,"height");o!==void 0&&(i.height=o)}return i}const _w=wN?{passive:!0}:!1;function T4(i,t,e){i&&i.addEventListener(t,e,_w)}function E4(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,_w)}function S4(i,t){const e=b4[i.type]||i.type,{x:n,y:r}=_a(i,t);return{type:e,chart:t,native:i,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Cd(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function A4(i,t,e){const n=i.canvas,r=new MutationObserver(o=>{let u=!1;for(const h of o)u=u||Cd(h.addedNodes,n),u=u&&!Cd(h.removedNodes,n);u&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function x4(i,t,e){const n=i.canvas,r=new MutationObserver(o=>{let u=!1;for(const h of o)u=u||Cd(h.removedNodes,n),u=u&&!Cd(h.addedNodes,n);u&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Mc=new Map;let SS=0;function bw(){const i=window.devicePixelRatio;i!==SS&&(SS=i,Mc.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function w4(i,t){Mc.size||window.addEventListener("resize",bw),Mc.set(i,t)}function R4(i){Mc.delete(i),Mc.size||window.removeEventListener("resize",bw)}function I4(i,t,e){const n=i.canvas,r=n&&w_(n);if(!r)return;const o=Jx((h,f)=>{const g=r.clientWidth;e(h,f),g<r.clientWidth&&e()},window),u=new ResizeObserver(h=>{const f=h[0],g=f.contentRect.width,y=f.contentRect.height;g===0&&y===0||o(g,y)});return u.observe(r),w4(i,o),u}function Ip(i,t,e){e&&e.disconnect(),t==="resize"&&R4(i)}function C4(i,t,e){const n=i.canvas,r=Jx(o=>{i.ctx!==null&&e(S4(o,i))},i);return T4(n,t,r),r}class D4 extends yw{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(v4(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Xf])return!1;const n=e[Xf].initial;["height","width"].forEach(o=>{const u=n[o];ue(u)?e.removeAttribute(o):e.setAttribute(o,u)});const r=n.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[Xf],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),u={attach:A4,detach:x4,resize:I4}[e]||C4;r[e]=u(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];if(!r)return;({attach:Ip,detach:Ip,resize:Ip}[e]||E4)(t,e,r),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return xN(t,e,n,r)}isAttached(t){const e=t&&w_(t);return!!(e&&e.isConnected)}}function M4(i){return!x_()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?_4:D4}class Il{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Ad(this.x)&&Ad(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach(o=>{r[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),r}}function V4(i,t){const e=i.options.ticks,n=O4(i),r=Math.min(e.maxTicksLimit||n,n),o=e.major.enabled?P4(t):[],u=o.length,h=o[0],f=o[u-1],g=[];if(u>r)return k4(t,g,o,u/r),g;const y=N4(o,t,r);if(u>0){let _,T;const S=u>1?Math.round((f-h)/(u-1)):null;for(Mf(t,g,y,ue(S)?0:h-S,h),_=0,T=u-1;_<T;_++)Mf(t,g,y,o[_],o[_+1]);return Mf(t,g,y,f,ue(S)?t.length:f+S),g}return Mf(t,g,y),g}function O4(i){const t=i.options.offset,e=i._tickSize(),n=i._length/e+(t?0:1),r=i._maxLength/e;return Math.floor(Math.min(n,r))}function N4(i,t,e){const n=z4(i),r=t.length/e;if(!n)return Math.max(r,1);const o=PO(n);for(let u=0,h=o.length-1;u<h;u++){const f=o[u];if(f>r)return f}return Math.max(r,1)}function P4(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}function k4(i,t,e,n){let r=0,o=e[0],u;for(n=Math.ceil(n),u=0;u<i.length;u++)u===o&&(t.push(i[u]),r++,o=e[r*n])}function Mf(i,t,e,n,r){const o=qt(n,0),u=Math.min(qt(r,i.length),i.length);let h=0,f,g,y;for(e=Math.ceil(e),r&&(f=r-n,e=f/Math.floor(f/e)),y=o;y<0;)h++,y=Math.round(o+h*e);for(g=Math.max(o,0);g<u;g++)g===y&&(t.push(i[g]),h++,y=Math.round(o+h*e))}function z4(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}const L4=i=>i==="left"?"right":i==="right"?"left":i,AS=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,xS=(i,t)=>Math.min(t||i,i);function wS(i,t){const e=[],n=i.length/t,r=i.length;let o=0;for(;o<r;o+=n)e.push(i[Math.floor(o)]);return e}function B4(i,t,e){const n=i.ticks.length,r=Math.min(t,n-1),o=i._startPixel,u=i._endPixel,h=1e-6;let f=i.getPixelForTick(r),g;if(!(e&&(n===1?g=Math.max(f-o,u-f):t===0?g=(i.getPixelForTick(1)-f)/2:g=(f-i.getPixelForTick(r-1))/2,f+=r<t?g:-g,f<o-h||f>u+h)))return f}function U4(i,t){ee(i,e=>{const n=e.gc,r=n.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[n[o]];n.splice(0,r)}})}function qu(i){return i.drawTicks?i.tickLength:0}function RS(i,t){if(!i.display)return 0;const e=Cn(i.font,t),n=vi(i.padding);return(Je(i.text)?i.text.length:1)*e.lineHeight+n.height}function j4(i,t){return Rl(i,{scale:t,type:"scale"})}function F4(i,t,e){return Rl(i,{tick:e,index:t,type:"tick"})}function H4(i,t,e){let n=tw(i);return(e&&t!=="right"||!e&&t==="right")&&(n=L4(n)),n}function q4(i,t,e,n){const{top:r,left:o,bottom:u,right:h,chart:f}=i,{chartArea:g,scales:y}=f;let _=0,T,S,C;const D=u-r,M=h-o;if(i.isHorizontal()){if(S=Bn(n,o,h),Gt(e)){const U=Object.keys(e)[0],G=e[U];C=y[U].getPixelForValue(G)+D-t}else e==="center"?C=(g.bottom+g.top)/2+D-t:C=AS(i,e,t);T=h-o}else{if(Gt(e)){const U=Object.keys(e)[0],G=e[U];S=y[U].getPixelForValue(G)-M+t}else e==="center"?S=(g.left+g.right)/2-M+t:S=AS(i,e,t);C=Bn(n,u,r),_=e==="left"?-Ke:Ke}return{titleX:S,titleY:C,maxWidth:T,rotation:_}}class Cl extends Il{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=Hi(t,Number.POSITIVE_INFINITY),e=Hi(e,Number.NEGATIVE_INFINITY),n=Hi(n,Number.POSITIVE_INFINITY),r=Hi(r,Number.NEGATIVE_INFINITY),{min:Hi(t,n),max:Hi(e,r),minDefined:ai(t),maxDefined:ai(e)}}getMinMax(t){let{min:e,max:n,minDefined:r,maxDefined:o}=this.getUserBounds(),u;if(r&&o)return{min:e,max:n};const h=this.getMatchingVisibleMetas();for(let f=0,g=h.length;f<g;++f)u=h[f].controller.getMinMax(this,t),r||(e=Math.min(e,u.min)),o||(n=Math.max(n,u.max));return e=o&&e>n?n:e,n=r&&e>n?e:n,{min:Hi(e,Hi(n,e)),max:Hi(n,Hi(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){de(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:o,ticks:u}=this.options,h=u.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=cN(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=h<this.ticks.length;this._convertTicksToLabels(f?wS(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),u.display&&(u.autoSkip||u.source==="auto")&&(this.ticks=V4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){de(this.options.afterUpdate,[this])}beforeSetDimensions(){de(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){de(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),de(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){de(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,o;for(n=0,r=t.length;n<r;n++)o=t[n],o.label=de(e.callback,[o.value,n,t],this)}afterTickToLabelConversion(){de(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){de(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=xS(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let u=r,h,f,g;if(!this._isVisible()||!e.display||r>=o||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const y=this._getLabelSizes(),_=y.widest.width,T=y.highest.height,S=In(this.chart.width-_,0,this.maxWidth);h=t.offset?this.maxWidth/n:S/(n-1),_+6>h&&(h=S/(n-(t.offset?.5:1)),f=this.maxHeight-qu(t.grid)-e.padding-RS(t.title,this.chart.options.font),g=Math.sqrt(_*_+T*T),u=BO(Math.min(Math.asin(In((y.highest.height+6)/h,-1,1)),Math.asin(In(f/g,-1,1))-Math.asin(In(T/g,-1,1)))),u=Math.max(r,Math.min(o,u))),this.labelRotation=u}afterCalculateLabelRotation(){de(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){de(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:o}}=this,u=this._isVisible(),h=this.isHorizontal();if(u){const f=RS(r,e.options.font);if(h?(t.width=this.maxWidth,t.height=qu(o)+f):(t.height=this.maxHeight,t.width=qu(o)+f),n.display&&this.ticks.length){const{first:g,last:y,widest:_,highest:T}=this._getLabelSizes(),S=n.padding*2,C=As(this.labelRotation),D=Math.cos(C),M=Math.sin(C);if(h){const U=n.mirror?0:M*_.width+D*T.height;t.height=Math.min(this.maxHeight,t.height+U+S)}else{const U=n.mirror?0:D*_.width+M*T.height;t.width=Math.min(this.maxWidth,t.width+U+S)}this._calculatePadding(g,y,M,D)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:o,padding:u},position:h}=this.options,f=this.labelRotation!==0,g=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,S=0;f?g?(T=r*t.width,S=n*e.height):(T=n*t.height,S=r*e.width):o==="start"?S=e.width:o==="end"?T=t.width:o!=="inner"&&(T=t.width/2,S=e.width/2),this.paddingLeft=Math.max((T-y+u)*this.width/(this.width-y),0),this.paddingRight=Math.max((S-_+u)*this.width/(this.width-_),0)}else{let y=e.height/2,_=t.height/2;o==="start"?(y=0,_=t.height):o==="end"&&(y=e.height,_=0),this.paddingTop=y+u,this.paddingBottom=_+u}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){de(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)ue(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=wS(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:r,_longestTextCache:o}=this,u=[],h=[],f=Math.floor(e/xS(e,n));let g=0,y=0,_,T,S,C,D,M,U,G,Q,Z,$;for(_=0;_<e;_+=f){if(C=t[_].label,D=this._resolveTickFontOptions(_),r.font=M=D.string,U=o[M]=o[M]||{data:{},gc:[]},G=D.lineHeight,Q=Z=0,!ue(C)&&!Je(C))Q=nS(r,U.data,U.gc,Q,C),Z=G;else if(Je(C))for(T=0,S=C.length;T<S;++T)$=C[T],!ue($)&&!Je($)&&(Q=nS(r,U.data,U.gc,Q,$),Z+=G);u.push(Q),h.push(Z),g=Math.max(Q,g),y=Math.max(Z,y)}U4(o,e);const it=u.indexOf(g),R=h.indexOf(y),x=I=>({width:u[I]||0,height:h[I]||0});return{first:x(0),last:x(e-1),widest:x(it),highest:x(R),widths:u,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return jO(this._alignToPixels?da(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=F4(this.getContext(),t,n))}return this.$context||(this.$context=j4(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=As(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),u=t.autoSkipPadding||0,h=o?o.widest.width+u:0,f=o?o.highest.height+u:0;return this.isHorizontal()?f*n>h*r?h/n:f/r:f*r<h*n?f/n:h/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:o,position:u,border:h}=r,f=o.offset,g=this.isHorizontal(),_=this.ticks.length+(f?1:0),T=qu(o),S=[],C=h.setContext(this.getContext()),D=C.display?C.width:0,M=D/2,U=function(Y){return da(n,Y,D)};let G,Q,Z,$,it,R,x,I,P,O,k,V;if(u==="top")G=U(this.bottom),R=this.bottom-T,I=G-M,O=U(t.top)+M,V=t.bottom;else if(u==="bottom")G=U(this.top),O=t.top,V=U(t.bottom)-M,R=G+M,I=this.top+T;else if(u==="left")G=U(this.right),it=this.right-T,x=G-M,P=U(t.left)+M,k=t.right;else if(u==="right")G=U(this.left),P=t.left,k=U(t.right)-M,it=G+M,x=this.left+T;else if(e==="x"){if(u==="center")G=U((t.top+t.bottom)/2+.5);else if(Gt(u)){const Y=Object.keys(u)[0],ot=u[Y];G=U(this.chart.scales[Y].getPixelForValue(ot))}O=t.top,V=t.bottom,R=G+M,I=R+T}else if(e==="y"){if(u==="center")G=U((t.left+t.right)/2);else if(Gt(u)){const Y=Object.keys(u)[0],ot=u[Y];G=U(this.chart.scales[Y].getPixelForValue(ot))}it=G-M,x=it-T,P=t.left,k=t.right}const Vt=qt(r.ticks.maxTicksLimit,_),xt=Math.max(1,Math.ceil(_/Vt));for(Q=0;Q<_;Q+=xt){const Y=this.getContext(Q),ot=o.setContext(Y),gt=h.setContext(Y),St=ot.lineWidth,Pt=ot.color,z=gt.dash||[],et=gt.dashOffset,ct=ot.tickWidth,ft=ot.tickColor,Tt=ot.tickBorderDash||[],At=ot.tickBorderDashOffset;Z=B4(this,Q,f),Z!==void 0&&($=da(n,Z,St),g?it=x=P=k=$:R=I=O=V=$,S.push({tx1:it,ty1:R,tx2:x,ty2:I,x1:P,y1:O,x2:k,y2:V,width:St,color:Pt,borderDash:z,borderDashOffset:et,tickWidth:ct,tickColor:ft,tickBorderDash:Tt,tickBorderDashOffset:At}))}return this._ticksLength=_,this._borderValue=G,S}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:o}=n,u=this.isHorizontal(),h=this.ticks,{align:f,crossAlign:g,padding:y,mirror:_}=o,T=qu(n.grid),S=T+y,C=_?-y:S,D=-As(this.labelRotation),M=[];let U,G,Q,Z,$,it,R,x,I,P,O,k,V="middle";if(r==="top")it=this.bottom-C,R=this._getXAxisLabelAlignment();else if(r==="bottom")it=this.top+C,R=this._getXAxisLabelAlignment();else if(r==="left"){const xt=this._getYAxisLabelAlignment(T);R=xt.textAlign,$=xt.x}else if(r==="right"){const xt=this._getYAxisLabelAlignment(T);R=xt.textAlign,$=xt.x}else if(e==="x"){if(r==="center")it=(t.top+t.bottom)/2+S;else if(Gt(r)){const xt=Object.keys(r)[0],Y=r[xt];it=this.chart.scales[xt].getPixelForValue(Y)+S}R=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")$=(t.left+t.right)/2-S;else if(Gt(r)){const xt=Object.keys(r)[0],Y=r[xt];$=this.chart.scales[xt].getPixelForValue(Y)}R=this._getYAxisLabelAlignment(T).textAlign}e==="y"&&(f==="start"?V="top":f==="end"&&(V="bottom"));const Vt=this._getLabelSizes();for(U=0,G=h.length;U<G;++U){Q=h[U],Z=Q.label;const xt=o.setContext(this.getContext(U));x=this.getPixelForTick(U)+o.labelOffset,I=this._resolveTickFontOptions(U),P=I.lineHeight,O=Je(Z)?Z.length:1;const Y=O/2,ot=xt.color,gt=xt.textStrokeColor,St=xt.textStrokeWidth;let Pt=R;u?($=x,R==="inner"&&(U===G-1?Pt=this.options.reverse?"left":"right":U===0?Pt=this.options.reverse?"right":"left":Pt="center"),r==="top"?g==="near"||D!==0?k=-O*P+P/2:g==="center"?k=-Vt.highest.height/2-Y*P+P:k=-Vt.highest.height+P/2:g==="near"||D!==0?k=P/2:g==="center"?k=Vt.highest.height/2-Y*P:k=Vt.highest.height-O*P,_&&(k*=-1),D!==0&&!xt.showLabelBackdrop&&($+=P/2*Math.sin(D))):(it=x,k=(1-O)*P/2);let z;if(xt.showLabelBackdrop){const et=vi(xt.backdropPadding),ct=Vt.heights[U],ft=Vt.widths[U];let Tt=k-et.top,At=0-et.left;switch(V){case"middle":Tt-=ct/2;break;case"bottom":Tt-=ct;break}switch(R){case"center":At-=ft/2;break;case"right":At-=ft;break;case"inner":U===G-1?At-=ft:U>0&&(At-=ft/2);break}z={left:At,top:Tt,width:ft+et.width,height:ct+et.height,color:xt.backdropColor}}M.push({label:Z,font:I,textOffset:k,options:{rotation:D,color:ot,strokeColor:gt,strokeWidth:St,textAlign:Pt,textBaseline:V,translation:[$,it],backdrop:z}})}return M}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-As(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:o}}=this.options,u=this._getLabelSizes(),h=t+o,f=u.widest.width;let g,y;return e==="left"?r?(y=this.right+o,n==="near"?g="left":n==="center"?(g="center",y+=f/2):(g="right",y+=f)):(y=this.right-h,n==="near"?g="right":n==="center"?(g="center",y-=f/2):(g="left",y=this.left)):e==="right"?r?(y=this.left+o,n==="near"?g="right":n==="center"?(g="center",y-=f/2):(g="left",y-=f)):(y=this.left+h,n==="near"?g="left":n==="center"?(g="center",y+=f/2):(g="right",y=this.right)):g="right",{textAlign:g,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:o,height:u}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,o,u),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,u;const h=(f,g,y)=>{!y.width||!y.color||(n.save(),n.lineWidth=y.width,n.strokeStyle=y.color,n.setLineDash(y.borderDash||[]),n.lineDashOffset=y.borderDashOffset,n.beginPath(),n.moveTo(f.x,f.y),n.lineTo(g.x,g.y),n.stroke(),n.restore())};if(e.display)for(o=0,u=r.length;o<u;++o){const f=r[o];e.drawOnChartArea&&h({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),e.drawTicks&&h({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:r}}=this,o=n.setContext(this.getContext()),u=n.display?o.width:0;if(!u)return;const h=r.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let g,y,_,T;this.isHorizontal()?(g=da(t,this.left,u)-u/2,y=da(t,this.right,h)+h/2,_=T=f):(_=da(t,this.top,u)-u/2,T=da(t,this.bottom,h)+h/2,g=y=f),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(g,_),e.lineTo(y,T),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&b_(n,r);const o=this.getLabelItems(t);for(const u of o){const h=u.options,f=u.font,g=u.label,y=u.textOffset;wd(n,g,0,y,f,h)}r&&v_(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const o=Cn(n.font),u=vi(n.padding),h=n.align;let f=o.lineHeight/2;e==="bottom"||e==="center"||Gt(e)?(f+=u.bottom,Je(n.text)&&(f+=o.lineHeight*(n.text.length-1))):f+=u.top;const{titleX:g,titleY:y,maxWidth:_,rotation:T}=q4(this,f,e,h);wd(t,n.text,0,0,o,{color:n.color,maxWidth:_,rotation:T,textAlign:H4(h,e,r),textBaseline:"middle",translation:[g,y]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=qt(t.grid&&t.grid.z,-1),r=qt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Cl.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let o,u;for(o=0,u=e.length;o<u;++o){const h=e[o];h[n]===this.id&&(!t||h.type===t)&&r.push(h)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Cn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Vf{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;Y4(e)&&(n=this.register(e));const r=this.items,o=t.id,u=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,G4(t,u,n),this.override&&Ie.override(t.id,t.overrides)),u}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in Ie[r]&&(delete Ie[r][n],this.override&&delete ja[n])}}function G4(i,t,e){const n=Cc(Object.create(null),[e?Ie.get(e):{},Ie.get(t),i.defaults]);Ie.set(t,n),i.defaultRoutes&&K4(t,i.defaultRoutes),i.descriptors&&Ie.describe(t,i.descriptors)}function K4(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),r=n.pop(),o=[i].concat(n).join("."),u=t[e].split("."),h=u.pop(),f=u.join(".");Ie.route(o,r,f,h)})}function Y4(i){return"id"in i&&"defaults"in i}class Q4{constructor(){this.controllers=new Vf(R_,"datasets",!0),this.elements=new Vf(Il,"elements"),this.plugins=new Vf(Object,"plugins"),this.scales=new Vf(Cl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(r=>{const o=n||this._getRegistryForType(r);n||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):ee(r,u=>{const h=n||this._getRegistryForType(u);this._exec(t,h,u)})})}_exec(t,e,n){const r=p_(t);de(n["before"+r],[],n),e[t](n),de(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return r}}var Gi=new Q4;class X4{constructor(){this._init=void 0}notify(t,e,n,r){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const o=r?this._descriptors(t).filter(r):this._descriptors(t),u=this._notify(o,t,e,n);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),u}_notify(t,e,n,r){r=r||{};for(const o of t){const u=o.plugin,h=u[n],f=[e,r,o.options];if(de(h,f,u)===!1&&r.cancelable)return!1}return!0}invalidate(){ue(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=qt(n.options&&n.options.plugins,{}),o=W4(n);return r===!1&&!e?[]:Z4(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(o,u)=>o.filter(h=>!u.some(f=>h.plugin.id===f.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function W4(i){const t={},e=[],n=Object.keys(Gi.plugins.items);for(let o=0;o<n.length;o++)e.push(Gi.getPlugin(n[o]));const r=i.plugins||[];for(let o=0;o<r.length;o++){const u=r[o];e.indexOf(u)===-1&&(e.push(u),t[u.id]=!0)}return{plugins:e,localIds:t}}function $4(i,t){return!t&&i===!1?null:i===!0?{}:i}function Z4(i,{plugins:t,localIds:e},n,r){const o=[],u=i.getContext();for(const h of t){const f=h.id,g=$4(n[f],r);g!==null&&o.push({plugin:h,options:J4(i.config,{plugin:h,local:e[f]},g,u)})}return o}function J4(i,{plugin:t,local:e},n,r){const o=i.pluginScopeKeys(t),u=i.getOptionScopes(n,o);return e&&t.defaults&&u.push(t.defaults),i.createResolver(u,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gy(i,t){const e=Ie.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function t5(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function e5(i,t){return i===t?"_index_":"_value_"}function IS(i){if(i==="x"||i==="y"||i==="r")return i}function n5(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function my(i,...t){if(IS(i))return i;for(const e of t){const n=e.axis||n5(e.position)||i.length>1&&IS(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function CS(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function i5(i,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(e.length)return CS(i,"x",e[0])||CS(i,"y",e[0])}return{}}function s5(i,t){const e=ja[i.type]||{scales:{}},n=t.scales||{},r=gy(i.type,t),o=Object.create(null);return Object.keys(n).forEach(u=>{const h=n[u];if(!Gt(h))return console.error(`Invalid scale configuration for scale: ${u}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${u}`);const f=my(u,h,i5(u,i),Ie.scales[h.type]),g=e5(f,r),y=e.scales||{};o[u]=cc(Object.create(null),[{axis:f},h,y[f],y[g]])}),i.data.datasets.forEach(u=>{const h=u.type||i.type,f=u.indexAxis||gy(h,t),y=(ja[h]||{}).scales||{};Object.keys(y).forEach(_=>{const T=t5(_,f),S=u[T+"AxisID"]||T;o[S]=o[S]||Object.create(null),cc(o[S],[{axis:T},n[S],y[_]])})}),Object.keys(o).forEach(u=>{const h=o[u];cc(h,[Ie.scales[h.type],Ie.scale])}),o}function vw(i){const t=i.options||(i.options={});t.plugins=qt(t.plugins,{}),t.scales=s5(i,t)}function Tw(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function r5(i){return i=i||{},i.data=Tw(i.data),vw(i),i}const DS=new Map,Ew=new Set;function Of(i,t){let e=DS.get(i);return e||(e=t(),DS.set(i,e),Ew.add(e)),e}const Gu=(i,t,e)=>{const n=Ua(t,e);n!==void 0&&i.add(n)};class a5{constructor(t){this._config=r5(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Tw(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),vw(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Of(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Of(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Of(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return Of(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return(!r||e)&&(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:o}=this,u=this._cachedScopes(t,n),h=u.get(e);if(h)return h;const f=new Set;e.forEach(y=>{t&&(f.add(t),y.forEach(_=>Gu(f,t,_))),y.forEach(_=>Gu(f,r,_)),y.forEach(_=>Gu(f,ja[o]||{},_)),y.forEach(_=>Gu(f,Ie,_)),y.forEach(_=>Gu(f,dy,_))});const g=Array.from(f);return g.length===0&&g.push(Object.create(null)),Ew.has(e)&&u.set(e,g),g}chartOptionScopes(){const{options:t,type:e}=this;return[t,ja[e]||{},Ie.datasets[e]||{},{type:e},Ie,dy]}resolveNamedOptions(t,e,n,r=[""]){const o={$shared:!0},{resolver:u,subPrefixes:h}=MS(this._resolverCache,t,r);let f=u;if(l5(u,e)){o.$shared=!1,n=Cr(n)?n():n;const g=this.createResolver(t,n,h);f=bl(u,n,g)}for(const g of e)o[g]=f[g];return o}createResolver(t,e,n=[""],r){const{resolver:o}=MS(this._resolverCache,t,n);return Gt(e)?bl(o,e,void 0,r):o}}function MS(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const r=e.join();let o=n.get(r);return o||(o={resolver:E_(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},n.set(r,o)),o}const o5=i=>Gt(i)&&Object.getOwnPropertyNames(i).some(t=>Cr(i[t]));function l5(i,t){const{isScriptable:e,isIndexable:n}=aw(i);for(const r of t){const o=e(r),u=n(r),h=(u||o)&&i[r];if(o&&(Cr(h)||o5(h))||u&&Je(h))return!0}return!1}var u5="4.5.1";const c5=["top","bottom","left","right","chartArea"];function VS(i,t){return i==="top"||i==="bottom"||c5.indexOf(i)===-1&&t==="x"}function OS(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function NS(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),de(e&&e.onComplete,[i],t)}function h5(i){const t=i.chart,e=t.options.animation;de(e&&e.onProgress,[i],t)}function Sw(i){return x_()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Wf={},PS=i=>{const t=Sw(i);return Object.values(Wf).filter(e=>e.canvas===t).pop()};function f5(i,t,e){const n=Object.keys(i);for(const r of n){const o=+r;if(o>=t){const u=i[r];delete i[r],(e>0||o>t)&&(i[o+e]=u)}}}function d5(i,t,e,n){return!e||i.type==="mouseout"?null:n?t:i}let tg=class{static defaults=Ie;static instances=Wf;static overrides=ja;static registry=Gi;static version=u5;static getChart=PS;static register(...t){Gi.add(...t),kS()}static unregister(...t){Gi.remove(...t),kS()}constructor(t,e){const n=this.config=new a5(e),r=Sw(t),o=PS(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const u=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||M4(r)),this.platform.updateConfig(n);const h=this.platform.acquireContext(r,u.aspectRatio),f=h&&h.canvas,g=f&&f.height,y=f&&f.width;if(this.id=RO(),this.ctx=h,this.canvas=f,this.width=y,this.height=g,this._options=u,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new X4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=GO(_=>this.update(_),u.resizeDelay||0),this._dataChanges=[],Wf[this.id]=this,!h||!f){console.error("Failed to create chart: can't acquire context from the given item");return}vs.listen(this,"complete",NS),vs.listen(this,"progress",h5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:o}=this;return ue(t)?e&&o?o:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Gi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():oS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return iS(this.canvas,this.ctx),this}stop(){return vs.stop(this),this}resize(t,e){vs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,r=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,u=this.platform.getMaximumSize(r,t,e,o),h=n.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=u.width,this.height=u.height,this._aspectRatio=this.aspectRatio,oS(this,h,!0)&&(this.notifyPlugins("resize",{size:u}),de(n.onResize,[this,u],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ee(e,(n,r)=>{n.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce((u,h)=>(u[h]=!1,u),{});let o=[];e&&(o=o.concat(Object.keys(e).map(u=>{const h=e[u],f=my(u,h),g=f==="r",y=f==="x";return{options:h,dposition:g?"chartArea":y?"bottom":"left",dtype:g?"radialLinear":y?"category":"linear"}}))),ee(o,u=>{const h=u.options,f=h.id,g=my(f,h),y=qt(h.type,u.dtype);(h.position===void 0||VS(h.position,g)!==VS(u.dposition))&&(h.position=u.dposition),r[f]=!0;let _=null;if(f in n&&n[f].type===y)_=n[f];else{const T=Gi.getScale(y);_=new T({id:f,type:y,ctx:this.ctx,chart:this}),n[_.id]=_}_.init(h,t)}),ee(r,(u,h)=>{u||delete n[h]}),ee(n,u=>{mr.configure(this,u,u.options),mr.addBox(this,u)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((r,o)=>r.index-o.index),n>e){for(let r=e;r<n;++r)this._destroyDatasetMeta(r);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(OS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,r)=>{e.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const o=e[n];let u=this.getDatasetMeta(n);const h=o.type||this.config.type;if(u.type&&u.type!==h&&(this._destroyDatasetMeta(n),u=this.getDatasetMeta(n)),u.type=h,u.indexAxis=o.indexAxis||gy(h,this.options),u.order=o.order||0,u.index=n,u.label=""+o.label,u.visible=this.isDatasetVisible(n),u.controller)u.controller.updateIndex(n),u.controller.linkScales();else{const f=Gi.getController(h),{datasetElementType:g,dataElementType:y}=Ie.datasets[h];Object.assign(f,{dataElementType:Gi.getElement(y),datasetElementType:g&&Gi.getElement(g)}),u.controller=new f(this,n),t.push(u.controller)}}return this._updateMetasets(),t}_resetElements(){ee(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let u=0;for(let g=0,y=this.data.datasets.length;g<y;g++){const{controller:_}=this.getDatasetMeta(g),T=!r&&o.indexOf(_)===-1;_.buildOrUpdateElements(T),u=Math.max(+_.getMaxOverflow(),u)}u=this._minPadding=n.layout.autoPadding?u:0,this._updateLayout(u),r||ee(o,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(OS("z","_idx"));const{_active:h,_lastEvent:f}=this;f?this._eventHandler(f,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){ee(this.scales,t=>{mr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!YE(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:o}of e){const u=n==="_removeElements"?-o:o;f5(t,r,u)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=o=>new Set(t.filter(u=>u[0]===o).map((u,h)=>h+","+u.splice(1).join(","))),r=n(0);for(let o=1;o<e;o++)if(!YE(r,n(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;mr.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],ee(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Cr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(vs.has(this)?this.attached&&!vs.running(this)&&vs.start(this):(this.draw(),NS({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,o;for(r=0,o=e.length;r<o;++r){const u=e[r];(!t||u.visible)&&n.push(u)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},r=DN(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&b_(e,r),t.controller.draw(),r&&v_(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return sw(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const o=c4.modes[e];return typeof o=="function"?o(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Rl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",o=this.getDatasetMeta(t),u=o.controller._resolveAnimations(void 0,r);Dc(e)?(o.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),u.update(o,{visible:n}),this.update(h=>h.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),vs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),iS(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Wf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(o,u)=>{e.addEventListener(this,o,u),t[o]=u},r=(o,u,h)=>{o.offsetX=u,o.offsetY=h,this._eventHandler(o)};ee(this.options.events,o=>n(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(f,g)=>{e.addEventListener(this,f,g),t[f]=g},r=(f,g)=>{t[f]&&(e.removeEventListener(this,f,g),delete t[f])},o=(f,g)=>{this.canvas&&this.resize(f,g)};let u;const h=()=>{r("attach",h),this.attached=!0,this.resize(),n("resize",o),n("detach",u)};u=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),n("attach",h)},e.isAttached(this.canvas)?h():u()}unbindEvents(){ee(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ee(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let o,u,h,f;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),h=0,f=t.length;h<f;++h){u=t[h];const g=u&&this.getDatasetMeta(u.datasetIndex).controller;g&&g[r+"HoverStyle"](u.element,u.datasetIndex,u.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:o,index:u})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[u],index:u}});!Td(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,n){const r=this.options.hover,o=(f,g)=>f.filter(y=>!g.some(_=>y.datasetIndex===_.datasetIndex&&y.index===_.index)),u=o(e,t),h=n?t:o(t,e);u.length&&this.updateHoverStyle(u,r.mode,!1),h.length&&r.mode&&this.updateHoverStyle(h,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=u=>(u.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const o=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(o||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:o}=this,u=e,h=this._getActiveElements(t,r,n,u),f=OO(t),g=d5(t,this._lastEvent,n,f);n&&(this._lastEvent=null,de(o.onHover,[t,h,this],this),f&&de(o.onClick,[t,h,this],this));const y=!Td(h,r);return(y||e)&&(this._active=h,this._updateHoverStyles(h,r,e)),this._lastEvent=g,y}_getActiveElements(t,e,n,r){if(t.type==="mouseout")return[];if(!n)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}};function kS(){return ee(tg.instances,i=>i._plugins.invalidate())}function g5(i,t,e){const{startAngle:n,x:r,y:o,outerRadius:u,innerRadius:h,options:f}=t,{borderWidth:g,borderJoinStyle:y}=f,_=Math.min(g/u,Yi(n-e));if(i.beginPath(),i.arc(r,o,u-g/2,n+_/2,e-_/2),h>0){const T=Math.min(g/h,Yi(n-e));i.arc(r,o,h+g/2,e-T/2,n+T/2,!0)}else{const T=Math.min(g/2,u*Yi(n-e));if(y==="round")i.arc(r,o,T,e-ge/2,n+ge/2,!0);else if(y==="bevel"){const S=2*T*T,C=-S*Math.cos(e+ge/2)+r,D=-S*Math.sin(e+ge/2)+o,M=S*Math.cos(n+ge/2)+r,U=S*Math.sin(n+ge/2)+o;i.lineTo(C,D),i.lineTo(M,U)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function m5(i,t,e){const{startAngle:n,pixelMargin:r,x:o,y:u,outerRadius:h,innerRadius:f}=t;let g=r/h;i.beginPath(),i.arc(o,u,h,n-g,e+g),f>r?(g=r/f,i.arc(o,u,f,e+g,n-g,!0)):i.arc(o,u,r,e+Ke,n-Ke),i.closePath(),i.clip()}function p5(i){return T_(i,["outerStart","outerEnd","innerStart","innerEnd"])}function y5(i,t,e,n){const r=p5(i.options.borderRadius),o=(e-t)/2,u=Math.min(o,n*t/2),h=f=>{const g=(e-Math.min(o,f))*n/2;return In(f,0,Math.min(o,g))};return{outerStart:h(r.outerStart),outerEnd:h(r.outerEnd),innerStart:In(r.innerStart,0,u),innerEnd:In(r.innerEnd,0,u)}}function qo(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function Dd(i,t,e,n,r,o){const{x:u,y:h,startAngle:f,pixelMargin:g,innerRadius:y}=t,_=Math.max(t.outerRadius+n+e-g,0),T=y>0?y+n+e+g:0;let S=0;const C=r-f;if(n){const xt=y>0?y-n:0,Y=_>0?_-n:0,ot=(xt+Y)/2,gt=ot!==0?C*ot/(ot+n):C;S=(C-gt)/2}const D=Math.max(.001,C*_-e/ge)/_,M=(C-D)/2,U=f+M+S,G=r-M-S,{outerStart:Q,outerEnd:Z,innerStart:$,innerEnd:it}=y5(t,T,_,G-U),R=_-Q,x=_-Z,I=U+Q/R,P=G-Z/x,O=T+$,k=T+it,V=U+$/O,Vt=G-it/k;if(i.beginPath(),o){const xt=(I+P)/2;if(i.arc(u,h,_,I,xt),i.arc(u,h,_,xt,P),Z>0){const St=qo(x,P,u,h);i.arc(St.x,St.y,Z,P,G+Ke)}const Y=qo(k,G,u,h);if(i.lineTo(Y.x,Y.y),it>0){const St=qo(k,Vt,u,h);i.arc(St.x,St.y,it,G+Ke,Vt+Math.PI)}const ot=(G-it/T+(U+$/T))/2;if(i.arc(u,h,T,G-it/T,ot,!0),i.arc(u,h,T,ot,U+$/T,!0),$>0){const St=qo(O,V,u,h);i.arc(St.x,St.y,$,V+Math.PI,U-Ke)}const gt=qo(R,U,u,h);if(i.lineTo(gt.x,gt.y),Q>0){const St=qo(R,I,u,h);i.arc(St.x,St.y,Q,U-Ke,I)}}else{i.moveTo(u,h);const xt=Math.cos(I)*_+u,Y=Math.sin(I)*_+h;i.lineTo(xt,Y);const ot=Math.cos(P)*_+u,gt=Math.sin(P)*_+h;i.lineTo(ot,gt)}i.closePath()}function _5(i,t,e,n,r){const{fullCircles:o,startAngle:u,circumference:h}=t;let f=t.endAngle;if(o){Dd(i,t,e,n,f,r);for(let g=0;g<o;++g)i.fill();isNaN(h)||(f=u+(h%je||je))}return Dd(i,t,e,n,f,r),i.fill(),f}function b5(i,t,e,n,r){const{fullCircles:o,startAngle:u,circumference:h,options:f}=t,{borderWidth:g,borderJoinStyle:y,borderDash:_,borderDashOffset:T,borderRadius:S}=f,C=f.borderAlign==="inner";if(!g)return;i.setLineDash(_||[]),i.lineDashOffset=T,C?(i.lineWidth=g*2,i.lineJoin=y||"round"):(i.lineWidth=g,i.lineJoin=y||"bevel");let D=t.endAngle;if(o){Dd(i,t,e,n,D,r);for(let M=0;M<o;++M)i.stroke();isNaN(h)||(D=u+(h%je||je))}C&&m5(i,t,D),f.selfJoin&&D-u>=ge&&S===0&&y!=="miter"&&g5(i,t,D),o||(Dd(i,t,e,n,D,r),i.stroke())}class v5 extends Il{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:o,distance:u}=Xx(r,{x:t,y:e}),{startAngle:h,endAngle:f,innerRadius:g,outerRadius:y,circumference:_}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),T=(this.options.spacing+this.options.borderWidth)/2,S=qt(_,f-h),C=xd(o,h,f)&&h!==f,D=S>=je||C,M=Aa(u,g+T,y+T);return D&&M}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:o,innerRadius:u,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:f,spacing:g}=this.options,y=(r+o)/2,_=(u+h+g+f)/2;return{x:e+Math.cos(y)*_,y:n+Math.sin(y)*_}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/4,o=(e.spacing||0)/2,u=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=n>je?Math.floor(n/je):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const h=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(h)*r,Math.sin(h)*r);const f=1-Math.sin(Math.min(ge,n||0)),g=r*f;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,_5(t,this,g,o,u),b5(t,this,g,o,u),t.restore()}}function Aw(i,t){const{x:e,y:n,base:r,width:o,height:u}=i.getProps(["x","y","base","width","height"],t);let h,f,g,y,_;return i.horizontal?(_=u/2,h=Math.min(e,r),f=Math.max(e,r),g=n-_,y=n+_):(_=o/2,h=e-_,f=e+_,g=Math.min(n,r),y=Math.max(n,r)),{left:h,top:g,right:f,bottom:y}}function pr(i,t,e,n){return i?0:In(t,e,n)}function T5(i,t,e){const n=i.options.borderWidth,r=i.borderSkipped,o=rw(n);return{t:pr(r.top,o.top,0,e),r:pr(r.right,o.right,0,t),b:pr(r.bottom,o.bottom,0,e),l:pr(r.left,o.left,0,t)}}function E5(i,t,e){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,o=Jo(r),u=Math.min(t,e),h=i.borderSkipped,f=n||Gt(r);return{topLeft:pr(!f||h.top||h.left,o.topLeft,0,u),topRight:pr(!f||h.top||h.right,o.topRight,0,u),bottomLeft:pr(!f||h.bottom||h.left,o.bottomLeft,0,u),bottomRight:pr(!f||h.bottom||h.right,o.bottomRight,0,u)}}function S5(i){const t=Aw(i),e=t.right-t.left,n=t.bottom-t.top,r=T5(i,e/2,n/2),o=E5(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:o},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function Cp(i,t,e,n){const r=t===null,o=e===null,h=i&&!(r&&o)&&Aw(i,n);return h&&(r||Aa(t,h.left,h.right))&&(o||Aa(e,h.top,h.bottom))}function A5(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function x5(i,t){i.rect(t.x,t.y,t.w,t.h)}function Dp(i,t,e={}){const n=i.x!==e.x?-t:0,r=i.y!==e.y?-t:0,o=(i.x+i.w!==e.x+e.w?t:0)-n,u=(i.y+i.h!==e.y+e.h?t:0)-r;return{x:i.x+n,y:i.y+r,w:i.w+o,h:i.h+u,radius:i.radius}}class w5 extends Il{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:o,outer:u}=S5(this),h=A5(u.radius)?Rd:x5;t.save(),(u.w!==o.w||u.h!==o.h)&&(t.beginPath(),h(t,Dp(u,e,o)),t.clip(),h(t,Dp(o,-e,u)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),h(t,Dp(o,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return Cp(this,t,e,n)}inXRange(t,e){return Cp(this,t,null,e)}inYRange(t,e){return Cp(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+r)/2:e,y:o?n:(n+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const zS=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}},R5=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class LS extends Il{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=de(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,r)=>t.sort(n,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,r=Cn(n.font),o=r.size,u=this._computeTitleHeight(),{boxWidth:h,itemHeight:f}=zS(n,o);let g,y;e.font=r.string,this.isHorizontal()?(g=this.maxWidth,y=this._fitRows(u,o,h,f)+10):(y=this.maxHeight,g=this._fitCols(u,r,h,f)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(y,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:o,maxWidth:u,options:{labels:{padding:h}}}=this,f=this.legendHitBoxes=[],g=this.lineWidths=[0],y=r+h;let _=t;o.textAlign="left",o.textBaseline="middle";let T=-1,S=-y;return this.legendItems.forEach((C,D)=>{const M=n+e/2+o.measureText(C.text).width;(D===0||g[g.length-1]+M+2*h>u)&&(_+=y,g[g.length-(D>0?0:1)]=0,S+=y,T++),f[D]={left:0,top:S,row:T,width:M,height:r},g[g.length-1]+=M+h}),_}_fitCols(t,e,n,r){const{ctx:o,maxHeight:u,options:{labels:{padding:h}}}=this,f=this.legendHitBoxes=[],g=this.columnSizes=[],y=u-t;let _=h,T=0,S=0,C=0,D=0;return this.legendItems.forEach((M,U)=>{const{itemWidth:G,itemHeight:Q}=I5(n,e,o,M,r);U>0&&S+Q+2*h>y&&(_+=T+h,g.push({width:T,height:S}),C+=T+h,D++,T=S=0),f[U]={left:C,top:S,col:D,width:G,height:Q},T=Math.max(T,G),S+=Q+h}),_+=T,g.push({width:T,height:S}),_}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:o}}=this,u=tl(o,this.left,this.width);if(this.isHorizontal()){let h=0,f=Bn(n,this.left+r,this.right-this.lineWidths[h]);for(const g of e)h!==g.row&&(h=g.row,f=Bn(n,this.left+r,this.right-this.lineWidths[h])),g.top+=this.top+t+r,g.left=u.leftForLtr(u.x(f),g.width),f+=g.width+r}else{let h=0,f=Bn(n,this.top+t+r,this.bottom-this.columnSizes[h].height);for(const g of e)g.col!==h&&(h=g.col,f=Bn(n,this.top+t+r,this.bottom-this.columnSizes[h].height)),g.top=f,g.left+=this.left+r,g.left=u.leftForLtr(u.x(g.left),g.width),f+=g.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;b_(t,this),this._draw(),v_(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:o,labels:u}=t,h=Ie.color,f=tl(t.rtl,this.left,this.width),g=Cn(u.font),{padding:y}=u,_=g.size,T=_/2;let S;this.drawTitle(),r.textAlign=f.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=g.string;const{boxWidth:C,boxHeight:D,itemHeight:M}=zS(u,_),U=function(it,R,x){if(isNaN(C)||C<=0||isNaN(D)||D<0)return;r.save();const I=qt(x.lineWidth,1);if(r.fillStyle=qt(x.fillStyle,h),r.lineCap=qt(x.lineCap,"butt"),r.lineDashOffset=qt(x.lineDashOffset,0),r.lineJoin=qt(x.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=qt(x.strokeStyle,h),r.setLineDash(qt(x.lineDash,[])),u.usePointStyle){const P={radius:D*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:I},O=f.xPlus(it,C/2),k=R+T;iw(r,P,O,k,u.pointStyleWidth&&C)}else{const P=R+Math.max((_-D)/2,0),O=f.leftForLtr(it,C),k=Jo(x.borderRadius);r.beginPath(),Object.values(k).some(V=>V!==0)?Rd(r,{x:O,y:P,w:C,h:D,radius:k}):r.rect(O,P,C,D),r.fill(),I!==0&&r.stroke()}r.restore()},G=function(it,R,x){wd(r,x.text,it,R+M/2,g,{strikethrough:x.hidden,textAlign:f.textAlign(x.textAlign)})},Q=this.isHorizontal(),Z=this._computeTitleHeight();Q?S={x:Bn(o,this.left+y,this.right-n[0]),y:this.top+y+Z,line:0}:S={x:this.left+y,y:Bn(o,this.top+Z+y,this.bottom-e[0].height),line:0},cw(this.ctx,t.textDirection);const $=M+y;this.legendItems.forEach((it,R)=>{r.strokeStyle=it.fontColor,r.fillStyle=it.fontColor;const x=r.measureText(it.text).width,I=f.textAlign(it.textAlign||(it.textAlign=u.textAlign)),P=C+T+x;let O=S.x,k=S.y;f.setWidth(this.width),Q?R>0&&O+P+y>this.right&&(k=S.y+=$,S.line++,O=S.x=Bn(o,this.left+y,this.right-n[S.line])):R>0&&k+$>this.bottom&&(O=S.x=O+e[S.line].width+y,S.line++,k=S.y=Bn(o,this.top+Z+y,this.bottom-e[S.line].height));const V=f.x(O);if(U(V,k,it),O=KO(I,O+C+T,Q?O+P:this.right,t.rtl),G(f.x(O),k,it),Q)S.x+=P+y;else if(typeof it.text!="string"){const Vt=g.lineHeight;S.y+=xw(it,Vt)+y}else S.y+=$}),hw(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Cn(e.font),r=vi(e.padding);if(!e.display)return;const o=tl(t.rtl,this.left,this.width),u=this.ctx,h=e.position,f=n.size/2,g=r.top+f;let y,_=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),y=this.top+g,_=Bn(t.align,_,this.right-T);else{const C=this.columnSizes.reduce((D,M)=>Math.max(D,M.height),0);y=g+Bn(t.align,this.top,this.bottom-C-t.labels.padding-this._computeTitleHeight())}const S=Bn(h,_,_+T);u.textAlign=o.textAlign(tw(h)),u.textBaseline="middle",u.strokeStyle=e.color,u.fillStyle=e.color,u.font=n.string,wd(u,e.text,S,y,n)}_computeTitleHeight(){const t=this.options.title,e=Cn(t.font),n=vi(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,o;if(Aa(t,this.left,this.right)&&Aa(e,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(r=o[n],Aa(t,r.left,r.left+r.width)&&Aa(e,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(t){const e=this.options;if(!M5(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=R5(r,n);r&&!o&&de(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!o&&de(e.onHover,[t,n,this],this)}else n&&de(e.onClick,[t,n,this],this)}}function I5(i,t,e,n,r){const o=C5(n,i,t,e),u=D5(r,n,t.lineHeight);return{itemWidth:o,itemHeight:u}}function C5(i,t,e,n){let r=i.text;return r&&typeof r!="string"&&(r=r.reduce((o,u)=>o.length>u.length?o:u)),t+e.size/2+n.measureText(r).width}function D5(i,t,e){let n=i;return typeof t.text!="string"&&(n=xw(t,e)),n}function xw(i,t){const e=i.text?i.text.length:0;return t*e}function M5(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var V5={id:"legend",_element:LS,start(i,t,e){const n=i.legend=new LS({ctx:i.ctx,options:e,chart:i});mr.configure(i,n,e),mr.addBox(i,n)},stop(i){mr.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;mr.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,r=e.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:r,color:o,useBorderRadius:u,borderRadius:h}}=i.legend.options;return i._getSortedDatasetMetas().map(f=>{const g=f.controller.getStyle(e?0:void 0),y=vi(g.borderWidth);return{text:t[f.index].label,fillStyle:g.backgroundColor,fontColor:o,hidden:!f.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:g.borderColor,pointStyle:n||g.pointStyle,rotation:g.rotation,textAlign:r||g.textAlign,borderRadius:u&&(h||g.borderRadius),datasetIndex:f.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};const Ju={average(i){if(!i.length)return!1;let t,e,n=new Set,r=0,o=0;for(t=0,e=i.length;t<e;++t){const h=i[t].element;if(h&&h.hasValue()){const f=h.tooltipPosition();n.add(f.x),r+=f.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((h,f)=>h+f)/n.size,y:r/o}},nearest(i,t){if(!i.length)return!1;let e=t.x,n=t.y,r=Number.POSITIVE_INFINITY,o,u,h;for(o=0,u=i.length;o<u;++o){const f=i[o].element;if(f&&f.hasValue()){const g=f.getCenterPoint(),y=UO(t,g);y<r&&(r=y,h=f)}}if(h){const f=h.tooltipPosition();e=f.x,n=f.y}return{x:e,y:n}}};function qi(i,t){return t&&(Je(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function Ts(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function O5(i,t){const{element:e,datasetIndex:n,index:r}=t,o=i.getDatasetMeta(n).controller,{label:u,value:h}=o.getLabelAndValue(r);return{chart:i,label:u,parsed:o.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:h,dataset:o.getDataset(),dataIndex:r,datasetIndex:n,element:e}}function BS(i,t){const e=i.chart.ctx,{body:n,footer:r,title:o}=i,{boxWidth:u,boxHeight:h}=t,f=Cn(t.bodyFont),g=Cn(t.titleFont),y=Cn(t.footerFont),_=o.length,T=r.length,S=n.length,C=vi(t.padding);let D=C.height,M=0,U=n.reduce((Z,$)=>Z+$.before.length+$.lines.length+$.after.length,0);if(U+=i.beforeBody.length+i.afterBody.length,_&&(D+=_*g.lineHeight+(_-1)*t.titleSpacing+t.titleMarginBottom),U){const Z=t.displayColors?Math.max(h,f.lineHeight):f.lineHeight;D+=S*Z+(U-S)*f.lineHeight+(U-1)*t.bodySpacing}T&&(D+=t.footerMarginTop+T*y.lineHeight+(T-1)*t.footerSpacing);let G=0;const Q=function(Z){M=Math.max(M,e.measureText(Z).width+G)};return e.save(),e.font=g.string,ee(i.title,Q),e.font=f.string,ee(i.beforeBody.concat(i.afterBody),Q),G=t.displayColors?u+2+t.boxPadding:0,ee(n,Z=>{ee(Z.before,Q),ee(Z.lines,Q),ee(Z.after,Q)}),G=0,e.font=y.string,ee(i.footer,Q),e.restore(),M+=C.width,{width:M,height:D}}function N5(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}function P5(i,t,e,n){const{x:r,width:o}=n,u=e.caretSize+e.caretPadding;if(i==="left"&&r+o+u>t.width||i==="right"&&r-o-u<0)return!0}function k5(i,t,e,n){const{x:r,width:o}=e,{width:u,chartArea:{left:h,right:f}}=i;let g="center";return n==="center"?g=r<=(h+f)/2?"left":"right":r<=o/2?g="left":r>=u-o/2&&(g="right"),P5(g,i,t,e)&&(g="center"),g}function US(i,t,e){const n=e.yAlign||t.yAlign||N5(i,e);return{xAlign:e.xAlign||t.xAlign||k5(i,t,e,n),yAlign:n}}function z5(i,t){let{x:e,width:n}=i;return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function L5(i,t,e){let{y:n,height:r}=i;return t==="top"?n+=e:t==="bottom"?n-=r+e:n-=r/2,n}function jS(i,t,e,n){const{caretSize:r,caretPadding:o,cornerRadius:u}=i,{xAlign:h,yAlign:f}=e,g=r+o,{topLeft:y,topRight:_,bottomLeft:T,bottomRight:S}=Jo(u);let C=z5(t,h);const D=L5(t,f,g);return f==="center"?h==="left"?C+=g:h==="right"&&(C-=g):h==="left"?C-=Math.max(y,T)+r:h==="right"&&(C+=Math.max(_,S)+r),{x:In(C,0,n.width-t.width),y:In(D,0,n.height-t.height)}}function Nf(i,t,e){const n=vi(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-n.right:i.x+n.left}function FS(i){return qi([],Ts(i))}function B5(i,t,e){return Rl(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function HS(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}const ww={beforeTitle:bs,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:bs,beforeBody:bs,beforeLabel:bs,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return ue(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:bs,afterBody:bs,beforeFooter:bs,footer:bs,afterFooter:bs};function Sn(i,t,e,n){const r=i[t].call(e,n);return typeof r>"u"?ww[t].call(e,n):r}class qS extends Il{static positioners=Ju;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,o=new fw(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=B5(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,r=Sn(n,"beforeTitle",this,t),o=Sn(n,"title",this,t),u=Sn(n,"afterTitle",this,t);let h=[];return h=qi(h,Ts(r)),h=qi(h,Ts(o)),h=qi(h,Ts(u)),h}getBeforeBody(t,e){return FS(Sn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,r=[];return ee(t,o=>{const u={before:[],lines:[],after:[]},h=HS(n,o);qi(u.before,Ts(Sn(h,"beforeLabel",this,o))),qi(u.lines,Sn(h,"label",this,o)),qi(u.after,Ts(Sn(h,"afterLabel",this,o))),r.push(u)}),r}getAfterBody(t,e){return FS(Sn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,r=Sn(n,"beforeFooter",this,t),o=Sn(n,"footer",this,t),u=Sn(n,"afterFooter",this,t);let h=[];return h=qi(h,Ts(r)),h=qi(h,Ts(o)),h=qi(h,Ts(u)),h}_createItems(t){const e=this._active,n=this.chart.data,r=[],o=[],u=[];let h=[],f,g;for(f=0,g=e.length;f<g;++f)h.push(O5(this.chart,e[f]));return t.filter&&(h=h.filter((y,_,T)=>t.filter(y,_,T,n))),t.itemSort&&(h=h.sort((y,_)=>t.itemSort(y,_,n))),ee(h,y=>{const _=HS(t.callbacks,y);r.push(Sn(_,"labelColor",this,y)),o.push(Sn(_,"labelPointStyle",this,y)),u.push(Sn(_,"labelTextColor",this,y))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=u,this.dataPoints=h,h}update(t,e){const n=this.options.setContext(this.getContext()),r=this._active;let o,u=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const h=Ju[n.position].call(this,r,this._eventPosition);u=this._createItems(n),this.title=this.getTitle(u,n),this.beforeBody=this.getBeforeBody(u,n),this.body=this.getBody(u,n),this.afterBody=this.getAfterBody(u,n),this.footer=this.getFooter(u,n);const f=this._size=BS(this,n),g=Object.assign({},h,f),y=US(this.chart,n,g),_=jS(n,g,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,o={opacity:1,x:_.x,y:_.y,width:f.width,height:f.height,caretX:h.x,caretY:h.y}}this._tooltipItems=u,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,r){const o=this.getCaretPosition(t,n,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,n){const{xAlign:r,yAlign:o}=this,{caretSize:u,cornerRadius:h}=n,{topLeft:f,topRight:g,bottomLeft:y,bottomRight:_}=Jo(h),{x:T,y:S}=t,{width:C,height:D}=e;let M,U,G,Q,Z,$;return o==="center"?(Z=S+D/2,r==="left"?(M=T,U=M-u,Q=Z+u,$=Z-u):(M=T+C,U=M+u,Q=Z-u,$=Z+u),G=M):(r==="left"?U=T+Math.max(f,y)+u:r==="right"?U=T+C-Math.max(g,_)-u:U=this.caretX,o==="top"?(Q=S,Z=Q-u,M=U-u,G=U+u):(Q=S+D,Z=Q+u,M=U+u,G=U-u),$=Q),{x1:M,x2:U,x3:G,y1:Q,y2:Z,y3:$}}drawTitle(t,e,n){const r=this.title,o=r.length;let u,h,f;if(o){const g=tl(n.rtl,this.x,this.width);for(t.x=Nf(this,n.titleAlign,n),e.textAlign=g.textAlign(n.titleAlign),e.textBaseline="middle",u=Cn(n.titleFont),h=n.titleSpacing,e.fillStyle=n.titleColor,e.font=u.string,f=0;f<o;++f)e.fillText(r[f],g.x(t.x),t.y+u.lineHeight/2),t.y+=u.lineHeight+h,f+1===o&&(t.y+=n.titleMarginBottom-h)}}_drawColorBox(t,e,n,r,o){const u=this.labelColors[n],h=this.labelPointStyles[n],{boxHeight:f,boxWidth:g}=o,y=Cn(o.bodyFont),_=Nf(this,"left",o),T=r.x(_),S=f<y.lineHeight?(y.lineHeight-f)/2:0,C=e.y+S;if(o.usePointStyle){const D={radius:Math.min(g,f)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},M=r.leftForLtr(T,g)+g/2,U=C+f/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,sS(t,D,M,U),t.strokeStyle=u.borderColor,t.fillStyle=u.backgroundColor,sS(t,D,M,U)}else{t.lineWidth=Gt(u.borderWidth)?Math.max(...Object.values(u.borderWidth)):u.borderWidth||1,t.strokeStyle=u.borderColor,t.setLineDash(u.borderDash||[]),t.lineDashOffset=u.borderDashOffset||0;const D=r.leftForLtr(T,g),M=r.leftForLtr(r.xPlus(T,1),g-2),U=Jo(u.borderRadius);Object.values(U).some(G=>G!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Rd(t,{x:D,y:C,w:g,h:f,radius:U}),t.fill(),t.stroke(),t.fillStyle=u.backgroundColor,t.beginPath(),Rd(t,{x:M,y:C+1,w:g-2,h:f-2,radius:U}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(D,C,g,f),t.strokeRect(D,C,g,f),t.fillStyle=u.backgroundColor,t.fillRect(M,C+1,g-2,f-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:r}=this,{bodySpacing:o,bodyAlign:u,displayColors:h,boxHeight:f,boxWidth:g,boxPadding:y}=n,_=Cn(n.bodyFont);let T=_.lineHeight,S=0;const C=tl(n.rtl,this.x,this.width),D=function(x){e.fillText(x,C.x(t.x+S),t.y+T/2),t.y+=T+o},M=C.textAlign(u);let U,G,Q,Z,$,it,R;for(e.textAlign=u,e.textBaseline="middle",e.font=_.string,t.x=Nf(this,M,n),e.fillStyle=n.bodyColor,ee(this.beforeBody,D),S=h&&M!=="right"?u==="center"?g/2+y:g+2+y:0,Z=0,it=r.length;Z<it;++Z){for(U=r[Z],G=this.labelTextColors[Z],e.fillStyle=G,ee(U.before,D),Q=U.lines,h&&Q.length&&(this._drawColorBox(e,t,Z,C,n),T=Math.max(_.lineHeight,f)),$=0,R=Q.length;$<R;++$)D(Q[$]),T=_.lineHeight;ee(U.after,D)}S=0,T=_.lineHeight,ee(this.afterBody,D),t.y-=o}drawFooter(t,e,n){const r=this.footer,o=r.length;let u,h;if(o){const f=tl(n.rtl,this.x,this.width);for(t.x=Nf(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=f.textAlign(n.footerAlign),e.textBaseline="middle",u=Cn(n.footerFont),e.fillStyle=n.footerColor,e.font=u.string,h=0;h<o;++h)e.fillText(r[h],f.x(t.x),t.y+u.lineHeight/2),t.y+=u.lineHeight+n.footerSpacing}}drawBackground(t,e,n,r){const{xAlign:o,yAlign:u}=this,{x:h,y:f}=t,{width:g,height:y}=n,{topLeft:_,topRight:T,bottomLeft:S,bottomRight:C}=Jo(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(h+_,f),u==="top"&&this.drawCaret(t,e,n,r),e.lineTo(h+g-T,f),e.quadraticCurveTo(h+g,f,h+g,f+T),u==="center"&&o==="right"&&this.drawCaret(t,e,n,r),e.lineTo(h+g,f+y-C),e.quadraticCurveTo(h+g,f+y,h+g-C,f+y),u==="bottom"&&this.drawCaret(t,e,n,r),e.lineTo(h+S,f+y),e.quadraticCurveTo(h,f+y,h,f+y-S),u==="center"&&o==="left"&&this.drawCaret(t,e,n,r),e.lineTo(h,f+_),e.quadraticCurveTo(h,f,h+_,f),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,r=n&&n.x,o=n&&n.y;if(r||o){const u=Ju[t.position].call(this,this._active,this._eventPosition);if(!u)return;const h=this._size=BS(this,t),f=Object.assign({},u,this._size),g=US(e,t,f),y=jS(t,f,g,e);(r._to!==y.x||o._to!==y.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=h.width,this.height=h.height,this.caretX=u.x,this.caretY=u.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const u=vi(e.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&h&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,r,e),cw(t,e.textDirection),o.y+=u.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),hw(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,r=t.map(({datasetIndex:h,index:f})=>{const g=this.chart.getDatasetMeta(h);if(!g)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:g.data[f],index:f}}),o=!Td(n,r),u=this._positionChanged(r,e);(o||u)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],u=this._getActiveElements(t,o,e,n),h=this._positionChanged(u,t),f=e||!Td(u,o)||h;return f&&(this._active=u,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),f}_getActiveElements(t,e,n,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const u=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&u.reverse(),u}_positionChanged(t,e){const{caretX:n,caretY:r,options:o}=this,u=Ju[o.position].call(this,t,e);return u!==!1&&(n!==u.x||r!==u.y)}}var U5={id:"tooltip",_element:qS,positioners:Ju,afterInit(i,t,e){e&&(i.tooltip=new qS({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){const e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ww},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const j5=(i,t,e,n)=>(typeof t=="string"?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function F5(i,t,e,n){const r=i.indexOf(t);if(r===-1)return j5(i,t,e,n);const o=i.lastIndexOf(t);return r!==o?e:r}const H5=(i,t)=>i===null?null:In(Math.round(i),0,t);function GS(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class q5 extends Cl{static id="category";static defaults={ticks:{callback:GS}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:r,label:o}of e)n[r]===o&&n.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ue(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:F5(n,t,qt(e,t),this._addedLabels),H5(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let u=t;u<=e;u++)r.push({value:u});return r}getLabelForValue(t){return GS.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function G5(i,t){const e=[],{bounds:r,step:o,min:u,max:h,precision:f,count:g,maxTicks:y,maxDigits:_,includeBounds:T}=i,S=o||1,C=y-1,{min:D,max:M}=t,U=!ue(u),G=!ue(h),Q=!ue(g),Z=(M-D)/(_+1);let $=XE((M-D)/C/S)*S,it,R,x,I;if($<1e-14&&!U&&!G)return[{value:D},{value:M}];I=Math.ceil(M/$)-Math.floor(D/$),I>C&&($=XE(I*$/C/S)*S),ue(f)||(it=Math.pow(10,f),$=Math.ceil($*it)/it),r==="ticks"?(R=Math.floor(D/$)*$,x=Math.ceil(M/$)*$):(R=D,x=M),U&&G&&o&&zO((h-u)/o,$/1e3)?(I=Math.round(Math.min((h-u)/$,y)),$=(h-u)/I,R=u,x=h):Q?(R=U?u:R,x=G?h:x,I=g-1,$=(x-R)/I):(I=(x-R)/$,Qf(I,Math.round(I),$/1e3)?I=Math.round(I):I=Math.ceil(I));const P=Math.max(WE($),WE(R));it=Math.pow(10,ue(f)?P:f),R=Math.round(R*it)/it,x=Math.round(x*it)/it;let O=0;for(U&&(T&&R!==u?(e.push({value:u}),R<u&&O++,Qf(Math.round((R+O*$)*it)/it,u,KS(u,Z,i))&&O++):R<u&&O++);O<I;++O){const k=Math.round((R+O*$)*it)/it;if(G&&k>h)break;e.push({value:k})}return G&&T&&x!==h?e.length&&Qf(e[e.length-1].value,h,KS(h,Z,i))?e[e.length-1].value=h:e.push({value:h}):(!G||x===h)&&e.push({value:x}),e}function KS(i,t,{horizontal:e,minRotation:n}){const r=As(n),o=(e?Math.sin(r):Math.cos(r))||.001,u=.75*t*(""+i).length;return Math.min(t/o,u)}class K5 extends Cl{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ue(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:o}=this;const u=f=>r=e?r:f,h=f=>o=n?o:f;if(t){const f=Ar(r),g=Ar(o);f<0&&g<0?h(0):f>0&&g>0&&u(0)}if(r===o){let f=o===0?1:Math.abs(o*.05);h(o+f),t||u(r-f)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:n}=t,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,u=G5(r,o);return t.bounds==="ticks"&&LO(u,this,"value"),t.reverse?(u.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),u}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return __(t,this.chart.options.locale,this.options.ticks.format)}}class Y5 extends K5{static id="linear";static defaults={ticks:{callback:nw.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ai(t)?t:0,this.max=ai(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=As(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const eg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},xn=Object.keys(eg);function YS(i,t){return i-t}function QS(i,t){if(ue(t))return null;const e=i._adapter,{parser:n,round:r,isoWeekday:o}=i._parseOpts;let u=t;return typeof n=="function"&&(u=n(u)),ai(u)||(u=typeof n=="string"?e.parse(u,n):e.parse(u)),u===null?null:(r&&(u=r==="week"&&(Ad(o)||o===!0)?e.startOf(u,"isoWeek",o):e.startOf(u,r)),+u)}function XS(i,t,e,n){const r=xn.length;for(let o=xn.indexOf(i);o<r-1;++o){const u=eg[xn[o]],h=u.steps?u.steps:Number.MAX_SAFE_INTEGER;if(u.common&&Math.ceil((e-t)/(h*u.size))<=n)return xn[o]}return xn[r-1]}function Q5(i,t,e,n,r){for(let o=xn.length-1;o>=xn.indexOf(e);o--){const u=xn[o];if(eg[u].common&&i._adapter.diff(r,n,u)>=t-1)return u}return xn[e?xn.indexOf(e):0]}function X5(i){for(let t=xn.indexOf(i)+1,e=xn.length;t<e;++t)if(eg[xn[t]].common)return xn[t]}function WS(i,t,e){if(!e)i[t]=!0;else if(e.length){const{lo:n,hi:r}=y_(e,t),o=e[n]>=t?e[n]:e[r];i[o]=!0}}function W5(i,t,e,n){const r=i._adapter,o=+r.startOf(t[0].value,n),u=t[t.length-1].value;let h,f;for(h=o;h<=u;h=+r.add(h,1,n))f=e[h],f>=0&&(t[f].major=!0);return t}function $S(i,t,e){const n=[],r={},o=t.length;let u,h;for(u=0;u<o;++u)h=t[u],r[h]=u,n.push({value:h,major:!1});return o===0||!e?n:W5(i,n,r,e)}class ZS extends Cl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),r=this._adapter=new r4._date(t.adapters.date);r.init(e),cc(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:QS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:r,max:o,minDefined:u,maxDefined:h}=this.getUserBounds();function f(g){!u&&!isNaN(g.min)&&(r=Math.min(r,g.min)),!h&&!isNaN(g.max)&&(o=Math.max(o,g.max))}(!u||!h)&&(f(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&f(this.getMinMax(!1))),r=ai(r)&&!isNaN(r)?r:+e.startOf(Date.now(),n),o=ai(o)&&!isNaN(o)?o:+e.endOf(Date.now(),n)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,u=this.max,h=HO(r,o,u);return this._unit=e.unit||(n.autoSkip?XS(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):Q5(this,h.length,e.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:X5(this._unit),this.initOffsets(r),t.reverse&&h.reverse(),$S(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,n=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);const u=t.length<3?.5:.25;e=In(e,0,u),n=In(n,0,u),this._offsets={start:e,end:n,factor:1/(e+1+n)}}_generate(){const t=this._adapter,e=this.min,n=this.max,r=this.options,o=r.time,u=o.unit||XS(o.minUnit,e,n,this._getLabelCapacity(e)),h=qt(r.ticks.stepSize,1),f=u==="week"?o.isoWeekday:!1,g=Ad(f)||f===!0,y={};let _=e,T,S;if(g&&(_=+t.startOf(_,"isoWeek",f)),_=+t.startOf(_,g?"day":u),t.diff(n,e,u)>1e5*h)throw new Error(e+" and "+n+" are too far apart with stepSize of "+h+" "+u);const C=r.ticks.source==="data"&&this.getDataTimestamps();for(T=_,S=0;T<n;T=+t.add(T,h,u),S++)WS(y,T,C);return(T===n||r.bounds==="ticks"||S===1)&&WS(y,T,C),Object.keys(y).sort(YS).map(D=>+D)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,u=e||r[o];return this._adapter.format(t,u)}_tickFormatFunction(t,e,n,r){const o=this.options,u=o.ticks.callback;if(u)return de(u,[t,e,n],this);const h=o.time.displayFormats,f=this._unit,g=this._majorUnit,y=f&&h[f],_=g&&h[g],T=n[e],S=g&&_&&T&&T.major;return this._adapter.format(t,r||(S?_:y))}generateTickLabels(t){let e,n,r;for(e=0,n=t.length;e<n;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,r=As(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),u=Math.sin(r),h=this._resolveTickFontOptions(0).size;return{w:n*o+h*u,h:n*u+h*o}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,o=this._tickFormatFunction(t,0,$S(this,[t],this._majorUnit),r),u=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/u.w:this.height/u.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],e,n;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,n=r.length;e<n;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const r=this.getLabels();for(e=0,n=r.length;e<n;++e)t.push(QS(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return $x(t.sort(YS))}}function Pf(i,t,e){let n=0,r=i.length-1,o,u,h,f;e?(t>=i[n].pos&&t<=i[r].pos&&({lo:n,hi:r}=fy(i,"pos",t)),{pos:o,time:h}=i[n],{pos:u,time:f}=i[r]):(t>=i[n].time&&t<=i[r].time&&({lo:n,hi:r}=fy(i,"time",t)),{time:o,pos:h}=i[n],{time:u,pos:f}=i[r]);const g=u-o;return g?h+(f-h)*(t-o)/g:h}class o6 extends ZS{static id="timeseries";static defaults=ZS.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Pf(e,this.min),this._tableRange=Pf(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],o=[];let u,h,f,g,y;for(u=0,h=t.length;u<h;++u)g=t[u],g>=e&&g<=n&&r.push(g);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(u=0,h=r.length;u<h;++u)y=r[u+1],f=r[u-1],g=r[u],Math.round((y+f)/2)!==g&&o.push({time:g,pos:u/(h-1)});return o}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Pf(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Pf(this._table,n*this._tableRange+this._minPos,!0)}}const Rw="label";function JS(i,t){typeof i=="function"?i(t):i&&(i.current=t)}function $5(i,t){const e=i.options;e&&t&&Object.assign(e,t)}function Iw(i,t){i.labels=t}function Cw(i,t,e=Rw){const n=[];i.datasets=t.map(r=>{const o=i.datasets.find(u=>u[e]===r[e]);return!o||!r.data||n.includes(o)?{...r}:(n.push(o),Object.assign(o,r),o)})}function Z5(i,t=Rw){const e={labels:[],datasets:[]};return Iw(e,i.labels),Cw(e,i.datasets,t),e}function J5(i,t){const{height:e=150,width:n=300,redraw:r=!1,datasetIdKey:o,type:u,data:h,options:f,plugins:g=[],fallbackContent:y,updateMode:_,...T}=i,S=Ht.useRef(null),C=Ht.useRef(null),D=()=>{S.current&&(C.current=new tg(S.current,{type:u,data:Z5(h,o),options:f&&{...f},plugins:g}),JS(t,C.current))},M=()=>{JS(t,null),C.current&&(C.current.destroy(),C.current=null)};return Ht.useEffect(()=>{!r&&C.current&&f&&$5(C.current,f)},[r,f]),Ht.useEffect(()=>{!r&&C.current&&Iw(C.current.config.data,h.labels)},[r,h.labels]),Ht.useEffect(()=>{!r&&C.current&&h.datasets&&Cw(C.current.config.data,h.datasets,o)},[r,h.datasets]),Ht.useEffect(()=>{C.current&&(r?(M(),setTimeout(D)):C.current.update(_))},[r,f,h.labels,h.datasets,_]),Ht.useEffect(()=>{C.current&&(M(),setTimeout(D))},[u]),Ht.useEffect(()=>(D(),()=>M()),[]),at.jsx("canvas",{ref:S,role:"img",height:e,width:n,...T,children:y})}const t6=Ht.forwardRef(J5);function Dw(i,t){return tg.register(t),Ht.forwardRef((e,n)=>at.jsx(t6,{...e,ref:n,type:i}))}const t1=Dw("bar",e4),e6=Dw("pie",s4);tg.register(v5,U5,V5,q5,Y5,w5);const n6=()=>{const{currentUser:i,logout:t}=yy(),[e,n]=Ht.useState([]),[r,o]=Ht.useState(!0),[u,h]=Ht.useState("month"),[f,g]=Ht.useState(!1);Ht.useEffect(()=>{const Z=RV(wx(Bc,"expenses"),IV("date","desc")),$=NV(Z,it=>{g(it.metadata.fromCache);const R=it.docs.map(x=>({id:x.id,...x.data()}));n(R),o(!1)},it=>{console.error("Firestore Error:",it),it.code==="permission-denied"?alert("ERRO DE PERMISSO: O Firebase recusou a conexo. Verifique se as regras esto como 'allow read, write: if true;'."):it.code==="not-found"?alert("ERRO: Banco de dados no encontrado. Crie o 'Cloud Firestore' no console."):alert("Erro de Conexo: "+it.message),o(!1)});return()=>$()},[]);const y=u==="month"?e.filter(Z=>Z.date.startsWith(new Date().toISOString().slice(0,7))):e,_=y.reduce((Z,$)=>Z+$.amount,0),T=y.reduce((Z,$)=>(Z[$.category]=(Z[$.category]||0)+$.amount,Z),{}),S={labels:Object.keys(T),datasets:[{data:Object.values(T),backgroundColor:Object.keys(T).map(Z=>jE[Z]||"#94a3b8"),borderWidth:0}]},C=y.reduce((Z,$)=>(Z[$.userName]=(Z[$.userName]||0)+$.amount,Z),{}),D={labels:Object.keys(C),datasets:[{label:"Spent",data:Object.values(C),backgroundColor:"#f472b6",borderRadius:6}]},M={plugins:{legend:{position:"bottom",labels:{color:"#94a3b8"}}},scales:{y:{ticks:{color:"#94a3b8"},grid:{color:"rgba(255,255,255,0.05)"}},x:{ticks:{color:"#94a3b8"},grid:{display:!1}}}},[U,G]=Ht.useState(null);Ht.useEffect(()=>{const Z=()=>{const $=[];for(let x=11;x>=0;x--){const I=new Date;I.setMonth(I.getMonth()-x),$.push(I.toISOString().slice(0,7))}const it=$.reduce((x,I)=>(x[I]={},x),{});e.forEach(x=>{const I=x.date.slice(0,7);it[I]&&(it[I][x.category]=(it[I][x.category]||0)+x.amount)});const R=cy.map(x=>({label:x,data:$.map(I=>it[I][x]||0),backgroundColor:jE[x]||"#94a3b8",stack:"Stack 0"}));G({labels:$,datasets:R})};e.length>0&&Z()},[e]);const Q={plugins:{legend:{position:"bottom",labels:{color:"#94a3b8"}}},scales:{y:{stacked:!0,ticks:{color:"#94a3b8"},grid:{color:"rgba(255,255,255,0.05)"}},x:{stacked:!0,ticks:{color:"#94a3b8"},grid:{display:!1}}},responsive:!0,maintainAspectRatio:!1};return at.jsxs("div",{className:"container",children:[at.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[at.jsxs("div",{children:[at.jsx("h2",{style:{marginBottom:"5px"},children:"Despesas da Casa"}),at.jsxs("p",{style:{color:"var(--color-text-muted)",margin:0},children:["Bem-vindo, ",i.name]})]}),at.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[at.jsx("div",{style:{padding:"6px 12px",borderRadius:"20px",background:f?"rgba(234, 179, 8, 0.2)":"rgba(34, 197, 94, 0.2)",color:f?"#facc15":"#4ade80",fontSize:"0.85em",border:`1px solid ${f?"rgba(234, 179, 8, 0.3)":"rgba(34, 197, 94, 0.3)"}`},children:f?" Offline (No sincronizado)":" Online (Sincronizado)"}),at.jsxs("button",{onClick:t,className:"glass-panel",style:{padding:"8px 12px",color:"var(--color-text-muted)",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[at.jsx(tO,{size:16})," Sair"]})]})]}),at.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginBottom:"30px"},children:[at.jsxs("div",{className:"glass-panel",style:{padding:"20px",display:"flex",flexDirection:"column",justifyContent:"center",position:"relative"},children:[at.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[at.jsx("span",{style:{color:"var(--color-text-muted)",fontSize:"0.9em"},children:u==="month"?"Total Este Ms":"Total Geral"}),at.jsx("button",{onClick:()=>h(Z=>Z==="month"?"all":"month"),style:{background:"rgba(255,255,255,0.1)",border:"none",color:"var(--color-text-muted)",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",title:u==="month"?"Ver Total Geral":"Ver Apenas Este Ms"},children:u==="month"?at.jsx(WV,{size:16}):at.jsx(qV,{size:16})})]}),at.jsxs("span",{style:{fontSize:"2.5em",fontWeight:"800",color:"white"},children:["",_.toFixed(2)]}),at.jsx("div",{style:{fontSize:"0.8em",color:u==="month"?"#4ade80":"#facc15",marginTop:"5px"},children:u==="month"?"Exibindo apenas ms atual":"Exibindo todo o histrico"})]}),at.jsx("div",{style:{gridRow:"span 2"},children:at.jsx(iO,{})}),at.jsxs("div",{className:"glass-panel",style:{padding:"20px",minHeight:"300px"},children:[at.jsxs("h4",{style:{marginBottom:"15px"},children:["Por Categoria (",u==="month"?"Ms":"Total",")"]}),at.jsx(e6,{data:S,options:{plugins:{legend:{position:"right",labels:{color:"#fff"}}}}})]}),at.jsxs("div",{className:"glass-panel",style:{padding:"20px",minHeight:"300px"},children:[at.jsxs("h4",{style:{marginBottom:"15px"},children:["Gastos por Pessoa (",u==="month"?"Ms":"Total",")"]}),Object.keys(C).length>0?at.jsx(t1,{data:D,options:M}):at.jsx("p",{className:"text-muted",children:"Sem dados ainda"})]}),at.jsxs("div",{className:"glass-panel",style:{padding:"20px",minHeight:"300px",gridColumn:"1 / -1"},children:[at.jsx("h4",{style:{marginBottom:"15px"},children:"Histrico Global (ltimos 12 Meses)"}),at.jsx("div",{style:{height:"300px"},children:U?at.jsx(t1,{data:U,options:Q}):at.jsx("p",{className:"text-muted",children:"Adicione despesas para ver o histrico"})})]})]}),at.jsx(sO,{expenses:e})]})},i6=()=>{const{currentUser:i,login:t}=yy();return Bc.app.options.apiKey!=="YOUR_API_KEY_HERE"?i?at.jsx(n6,{}):at.jsx("div",{className:"container flex-center",style:{minHeight:"100vh",flexDirection:"column"},children:at.jsxs("div",{className:"glass-panel",style:{padding:"40px",width:"100%",maxWidth:"400px",textAlign:"center"},children:[at.jsx("h2",{children:"Welcome Home"}),at.jsx("p",{style:{color:"var(--color-text-muted)",marginBottom:"30px"},children:"Who is spending money today?"}),at.jsx("div",{style:{display:"grid",gap:"15px"},children:Mp.map(n=>at.jsxs("button",{onClick:()=>t(n.id),className:"btn-primary",style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)"},children:[n.avatar," ",n.name]},n.id))})]})}):at.jsx("div",{className:"container flex-center",style:{minHeight:"100vh",flexDirection:"column",textAlign:"center"},children:at.jsxs("div",{className:"glass-panel",style:{padding:"40px"},children:[at.jsx("h1",{style:{color:"var(--color-accent)"},children:"Configurao Necessria"}),at.jsxs("p",{children:["Por favor configure suas chaves do Firebase em ",at.jsx("code",{children:"src/services/firebase.js"})]}),at.jsx("p",{className:"text-muted",children:"Voc solicitou executar isso, ento preciso das chaves para prosseguir com o Banco de Dados."})]})})};function s6(){return at.jsx(yR,{children:at.jsx(i6,{})})}pR.createRoot(document.getElementById("root")).render(at.jsx(Ht.StrictMode,{children:at.jsx(s6,{})}));
