(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var tp={exports:{}},Ou={};var Qv;function rR(){if(Qv)return Ou;Qv=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,r,o){var u=null;if(o!==void 0&&(u=""+o),r.key!==void 0&&(u=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:i,type:n,key:u,ref:r!==void 0?r:null,props:o}}return Ou.Fragment=t,Ou.jsx=e,Ou.jsxs=e,Ou}var Xv;function aR(){return Xv||(Xv=1,tp.exports=rR()),tp.exports}var ot=aR(),ep={exports:{}},Rt={};var Wv;function oR(){if(Wv)return Rt;Wv=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function S(z){return z===null||typeof z!="object"?null:(z=T&&z[T]||z["@@iterator"],typeof z=="function"?z:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,M={};function B(z,tt,ct){this.props=z,this.context=tt,this.refs=M,this.updater=ct||D}B.prototype.isReactComponent={},B.prototype.setState=function(z,tt){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,tt,"setState")},B.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function j(){}j.prototype=B.prototype;function K(z,tt,ct){this.props=z,this.context=tt,this.refs=M,this.updater=ct||D}var it=K.prototype=new j;it.constructor=K,C(it,B.prototype),it.isPureReactComponent=!0;var Z=Array.isArray;function st(){}var R={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function I(z,tt,ct){var ft=ct.ref;return{$$typeof:i,type:z,key:tt,ref:ft!==void 0?ft:null,props:ct}}function P(z,tt){return I(z.type,tt,z.props)}function O(z){return typeof z=="object"&&z!==null&&z.$$typeof===i}function k(z){var tt={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ct){return tt[ct]})}var V=/\/+/g;function Vt(z,tt){return typeof z=="object"&&z!==null&&z.key!=null?k(""+z.key):tt.toString(36)}function xt(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(st,st):(z.status="pending",z.then(function(tt){z.status==="pending"&&(z.status="fulfilled",z.value=tt)},function(tt){z.status==="pending"&&(z.status="rejected",z.reason=tt)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Q(z,tt,ct,ft,Tt){var At=typeof z;(At==="undefined"||At==="boolean")&&(z=null);var Ut=!1;if(z===null)Ut=!0;else switch(At){case"bigint":case"string":case"number":Ut=!0;break;case"object":switch(z.$$typeof){case i:case t:Ut=!0;break;case y:return Ut=z._init,Q(Ut(z._payload),tt,ct,ft,Tt)}}if(Ut)return Tt=Tt(z),Ut=ft===""?"."+Vt(z,0):ft,Z(Tt)?(ct="",Ut!=null&&(ct=Ut.replace(V,"$&/")+"/"),Q(Tt,tt,ct,"",function(Nr){return Nr})):Tt!=null&&(O(Tt)&&(Tt=P(Tt,ct+(Tt.key==null||z&&z.key===Tt.key?"":(""+Tt.key).replace(V,"$&/")+"/")+Ut)),tt.push(Tt)),1;Ut=0;var Fe=ft===""?".":ft+":";if(Z(z))for(var me=0;me<z.length;me++)ft=z[me],At=Fe+Vt(ft,me),Ut+=Q(ft,tt,ct,At,Tt);else if(me=S(z),typeof me=="function")for(z=me.call(z),me=0;!(ft=z.next()).done;)ft=ft.value,At=Fe+Vt(ft,me++),Ut+=Q(ft,tt,ct,At,Tt);else if(At==="object"){if(typeof z.then=="function")return Q(xt(z),tt,ct,ft,Tt);throw tt=String(z),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return Ut}function at(z,tt,ct){if(z==null)return z;var ft=[],Tt=0;return Q(z,ft,"","",function(At){return tt.call(ct,At,Tt++)}),ft}function gt(z){if(z._status===-1){var tt=z._result;tt=tt(),tt.then(function(ct){(z._status===0||z._status===-1)&&(z._status=1,z._result=ct)},function(ct){(z._status===0||z._status===-1)&&(z._status=2,z._result=ct)}),z._status===-1&&(z._status=0,z._result=tt)}if(z._status===1)return z._result.default;throw z._result}var St=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Pt={map:at,forEach:function(z,tt,ct){at(z,function(){tt.apply(this,arguments)},ct)},count:function(z){var tt=0;return at(z,function(){tt++}),tt},toArray:function(z){return at(z,function(tt){return tt})||[]},only:function(z){if(!O(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Rt.Activity=_,Rt.Children=Pt,Rt.Component=B,Rt.Fragment=e,Rt.Profiler=r,Rt.PureComponent=K,Rt.StrictMode=n,Rt.Suspense=f,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return R.H.useMemoCache(z)}},Rt.cache=function(z){return function(){return z.apply(null,arguments)}},Rt.cacheSignal=function(){return null},Rt.cloneElement=function(z,tt,ct){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ft=C({},z.props),Tt=z.key;if(tt!=null)for(At in tt.key!==void 0&&(Tt=""+tt.key),tt)!w.call(tt,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&tt.ref===void 0||(ft[At]=tt[At]);var At=arguments.length-2;if(At===1)ft.children=ct;else if(1<At){for(var Ut=Array(At),Fe=0;Fe<At;Fe++)Ut[Fe]=arguments[Fe+2];ft.children=Ut}return I(z.type,Tt,ft)},Rt.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},Rt.createElement=function(z,tt,ct){var ft,Tt={},At=null;if(tt!=null)for(ft in tt.key!==void 0&&(At=""+tt.key),tt)w.call(tt,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(Tt[ft]=tt[ft]);var Ut=arguments.length-2;if(Ut===1)Tt.children=ct;else if(1<Ut){for(var Fe=Array(Ut),me=0;me<Ut;me++)Fe[me]=arguments[me+2];Tt.children=Fe}if(z&&z.defaultProps)for(ft in Ut=z.defaultProps,Ut)Tt[ft]===void 0&&(Tt[ft]=Ut[ft]);return I(z,At,Tt)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(z){return{$$typeof:h,render:z}},Rt.isValidElement=O,Rt.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:gt}},Rt.memo=function(z,tt){return{$$typeof:g,type:z,compare:tt===void 0?null:tt}},Rt.startTransition=function(z){var tt=R.T,ct={};R.T=ct;try{var ft=z(),Tt=R.S;Tt!==null&&Tt(ct,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(st,St)}catch(At){St(At)}finally{tt!==null&&ct.types!==null&&(tt.types=ct.types),R.T=tt}},Rt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Rt.use=function(z){return R.H.use(z)},Rt.useActionState=function(z,tt,ct){return R.H.useActionState(z,tt,ct)},Rt.useCallback=function(z,tt){return R.H.useCallback(z,tt)},Rt.useContext=function(z){return R.H.useContext(z)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(z,tt){return R.H.useDeferredValue(z,tt)},Rt.useEffect=function(z,tt){return R.H.useEffect(z,tt)},Rt.useEffectEvent=function(z){return R.H.useEffectEvent(z)},Rt.useId=function(){return R.H.useId()},Rt.useImperativeHandle=function(z,tt,ct){return R.H.useImperativeHandle(z,tt,ct)},Rt.useInsertionEffect=function(z,tt){return R.H.useInsertionEffect(z,tt)},Rt.useLayoutEffect=function(z,tt){return R.H.useLayoutEffect(z,tt)},Rt.useMemo=function(z,tt){return R.H.useMemo(z,tt)},Rt.useOptimistic=function(z,tt){return R.H.useOptimistic(z,tt)},Rt.useReducer=function(z,tt,ct){return R.H.useReducer(z,tt,ct)},Rt.useRef=function(z){return R.H.useRef(z)},Rt.useState=function(z){return R.H.useState(z)},Rt.useSyncExternalStore=function(z,tt,ct){return R.H.useSyncExternalStore(z,tt,ct)},Rt.useTransition=function(){return R.H.useTransition()},Rt.version="19.2.3",Rt}var $v;function my(){return $v||($v=1,ep.exports=oR()),ep.exports}var Yt=my(),np={exports:{}},Nu={},ip={exports:{}},sp={};var Zv;function lR(){return Zv||(Zv=1,(function(i){function t(Q,at){var gt=Q.length;Q.push(at);t:for(;0<gt;){var St=gt-1>>>1,Pt=Q[St];if(0<r(Pt,at))Q[St]=at,Q[gt]=Pt,gt=St;else break t}}function e(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var at=Q[0],gt=Q.pop();if(gt!==at){Q[0]=gt;t:for(var St=0,Pt=Q.length,z=Pt>>>1;St<z;){var tt=2*(St+1)-1,ct=Q[tt],ft=tt+1,Tt=Q[ft];if(0>r(ct,gt))ft<Pt&&0>r(Tt,ct)?(Q[St]=Tt,Q[ft]=gt,St=ft):(Q[St]=ct,Q[tt]=gt,St=tt);else if(ft<Pt&&0>r(Tt,gt))Q[St]=Tt,Q[ft]=gt,St=ft;else break t}}return at}function r(Q,at){var gt=Q.sortIndex-at.sortIndex;return gt!==0?gt:Q.id-at.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var f=[],g=[],y=1,_=null,T=3,S=!1,D=!1,C=!1,M=!1,B=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function it(Q){for(var at=e(g);at!==null;){if(at.callback===null)n(g);else if(at.startTime<=Q)n(g),at.sortIndex=at.expirationTime,t(f,at);else break;at=e(g)}}function Z(Q){if(C=!1,it(Q),!D)if(e(f)!==null)D=!0,st||(st=!0,k());else{var at=e(g);at!==null&&xt(Z,at.startTime-Q)}}var st=!1,R=-1,w=5,I=-1;function P(){return M?!0:!(i.unstable_now()-I<w)}function O(){if(M=!1,st){var Q=i.unstable_now();I=Q;var at=!0;try{t:{D=!1,C&&(C=!1,j(R),R=-1),S=!0;var gt=T;try{e:{for(it(Q),_=e(f);_!==null&&!(_.expirationTime>Q&&P());){var St=_.callback;if(typeof St=="function"){_.callback=null,T=_.priorityLevel;var Pt=St(_.expirationTime<=Q);if(Q=i.unstable_now(),typeof Pt=="function"){_.callback=Pt,it(Q),at=!0;break e}_===e(f)&&n(f),it(Q)}else n(f);_=e(f)}if(_!==null)at=!0;else{var z=e(g);z!==null&&xt(Z,z.startTime-Q),at=!1}}break t}finally{_=null,T=gt,S=!1}at=void 0}}finally{at?k():st=!1}}}var k;if(typeof K=="function")k=function(){K(O)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Vt=V.port2;V.port1.onmessage=O,k=function(){Vt.postMessage(null)}}else k=function(){B(O,0)};function xt(Q,at){R=B(function(){Q(i.unstable_now())},at)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(Q){switch(T){case 1:case 2:case 3:var at=3;break;default:at=T}var gt=T;T=at;try{return Q()}finally{T=gt}},i.unstable_requestPaint=function(){M=!0},i.unstable_runWithPriority=function(Q,at){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var gt=T;T=Q;try{return at()}finally{T=gt}},i.unstable_scheduleCallback=function(Q,at,gt){var St=i.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?St+gt:St):gt=St,Q){case 1:var Pt=-1;break;case 2:Pt=250;break;case 5:Pt=1073741823;break;case 4:Pt=1e4;break;default:Pt=5e3}return Pt=gt+Pt,Q={id:y++,callback:at,priorityLevel:Q,startTime:gt,expirationTime:Pt,sortIndex:-1},gt>St?(Q.sortIndex=gt,t(g,Q),e(f)===null&&Q===e(g)&&(C?(j(R),R=-1):C=!0,xt(Z,gt-St))):(Q.sortIndex=Pt,t(f,Q),D||S||(D=!0,st||(st=!0,k()))),Q},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(Q){var at=T;return function(){var gt=T;T=at;try{return Q.apply(this,arguments)}finally{T=gt}}}})(sp)),sp}var Jv;function uR(){return Jv||(Jv=1,ip.exports=lR()),ip.exports}var rp={exports:{}},ln={};var tT;function cR(){if(tT)return ln;tT=1;var i=my();function t(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,g,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:f,containerInfo:g,implementation:y}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ln.createPortal=function(f,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(f,g,null,y)},ln.flushSync=function(f){var g=u.T,y=n.p;try{if(u.T=null,n.p=2,f)return f()}finally{u.T=g,n.p=y,n.d.f()}},ln.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(f,g))},ln.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},ln.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var y=g.as,_=h(y,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?n.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:S}):y==="script"&&n.d.X(f,{crossOrigin:_,integrity:T,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ln.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=h(g.as,g.crossOrigin);n.d.M(f,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(f)},ln.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,_=h(y,g.crossOrigin);n.d.L(f,y,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ln.preloadModule=function(f,g){if(typeof f=="string")if(g){var y=h(g.as,g.crossOrigin);n.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(f)},ln.requestFormReset=function(f){n.d.r(f)},ln.unstable_batchedUpdates=function(f,g){return f(g)},ln.useFormState=function(f,g,y){return u.H.useFormState(f,g,y)},ln.useFormStatus=function(){return u.H.useHostTransitionStatus()},ln.version="19.2.3",ln}var eT;function hR(){if(eT)return rp.exports;eT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),rp.exports=cR(),rp.exports}var nT;function fR(){if(nT)return Nu;nT=1;var i=uR(),t=my(),e=hR();function n(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function u(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(n(188))}function g(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(n(188));return a!==s?null:s}for(var l=s,c=a;;){var m=l.return;if(m===null)break;var p=m.alternate;if(p===null){if(c=m.return,c!==null){l=c;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===l)return f(m),s;if(p===c)return f(m),a;p=p.sibling}throw Error(n(188))}if(l.return!==c.return)l=m,c=p;else{for(var v=!1,A=m.child;A;){if(A===l){v=!0,l=m,c=p;break}if(A===c){v=!0,c=m,l=p;break}A=A.sibling}if(!v){for(A=p.child;A;){if(A===l){v=!0,l=p,c=m;break}if(A===c){v=!0,c=p,l=m;break}A=A.sibling}if(!v)throw Error(n(189))}}if(l.alternate!==c)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?s:a}function y(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=y(s),a!==null)return a;s=s.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),K=Symbol.for("react.context"),it=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),st=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function k(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var V=Symbol.for("react.client.reference");function Vt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===V?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case C:return"Fragment";case B:return"Profiler";case M:return"StrictMode";case Z:return"Suspense";case st:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case D:return"Portal";case K:return s.displayName||"Context";case j:return(s._context.displayName||"Context")+".Consumer";case it:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return a=s.displayName||null,a!==null?a:Vt(s.type)||"Memo";case w:a=s._payload,s=s._init;try{return Vt(s(a))}catch{}}return null}var xt=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},St=[],Pt=-1;function z(s){return{current:s}}function tt(s){0>Pt||(s.current=St[Pt],St[Pt]=null,Pt--)}function ct(s,a){Pt++,St[Pt]=s.current,s.current=a}var ft=z(null),Tt=z(null),At=z(null),Ut=z(null);function Fe(s,a){switch(ct(At,a),ct(Tt,s),ct(ft,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?yv(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=yv(a),s=_v(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}tt(ft),ct(ft,s)}function me(){tt(ft),tt(Tt),tt(At)}function Nr(s){s.memoizedState!==null&&ct(Ut,s);var a=ft.current,l=_v(a,s.type);a!==l&&(ct(Tt,s),ct(ft,l))}function Ga(s){Tt.current===s&&(tt(ft),tt(Tt)),Ut.current===s&&(tt(Ut),Du._currentValue=gt)}var Ka,Ya;function Ti(s){if(Ka===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ka=a&&a[1]||"",Ya=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ka+s+Ya}var Dl=!1;function Pr(s,a){if(!s||Dl)return"";Dl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(W){var Y=W}Reflect.construct(s,[],nt)}else{try{nt.call()}catch(W){Y=W}s.call(nt.prototype)}}else{try{throw Error()}catch(W){Y=W}(nt=s())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),v=p[0],A=p[1];if(v&&A){var N=v.split(`
`),G=A.split(`
`);for(m=c=0;c<N.length&&!N[c].includes("DetermineComponentFrameRoot");)c++;for(;m<G.length&&!G[m].includes("DetermineComponentFrameRoot");)m++;if(c===N.length||m===G.length)for(c=N.length-1,m=G.length-1;1<=c&&0<=m&&N[c]!==G[m];)m--;for(;1<=c&&0<=m;c--,m--)if(N[c]!==G[m]){if(c!==1||m!==1)do if(c--,m--,0>m||N[c]!==G[m]){var $=`
`+N[c].replace(" at new "," at ");return s.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",s.displayName)),$}while(1<=c&&0<=m);break}}}finally{Dl=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Ti(l):""}function Cl(s,a){switch(s.tag){case 26:case 27:case 5:return Ti(s.type);case 16:return Ti("Lazy");case 13:return s.child!==a&&a!==null?Ti("Suspense Fallback"):Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return Pr(s.type,!1);case 11:return Pr(s.type.render,!1);case 1:return Pr(s.type,!0);case 31:return Ti("Activity");default:return""}}function Ml(s){try{var a="",l=null;do a+=Cl(s,l),l=s,s=s.return;while(s);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ce=Object.prototype.hasOwnProperty,He=i.unstable_scheduleCallback,Ds=i.unstable_cancelCallback,ng=i.unstable_shouldYield,Uc=i.unstable_requestPaint,fn=i.unstable_now,kr=i.unstable_getCurrentPriorityLevel,Vl=i.unstable_ImmediatePriority,Ol=i.unstable_UserBlockingPriority,Cs=i.unstable_NormalPriority,ig=i.unstable_LowPriority,jc=i.unstable_IdlePriority,Fc=i.log,Hc=i.unstable_setDisableYieldValue,oi=null,tn=null;function qn(s){if(typeof Fc=="function"&&Hc(s),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(oi,s)}catch{}}var Se=Math.clz32?Math.clz32:Gc,qc=Math.log,Qa=Math.LN2;function Gc(s){return s>>>=0,s===0?32:31-(qc(s)/Qa|0)|0}var Ei=256,zr=262144,Me=4194304;function Si(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ai(s,a,l){var c=s.pendingLanes;if(c===0)return 0;var m=0,p=s.suspendedLanes,v=s.pingedLanes;s=s.warmLanes;var A=c&134217727;return A!==0?(c=A&~p,c!==0?m=Si(c):(v&=A,v!==0?m=Si(v):l||(l=A&~s,l!==0&&(m=Si(l))))):(A=c&~p,A!==0?m=Si(A):v!==0?m=Si(v):l||(l=c&~s,l!==0&&(m=Si(l)))),m===0?0:a!==0&&a!==m&&(a&p)===0&&(p=m&-m,l=a&-a,p>=l||p===32&&(l&4194048)!==0)?a:m}function li(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function sg(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kc(){var s=Me;return Me<<=1,(Me&62914560)===0&&(Me=4194304),s}function xi(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function Lr(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function rg(s,a,l,c,m,p){var v=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var A=s.entanglements,N=s.expirationTimes,G=s.hiddenUpdates;for(l=v&~l;0<l;){var $=31-Se(l),nt=1<<$;A[$]=0,N[$]=-1;var Y=G[$];if(Y!==null)for(G[$]=null,$=0;$<Y.length;$++){var W=Y[$];W!==null&&(W.lane&=-536870913)}l&=~nt}c!==0&&Br(s,c,0),p!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=p&~(v&~a))}function Br(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var c=31-Se(a);s.entangledLanes|=a,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Nl(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var c=31-Se(l),m=1<<c;m&a|s[c]&a&&(s[c]|=a),l&=~m}}function Pl(s,a){var l=a&-a;return l=(l&42)!==0?1:Ur(l),(l&(s.suspendedLanes|a))!==0?0:l}function Ur(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ts(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Yc(){var s=at.p;return s!==0?s:(s=window.event,s===void 0?32:jv(s.type))}function ui(s,a){var l=at.p;try{return at.p=s,a()}finally{at.p=l}}var ci=Math.random().toString(36).slice(2),Ve="__reactFiber$"+ci,Qe="__reactProps$"+ci,wi="__reactContainer$"+ci,Xa="__reactEvents$"+ci,ag="__reactListeners$"+ci,Qc="__reactHandles$"+ci,Xc="__reactResources$"+ci,Ri="__reactMarker$"+ci;function Wa(s){delete s[Ve],delete s[Qe],delete s[Xa],delete s[ag],delete s[Qc]}function Ii(s){var a=s[Ve];if(a)return a;for(var l=s.parentNode;l;){if(a=l[wi]||l[Ve]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=xv(s);s!==null;){if(l=s[Ve])return l;s=xv(s)}return a}s=l,l=s.parentNode}return null}function Gn(s){if(s=s[Ve]||s[wi]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Cn(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(n(33))}function Di(s){var a=s[Xc];return a||(a=s[Xc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Oe(s){s[Ri]=!0}var kl=new Set,zl={};function Ci(s,a){Mi(s,a),Mi(s+"Capture",a)}function Mi(s,a){for(zl[s]=a,s=0;s<a.length;s++)kl.add(a[s])}var Ll=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bl={},Ul={};function Wc(s){return Ce.call(Ul,s)?!0:Ce.call(Bl,s)?!1:Ll.test(s)?Ul[s]=!0:(Bl[s]=!0,!1)}function $a(s,a,l){if(Wc(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function Mn(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function Ne(s,a,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+c)}}function Xe(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ms(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function jl(s,a,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,p=c.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(v){l=""+v,p.call(this,v)}}),Object.defineProperty(s,a,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Zt(s){if(!s._valueTracker){var a=Ms(s)?"checked":"value";s._valueTracker=jl(s,a,""+s[a])}}function jr(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return s&&(c=Ms(s)?s.checked?"true":"false":s.value),s=c,s!==l?(a.setValue(s),!0):!1}function Vi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Fr=/[\n"\\]/g;function pn(s){return s.replace(Fr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Za(s,a,l,c,m,p,v,A){s.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?s.type=v:s.removeAttribute("type"),a!=null?v==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Xe(a)):s.value!==""+Xe(a)&&(s.value=""+Xe(a)):v!=="submit"&&v!=="reset"||s.removeAttribute("value"),a!=null?Fl(s,v,Xe(a)):l!=null?Fl(s,v,Xe(l)):c!=null&&s.removeAttribute("value"),m==null&&p!=null&&(s.defaultChecked=!!p),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+Xe(A):s.removeAttribute("name")}function $c(s,a,l,c,m,p,v,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),a!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){Zt(s);return}l=l!=null?""+Xe(l):"",a=a!=null?""+Xe(a):l,A||a===s.value||(s.value=a),s.defaultValue=a}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=A?s.checked:!!c,s.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.name=v),Zt(s)}function Fl(s,a,l){a==="number"&&Vi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Vs(s,a,l,c){if(s=s.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=a.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&c&&(s[l].defaultSelected=!0)}else{for(l=""+Xe(l),a=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,c&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function Zc(s,a,l){if(a!=null&&(a=""+Xe(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+Xe(l):""}function Os(s,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(n(92));if(xt(c)){if(1<c.length)throw Error(n(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=Xe(a),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),Zt(s)}function yn(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Jc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hl(s,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":c?s.setProperty(a,l):typeof l!="number"||l===0||Jc.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function ql(s,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var m in a)c=a[m],a.hasOwnProperty(m)&&l[m]!==c&&Hl(s,m,c)}else for(var p in a)a.hasOwnProperty(p)&&Hl(s,p,a[p])}function Ja(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var th=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(s){return Ns.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function hi(){}var Gl=null;function Kn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ps=null,Oi=null;function Hr(s){var a=Gn(s);if(a&&(s=a.stateNode)){var l=s[Qe]||null;t:switch(s=a.stateNode,a.type){case"input":if(Za(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+pn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==s&&c.form===s.form){var m=c[Qe]||null;if(!m)throw Error(n(90));Za(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===s.form&&jr(c)}break t;case"textarea":Zc(s,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&Vs(s,!!l.multiple,a,!1)}}}var eo=!1;function ks(s,a,l){if(eo)return s(a,l);eo=!0;try{var c=s(a);return c}finally{if(eo=!1,(Ps!==null||Oi!==null)&&(Yh(),Ps&&(a=Ps,s=Oi,Oi=Ps=null,Hr(a),s)))for(a=0;a<s.length;a++)Hr(s[a])}}function fi(s,a){var l=s.stateNode;if(l===null)return null;var c=l[Qe]||null;if(c===null)return null;l=c[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qr=!1;if(Yn)try{var se={};Object.defineProperty(se,"passive",{get:function(){qr=!0}}),window.addEventListener("test",se,se),window.removeEventListener("test",se,se)}catch{qr=!1}var Ni=null,Kl=null,Gr=null;function Yl(){if(Gr)return Gr;var s,a=Kl,l=a.length,c,m="value"in Ni?Ni.value:Ni.textContent,p=m.length;for(s=0;s<l&&a[s]===m[s];s++);var v=l-s;for(c=1;c<=v&&a[l-c]===m[p-c];c++);return Gr=m.slice(s,1<c?1-c:void 0)}function Kr(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function es(){return!0}function di(){return!1}function en(s){function a(l,c,m,p,v){this._reactName=l,this._targetInst=m,this.type=c,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(l=s[A],this[A]=l?l(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?es:di,this.isPropagationStopped=di,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),a}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=en(ns),zs=_({},ns,{view:0,detail:0}),Ql=en(zs),Ls,no,ki,io=_({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ki&&(ki&&s.type==="mousemove"?(Ls=s.screenX-ki.screenX,no=s.screenY-ki.screenY):no=Ls=0,ki=s),Ls)},movementY:function(s){return"movementY"in s?s.movementY:no}}),Xl=en(io),Yr=_({},io,{dataTransfer:0}),eh=en(Yr),nh=_({},zs,{relatedTarget:0}),Qr=en(nh),Wl=_({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),ih=en(Wl),so=_({},ns,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),sh=en(so),rh=_({},ns,{data:0}),zi=en(rh),ah={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uh(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=lh[s])?!!a[s]:!1}function Bs(){return uh}var dn=_({},zs,{key:function(s){if(s.key){var a=ah[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Kr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?oh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bs,charCode:function(s){return s.type==="keypress"?Kr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Kr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ch=en(dn),hh=_({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),is=en(hh),d=_({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bs}),b=en(d),E=_({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=en(E),H=_({},io,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),X=en(H),lt=_({},ns,{newState:0,oldState:0}),It=en(lt),Ae=[9,13,27,32],Qt=Yn&&"CompositionEvent"in window,pe=null;Yn&&"documentMode"in document&&(pe=document.documentMode);var Qn=Yn&&"TextEvent"in window&&!pe,Li=Yn&&(!Qt||pe&&8<pe&&11>=pe),gi=" ",mi=!1;function Xr(s,a){switch(s){case"keyup":return Ae.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ro(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ao=!1;function Dw(s,a){switch(s){case"compositionend":return ro(a);case"keypress":return a.which!==32?null:(mi=!0,gi);case"textInput":return s=a.data,s===gi&&mi?null:s;default:return null}}function Cw(s,a){if(ao)return s==="compositionend"||!Qt&&Xr(s,a)?(s=Yl(),Gr=Kl=Ni=null,ao=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Li&&a.locale!=="ko"?null:a.data;default:return null}}var Mw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Mw[s.type]:a==="textarea"}function D_(s,a,l,c){Ps?Oi?Oi.push(c):Oi=[c]:Ps=c,a=tf(a,"onChange"),0<a.length&&(l=new Pi("onChange","change",null,l,c),s.push({event:l,listeners:a}))}var $l=null,Zl=null;function Vw(s){hv(s,0)}function fh(s){var a=Cn(s);if(jr(a))return s}function C_(s,a){if(s==="change")return a}var M_=!1;if(Yn){var og;if(Yn){var lg="oninput"in document;if(!lg){var V_=document.createElement("div");V_.setAttribute("oninput","return;"),lg=typeof V_.oninput=="function"}og=lg}else og=!1;M_=og&&(!document.documentMode||9<document.documentMode)}function O_(){$l&&($l.detachEvent("onpropertychange",N_),Zl=$l=null)}function N_(s){if(s.propertyName==="value"&&fh(Zl)){var a=[];D_(a,Zl,s,Kn(s)),ks(Vw,a)}}function Ow(s,a,l){s==="focusin"?(O_(),$l=a,Zl=l,$l.attachEvent("onpropertychange",N_)):s==="focusout"&&O_()}function Nw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return fh(Zl)}function Pw(s,a){if(s==="click")return fh(a)}function kw(s,a){if(s==="input"||s==="change")return fh(a)}function zw(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Vn=typeof Object.is=="function"?Object.is:zw;function Jl(s,a){if(Vn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var m=l[c];if(!Ce.call(a,m)||!Vn(s[m],a[m]))return!1}return!0}function P_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function k_(s,a){var l=P_(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=a&&c>=a)return{node:l,offset:a-s};s=c}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=P_(l)}}function z_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?z_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function L_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Vi(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=Vi(s.document)}return a}function ug(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Lw=Yn&&"documentMode"in document&&11>=document.documentMode,oo=null,cg=null,tu=null,hg=!1;function B_(s,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;hg||oo==null||oo!==Vi(c)||(c=oo,"selectionStart"in c&&ug(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),tu&&Jl(tu,c)||(tu=c,c=tf(cg,"onSelect"),0<c.length&&(a=new Pi("onSelect","select",null,a,l),s.push({event:a,listeners:c}),a.target=oo)))}function Wr(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var lo={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},fg={},U_={};Yn&&(U_=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function $r(s){if(fg[s])return fg[s];if(!lo[s])return s;var a=lo[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in U_)return fg[s]=a[l];return s}var j_=$r("animationend"),F_=$r("animationiteration"),H_=$r("animationstart"),Bw=$r("transitionrun"),Uw=$r("transitionstart"),jw=$r("transitioncancel"),q_=$r("transitionend"),G_=new Map,dg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dg.push("scrollEnd");function pi(s,a){G_.set(s,a),Ci(a,[s])}var dh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Xn=[],uo=0,gg=0;function gh(){for(var s=uo,a=gg=uo=0;a<s;){var l=Xn[a];Xn[a++]=null;var c=Xn[a];Xn[a++]=null;var m=Xn[a];Xn[a++]=null;var p=Xn[a];if(Xn[a++]=null,c!==null&&m!==null){var v=c.pending;v===null?m.next=m:(m.next=v.next,v.next=m),c.pending=m}p!==0&&K_(l,m,p)}}function mh(s,a,l,c){Xn[uo++]=s,Xn[uo++]=a,Xn[uo++]=l,Xn[uo++]=c,gg|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function mg(s,a,l,c){return mh(s,a,l,c),ph(s)}function Zr(s,a){return mh(s,null,null,a),ph(s)}function K_(s,a,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var m=!1,p=s.return;p!==null;)p.childLanes|=l,c=p.alternate,c!==null&&(c.childLanes|=l),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(m=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,m&&a!==null&&(m=31-Se(l),s=p.hiddenUpdates,c=s[m],c===null?s[m]=[a]:c.push(a),a.lane=l|536870912),p):null}function ph(s){if(50<Eu)throw Eu=0,Am=null,Error(n(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var co={};function Fw(s,a,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(s,a,l,c){return new Fw(s,a,l,c)}function pg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ss(s,a){var l=s.alternate;return l===null?(l=On(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Y_(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function yh(s,a,l,c,m,p){var v=0;if(c=s,typeof s=="function")pg(s)&&(v=1);else if(typeof s=="string")v=Y2(s,l,ft.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case I:return s=On(31,l,a,m),s.elementType=I,s.lanes=p,s;case C:return Jr(l.children,m,p,a);case M:v=8,m|=24;break;case B:return s=On(12,l,a,m|2),s.elementType=B,s.lanes=p,s;case Z:return s=On(13,l,a,m),s.elementType=Z,s.lanes=p,s;case st:return s=On(19,l,a,m),s.elementType=st,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case K:v=10;break t;case j:v=9;break t;case it:v=11;break t;case R:v=14;break t;case w:v=16,c=null;break t}v=29,l=Error(n(130,s===null?"null":typeof s,"")),c=null}return a=On(v,l,a,m),a.elementType=s,a.type=c,a.lanes=p,a}function Jr(s,a,l,c){return s=On(7,s,c,a),s.lanes=l,s}function yg(s,a,l){return s=On(6,s,null,a),s.lanes=l,s}function Q_(s){var a=On(18,null,null,0);return a.stateNode=s,a}function _g(s,a,l){return a=On(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var X_=new WeakMap;function Wn(s,a){if(typeof s=="object"&&s!==null){var l=X_.get(s);return l!==void 0?l:(a={value:s,source:a,stack:Ml(a)},X_.set(s,a),a)}return{value:s,source:a,stack:Ml(a)}}var ho=[],fo=0,_h=null,eu=0,$n=[],Zn=0,Us=null,Bi=1,Ui="";function rs(s,a){ho[fo++]=eu,ho[fo++]=_h,_h=s,eu=a}function W_(s,a,l){$n[Zn++]=Bi,$n[Zn++]=Ui,$n[Zn++]=Us,Us=s;var c=Bi;s=Ui;var m=32-Se(c)-1;c&=~(1<<m),l+=1;var p=32-Se(a)+m;if(30<p){var v=m-m%5;p=(c&(1<<v)-1).toString(32),c>>=v,m-=v,Bi=1<<32-Se(a)+m|l<<m|c,Ui=p+s}else Bi=1<<p|l<<m|c,Ui=s}function bg(s){s.return!==null&&(rs(s,1),W_(s,1,0))}function vg(s){for(;s===_h;)_h=ho[--fo],ho[fo]=null,eu=ho[--fo],ho[fo]=null;for(;s===Us;)Us=$n[--Zn],$n[Zn]=null,Ui=$n[--Zn],$n[Zn]=null,Bi=$n[--Zn],$n[Zn]=null}function $_(s,a){$n[Zn++]=Bi,$n[Zn++]=Ui,$n[Zn++]=Us,Bi=a.id,Ui=a.overflow,Us=s}var nn=null,he=null,Bt=!1,js=null,Jn=!1,Tg=Error(n(519));function Fs(s){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nu(Wn(a,s)),Tg}function Z_(s){var a=s.stateNode,l=s.type,c=s.memoizedProps;switch(a[Ve]=s,a[Qe]=c,l){case"dialog":Nt("cancel",a),Nt("close",a);break;case"iframe":case"object":case"embed":Nt("load",a);break;case"video":case"audio":for(l=0;l<Au.length;l++)Nt(Au[l],a);break;case"source":Nt("error",a);break;case"img":case"image":case"link":Nt("error",a),Nt("load",a);break;case"details":Nt("toggle",a);break;case"input":Nt("invalid",a),$c(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Nt("invalid",a);break;case"textarea":Nt("invalid",a),Os(a,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||mv(a.textContent,l)?(c.popover!=null&&(Nt("beforetoggle",a),Nt("toggle",a)),c.onScroll!=null&&Nt("scroll",a),c.onScrollEnd!=null&&Nt("scrollend",a),c.onClick!=null&&(a.onclick=hi),a=!0):a=!1,a||Fs(s,!0)}function J_(s){for(nn=s.return;nn;)switch(nn.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:nn=nn.return}}function go(s){if(s!==nn)return!1;if(!Bt)return J_(s),Bt=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Bm(s.type,s.memoizedProps)),l=!l),l&&he&&Fs(s),J_(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));he=Av(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));he=Av(s)}else a===27?(a=he,nr(s.type)?(s=qm,qm=null,he=s):he=a):he=nn?ei(s.stateNode.nextSibling):null;return!0}function ta(){he=nn=null,Bt=!1}function Eg(){var s=js;return s!==null&&(Tn===null?Tn=s:Tn.push.apply(Tn,s),js=null),s}function nu(s){js===null?js=[s]:js.push(s)}var Sg=z(null),ea=null,as=null;function Hs(s,a,l){ct(Sg,a._currentValue),a._currentValue=l}function os(s){s._currentValue=Sg.current,tt(Sg)}function Ag(s,a,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),s===l)break;s=s.return}}function xg(s,a,l,c){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var p=m.dependencies;if(p!==null){var v=m.child;p=p.firstContext;t:for(;p!==null;){var A=p;p=m;for(var N=0;N<a.length;N++)if(A.context===a[N]){p.lanes|=l,A=p.alternate,A!==null&&(A.lanes|=l),Ag(p.return,l,s),c||(v=null);break t}p=A.next}}else if(m.tag===18){if(v=m.return,v===null)throw Error(n(341));v.lanes|=l,p=v.alternate,p!==null&&(p.lanes|=l),Ag(v,l,s),v=null}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===s){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}}function mo(s,a,l,c){s=null;for(var m=a,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var v=m.alternate;if(v===null)throw Error(n(387));if(v=v.memoizedProps,v!==null){var A=m.type;Vn(m.pendingProps.value,v.value)||(s!==null?s.push(A):s=[A])}}else if(m===Ut.current){if(v=m.alternate,v===null)throw Error(n(387));v.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(Du):s=[Du])}m=m.return}s!==null&&xg(a,s,l,c),a.flags|=262144}function bh(s){for(s=s.firstContext;s!==null;){if(!Vn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function na(s){ea=s,as=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function sn(s){return t0(ea,s)}function vh(s,a){return ea===null&&na(s),t0(s,a)}function t0(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},as===null){if(s===null)throw Error(n(308));as=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else as=as.next=a;return l}var Hw=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},qw=i.unstable_scheduleCallback,Gw=i.unstable_NormalPriority,Pe={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wg(){return{controller:new Hw,data:new Map,refCount:0}}function iu(s){s.refCount--,s.refCount===0&&qw(Gw,function(){s.controller.abort()})}var su=null,Rg=0,po=0,yo=null;function Kw(s,a){if(su===null){var l=su=[];Rg=0,po=Cm(),yo={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Rg++,a.then(e0,e0),a}function e0(){if(--Rg===0&&su!==null){yo!==null&&(yo.status="fulfilled");var s=su;su=null,po=0,yo=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function Yw(s,a){var l=[],c={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return s.then(function(){c.status="fulfilled",c.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(c.status="rejected",c.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),c}var n0=Q.S;Q.S=function(s,a){Bb=fn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Kw(s,a),n0!==null&&n0(s,a)};var ia=z(null);function Ig(){var s=ia.current;return s!==null?s:le.pooledCache}function Th(s,a){a===null?ct(ia,ia.current):ct(ia,a.pool)}function i0(){var s=Ig();return s===null?null:{parent:Pe._currentValue,pool:s}}var _o=Error(n(460)),Dg=Error(n(474)),Eh=Error(n(542)),Sh={then:function(){}};function s0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function r0(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(hi,hi),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,o0(s),s;default:if(typeof a.status=="string")a.then(hi,hi);else{if(s=le,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=a,s.status="pending",s.then(function(c){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=c}},function(c){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,o0(s),s}throw ra=a,_o}}function sa(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ra=l,_o):l}}var ra=null;function a0(){if(ra===null)throw Error(n(459));var s=ra;return ra=null,s}function o0(s){if(s===_o||s===Eh)throw Error(n(483))}var bo=null,ru=0;function Ah(s){var a=ru;return ru+=1,bo===null&&(bo=[]),r0(bo,s,a)}function au(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function xh(s,a){throw a.$$typeof===T?Error(n(525)):(s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function l0(s){function a(U,L){if(s){var q=U.deletions;q===null?(U.deletions=[L],U.flags|=16):q.push(L)}}function l(U,L){if(!s)return null;for(;L!==null;)a(U,L),L=L.sibling;return null}function c(U){for(var L=new Map;U!==null;)U.key!==null?L.set(U.key,U):L.set(U.index,U),U=U.sibling;return L}function m(U,L){return U=ss(U,L),U.index=0,U.sibling=null,U}function p(U,L,q){return U.index=q,s?(q=U.alternate,q!==null?(q=q.index,q<L?(U.flags|=67108866,L):q):(U.flags|=67108866,L)):(U.flags|=1048576,L)}function v(U){return s&&U.alternate===null&&(U.flags|=67108866),U}function A(U,L,q,et){return L===null||L.tag!==6?(L=yg(q,U.mode,et),L.return=U,L):(L=m(L,q),L.return=U,L)}function N(U,L,q,et){var bt=q.type;return bt===C?$(U,L,q.props.children,et,q.key):L!==null&&(L.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===w&&sa(bt)===L.type)?(L=m(L,q.props),au(L,q),L.return=U,L):(L=yh(q.type,q.key,q.props,null,U.mode,et),au(L,q),L.return=U,L)}function G(U,L,q,et){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=_g(q,U.mode,et),L.return=U,L):(L=m(L,q.children||[]),L.return=U,L)}function $(U,L,q,et,bt){return L===null||L.tag!==7?(L=Jr(q,U.mode,et,bt),L.return=U,L):(L=m(L,q),L.return=U,L)}function nt(U,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=yg(""+L,U.mode,q),L.return=U,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case S:return q=yh(L.type,L.key,L.props,null,U.mode,q),au(q,L),q.return=U,q;case D:return L=_g(L,U.mode,q),L.return=U,L;case w:return L=sa(L),nt(U,L,q)}if(xt(L)||k(L))return L=Jr(L,U.mode,q,null),L.return=U,L;if(typeof L.then=="function")return nt(U,Ah(L),q);if(L.$$typeof===K)return nt(U,vh(U,L),q);xh(U,L)}return null}function Y(U,L,q,et){var bt=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return bt!==null?null:A(U,L,""+q,et);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===bt?N(U,L,q,et):null;case D:return q.key===bt?G(U,L,q,et):null;case w:return q=sa(q),Y(U,L,q,et)}if(xt(q)||k(q))return bt!==null?null:$(U,L,q,et,null);if(typeof q.then=="function")return Y(U,L,Ah(q),et);if(q.$$typeof===K)return Y(U,L,vh(U,q),et);xh(U,q)}return null}function W(U,L,q,et,bt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return U=U.get(q)||null,A(L,U,""+et,bt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case S:return U=U.get(et.key===null?q:et.key)||null,N(L,U,et,bt);case D:return U=U.get(et.key===null?q:et.key)||null,G(L,U,et,bt);case w:return et=sa(et),W(U,L,q,et,bt)}if(xt(et)||k(et))return U=U.get(q)||null,$(L,U,et,bt,null);if(typeof et.then=="function")return W(U,L,q,Ah(et),bt);if(et.$$typeof===K)return W(U,L,q,vh(L,et),bt);xh(L,et)}return null}function mt(U,L,q,et){for(var bt=null,Gt=null,yt=L,Ct=L=0,zt=null;yt!==null&&Ct<q.length;Ct++){yt.index>Ct?(zt=yt,yt=null):zt=yt.sibling;var Kt=Y(U,yt,q[Ct],et);if(Kt===null){yt===null&&(yt=zt);break}s&&yt&&Kt.alternate===null&&a(U,yt),L=p(Kt,L,Ct),Gt===null?bt=Kt:Gt.sibling=Kt,Gt=Kt,yt=zt}if(Ct===q.length)return l(U,yt),Bt&&rs(U,Ct),bt;if(yt===null){for(;Ct<q.length;Ct++)yt=nt(U,q[Ct],et),yt!==null&&(L=p(yt,L,Ct),Gt===null?bt=yt:Gt.sibling=yt,Gt=yt);return Bt&&rs(U,Ct),bt}for(yt=c(yt);Ct<q.length;Ct++)zt=W(yt,U,Ct,q[Ct],et),zt!==null&&(s&&zt.alternate!==null&&yt.delete(zt.key===null?Ct:zt.key),L=p(zt,L,Ct),Gt===null?bt=zt:Gt.sibling=zt,Gt=zt);return s&&yt.forEach(function(or){return a(U,or)}),Bt&&rs(U,Ct),bt}function Et(U,L,q,et){if(q==null)throw Error(n(151));for(var bt=null,Gt=null,yt=L,Ct=L=0,zt=null,Kt=q.next();yt!==null&&!Kt.done;Ct++,Kt=q.next()){yt.index>Ct?(zt=yt,yt=null):zt=yt.sibling;var or=Y(U,yt,Kt.value,et);if(or===null){yt===null&&(yt=zt);break}s&&yt&&or.alternate===null&&a(U,yt),L=p(or,L,Ct),Gt===null?bt=or:Gt.sibling=or,Gt=or,yt=zt}if(Kt.done)return l(U,yt),Bt&&rs(U,Ct),bt;if(yt===null){for(;!Kt.done;Ct++,Kt=q.next())Kt=nt(U,Kt.value,et),Kt!==null&&(L=p(Kt,L,Ct),Gt===null?bt=Kt:Gt.sibling=Kt,Gt=Kt);return Bt&&rs(U,Ct),bt}for(yt=c(yt);!Kt.done;Ct++,Kt=q.next())Kt=W(yt,U,Ct,Kt.value,et),Kt!==null&&(s&&Kt.alternate!==null&&yt.delete(Kt.key===null?Ct:Kt.key),L=p(Kt,L,Ct),Gt===null?bt=Kt:Gt.sibling=Kt,Gt=Kt);return s&&yt.forEach(function(sR){return a(U,sR)}),Bt&&rs(U,Ct),bt}function oe(U,L,q,et){if(typeof q=="object"&&q!==null&&q.type===C&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:t:{for(var bt=q.key;L!==null;){if(L.key===bt){if(bt=q.type,bt===C){if(L.tag===7){l(U,L.sibling),et=m(L,q.props.children),et.return=U,U=et;break t}}else if(L.elementType===bt||typeof bt=="object"&&bt!==null&&bt.$$typeof===w&&sa(bt)===L.type){l(U,L.sibling),et=m(L,q.props),au(et,q),et.return=U,U=et;break t}l(U,L);break}else a(U,L);L=L.sibling}q.type===C?(et=Jr(q.props.children,U.mode,et,q.key),et.return=U,U=et):(et=yh(q.type,q.key,q.props,null,U.mode,et),au(et,q),et.return=U,U=et)}return v(U);case D:t:{for(bt=q.key;L!==null;){if(L.key===bt)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){l(U,L.sibling),et=m(L,q.children||[]),et.return=U,U=et;break t}else{l(U,L);break}else a(U,L);L=L.sibling}et=_g(q,U.mode,et),et.return=U,U=et}return v(U);case w:return q=sa(q),oe(U,L,q,et)}if(xt(q))return mt(U,L,q,et);if(k(q)){if(bt=k(q),typeof bt!="function")throw Error(n(150));return q=bt.call(q),Et(U,L,q,et)}if(typeof q.then=="function")return oe(U,L,Ah(q),et);if(q.$$typeof===K)return oe(U,L,vh(U,q),et);xh(U,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(l(U,L.sibling),et=m(L,q),et.return=U,U=et):(l(U,L),et=yg(q,U.mode,et),et.return=U,U=et),v(U)):l(U,L)}return function(U,L,q,et){try{ru=0;var bt=oe(U,L,q,et);return bo=null,bt}catch(yt){if(yt===_o||yt===Eh)throw yt;var Gt=On(29,yt,null,U.mode);return Gt.lanes=et,Gt.return=U,Gt}finally{}}}var aa=l0(!0),u0=l0(!1),qs=!1;function Cg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Gs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ks(s,a,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Xt&2)!==0){var m=c.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),c.pending=a,a=ph(s),K_(s,null,l),a}return mh(s,c,a,l),ph(s)}function ou(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=s.pendingLanes,l|=c,a.lanes=l,Nl(s,l)}}function Vg(s,a){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var m=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var v={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?m=p=v:p=p.next=v,l=l.next}while(l!==null);p===null?m=p=a:p=p.next=a}else m=p=a;l={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var Og=!1;function lu(){if(Og){var s=yo;if(s!==null)throw s}}function uu(s,a,l,c){Og=!1;var m=s.updateQueue;qs=!1;var p=m.firstBaseUpdate,v=m.lastBaseUpdate,A=m.shared.pending;if(A!==null){m.shared.pending=null;var N=A,G=N.next;N.next=null,v===null?p=G:v.next=G,v=N;var $=s.alternate;$!==null&&($=$.updateQueue,A=$.lastBaseUpdate,A!==v&&(A===null?$.firstBaseUpdate=G:A.next=G,$.lastBaseUpdate=N))}if(p!==null){var nt=m.baseState;v=0,$=G=N=null,A=p;do{var Y=A.lane&-536870913,W=Y!==A.lane;if(W?(kt&Y)===Y:(c&Y)===Y){Y!==0&&Y===po&&(Og=!0),$!==null&&($=$.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var mt=s,Et=A;Y=a;var oe=l;switch(Et.tag){case 1:if(mt=Et.payload,typeof mt=="function"){nt=mt.call(oe,nt,Y);break t}nt=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=Et.payload,Y=typeof mt=="function"?mt.call(oe,nt,Y):mt,Y==null)break t;nt=_({},nt,Y);break t;case 2:qs=!0}}Y=A.callback,Y!==null&&(s.flags|=64,W&&(s.flags|=8192),W=m.callbacks,W===null?m.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:A.tag,payload:A.payload,callback:A.callback,next:null},$===null?(G=$=W,N=nt):$=$.next=W,v|=Y;if(A=A.next,A===null){if(A=m.shared.pending,A===null)break;W=A,A=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);$===null&&(N=nt),m.baseState=N,m.firstBaseUpdate=G,m.lastBaseUpdate=$,p===null&&(m.shared.lanes=0),$s|=v,s.lanes=v,s.memoizedState=nt}}function c0(s,a){if(typeof s!="function")throw Error(n(191,s));s.call(a)}function h0(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)c0(l[s],a)}var vo=z(null),wh=z(0);function f0(s,a){s=ps,ct(wh,s),ct(vo,a),ps=s|a.baseLanes}function Ng(){ct(wh,ps),ct(vo,vo.current)}function Pg(){ps=wh.current,tt(vo),tt(wh)}var Nn=z(null),ti=null;function Ys(s){var a=s.alternate;ct(xe,xe.current&1),ct(Nn,s),ti===null&&(a===null||vo.current!==null||a.memoizedState!==null)&&(ti=s)}function kg(s){ct(xe,xe.current),ct(Nn,s),ti===null&&(ti=s)}function d0(s){s.tag===22?(ct(xe,xe.current),ct(Nn,s),ti===null&&(ti=s)):Qs()}function Qs(){ct(xe,xe.current),ct(Nn,Nn.current)}function Pn(s){tt(Nn),ti===s&&(ti=null),tt(xe)}var xe=z(0);function Rh(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Fm(l)||Hm(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ls=0,Dt=null,re=null,ke=null,Ih=!1,To=!1,oa=!1,Dh=0,cu=0,Eo=null,Qw=0;function ve(){throw Error(n(321))}function zg(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!Vn(s[l],a[l]))return!1;return!0}function Lg(s,a,l,c,m,p){return ls=p,Dt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Q.H=s===null||s.memoizedState===null?W0:Jg,oa=!1,p=l(c,m),oa=!1,To&&(p=m0(a,l,c,m)),g0(s),p}function g0(s){Q.H=du;var a=re!==null&&re.next!==null;if(ls=0,ke=re=Dt=null,Ih=!1,cu=0,Eo=null,a)throw Error(n(300));s===null||ze||(s=s.dependencies,s!==null&&bh(s)&&(ze=!0))}function m0(s,a,l,c){Dt=s;var m=0;do{if(To&&(Eo=null),cu=0,To=!1,25<=m)throw Error(n(301));if(m+=1,ke=re=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Q.H=$0,p=a(l,c)}while(To);return p}function Xw(){var s=Q.H,a=s.useState()[0];return a=typeof a.then=="function"?hu(a):a,s=s.useState()[0],(re!==null?re.memoizedState:null)!==s&&(Dt.flags|=1024),a}function Bg(){var s=Dh!==0;return Dh=0,s}function Ug(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function jg(s){if(Ih){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ih=!1}ls=0,ke=re=Dt=null,To=!1,cu=Dh=0,Eo=null}function gn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?Dt.memoizedState=ke=s:ke=ke.next=s,ke}function we(){if(re===null){var s=Dt.alternate;s=s!==null?s.memoizedState:null}else s=re.next;var a=ke===null?Dt.memoizedState:ke.next;if(a!==null)ke=a,re=s;else{if(s===null)throw Dt.alternate===null?Error(n(467)):Error(n(310));re=s,s={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},ke===null?Dt.memoizedState=ke=s:ke=ke.next=s}return ke}function Ch(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hu(s){var a=cu;return cu+=1,Eo===null&&(Eo=[]),s=r0(Eo,s,a),a=Dt,(ke===null?a.memoizedState:ke.next)===null&&(a=a.alternate,Q.H=a===null||a.memoizedState===null?W0:Jg),s}function Mh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return hu(s);if(s.$$typeof===K)return sn(s)}throw Error(n(438,String(s)))}function Fg(s){var a=null,l=Dt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=Dt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Ch(),Dt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),c=0;c<s;c++)l[c]=P;return a.index++,l}function us(s,a){return typeof a=="function"?a(s):a}function Vh(s){var a=we();return Hg(a,re,s)}function Hg(s,a,l){var c=s.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=l;var m=s.baseQueue,p=c.pending;if(p!==null){if(m!==null){var v=m.next;m.next=p.next,p.next=v}a.baseQueue=m=p,c.pending=null}if(p=s.baseState,m===null)s.memoizedState=p;else{a=m.next;var A=v=null,N=null,G=a,$=!1;do{var nt=G.lane&-536870913;if(nt!==G.lane?(kt&nt)===nt:(ls&nt)===nt){var Y=G.revertLane;if(Y===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),nt===po&&($=!0);else if((ls&Y)===Y){G=G.next,Y===po&&($=!0);continue}else nt={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},N===null?(A=N=nt,v=p):N=N.next=nt,Dt.lanes|=Y,$s|=Y;nt=G.action,oa&&l(p,nt),p=G.hasEagerState?G.eagerState:l(p,nt)}else Y={lane:nt,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},N===null?(A=N=Y,v=p):N=N.next=Y,Dt.lanes|=nt,$s|=nt;G=G.next}while(G!==null&&G!==a);if(N===null?v=p:N.next=A,!Vn(p,s.memoizedState)&&(ze=!0,$&&(l=yo,l!==null)))throw l;s.memoizedState=p,s.baseState=v,s.baseQueue=N,c.lastRenderedState=p}return m===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function qg(s){var a=we(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=s;var c=l.dispatch,m=l.pending,p=a.memoizedState;if(m!==null){l.pending=null;var v=m=m.next;do p=s(p,v.action),v=v.next;while(v!==m);Vn(p,a.memoizedState)||(ze=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),l.lastRenderedState=p}return[p,c]}function p0(s,a,l){var c=Dt,m=we(),p=Bt;if(p){if(l===void 0)throw Error(n(407));l=l()}else l=a();var v=!Vn((re||m).memoizedState,l);if(v&&(m.memoizedState=l,ze=!0),m=m.queue,Yg(b0.bind(null,c,m,s),[s]),m.getSnapshot!==a||v||ke!==null&&ke.memoizedState.tag&1){if(c.flags|=2048,So(9,{destroy:void 0},_0.bind(null,c,m,l,a),null),le===null)throw Error(n(349));p||(ls&127)!==0||y0(c,a,l)}return l}function y0(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Dt.updateQueue,a===null?(a=Ch(),Dt.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function _0(s,a,l,c){a.value=l,a.getSnapshot=c,v0(a)&&T0(s)}function b0(s,a,l){return l(function(){v0(a)&&T0(s)})}function v0(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!Vn(s,l)}catch{return!0}}function T0(s){var a=Zr(s,2);a!==null&&En(a,s,2)}function Gg(s){var a=gn();if(typeof s=="function"){var l=s;if(s=l(),oa){qn(!0);try{l()}finally{qn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:s},a}function E0(s,a,l,c){return s.baseState=l,Hg(s,re,typeof c=="function"?c:us)}function Ww(s,a,l,c,m){if(Ph(s))throw Error(n(485));if(s=a.action,s!==null){var p={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};Q.T!==null?l(!0):p.isTransition=!1,c(p),l=a.pending,l===null?(p.next=a.pending=p,S0(a,p)):(p.next=l.next,a.pending=l.next=p)}}function S0(s,a){var l=a.action,c=a.payload,m=s.state;if(a.isTransition){var p=Q.T,v={};Q.T=v;try{var A=l(m,c),N=Q.S;N!==null&&N(v,A),A0(s,a,A)}catch(G){Kg(s,a,G)}finally{p!==null&&v.types!==null&&(p.types=v.types),Q.T=p}}else try{p=l(m,c),A0(s,a,p)}catch(G){Kg(s,a,G)}}function A0(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){x0(s,a,c)},function(c){return Kg(s,a,c)}):x0(s,a,l)}function x0(s,a,l){a.status="fulfilled",a.value=l,w0(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,S0(s,l)))}function Kg(s,a,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,w0(a),a=a.next;while(a!==c)}s.action=null}function w0(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function R0(s,a){return a}function I0(s,a){if(Bt){var l=le.formState;if(l!==null){t:{var c=Dt;if(Bt){if(he){e:{for(var m=he,p=Jn;m.nodeType!==8;){if(!p){m=null;break e}if(m=ei(m.nextSibling),m===null){m=null;break e}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){he=ei(m.nextSibling),c=m.data==="F!";break t}}Fs(c)}c=!1}c&&(a=l[0])}}return l=gn(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:R0,lastRenderedState:a},l.queue=c,l=Y0.bind(null,Dt,c),c.dispatch=l,c=Gg(!1),p=Zg.bind(null,Dt,!1,c.queue),c=gn(),m={state:a,dispatch:null,action:s,pending:null},c.queue=m,l=Ww.bind(null,Dt,m,p,l),m.dispatch=l,c.memoizedState=s,[a,l,!1]}function D0(s){var a=we();return C0(a,re,s)}function C0(s,a,l){if(a=Hg(s,a,R0)[0],s=Vh(us)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=hu(a)}catch(v){throw v===_o?Eh:v}else c=a;a=we();var m=a.queue,p=m.dispatch;return l!==a.memoizedState&&(Dt.flags|=2048,So(9,{destroy:void 0},$w.bind(null,m,l),null)),[c,p,s]}function $w(s,a){s.action=a}function M0(s){var a=we(),l=re;if(l!==null)return C0(a,l,s);we(),a=a.memoizedState,l=we();var c=l.queue.dispatch;return l.memoizedState=s,[a,c,!1]}function So(s,a,l,c){return s={tag:s,create:l,deps:c,inst:a,next:null},a=Dt.updateQueue,a===null&&(a=Ch(),Dt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,a.lastEffect=s),s}function V0(){return we().memoizedState}function Oh(s,a,l,c){var m=gn();Dt.flags|=s,m.memoizedState=So(1|a,{destroy:void 0},l,c===void 0?null:c)}function Nh(s,a,l,c){var m=we();c=c===void 0?null:c;var p=m.memoizedState.inst;re!==null&&c!==null&&zg(c,re.memoizedState.deps)?m.memoizedState=So(a,p,l,c):(Dt.flags|=s,m.memoizedState=So(1|a,p,l,c))}function O0(s,a){Oh(8390656,8,s,a)}function Yg(s,a){Nh(2048,8,s,a)}function Zw(s){Dt.flags|=4;var a=Dt.updateQueue;if(a===null)a=Ch(),Dt.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function N0(s){var a=we().memoizedState;return Zw({ref:a,nextImpl:s}),function(){if((Xt&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function P0(s,a){return Nh(4,2,s,a)}function k0(s,a){return Nh(4,4,s,a)}function z0(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function L0(s,a,l){l=l!=null?l.concat([s]):null,Nh(4,4,z0.bind(null,a,s),l)}function Qg(){}function B0(s,a){var l=we();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&zg(a,c[1])?c[0]:(l.memoizedState=[s,a],s)}function U0(s,a){var l=we();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&zg(a,c[1]))return c[0];if(c=s(),oa){qn(!0);try{s()}finally{qn(!1)}}return l.memoizedState=[c,a],c}function Xg(s,a,l){return l===void 0||(ls&1073741824)!==0&&(kt&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=jb(),Dt.lanes|=s,$s|=s,l)}function j0(s,a,l,c){return Vn(l,a)?l:vo.current!==null?(s=Xg(s,l,c),Vn(s,a)||(ze=!0),s):(ls&42)===0||(ls&1073741824)!==0&&(kt&261930)===0?(ze=!0,s.memoizedState=l):(s=jb(),Dt.lanes|=s,$s|=s,a)}function F0(s,a,l,c,m){var p=at.p;at.p=p!==0&&8>p?p:8;var v=Q.T,A={};Q.T=A,Zg(s,!1,a,l);try{var N=m(),G=Q.S;if(G!==null&&G(A,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=Yw(N,c);fu(s,a,$,Ln(s))}else fu(s,a,c,Ln(s))}catch(nt){fu(s,a,{then:function(){},status:"rejected",reason:nt},Ln())}finally{at.p=p,v!==null&&A.types!==null&&(v.types=A.types),Q.T=v}}function Jw(){}function Wg(s,a,l,c){if(s.tag!==5)throw Error(n(476));var m=H0(s).queue;F0(s,m,a,gt,l===null?Jw:function(){return q0(s),l(c)})}function H0(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:gt},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function q0(s){var a=H0(s);a.next===null&&(a=s.alternate.memoizedState),fu(s,a.next.queue,{},Ln())}function $g(){return sn(Du)}function G0(){return we().memoizedState}function K0(){return we().memoizedState}function t2(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Ln();s=Gs(l);var c=Ks(a,s,l);c!==null&&(En(c,a,l),ou(c,a,l)),a={cache:wg()},s.payload=a;return}a=a.return}}function e2(s,a,l){var c=Ln();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ph(s)?Q0(a,l):(l=mg(s,a,l,c),l!==null&&(En(l,s,c),X0(l,a,c)))}function Y0(s,a,l){var c=Ln();fu(s,a,l,c)}function fu(s,a,l,c){var m={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ph(s))Q0(a,m);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var v=a.lastRenderedState,A=p(v,l);if(m.hasEagerState=!0,m.eagerState=A,Vn(A,v))return mh(s,a,m,0),le===null&&gh(),!1}catch{}finally{}if(l=mg(s,a,m,c),l!==null)return En(l,s,c),X0(l,a,c),!0}return!1}function Zg(s,a,l,c){if(c={lane:2,revertLane:Cm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ph(s)){if(a)throw Error(n(479))}else a=mg(s,l,c,2),a!==null&&En(a,s,2)}function Ph(s){var a=s.alternate;return s===Dt||a!==null&&a===Dt}function Q0(s,a){To=Ih=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function X0(s,a,l){if((l&4194048)!==0){var c=a.lanes;c&=s.pendingLanes,l|=c,a.lanes=l,Nl(s,l)}}var du={readContext:sn,use:Mh,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useLayoutEffect:ve,useInsertionEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useSyncExternalStore:ve,useId:ve,useHostTransitionStatus:ve,useFormState:ve,useActionState:ve,useOptimistic:ve,useMemoCache:ve,useCacheRefresh:ve};du.useEffectEvent=ve;var W0={readContext:sn,use:Mh,useCallback:function(s,a){return gn().memoizedState=[s,a===void 0?null:a],s},useContext:sn,useEffect:O0,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,Oh(4194308,4,z0.bind(null,a,s),l)},useLayoutEffect:function(s,a){return Oh(4194308,4,s,a)},useInsertionEffect:function(s,a){Oh(4,2,s,a)},useMemo:function(s,a){var l=gn();a=a===void 0?null:a;var c=s();if(oa){qn(!0);try{s()}finally{qn(!1)}}return l.memoizedState=[c,a],c},useReducer:function(s,a,l){var c=gn();if(l!==void 0){var m=l(a);if(oa){qn(!0);try{l(a)}finally{qn(!1)}}}else m=a;return c.memoizedState=c.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},c.queue=s,s=s.dispatch=e2.bind(null,Dt,s),[c.memoizedState,s]},useRef:function(s){var a=gn();return s={current:s},a.memoizedState=s},useState:function(s){s=Gg(s);var a=s.queue,l=Y0.bind(null,Dt,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:Qg,useDeferredValue:function(s,a){var l=gn();return Xg(l,s,a)},useTransition:function(){var s=Gg(!1);return s=F0.bind(null,Dt,s.queue,!0,!1),gn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var c=Dt,m=gn();if(Bt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),le===null)throw Error(n(349));(kt&127)!==0||y0(c,a,l)}m.memoizedState=l;var p={value:l,getSnapshot:a};return m.queue=p,O0(b0.bind(null,c,p,s),[s]),c.flags|=2048,So(9,{destroy:void 0},_0.bind(null,c,p,l,a),null),l},useId:function(){var s=gn(),a=le.identifierPrefix;if(Bt){var l=Ui,c=Bi;l=(c&~(1<<32-Se(c)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Dh++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=Qw++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:$g,useFormState:I0,useActionState:I0,useOptimistic:function(s){var a=gn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Zg.bind(null,Dt,!0,l),l.dispatch=a,[s,a]},useMemoCache:Fg,useCacheRefresh:function(){return gn().memoizedState=t2.bind(null,Dt)},useEffectEvent:function(s){var a=gn(),l={impl:s};return a.memoizedState=l,function(){if((Xt&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},Jg={readContext:sn,use:Mh,useCallback:B0,useContext:sn,useEffect:Yg,useImperativeHandle:L0,useInsertionEffect:P0,useLayoutEffect:k0,useMemo:U0,useReducer:Vh,useRef:V0,useState:function(){return Vh(us)},useDebugValue:Qg,useDeferredValue:function(s,a){var l=we();return j0(l,re.memoizedState,s,a)},useTransition:function(){var s=Vh(us)[0],a=we().memoizedState;return[typeof s=="boolean"?s:hu(s),a]},useSyncExternalStore:p0,useId:G0,useHostTransitionStatus:$g,useFormState:D0,useActionState:D0,useOptimistic:function(s,a){var l=we();return E0(l,re,s,a)},useMemoCache:Fg,useCacheRefresh:K0};Jg.useEffectEvent=N0;var $0={readContext:sn,use:Mh,useCallback:B0,useContext:sn,useEffect:Yg,useImperativeHandle:L0,useInsertionEffect:P0,useLayoutEffect:k0,useMemo:U0,useReducer:qg,useRef:V0,useState:function(){return qg(us)},useDebugValue:Qg,useDeferredValue:function(s,a){var l=we();return re===null?Xg(l,s,a):j0(l,re.memoizedState,s,a)},useTransition:function(){var s=qg(us)[0],a=we().memoizedState;return[typeof s=="boolean"?s:hu(s),a]},useSyncExternalStore:p0,useId:G0,useHostTransitionStatus:$g,useFormState:M0,useActionState:M0,useOptimistic:function(s,a){var l=we();return re!==null?E0(l,re,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Fg,useCacheRefresh:K0};$0.useEffectEvent=N0;function tm(s,a,l,c){a=s.memoizedState,l=l(c,a),l=l==null?a:_({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var em={enqueueSetState:function(s,a,l){s=s._reactInternals;var c=Ln(),m=Gs(c);m.payload=a,l!=null&&(m.callback=l),a=Ks(s,m,c),a!==null&&(En(a,s,c),ou(a,s,c))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var c=Ln(),m=Gs(c);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=Ks(s,m,c),a!==null&&(En(a,s,c),ou(a,s,c))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Ln(),c=Gs(l);c.tag=2,a!=null&&(c.callback=a),a=Ks(s,c,l),a!==null&&(En(a,s,l),ou(a,s,l))}};function Z0(s,a,l,c,m,p,v){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,p,v):a.prototype&&a.prototype.isPureReactComponent?!Jl(l,c)||!Jl(m,p):!0}function J0(s,a,l,c){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==s&&em.enqueueReplaceState(a,a.state,null)}function la(s,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(s=s.defaultProps){l===a&&(l=_({},l));for(var m in s)l[m]===void 0&&(l[m]=s[m])}return l}function tb(s){dh(s)}function eb(s){console.error(s)}function nb(s){dh(s)}function kh(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function ib(s,a,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function nm(s,a,l){return l=Gs(l),l.tag=3,l.payload={element:null},l.callback=function(){kh(s,a)},l}function sb(s){return s=Gs(s),s.tag=3,s}function rb(s,a,l,c){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var p=c.value;s.payload=function(){return m(p)},s.callback=function(){ib(a,l,c)}}var v=l.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){ib(a,l,c),typeof m!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})})}function n2(s,a,l,c,m){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&mo(a,l,m,!0),l=Nn.current,l!==null){switch(l.tag){case 31:case 13:return ti===null?Qh():l.alternate===null&&Te===0&&(Te=3),l.flags&=-257,l.flags|=65536,l.lanes=m,c===Sh?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),Rm(s,c,m)),!1;case 22:return l.flags|=65536,c===Sh?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),Rm(s,c,m)),!1}throw Error(n(435,l.tag))}return Rm(s,c,m),Qh(),!1}if(Bt)return a=Nn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,c!==Tg&&(s=Error(n(422),{cause:c}),nu(Wn(s,l)))):(c!==Tg&&(a=Error(n(423),{cause:c}),nu(Wn(a,l))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,c=Wn(c,l),m=nm(s.stateNode,c,m),Vg(s,m),Te!==4&&(Te=2)),!1;var p=Error(n(520),{cause:c});if(p=Wn(p,l),Tu===null?Tu=[p]:Tu.push(p),Te!==4&&(Te=2),a===null)return!0;c=Wn(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=m&-m,l.lanes|=s,s=nm(l.stateNode,c,s),Vg(l,s),!1;case 1:if(a=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Zs===null||!Zs.has(p))))return l.flags|=65536,m&=-m,l.lanes|=m,m=sb(m),rb(m,s,l,c),Vg(l,m),!1}l=l.return}while(l!==null);return!1}var im=Error(n(461)),ze=!1;function rn(s,a,l,c){a.child=s===null?u0(a,null,l,c):aa(a,s.child,l,c)}function ab(s,a,l,c,m){l=l.render;var p=a.ref;if("ref"in c){var v={};for(var A in c)A!=="ref"&&(v[A]=c[A])}else v=c;return na(a),c=Lg(s,a,l,v,p,m),A=Bg(),s!==null&&!ze?(Ug(s,a,m),cs(s,a,m)):(Bt&&A&&bg(a),a.flags|=1,rn(s,a,c,m),a.child)}function ob(s,a,l,c,m){if(s===null){var p=l.type;return typeof p=="function"&&!pg(p)&&p.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=p,lb(s,a,p,c,m)):(s=yh(l.type,null,c,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(p=s.child,!hm(s,m)){var v=p.memoizedProps;if(l=l.compare,l=l!==null?l:Jl,l(v,c)&&s.ref===a.ref)return cs(s,a,m)}return a.flags|=1,s=ss(p,c),s.ref=a.ref,s.return=a,a.child=s}function lb(s,a,l,c,m){if(s!==null){var p=s.memoizedProps;if(Jl(p,c)&&s.ref===a.ref)if(ze=!1,a.pendingProps=c=p,hm(s,m))(s.flags&131072)!==0&&(ze=!0);else return a.lanes=s.lanes,cs(s,a,m)}return sm(s,a,l,c,m)}function ub(s,a,l,c){var m=c.children,p=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|l:l,s!==null){for(c=a.child=s.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~p}else c=0,a.child=null;return cb(s,a,p,l,c)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Th(a,p!==null?p.cachePool:null),p!==null?f0(a,p):Ng(),d0(a);else return c=a.lanes=536870912,cb(s,a,p!==null?p.baseLanes|l:l,l,c)}else p!==null?(Th(a,p.cachePool),f0(a,p),Qs(),a.memoizedState=null):(s!==null&&Th(a,null),Ng(),Qs());return rn(s,a,m,l),a.child}function gu(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function cb(s,a,l,c,m){var p=Ig();return p=p===null?null:{parent:Pe._currentValue,pool:p},a.memoizedState={baseLanes:l,cachePool:p},s!==null&&Th(a,null),Ng(),d0(a),s!==null&&mo(s,a,c,!0),a.childLanes=m,null}function zh(s,a){return a=Bh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function hb(s,a,l){return aa(a,s.child,null,l),s=zh(a,a.pendingProps),s.flags|=2,Pn(a),a.memoizedState=null,s}function i2(s,a,l){var c=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Bt){if(c.mode==="hidden")return s=zh(a,c),a.lanes=536870912,gu(null,s);if(kg(a),(s=he)?(s=Sv(s,Jn),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Us!==null?{id:Bi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},l=Q_(s),l.return=a,a.child=l,nn=a,he=null)):s=null,s===null)throw Fs(a);return a.lanes=536870912,null}return zh(a,c)}var p=s.memoizedState;if(p!==null){var v=p.dehydrated;if(kg(a),m)if(a.flags&256)a.flags&=-257,a=hb(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(n(558));else if(ze||mo(s,a,l,!1),m=(l&s.childLanes)!==0,ze||m){if(c=le,c!==null&&(v=Pl(c,l),v!==0&&v!==p.retryLane))throw p.retryLane=v,Zr(s,v),En(c,s,v),im;Qh(),a=hb(s,a,l)}else s=p.treeContext,he=ei(v.nextSibling),nn=a,Bt=!0,js=null,Jn=!1,s!==null&&$_(a,s),a=zh(a,c),a.flags|=4096;return a}return s=ss(s.child,{mode:c.mode,children:c.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Lh(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function sm(s,a,l,c,m){return na(a),l=Lg(s,a,l,c,void 0,m),c=Bg(),s!==null&&!ze?(Ug(s,a,m),cs(s,a,m)):(Bt&&c&&bg(a),a.flags|=1,rn(s,a,l,m),a.child)}function fb(s,a,l,c,m,p){return na(a),a.updateQueue=null,l=m0(a,c,l,m),g0(s),c=Bg(),s!==null&&!ze?(Ug(s,a,p),cs(s,a,p)):(Bt&&c&&bg(a),a.flags|=1,rn(s,a,l,p),a.child)}function db(s,a,l,c,m){if(na(a),a.stateNode===null){var p=co,v=l.contextType;typeof v=="object"&&v!==null&&(p=sn(v)),p=new l(c,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=em,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=c,p.state=a.memoizedState,p.refs={},Cg(a),v=l.contextType,p.context=typeof v=="object"&&v!==null?sn(v):co,p.state=a.memoizedState,v=l.getDerivedStateFromProps,typeof v=="function"&&(tm(a,l,v,c),p.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&em.enqueueReplaceState(p,p.state,null),uu(a,c,p,m),lu(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(s===null){p=a.stateNode;var A=a.memoizedProps,N=la(l,A);p.props=N;var G=p.context,$=l.contextType;v=co,typeof $=="object"&&$!==null&&(v=sn($));var nt=l.getDerivedStateFromProps;$=typeof nt=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,$||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||G!==v)&&J0(a,p,c,v),qs=!1;var Y=a.memoizedState;p.state=Y,uu(a,c,p,m),lu(),G=a.memoizedState,A||Y!==G||qs?(typeof nt=="function"&&(tm(a,l,nt,c),G=a.memoizedState),(N=qs||Z0(a,l,N,c,Y,G,v))?($||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=G),p.props=c,p.state=G,p.context=v,c=N):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{p=a.stateNode,Mg(s,a),v=a.memoizedProps,$=la(l,v),p.props=$,nt=a.pendingProps,Y=p.context,G=l.contextType,N=co,typeof G=="object"&&G!==null&&(N=sn(G)),A=l.getDerivedStateFromProps,(G=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==nt||Y!==N)&&J0(a,p,c,N),qs=!1,Y=a.memoizedState,p.state=Y,uu(a,c,p,m),lu();var W=a.memoizedState;v!==nt||Y!==W||qs||s!==null&&s.dependencies!==null&&bh(s.dependencies)?(typeof A=="function"&&(tm(a,l,A,c),W=a.memoizedState),($=qs||Z0(a,l,$,c,Y,W,N)||s!==null&&s.dependencies!==null&&bh(s.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,W,N),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,W,N)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===s.memoizedProps&&Y===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===s.memoizedProps&&Y===s.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=W),p.props=c,p.state=W,p.context=N,c=$):(typeof p.componentDidUpdate!="function"||v===s.memoizedProps&&Y===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===s.memoizedProps&&Y===s.memoizedState||(a.flags|=1024),c=!1)}return p=c,Lh(s,a),c=(a.flags&128)!==0,p||c?(p=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,s!==null&&c?(a.child=aa(a,s.child,null,m),a.child=aa(a,null,l,m)):rn(s,a,l,m),a.memoizedState=p.state,s=a.child):s=cs(s,a,m),s}function gb(s,a,l,c){return ta(),a.flags|=256,rn(s,a,l,c),a.child}var rm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function am(s){return{baseLanes:s,cachePool:i0()}}function om(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=zn),s}function mb(s,a,l){var c=a.pendingProps,m=!1,p=(a.flags&128)!==0,v;if((v=p)||(v=s!==null&&s.memoizedState===null?!1:(xe.current&2)!==0),v&&(m=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,s===null){if(Bt){if(m?Ys(a):Qs(),(s=he)?(s=Sv(s,Jn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Us!==null?{id:Bi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},l=Q_(s),l.return=a,a.child=l,nn=a,he=null)):s=null,s===null)throw Fs(a);return Hm(s)?a.lanes=32:a.lanes=536870912,null}var A=c.children;return c=c.fallback,m?(Qs(),m=a.mode,A=Bh({mode:"hidden",children:A},m),c=Jr(c,m,l,null),A.return=a,c.return=a,A.sibling=c,a.child=A,c=a.child,c.memoizedState=am(l),c.childLanes=om(s,v,l),a.memoizedState=rm,gu(null,c)):(Ys(a),lm(a,A))}var N=s.memoizedState;if(N!==null&&(A=N.dehydrated,A!==null)){if(p)a.flags&256?(Ys(a),a.flags&=-257,a=um(s,a,l)):a.memoizedState!==null?(Qs(),a.child=s.child,a.flags|=128,a=null):(Qs(),A=c.fallback,m=a.mode,c=Bh({mode:"visible",children:c.children},m),A=Jr(A,m,l,null),A.flags|=2,c.return=a,A.return=a,c.sibling=A,a.child=c,aa(a,s.child,null,l),c=a.child,c.memoizedState=am(l),c.childLanes=om(s,v,l),a.memoizedState=rm,a=gu(null,c));else if(Ys(a),Hm(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var G=v.dgst;v=G,c=Error(n(419)),c.stack="",c.digest=v,nu({value:c,source:null,stack:null}),a=um(s,a,l)}else if(ze||mo(s,a,l,!1),v=(l&s.childLanes)!==0,ze||v){if(v=le,v!==null&&(c=Pl(v,l),c!==0&&c!==N.retryLane))throw N.retryLane=c,Zr(s,c),En(v,s,c),im;Fm(A)||Qh(),a=um(s,a,l)}else Fm(A)?(a.flags|=192,a.child=s.child,a=null):(s=N.treeContext,he=ei(A.nextSibling),nn=a,Bt=!0,js=null,Jn=!1,s!==null&&$_(a,s),a=lm(a,c.children),a.flags|=4096);return a}return m?(Qs(),A=c.fallback,m=a.mode,N=s.child,G=N.sibling,c=ss(N,{mode:"hidden",children:c.children}),c.subtreeFlags=N.subtreeFlags&65011712,G!==null?A=ss(G,A):(A=Jr(A,m,l,null),A.flags|=2),A.return=a,c.return=a,c.sibling=A,a.child=c,gu(null,c),c=a.child,A=s.child.memoizedState,A===null?A=am(l):(m=A.cachePool,m!==null?(N=Pe._currentValue,m=m.parent!==N?{parent:N,pool:N}:m):m=i0(),A={baseLanes:A.baseLanes|l,cachePool:m}),c.memoizedState=A,c.childLanes=om(s,v,l),a.memoizedState=rm,gu(s.child,c)):(Ys(a),l=s.child,s=l.sibling,l=ss(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,s!==null&&(v=a.deletions,v===null?(a.deletions=[s],a.flags|=16):v.push(s)),a.child=l,a.memoizedState=null,l)}function lm(s,a){return a=Bh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Bh(s,a){return s=On(22,s,null,a),s.lanes=0,s}function um(s,a,l){return aa(a,s.child,null,l),s=lm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function pb(s,a,l){s.lanes|=a;var c=s.alternate;c!==null&&(c.lanes|=a),Ag(s.return,a,l)}function cm(s,a,l,c,m,p){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:m,treeForkCount:p}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=l,v.tailMode=m,v.treeForkCount=p)}function yb(s,a,l){var c=a.pendingProps,m=c.revealOrder,p=c.tail;c=c.children;var v=xe.current,A=(v&2)!==0;if(A?(v=v&1|2,a.flags|=128):v&=1,ct(xe,v),rn(s,a,c,l),c=Bt?eu:0,!A&&s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&pb(s,l,a);else if(s.tag===19)pb(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(m){case"forwards":for(l=a.child,m=null;l!==null;)s=l.alternate,s!==null&&Rh(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),cm(a,!1,m,l,p,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&Rh(s)===null){a.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}cm(a,!0,l,null,p,c);break;case"together":cm(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function cs(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),$s|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(mo(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,l=ss(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=ss(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function hm(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&bh(s)))}function s2(s,a,l){switch(a.tag){case 3:Fe(a,a.stateNode.containerInfo),Hs(a,Pe,s.memoizedState.cache),ta();break;case 27:case 5:Nr(a);break;case 4:Fe(a,a.stateNode.containerInfo);break;case 10:Hs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,kg(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Ys(a),a.flags|=128,null):(l&a.child.childLanes)!==0?mb(s,a,l):(Ys(a),s=cs(s,a,l),s!==null?s.sibling:null);Ys(a);break;case 19:var m=(s.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(mo(s,a,l,!1),c=(l&a.childLanes)!==0),m){if(c)return yb(s,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ct(xe,xe.current),c)break;return null;case 22:return a.lanes=0,ub(s,a,l,a.pendingProps);case 24:Hs(a,Pe,s.memoizedState.cache)}return cs(s,a,l)}function _b(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)ze=!0;else{if(!hm(s,l)&&(a.flags&128)===0)return ze=!1,s2(s,a,l);ze=(s.flags&131072)!==0}else ze=!1,Bt&&(a.flags&1048576)!==0&&W_(a,eu,a.index);switch(a.lanes=0,a.tag){case 16:t:{var c=a.pendingProps;if(s=sa(a.elementType),a.type=s,typeof s=="function")pg(s)?(c=la(s,c),a.tag=1,a=db(null,a,s,c,l)):(a.tag=0,a=sm(null,a,s,c,l));else{if(s!=null){var m=s.$$typeof;if(m===it){a.tag=11,a=ab(null,a,s,c,l);break t}else if(m===R){a.tag=14,a=ob(null,a,s,c,l);break t}}throw a=Vt(s)||s,Error(n(306,a,""))}}return a;case 0:return sm(s,a,a.type,a.pendingProps,l);case 1:return c=a.type,m=la(c,a.pendingProps),db(s,a,c,m,l);case 3:t:{if(Fe(a,a.stateNode.containerInfo),s===null)throw Error(n(387));c=a.pendingProps;var p=a.memoizedState;m=p.element,Mg(s,a),uu(a,c,null,l);var v=a.memoizedState;if(c=v.cache,Hs(a,Pe,c),c!==p.cache&&xg(a,[Pe],l,!0),lu(),c=v.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=gb(s,a,c,l);break t}else if(c!==m){m=Wn(Error(n(424)),a),nu(m),a=gb(s,a,c,l);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(he=ei(s.firstChild),nn=a,Bt=!0,js=null,Jn=!0,l=u0(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ta(),c===m){a=cs(s,a,l);break t}rn(s,a,c,l)}a=a.child}return a;case 26:return Lh(s,a),s===null?(l=Dv(a.type,null,a.pendingProps,null))?a.memoizedState=l:Bt||(l=a.type,s=a.pendingProps,c=ef(At.current).createElement(l),c[Ve]=a,c[Qe]=s,an(c,l,s),Oe(c),a.stateNode=c):a.memoizedState=Dv(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Nr(a),s===null&&Bt&&(c=a.stateNode=wv(a.type,a.pendingProps,At.current),nn=a,Jn=!0,m=he,nr(a.type)?(qm=m,he=ei(c.firstChild)):he=m),rn(s,a,a.pendingProps.children,l),Lh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Bt&&((m=c=he)&&(c=N2(c,a.type,a.pendingProps,Jn),c!==null?(a.stateNode=c,nn=a,he=ei(c.firstChild),Jn=!1,m=!0):m=!1),m||Fs(a)),Nr(a),m=a.type,p=a.pendingProps,v=s!==null?s.memoizedProps:null,c=p.children,Bm(m,p)?c=null:v!==null&&Bm(m,v)&&(a.flags|=32),a.memoizedState!==null&&(m=Lg(s,a,Xw,null,null,l),Du._currentValue=m),Lh(s,a),rn(s,a,c,l),a.child;case 6:return s===null&&Bt&&((s=l=he)&&(l=P2(l,a.pendingProps,Jn),l!==null?(a.stateNode=l,nn=a,he=null,s=!0):s=!1),s||Fs(a)),null;case 13:return mb(s,a,l);case 4:return Fe(a,a.stateNode.containerInfo),c=a.pendingProps,s===null?a.child=aa(a,null,c,l):rn(s,a,c,l),a.child;case 11:return ab(s,a,a.type,a.pendingProps,l);case 7:return rn(s,a,a.pendingProps,l),a.child;case 8:return rn(s,a,a.pendingProps.children,l),a.child;case 12:return rn(s,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,Hs(a,a.type,c.value),rn(s,a,c.children,l),a.child;case 9:return m=a.type._context,c=a.pendingProps.children,na(a),m=sn(m),c=c(m),a.flags|=1,rn(s,a,c,l),a.child;case 14:return ob(s,a,a.type,a.pendingProps,l);case 15:return lb(s,a,a.type,a.pendingProps,l);case 19:return yb(s,a,l);case 31:return i2(s,a,l);case 22:return ub(s,a,l,a.pendingProps);case 24:return na(a),c=sn(Pe),s===null?(m=Ig(),m===null&&(m=le,p=wg(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=l),m=p),a.memoizedState={parent:c,cache:m},Cg(a),Hs(a,Pe,m)):((s.lanes&l)!==0&&(Mg(s,a),uu(a,null,null,l),lu()),m=s.memoizedState,p=a.memoizedState,m.parent!==c?(m={parent:c,cache:c},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Hs(a,Pe,c)):(c=p.cache,Hs(a,Pe,c),c!==m.cache&&xg(a,[Pe],l,!0))),rn(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function hs(s){s.flags|=4}function fm(s,a,l,c,m){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(m&335544128)===m)if(s.stateNode.complete)s.flags|=8192;else if(Gb())s.flags|=8192;else throw ra=Sh,Dg}else s.flags&=-16777217}function bb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Nv(a))if(Gb())s.flags|=8192;else throw ra=Sh,Dg}function Uh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Kc():536870912,s.lanes|=a,Ro|=a)}function mu(s,a){if(!Bt)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function fe(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(a)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=c,s.childLanes=l,a}function r2(s,a,l){var c=a.pendingProps;switch(vg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fe(a),null;case 1:return fe(a),null;case 3:return l=a.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),os(Pe),me(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(go(a)?hs(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Eg())),fe(a),null;case 26:var m=a.type,p=a.memoizedState;return s===null?(hs(a),p!==null?(fe(a),bb(a,p)):(fe(a),fm(a,m,null,c,l))):p?p!==s.memoizedState?(hs(a),fe(a),bb(a,p)):(fe(a),a.flags&=-16777217):(s=s.memoizedProps,s!==c&&hs(a),fe(a),fm(a,m,s,c,l)),null;case 27:if(Ga(a),l=At.current,m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==c&&hs(a);else{if(!c){if(a.stateNode===null)throw Error(n(166));return fe(a),null}s=ft.current,go(a)?Z_(a):(s=wv(m,c,l),a.stateNode=s,hs(a))}return fe(a),null;case 5:if(Ga(a),m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==c&&hs(a);else{if(!c){if(a.stateNode===null)throw Error(n(166));return fe(a),null}if(p=ft.current,go(a))Z_(a);else{var v=ef(At.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?v.createElement(m,{is:c.is}):v.createElement(m)}}p[Ve]=a,p[Qe]=c;t:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break t;for(;v.sibling===null;){if(v.return===null||v.return===a)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=p;t:switch(an(p,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&hs(a)}}return fe(a),fm(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==c&&hs(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(n(166));if(s=At.current,go(a)){if(s=a.stateNode,l=a.memoizedProps,c=null,m=nn,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}s[Ve]=a,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||mv(s.nodeValue,l)),s||Fs(a,!0)}else s=ef(s).createTextNode(c),s[Ve]=a,a.stateNode=s}return fe(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(c=go(a),l!==null){if(s===null){if(!c)throw Error(n(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[Ve]=a}else ta(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;fe(a),s=!1}else l=Eg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(Pn(a),a):(Pn(a),null);if((a.flags&128)!==0)throw Error(n(558))}return fe(a),null;case 13:if(c=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=go(a),c!==null&&c.dehydrated!==null){if(s===null){if(!m)throw Error(n(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[Ve]=a}else ta(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;fe(a),m=!1}else m=Eg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(Pn(a),a):(Pn(a),null)}return Pn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=a.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==m&&(c.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),Uh(a,a.updateQueue),fe(a),null);case 4:return me(),s===null&&Nm(a.stateNode.containerInfo),fe(a),null;case 10:return os(a.type),fe(a),null;case 19:if(tt(xe),c=a.memoizedState,c===null)return fe(a),null;if(m=(a.flags&128)!==0,p=c.rendering,p===null)if(m)mu(c,!1);else{if(Te!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(p=Rh(s),p!==null){for(a.flags|=128,mu(c,!1),s=p.updateQueue,a.updateQueue=s,Uh(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)Y_(l,s),l=l.sibling;return ct(xe,xe.current&1|2),Bt&&rs(a,c.treeForkCount),a.child}s=s.sibling}c.tail!==null&&fn()>Gh&&(a.flags|=128,m=!0,mu(c,!1),a.lanes=4194304)}else{if(!m)if(s=Rh(p),s!==null){if(a.flags|=128,m=!0,s=s.updateQueue,a.updateQueue=s,Uh(a,s),mu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!Bt)return fe(a),null}else 2*fn()-c.renderingStartTime>Gh&&l!==536870912&&(a.flags|=128,m=!0,mu(c,!1),a.lanes=4194304);c.isBackwards?(p.sibling=a.child,a.child=p):(s=c.last,s!==null?s.sibling=p:a.child=p,c.last=p)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=fn(),s.sibling=null,l=xe.current,ct(xe,m?l&1|2:l&1),Bt&&rs(a,c.treeForkCount),s):(fe(a),null);case 22:case 23:return Pn(a),Pg(),c=a.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(fe(a),a.subtreeFlags&6&&(a.flags|=8192)):fe(a),l=a.updateQueue,l!==null&&Uh(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),s!==null&&tt(ia),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),os(Pe),fe(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function a2(s,a){switch(vg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return os(Pe),me(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Ga(a),null;case 31:if(a.memoizedState!==null){if(Pn(a),a.alternate===null)throw Error(n(340));ta()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Pn(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));ta()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return tt(xe),null;case 4:return me(),null;case 10:return os(a.type),null;case 22:case 23:return Pn(a),Pg(),s!==null&&tt(ia),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return os(Pe),null;case 25:return null;default:return null}}function vb(s,a){switch(vg(a),a.tag){case 3:os(Pe),me();break;case 26:case 27:case 5:Ga(a);break;case 4:me();break;case 31:a.memoizedState!==null&&Pn(a);break;case 13:Pn(a);break;case 19:tt(xe);break;case 10:os(a.type);break;case 22:case 23:Pn(a),Pg(),s!==null&&tt(ia);break;case 24:os(Pe)}}function pu(s,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var m=c.next;l=m;do{if((l.tag&s)===s){c=void 0;var p=l.create,v=l.inst;c=p(),v.destroy=c}l=l.next}while(l!==m)}}catch(A){te(a,a.return,A)}}function Xs(s,a,l){try{var c=a.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var p=m.next;c=p;do{if((c.tag&s)===s){var v=c.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,m=a;var N=l,G=A;try{G()}catch($){te(m,N,$)}}}c=c.next}while(c!==p)}}catch($){te(a,a.return,$)}}function Tb(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{h0(a,l)}catch(c){te(s,s.return,c)}}}function Eb(s,a,l){l.props=la(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){te(s,a,c)}}function yu(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(m){te(s,a,m)}}function ji(s,a){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(m){te(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){te(s,a,m)}else l.current=null}function Sb(s){var a=s.type,l=s.memoizedProps,c=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break t;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(m){te(s,s.return,m)}}function dm(s,a,l){try{var c=s.stateNode;I2(c,s.type,l,a),c[Qe]=a}catch(m){te(s,s.return,m)}}function Ab(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&nr(s.type)||s.tag===4}function gm(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Ab(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&nr(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function mm(s,a,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=hi));else if(c!==4&&(c===27&&nr(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(mm(s,a,l),s=s.sibling;s!==null;)mm(s,a,l),s=s.sibling}function jh(s,a,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(c!==4&&(c===27&&nr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(jh(s,a,l),s=s.sibling;s!==null;)jh(s,a,l),s=s.sibling}function xb(s){var a=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);an(a,c,l),a[Ve]=s,a[Qe]=l}catch(p){te(s,s.return,p)}}var fs=!1,Le=!1,pm=!1,wb=typeof WeakSet=="function"?WeakSet:Set,We=null;function o2(s,a){if(s=s.containerInfo,zm=uf,s=L_(s),ug(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var m=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break t}var v=0,A=-1,N=-1,G=0,$=0,nt=s,Y=null;e:for(;;){for(var W;nt!==l||m!==0&&nt.nodeType!==3||(A=v+m),nt!==p||c!==0&&nt.nodeType!==3||(N=v+c),nt.nodeType===3&&(v+=nt.nodeValue.length),(W=nt.firstChild)!==null;)Y=nt,nt=W;for(;;){if(nt===s)break e;if(Y===l&&++G===m&&(A=v),Y===p&&++$===c&&(N=v),(W=nt.nextSibling)!==null)break;nt=Y,Y=nt.parentNode}nt=W}l=A===-1||N===-1?null:{start:A,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(Lm={focusedElem:s,selectionRange:l},uf=!1,We=a;We!==null;)if(a=We,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,We=s;else for(;We!==null;){switch(a=We,p=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)m=s[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,l=a,m=p.memoizedProps,p=p.memoizedState,c=l.stateNode;try{var mt=la(l.type,m);s=c.getSnapshotBeforeUpdate(mt,p),c.__reactInternalSnapshotBeforeUpdate=s}catch(Et){te(l,l.return,Et)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)jm(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":jm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=a.sibling,s!==null){s.return=a.return,We=s;break}We=a.return}}function Rb(s,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:gs(s,l),c&4&&pu(5,l);break;case 1:if(gs(s,l),c&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(v){te(l,l.return,v)}else{var m=la(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(v){te(l,l.return,v)}}c&64&&Tb(l),c&512&&yu(l,l.return);break;case 3:if(gs(s,l),c&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{h0(s,a)}catch(v){te(l,l.return,v)}}break;case 27:a===null&&c&4&&xb(l);case 26:case 5:gs(s,l),a===null&&c&4&&Sb(l),c&512&&yu(l,l.return);break;case 12:gs(s,l);break;case 31:gs(s,l),c&4&&Cb(s,l);break;case 13:gs(s,l),c&4&&Mb(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=p2.bind(null,l),k2(s,l))));break;case 22:if(c=l.memoizedState!==null||fs,!c){a=a!==null&&a.memoizedState!==null||Le,m=fs;var p=Le;fs=c,(Le=a)&&!p?ms(s,l,(l.subtreeFlags&8772)!==0):gs(s,l),fs=m,Le=p}break;case 30:break;default:gs(s,l)}}function Ib(s){var a=s.alternate;a!==null&&(s.alternate=null,Ib(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Wa(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ye=null,_n=!1;function ds(s,a,l){for(l=l.child;l!==null;)Db(s,a,l),l=l.sibling}function Db(s,a,l){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(oi,l)}catch{}switch(l.tag){case 26:Le||ji(l,a),ds(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Le||ji(l,a);var c=ye,m=_n;nr(l.type)&&(ye=l.stateNode,_n=!1),ds(s,a,l),wu(l.stateNode),ye=c,_n=m;break;case 5:Le||ji(l,a);case 6:if(c=ye,m=_n,ye=null,ds(s,a,l),ye=c,_n=m,ye!==null)if(_n)try{(ye.nodeType===9?ye.body:ye.nodeName==="HTML"?ye.ownerDocument.body:ye).removeChild(l.stateNode)}catch(p){te(l,a,p)}else try{ye.removeChild(l.stateNode)}catch(p){te(l,a,p)}break;case 18:ye!==null&&(_n?(s=ye,Tv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Po(s)):Tv(ye,l.stateNode));break;case 4:c=ye,m=_n,ye=l.stateNode.containerInfo,_n=!0,ds(s,a,l),ye=c,_n=m;break;case 0:case 11:case 14:case 15:Xs(2,l,a),Le||Xs(4,l,a),ds(s,a,l);break;case 1:Le||(ji(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Eb(l,a,c)),ds(s,a,l);break;case 21:ds(s,a,l);break;case 22:Le=(c=Le)||l.memoizedState!==null,ds(s,a,l),Le=c;break;default:ds(s,a,l)}}function Cb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Po(s)}catch(l){te(a,a.return,l)}}}function Mb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Po(s)}catch(l){te(a,a.return,l)}}function l2(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new wb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new wb),a;default:throw Error(n(435,s.tag))}}function Fh(s,a){var l=l2(s);a.forEach(function(c){if(!l.has(c)){l.add(c);var m=y2.bind(null,s,c);c.then(m,m)}})}function bn(s,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var m=l[c],p=s,v=a,A=v;t:for(;A!==null;){switch(A.tag){case 27:if(nr(A.type)){ye=A.stateNode,_n=!1;break t}break;case 5:ye=A.stateNode,_n=!1;break t;case 3:case 4:ye=A.stateNode.containerInfo,_n=!0;break t}A=A.return}if(ye===null)throw Error(n(160));Db(p,v,m),ye=null,_n=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Vb(a,s),a=a.sibling}var yi=null;function Vb(s,a){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:bn(a,s),vn(s),c&4&&(Xs(3,s,s.return),pu(3,s),Xs(5,s,s.return));break;case 1:bn(a,s),vn(s),c&512&&(Le||l===null||ji(l,l.return)),c&64&&fs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var m=yi;if(bn(a,s),vn(s),c&512&&(Le||l===null||ji(l,l.return)),c&4){var p=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){t:{c=s.type,l=s.memoizedProps,m=m.ownerDocument||m;e:switch(c){case"title":p=m.getElementsByTagName("title")[0],(!p||p[Ri]||p[Ve]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(c),m.head.insertBefore(p,m.querySelector("head > title"))),an(p,c,l),p[Ve]=s,Oe(p),c=p;break t;case"link":var v=Vv("link","href",m).get(c+(l.href||""));if(v){for(var A=0;A<v.length;A++)if(p=v[A],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){v.splice(A,1);break e}}p=m.createElement(c),an(p,c,l),m.head.appendChild(p);break;case"meta":if(v=Vv("meta","content",m).get(c+(l.content||""))){for(A=0;A<v.length;A++)if(p=v[A],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){v.splice(A,1);break e}}p=m.createElement(c),an(p,c,l),m.head.appendChild(p);break;default:throw Error(n(468,c))}p[Ve]=s,Oe(p),c=p}s.stateNode=c}else Ov(m,s.type,s.stateNode);else s.stateNode=Mv(m,c,s.memoizedProps);else p!==c?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,c===null?Ov(m,s.type,s.stateNode):Mv(m,c,s.memoizedProps)):c===null&&s.stateNode!==null&&dm(s,s.memoizedProps,l.memoizedProps)}break;case 27:bn(a,s),vn(s),c&512&&(Le||l===null||ji(l,l.return)),l!==null&&c&4&&dm(s,s.memoizedProps,l.memoizedProps);break;case 5:if(bn(a,s),vn(s),c&512&&(Le||l===null||ji(l,l.return)),s.flags&32){m=s.stateNode;try{yn(m,"")}catch(mt){te(s,s.return,mt)}}c&4&&s.stateNode!=null&&(m=s.memoizedProps,dm(s,m,l!==null?l.memoizedProps:m)),c&1024&&(pm=!0);break;case 6:if(bn(a,s),vn(s),c&4){if(s.stateNode===null)throw Error(n(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(mt){te(s,s.return,mt)}}break;case 3:if(rf=null,m=yi,yi=nf(a.containerInfo),bn(a,s),yi=m,vn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Po(a.containerInfo)}catch(mt){te(s,s.return,mt)}pm&&(pm=!1,Ob(s));break;case 4:c=yi,yi=nf(s.stateNode.containerInfo),bn(a,s),vn(s),yi=c;break;case 12:bn(a,s),vn(s);break;case 31:bn(a,s),vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Fh(s,c)));break;case 13:bn(a,s),vn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(qh=fn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Fh(s,c)));break;case 22:m=s.memoizedState!==null;var N=l!==null&&l.memoizedState!==null,G=fs,$=Le;if(fs=G||m,Le=$||N,bn(a,s),Le=$,fs=G,vn(s),c&8192)t:for(a=s.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(l===null||N||fs||Le||ua(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){N=l=a;try{if(p=N.stateNode,m)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=N.stateNode;var nt=N.memoizedProps.style,Y=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;A.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(mt){te(N,N.return,mt)}}}else if(a.tag===6){if(l===null){N=a;try{N.stateNode.nodeValue=m?"":N.memoizedProps}catch(mt){te(N,N.return,mt)}}}else if(a.tag===18){if(l===null){N=a;try{var W=N.stateNode;m?Ev(W,!0):Ev(N.stateNode,!1)}catch(mt){te(N,N.return,mt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Fh(s,l))));break;case 19:bn(a,s),vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Fh(s,c)));break;case 30:break;case 21:break;default:bn(a,s),vn(s)}}function vn(s){var a=s.flags;if(a&2){try{for(var l,c=s.return;c!==null;){if(Ab(c)){l=c;break}c=c.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var m=l.stateNode,p=gm(s);jh(s,p,m);break;case 5:var v=l.stateNode;l.flags&32&&(yn(v,""),l.flags&=-33);var A=gm(s);jh(s,A,v);break;case 3:case 4:var N=l.stateNode.containerInfo,G=gm(s);mm(s,G,N);break;default:throw Error(n(161))}}catch($){te(s,s.return,$)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Ob(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Ob(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function gs(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Rb(s,a.alternate,a),a=a.sibling}function ua(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Xs(4,a,a.return),ua(a);break;case 1:ji(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Eb(a,a.return,l),ua(a);break;case 27:wu(a.stateNode);case 26:case 5:ji(a,a.return),ua(a);break;case 22:a.memoizedState===null&&ua(a);break;case 30:ua(a);break;default:ua(a)}s=s.sibling}}function ms(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,m=s,p=a,v=p.flags;switch(p.tag){case 0:case 11:case 15:ms(m,p,l),pu(4,p);break;case 1:if(ms(m,p,l),c=p,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(G){te(c,c.return,G)}if(c=p,m=c.updateQueue,m!==null){var A=c.stateNode;try{var N=m.shared.hiddenCallbacks;if(N!==null)for(m.shared.hiddenCallbacks=null,m=0;m<N.length;m++)c0(N[m],A)}catch(G){te(c,c.return,G)}}l&&v&64&&Tb(p),yu(p,p.return);break;case 27:xb(p);case 26:case 5:ms(m,p,l),l&&c===null&&v&4&&Sb(p),yu(p,p.return);break;case 12:ms(m,p,l);break;case 31:ms(m,p,l),l&&v&4&&Cb(m,p);break;case 13:ms(m,p,l),l&&v&4&&Mb(m,p);break;case 22:p.memoizedState===null&&ms(m,p,l),yu(p,p.return);break;case 30:break;default:ms(m,p,l)}a=a.sibling}}function ym(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&iu(l))}function _m(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&iu(s))}function _i(s,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Nb(s,a,l,c),a=a.sibling}function Nb(s,a,l,c){var m=a.flags;switch(a.tag){case 0:case 11:case 15:_i(s,a,l,c),m&2048&&pu(9,a);break;case 1:_i(s,a,l,c);break;case 3:_i(s,a,l,c),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&iu(s)));break;case 12:if(m&2048){_i(s,a,l,c),s=a.stateNode;try{var p=a.memoizedProps,v=p.id,A=p.onPostCommit;typeof A=="function"&&A(v,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(N){te(a,a.return,N)}}else _i(s,a,l,c);break;case 31:_i(s,a,l,c);break;case 13:_i(s,a,l,c);break;case 23:break;case 22:p=a.stateNode,v=a.alternate,a.memoizedState!==null?p._visibility&2?_i(s,a,l,c):_u(s,a):p._visibility&2?_i(s,a,l,c):(p._visibility|=2,Ao(s,a,l,c,(a.subtreeFlags&10256)!==0||!1)),m&2048&&ym(v,a);break;case 24:_i(s,a,l,c),m&2048&&_m(a.alternate,a);break;default:_i(s,a,l,c)}}function Ao(s,a,l,c,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=s,v=a,A=l,N=c,G=v.flags;switch(v.tag){case 0:case 11:case 15:Ao(p,v,A,N,m),pu(8,v);break;case 23:break;case 22:var $=v.stateNode;v.memoizedState!==null?$._visibility&2?Ao(p,v,A,N,m):_u(p,v):($._visibility|=2,Ao(p,v,A,N,m)),m&&G&2048&&ym(v.alternate,v);break;case 24:Ao(p,v,A,N,m),m&&G&2048&&_m(v.alternate,v);break;default:Ao(p,v,A,N,m)}a=a.sibling}}function _u(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,c=a,m=c.flags;switch(c.tag){case 22:_u(l,c),m&2048&&ym(c.alternate,c);break;case 24:_u(l,c),m&2048&&_m(c.alternate,c);break;default:_u(l,c)}a=a.sibling}}var bu=8192;function xo(s,a,l){if(s.subtreeFlags&bu)for(s=s.child;s!==null;)Pb(s,a,l),s=s.sibling}function Pb(s,a,l){switch(s.tag){case 26:xo(s,a,l),s.flags&bu&&s.memoizedState!==null&&Q2(l,yi,s.memoizedState,s.memoizedProps);break;case 5:xo(s,a,l);break;case 3:case 4:var c=yi;yi=nf(s.stateNode.containerInfo),xo(s,a,l),yi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=bu,bu=16777216,xo(s,a,l),bu=c):xo(s,a,l));break;default:xo(s,a,l)}}function kb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function vu(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];We=c,Lb(c,s)}kb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)zb(s),s=s.sibling}function zb(s){switch(s.tag){case 0:case 11:case 15:vu(s),s.flags&2048&&Xs(9,s,s.return);break;case 3:vu(s);break;case 12:vu(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Hh(s)):vu(s);break;default:vu(s)}}function Hh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];We=c,Lb(c,s)}kb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Xs(8,a,a.return),Hh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Hh(a));break;default:Hh(a)}s=s.sibling}}function Lb(s,a){for(;We!==null;){var l=We;switch(l.tag){case 0:case 11:case 15:Xs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:iu(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,We=c;else t:for(l=s;We!==null;){c=We;var m=c.sibling,p=c.return;if(Ib(c),c===l){We=null;break t}if(m!==null){m.return=p,We=m;break t}We=p}}}var u2={getCacheForType:function(s){var a=sn(Pe),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return sn(Pe).controller.signal}},c2=typeof WeakMap=="function"?WeakMap:Map,Xt=0,le=null,Ot=null,kt=0,Jt=0,kn=null,Ws=!1,wo=!1,bm=!1,ps=0,Te=0,$s=0,ca=0,vm=0,zn=0,Ro=0,Tu=null,Tn=null,Tm=!1,qh=0,Bb=0,Gh=1/0,Kh=null,Zs=null,qe=0,Js=null,Io=null,ys=0,Em=0,Sm=null,Ub=null,Eu=0,Am=null;function Ln(){return(Xt&2)!==0&&kt!==0?kt&-kt:Q.T!==null?Cm():Yc()}function jb(){if(zn===0)if((kt&536870912)===0||Bt){var s=zr;zr<<=1,(zr&3932160)===0&&(zr=262144),zn=s}else zn=536870912;return s=Nn.current,s!==null&&(s.flags|=32),zn}function En(s,a,l){(s===le&&(Jt===2||Jt===9)||s.cancelPendingCommit!==null)&&(Do(s,0),tr(s,kt,zn,!1)),Lr(s,l),((Xt&2)===0||s!==le)&&(s===le&&((Xt&2)===0&&(ca|=l),Te===4&&tr(s,kt,zn,!1)),Fi(s))}function Fb(s,a,l){if((Xt&6)!==0)throw Error(n(327));var c=!l&&(a&127)===0&&(a&s.expiredLanes)===0||li(s,a),m=c?d2(s,a):wm(s,a,!0),p=c;do{if(m===0){wo&&!c&&tr(s,a,0,!1);break}else{if(l=s.current.alternate,p&&!h2(l)){m=wm(s,a,!1),p=!1;continue}if(m===2){if(p=a,s.errorRecoveryDisabledLanes&p)var v=0;else v=s.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;t:{var A=s;m=Tu;var N=A.current.memoizedState.isDehydrated;if(N&&(Do(A,v).flags|=256),v=wm(A,v,!1),v!==2){if(bm&&!N){A.errorRecoveryDisabledLanes|=p,ca|=p,m=4;break t}p=Tn,Tn=m,p!==null&&(Tn===null?Tn=p:Tn.push.apply(Tn,p))}m=v}if(p=!1,m!==2)continue}}if(m===1){Do(s,0),tr(s,a,0,!0);break}t:{switch(c=s,p=m,p){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:tr(c,a,zn,!Ws);break t;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(m=qh+300-fn(),10<m)){if(tr(c,a,zn,!Ws),Ai(c,0,!0)!==0)break t;ys=a,c.timeoutHandle=bv(Hb.bind(null,c,l,Tn,Kh,Tm,a,zn,ca,Ro,Ws,p,"Throttled",-0,0),m);break t}Hb(c,l,Tn,Kh,Tm,a,zn,ca,Ro,Ws,p,null,-0,0)}}break}while(!0);Fi(s)}function Hb(s,a,l,c,m,p,v,A,N,G,$,nt,Y,W){if(s.timeoutHandle=-1,nt=a.subtreeFlags,nt&8192||(nt&16785408)===16785408){nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},Pb(a,p,nt);var mt=(p&62914560)===p?qh-fn():(p&4194048)===p?Bb-fn():0;if(mt=X2(nt,mt),mt!==null){ys=p,s.cancelPendingCommit=mt($b.bind(null,s,a,p,l,c,m,v,A,N,$,nt,null,Y,W)),tr(s,p,v,!G);return}}$b(s,a,p,l,c,m,v,A,N)}function h2(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var m=l[c],p=m.getSnapshot;m=m.value;try{if(!Vn(p(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function tr(s,a,l,c){a&=~vm,a&=~ca,s.suspendedLanes|=a,s.pingedLanes&=~a,c&&(s.warmLanes|=a),c=s.expirationTimes;for(var m=a;0<m;){var p=31-Se(m),v=1<<p;c[p]=-1,m&=~v}l!==0&&Br(s,l,a)}function Yh(){return(Xt&6)===0?(Su(0),!1):!0}function xm(){if(Ot!==null){if(Jt===0)var s=Ot.return;else s=Ot,as=ea=null,jg(s),bo=null,ru=0,s=Ot;for(;s!==null;)vb(s.alternate,s),s=s.return;Ot=null}}function Do(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,M2(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ys=0,xm(),le=s,Ot=l=ss(s.current,null),kt=a,Jt=0,kn=null,Ws=!1,wo=li(s,a),bm=!1,Ro=zn=vm=ca=$s=Te=0,Tn=Tu=null,Tm=!1,(a&8)!==0&&(a|=a&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=a;0<c;){var m=31-Se(c),p=1<<m;a|=s[m],c&=~p}return ps=a,gh(),l}function qb(s,a){Dt=null,Q.H=du,a===_o||a===Eh?(a=a0(),Jt=3):a===Dg?(a=a0(),Jt=4):Jt=a===im?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,kn=a,Ot===null&&(Te=1,kh(s,Wn(a,s.current)))}function Gb(){var s=Nn.current;return s===null?!0:(kt&4194048)===kt?ti===null:(kt&62914560)===kt||(kt&536870912)!==0?s===ti:!1}function Kb(){var s=Q.H;return Q.H=du,s===null?du:s}function Yb(){var s=Q.A;return Q.A=u2,s}function Qh(){Te=4,Ws||(kt&4194048)!==kt&&Nn.current!==null||(wo=!0),($s&134217727)===0&&(ca&134217727)===0||le===null||tr(le,kt,zn,!1)}function wm(s,a,l){var c=Xt;Xt|=2;var m=Kb(),p=Yb();(le!==s||kt!==a)&&(Kh=null,Do(s,a)),a=!1;var v=Te;t:do try{if(Jt!==0&&Ot!==null){var A=Ot,N=kn;switch(Jt){case 8:xm(),v=6;break t;case 3:case 2:case 9:case 6:Nn.current===null&&(a=!0);var G=Jt;if(Jt=0,kn=null,Co(s,A,N,G),l&&wo){v=0;break t}break;default:G=Jt,Jt=0,kn=null,Co(s,A,N,G)}}f2(),v=Te;break}catch($){qb(s,$)}while(!0);return a&&s.shellSuspendCounter++,as=ea=null,Xt=c,Q.H=m,Q.A=p,Ot===null&&(le=null,kt=0,gh()),v}function f2(){for(;Ot!==null;)Qb(Ot)}function d2(s,a){var l=Xt;Xt|=2;var c=Kb(),m=Yb();le!==s||kt!==a?(Kh=null,Gh=fn()+500,Do(s,a)):wo=li(s,a);t:do try{if(Jt!==0&&Ot!==null){a=Ot;var p=kn;e:switch(Jt){case 1:Jt=0,kn=null,Co(s,a,p,1);break;case 2:case 9:if(s0(p)){Jt=0,kn=null,Xb(a);break}a=function(){Jt!==2&&Jt!==9||le!==s||(Jt=7),Fi(s)},p.then(a,a);break t;case 3:Jt=7;break t;case 4:Jt=5;break t;case 7:s0(p)?(Jt=0,kn=null,Xb(a)):(Jt=0,kn=null,Co(s,a,p,7));break;case 5:var v=null;switch(Ot.tag){case 26:v=Ot.memoizedState;case 5:case 27:var A=Ot;if(v?Nv(v):A.stateNode.complete){Jt=0,kn=null;var N=A.sibling;if(N!==null)Ot=N;else{var G=A.return;G!==null?(Ot=G,Xh(G)):Ot=null}break e}}Jt=0,kn=null,Co(s,a,p,5);break;case 6:Jt=0,kn=null,Co(s,a,p,6);break;case 8:xm(),Te=6;break t;default:throw Error(n(462))}}g2();break}catch($){qb(s,$)}while(!0);return as=ea=null,Q.H=c,Q.A=m,Xt=l,Ot!==null?0:(le=null,kt=0,gh(),Te)}function g2(){for(;Ot!==null&&!ng();)Qb(Ot)}function Qb(s){var a=_b(s.alternate,s,ps);s.memoizedProps=s.pendingProps,a===null?Xh(s):Ot=a}function Xb(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=fb(l,a,a.pendingProps,a.type,void 0,kt);break;case 11:a=fb(l,a,a.pendingProps,a.type.render,a.ref,kt);break;case 5:jg(a);default:vb(l,a),a=Ot=Y_(a,ps),a=_b(l,a,ps)}s.memoizedProps=s.pendingProps,a===null?Xh(s):Ot=a}function Co(s,a,l,c){as=ea=null,jg(a),bo=null,ru=0;var m=a.return;try{if(n2(s,m,a,l,kt)){Te=1,kh(s,Wn(l,s.current)),Ot=null;return}}catch(p){if(m!==null)throw Ot=m,p;Te=1,kh(s,Wn(l,s.current)),Ot=null;return}a.flags&32768?(Bt||c===1?s=!0:wo||(kt&536870912)!==0?s=!1:(Ws=s=!0,(c===2||c===9||c===3||c===6)&&(c=Nn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Wb(a,s)):Xh(a)}function Xh(s){var a=s;do{if((a.flags&32768)!==0){Wb(a,Ws);return}s=a.return;var l=r2(a.alternate,a,ps);if(l!==null){Ot=l;return}if(a=a.sibling,a!==null){Ot=a;return}Ot=a=s}while(a!==null);Te===0&&(Te=5)}function Wb(s,a){do{var l=a2(s.alternate,s);if(l!==null){l.flags&=32767,Ot=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Ot=s;return}Ot=s=l}while(s!==null);Te=6,Ot=null}function $b(s,a,l,c,m,p,v,A,N){s.cancelPendingCommit=null;do Wh();while(qe!==0);if((Xt&6)!==0)throw Error(n(327));if(a!==null){if(a===s.current)throw Error(n(177));if(p=a.lanes|a.childLanes,p|=gg,rg(s,l,p,v,A,N),s===le&&(Ot=le=null,kt=0),Io=a,Js=s,ys=l,Em=p,Sm=m,Ub=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,_2(Cs,function(){return nv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,m=at.p,at.p=2,v=Xt,Xt|=4;try{o2(s,a,l)}finally{Xt=v,at.p=m,Q.T=c}}qe=1,Zb(),Jb(),tv()}}function Zb(){if(qe===1){qe=0;var s=Js,a=Io,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null;var c=at.p;at.p=2;var m=Xt;Xt|=4;try{Vb(a,s);var p=Lm,v=L_(s.containerInfo),A=p.focusedElem,N=p.selectionRange;if(v!==A&&A&&A.ownerDocument&&z_(A.ownerDocument.documentElement,A)){if(N!==null&&ug(A)){var G=N.start,$=N.end;if($===void 0&&($=G),"selectionStart"in A)A.selectionStart=G,A.selectionEnd=Math.min($,A.value.length);else{var nt=A.ownerDocument||document,Y=nt&&nt.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),mt=A.textContent.length,Et=Math.min(N.start,mt),oe=N.end===void 0?Et:Math.min(N.end,mt);!W.extend&&Et>oe&&(v=oe,oe=Et,Et=v);var U=k_(A,Et),L=k_(A,oe);if(U&&L&&(W.rangeCount!==1||W.anchorNode!==U.node||W.anchorOffset!==U.offset||W.focusNode!==L.node||W.focusOffset!==L.offset)){var q=nt.createRange();q.setStart(U.node,U.offset),W.removeAllRanges(),Et>oe?(W.addRange(q),W.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),W.addRange(q))}}}}for(nt=[],W=A;W=W.parentNode;)W.nodeType===1&&nt.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<nt.length;A++){var et=nt[A];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}uf=!!zm,Lm=zm=null}finally{Xt=m,at.p=c,Q.T=l}}s.current=a,qe=2}}function Jb(){if(qe===2){qe=0;var s=Js,a=Io,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=Q.T,Q.T=null;var c=at.p;at.p=2;var m=Xt;Xt|=4;try{Rb(s,a.alternate,a)}finally{Xt=m,at.p=c,Q.T=l}}qe=3}}function tv(){if(qe===4||qe===3){qe=0,Uc();var s=Js,a=Io,l=ys,c=Ub;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?qe=5:(qe=0,Io=Js=null,ev(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(Zs=null),ts(l),a=a.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(oi,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=Q.T,m=at.p,at.p=2,Q.T=null;try{for(var p=s.onRecoverableError,v=0;v<c.length;v++){var A=c[v];p(A.value,{componentStack:A.stack})}}finally{Q.T=a,at.p=m}}(ys&3)!==0&&Wh(),Fi(s),m=s.pendingLanes,(l&261930)!==0&&(m&42)!==0?s===Am?Eu++:(Eu=0,Am=s):Eu=0,Su(0)}}function ev(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,iu(a)))}function Wh(){return Zb(),Jb(),tv(),nv()}function nv(){if(qe!==5)return!1;var s=Js,a=Em;Em=0;var l=ts(ys),c=Q.T,m=at.p;try{at.p=32>l?32:l,Q.T=null,l=Sm,Sm=null;var p=Js,v=ys;if(qe=0,Io=Js=null,ys=0,(Xt&6)!==0)throw Error(n(331));var A=Xt;if(Xt|=4,zb(p.current),Nb(p,p.current,v,l),Xt=A,Su(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(oi,p)}catch{}return!0}finally{at.p=m,Q.T=c,ev(s,a)}}function iv(s,a,l){a=Wn(l,a),a=nm(s.stateNode,a,2),s=Ks(s,a,2),s!==null&&(Lr(s,2),Fi(s))}function te(s,a,l){if(s.tag===3)iv(s,s,l);else for(;a!==null;){if(a.tag===3){iv(a,s,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Zs===null||!Zs.has(c))){s=Wn(l,s),l=sb(2),c=Ks(a,l,2),c!==null&&(rb(l,c,a,s),Lr(c,2),Fi(c));break}}a=a.return}}function Rm(s,a,l){var c=s.pingCache;if(c===null){c=s.pingCache=new c2;var m=new Set;c.set(a,m)}else m=c.get(a),m===void 0&&(m=new Set,c.set(a,m));m.has(l)||(bm=!0,m.add(l),s=m2.bind(null,s,a,l),a.then(s,s))}function m2(s,a,l){var c=s.pingCache;c!==null&&c.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,le===s&&(kt&l)===l&&(Te===4||Te===3&&(kt&62914560)===kt&&300>fn()-qh?(Xt&2)===0&&Do(s,0):vm|=l,Ro===kt&&(Ro=0)),Fi(s)}function sv(s,a){a===0&&(a=Kc()),s=Zr(s,a),s!==null&&(Lr(s,a),Fi(s))}function p2(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),sv(s,l)}function y2(s,a){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(n(314))}c!==null&&c.delete(a),sv(s,l)}function _2(s,a){return He(s,a)}var $h=null,Mo=null,Im=!1,Zh=!1,Dm=!1,er=0;function Fi(s){s!==Mo&&s.next===null&&(Mo===null?$h=Mo=s:Mo=Mo.next=s),Zh=!0,Im||(Im=!0,v2())}function Su(s,a){if(!Dm&&Zh){Dm=!0;do for(var l=!1,c=$h;c!==null;){if(s!==0){var m=c.pendingLanes;if(m===0)var p=0;else{var v=c.suspendedLanes,A=c.pingedLanes;p=(1<<31-Se(42|s)+1)-1,p&=m&~(v&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,lv(c,p))}else p=kt,p=Ai(c,c===le?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||li(c,p)||(l=!0,lv(c,p));c=c.next}while(l);Dm=!1}}function b2(){rv()}function rv(){Zh=Im=!1;var s=0;er!==0&&C2()&&(s=er);for(var a=fn(),l=null,c=$h;c!==null;){var m=c.next,p=av(c,a);p===0?(c.next=null,l===null?$h=m:l.next=m,m===null&&(Mo=l)):(l=c,(s!==0||(p&3)!==0)&&(Zh=!0)),c=m}qe!==0&&qe!==5||Su(s),er!==0&&(er=0)}function av(s,a){for(var l=s.suspendedLanes,c=s.pingedLanes,m=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var v=31-Se(p),A=1<<v,N=m[v];N===-1?((A&l)===0||(A&c)!==0)&&(m[v]=sg(A,a)):N<=a&&(s.expiredLanes|=A),p&=~A}if(a=le,l=kt,l=Ai(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===a&&(Jt===2||Jt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Ds(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||li(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(c!==null&&Ds(c),ts(l)){case 2:case 8:l=Ol;break;case 32:l=Cs;break;case 268435456:l=jc;break;default:l=Cs}return c=ov.bind(null,s),l=He(l,c),s.callbackPriority=a,s.callbackNode=l,a}return c!==null&&c!==null&&Ds(c),s.callbackPriority=2,s.callbackNode=null,2}function ov(s,a){if(qe!==0&&qe!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Wh()&&s.callbackNode!==l)return null;var c=kt;return c=Ai(s,s===le?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Fb(s,c,a),av(s,fn()),s.callbackNode!=null&&s.callbackNode===l?ov.bind(null,s):null)}function lv(s,a){if(Wh())return null;Fb(s,a,!0)}function v2(){V2(function(){(Xt&6)!==0?He(Vl,b2):rv()})}function Cm(){if(er===0){var s=po;s===0&&(s=Ei,Ei<<=1,(Ei&261888)===0&&(Ei=256)),er=s}return er}function uv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:to(""+s)}function cv(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function T2(s,a,l,c,m){if(a==="submit"&&l&&l.stateNode===m){var p=uv((m[Qe]||null).action),v=c.submitter;v&&(a=(a=v[Qe]||null)?uv(a.formAction):v.getAttribute("formAction"),a!==null&&(p=a,v=null));var A=new Pi("action","action",null,c,m);s.push({event:A,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(er!==0){var N=v?cv(m,v):new FormData(m);Wg(l,{pending:!0,data:N,method:m.method,action:p},null,N)}}else typeof p=="function"&&(A.preventDefault(),N=v?cv(m,v):new FormData(m),Wg(l,{pending:!0,data:N,method:m.method,action:p},p,N))},currentTarget:m}]})}}for(var Mm=0;Mm<dg.length;Mm++){var Vm=dg[Mm],E2=Vm.toLowerCase(),S2=Vm[0].toUpperCase()+Vm.slice(1);pi(E2,"on"+S2)}pi(j_,"onAnimationEnd"),pi(F_,"onAnimationIteration"),pi(H_,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(Bw,"onTransitionRun"),pi(Uw,"onTransitionStart"),pi(jw,"onTransitionCancel"),pi(q_,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Au));function hv(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],m=c.event;c=c.listeners;t:{var p=void 0;if(a)for(var v=c.length-1;0<=v;v--){var A=c[v],N=A.instance,G=A.currentTarget;if(A=A.listener,N!==p&&m.isPropagationStopped())break t;p=A,m.currentTarget=G;try{p(m)}catch($){dh($)}m.currentTarget=null,p=N}else for(v=0;v<c.length;v++){if(A=c[v],N=A.instance,G=A.currentTarget,A=A.listener,N!==p&&m.isPropagationStopped())break t;p=A,m.currentTarget=G;try{p(m)}catch($){dh($)}m.currentTarget=null,p=N}}}}function Nt(s,a){var l=a[Xa];l===void 0&&(l=a[Xa]=new Set);var c=s+"__bubble";l.has(c)||(fv(a,s,2,!1),l.add(c))}function Om(s,a,l){var c=0;a&&(c|=4),fv(l,s,c,a)}var Jh="_reactListening"+Math.random().toString(36).slice(2);function Nm(s){if(!s[Jh]){s[Jh]=!0,kl.forEach(function(l){l!=="selectionchange"&&(A2.has(l)||Om(l,!1,s),Om(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Jh]||(a[Jh]=!0,Om("selectionchange",!1,a))}}function fv(s,a,l,c){switch(jv(a)){case 2:var m=Z2;break;case 8:m=J2;break;default:m=Xm}l=m.bind(null,a,l,s),m=void 0,!qr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),c?m!==void 0?s.addEventListener(a,l,{capture:!0,passive:m}):s.addEventListener(a,l,!0):m!==void 0?s.addEventListener(a,l,{passive:m}):s.addEventListener(a,l,!1)}function Pm(s,a,l,c,m){var p=c;if((a&1)===0&&(a&2)===0&&c!==null)t:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var A=c.stateNode.containerInfo;if(A===m)break;if(v===4)for(v=c.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===m)return;v=v.return}for(;A!==null;){if(v=Ii(A),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){c=p=v;continue t}A=A.parentNode}}c=c.return}ks(function(){var G=p,$=Kn(l),nt=[];t:{var Y=G_.get(s);if(Y!==void 0){var W=Pi,mt=s;switch(s){case"keypress":if(Kr(l)===0)break t;case"keydown":case"keyup":W=ch;break;case"focusin":mt="focus",W=Qr;break;case"focusout":mt="blur",W=Qr;break;case"beforeblur":case"afterblur":W=Qr;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=eh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=b;break;case j_:case F_:case H_:W=ih;break;case q_:W=x;break;case"scroll":case"scrollend":W=Ql;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=is;break;case"toggle":case"beforetoggle":W=It}var Et=(a&4)!==0,oe=!Et&&(s==="scroll"||s==="scrollend"),U=Et?Y!==null?Y+"Capture":null:Y;Et=[];for(var L=G,q;L!==null;){var et=L;if(q=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||q===null||U===null||(et=fi(L,U),et!=null&&Et.push(xu(L,et,q))),oe)break;L=L.return}0<Et.length&&(Y=new W(Y,mt,null,l,$),nt.push({event:Y,listeners:Et}))}}if((a&7)===0){t:{if(Y=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",Y&&l!==Gl&&(mt=l.relatedTarget||l.fromElement)&&(Ii(mt)||mt[wi]))break t;if((W||Y)&&(Y=$.window===$?$:(Y=$.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(mt=l.relatedTarget||l.toElement,W=G,mt=mt?Ii(mt):null,mt!==null&&(oe=o(mt),Et=mt.tag,mt!==oe||Et!==5&&Et!==27&&Et!==6)&&(mt=null)):(W=null,mt=G),W!==mt)){if(Et=Xl,et="onMouseLeave",U="onMouseEnter",L="mouse",(s==="pointerout"||s==="pointerover")&&(Et=is,et="onPointerLeave",U="onPointerEnter",L="pointer"),oe=W==null?Y:Cn(W),q=mt==null?Y:Cn(mt),Y=new Et(et,L+"leave",W,l,$),Y.target=oe,Y.relatedTarget=q,et=null,Ii($)===G&&(Et=new Et(U,L+"enter",mt,l,$),Et.target=q,Et.relatedTarget=oe,et=Et),oe=et,W&&mt)e:{for(Et=x2,U=W,L=mt,q=0,et=U;et;et=Et(et))q++;et=0;for(var bt=L;bt;bt=Et(bt))et++;for(;0<q-et;)U=Et(U),q--;for(;0<et-q;)L=Et(L),et--;for(;q--;){if(U===L||L!==null&&U===L.alternate){Et=U;break e}U=Et(U),L=Et(L)}Et=null}else Et=null;W!==null&&dv(nt,Y,W,Et,!1),mt!==null&&oe!==null&&dv(nt,oe,mt,Et,!0)}}t:{if(Y=G?Cn(G):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var Gt=C_;else if(I_(Y))if(M_)Gt=kw;else{Gt=Nw;var yt=Ow}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&Ja(G.elementType)&&(Gt=C_):Gt=Pw;if(Gt&&(Gt=Gt(s,G))){D_(nt,Gt,l,$);break t}yt&&yt(s,Y,G),s==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&Fl(Y,"number",Y.value)}switch(yt=G?Cn(G):window,s){case"focusin":(I_(yt)||yt.contentEditable==="true")&&(oo=yt,cg=G,tu=null);break;case"focusout":tu=cg=oo=null;break;case"mousedown":hg=!0;break;case"contextmenu":case"mouseup":case"dragend":hg=!1,B_(nt,l,$);break;case"selectionchange":if(Lw)break;case"keydown":case"keyup":B_(nt,l,$)}var Ct;if(Qt)t:{switch(s){case"compositionstart":var zt="onCompositionStart";break t;case"compositionend":zt="onCompositionEnd";break t;case"compositionupdate":zt="onCompositionUpdate";break t}zt=void 0}else ao?Xr(s,l)&&(zt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(zt="onCompositionStart");zt&&(Li&&l.locale!=="ko"&&(ao||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&ao&&(Ct=Yl()):(Ni=$,Kl="value"in Ni?Ni.value:Ni.textContent,ao=!0)),yt=tf(G,zt),0<yt.length&&(zt=new zi(zt,s,null,l,$),nt.push({event:zt,listeners:yt}),Ct?zt.data=Ct:(Ct=ro(l),Ct!==null&&(zt.data=Ct)))),(Ct=Qn?Dw(s,l):Cw(s,l))&&(zt=tf(G,"onBeforeInput"),0<zt.length&&(yt=new zi("onBeforeInput","beforeinput",null,l,$),nt.push({event:yt,listeners:zt}),yt.data=Ct)),T2(nt,s,G,l,$)}hv(nt,a)})}function xu(s,a,l){return{instance:s,listener:a,currentTarget:l}}function tf(s,a){for(var l=a+"Capture",c=[];s!==null;){var m=s,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=fi(s,l),m!=null&&c.unshift(xu(s,m,p)),m=fi(s,a),m!=null&&c.push(xu(s,m,p))),s.tag===3)return c;s=s.return}return[]}function x2(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function dv(s,a,l,c,m){for(var p=a._reactName,v=[];l!==null&&l!==c;){var A=l,N=A.alternate,G=A.stateNode;if(A=A.tag,N!==null&&N===c)break;A!==5&&A!==26&&A!==27||G===null||(N=G,m?(G=fi(l,p),G!=null&&v.unshift(xu(l,G,N))):m||(G=fi(l,p),G!=null&&v.push(xu(l,G,N)))),l=l.return}v.length!==0&&s.push({event:a,listeners:v})}var w2=/\r\n?/g,R2=/\u0000|\uFFFD/g;function gv(s){return(typeof s=="string"?s:""+s).replace(w2,`
`).replace(R2,"")}function mv(s,a){return a=gv(a),gv(s)===a}function ae(s,a,l,c,m,p){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||yn(s,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&yn(s,""+c);break;case"className":Mn(s,"class",c);break;case"tabIndex":Mn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(s,l,c);break;case"style":ql(s,c,p);break;case"data":if(a!=="object"){Mn(s,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=to(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(a!=="input"&&ae(s,a,"name",m.name,m,null),ae(s,a,"formEncType",m.formEncType,m,null),ae(s,a,"formMethod",m.formMethod,m,null),ae(s,a,"formTarget",m.formTarget,m,null)):(ae(s,a,"encType",m.encType,m,null),ae(s,a,"method",m.method,m,null),ae(s,a,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=to(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=hi);break;case"onScroll":c!=null&&Nt("scroll",s);break;case"onScrollEnd":c!=null&&Nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(n(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=to(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Nt("beforetoggle",s),Nt("toggle",s),$a(s,"popover",c);break;case"xlinkActuate":Ne(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ne(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ne(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ne(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ne(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ne(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ne(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ne(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ne(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":$a(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=th.get(l)||l,$a(s,l,c))}}function km(s,a,l,c,m,p){switch(l){case"style":ql(s,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(n(60));s.innerHTML=l}}break;case"children":typeof c=="string"?yn(s,c):(typeof c=="number"||typeof c=="bigint")&&yn(s,""+c);break;case"onScroll":c!=null&&Nt("scroll",s);break;case"onScrollEnd":c!=null&&Nt("scrollend",s);break;case"onClick":c!=null&&(s.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zl.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),p=s[Qe]||null,p=p!=null?p[l]:null,typeof p=="function"&&s.removeEventListener(a,p,m),typeof c=="function")){typeof p!="function"&&p!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,c,m);break t}l in s?s[l]=c:c===!0?s.setAttribute(l,""):$a(s,l,c)}}}function an(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",s),Nt("load",s);var c=!1,m=!1,p;for(p in l)if(l.hasOwnProperty(p)){var v=l[p];if(v!=null)switch(p){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:ae(s,a,p,v,l,null)}}m&&ae(s,a,"srcSet",l.srcSet,l,null),c&&ae(s,a,"src",l.src,l,null);return;case"input":Nt("invalid",s);var A=p=v=m=null,N=null,G=null;for(c in l)if(l.hasOwnProperty(c)){var $=l[c];if($!=null)switch(c){case"name":m=$;break;case"type":v=$;break;case"checked":N=$;break;case"defaultChecked":G=$;break;case"value":p=$;break;case"defaultValue":A=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(n(137,a));break;default:ae(s,a,c,$,l,null)}}$c(s,p,A,N,G,v,m,!1);return;case"select":Nt("invalid",s),c=v=p=null;for(m in l)if(l.hasOwnProperty(m)&&(A=l[m],A!=null))switch(m){case"value":p=A;break;case"defaultValue":v=A;break;case"multiple":c=A;default:ae(s,a,m,A,l,null)}a=p,l=v,s.multiple=!!c,a!=null?Vs(s,!!c,a,!1):l!=null&&Vs(s,!!c,l,!0);return;case"textarea":Nt("invalid",s),p=m=c=null;for(v in l)if(l.hasOwnProperty(v)&&(A=l[v],A!=null))switch(v){case"value":c=A;break;case"defaultValue":m=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:ae(s,a,v,A,l,null)}Os(s,c,m,p);return;case"option":for(N in l)if(l.hasOwnProperty(N)&&(c=l[N],c!=null))switch(N){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ae(s,a,N,c,l,null)}return;case"dialog":Nt("beforetoggle",s),Nt("toggle",s),Nt("cancel",s),Nt("close",s);break;case"iframe":case"object":Nt("load",s);break;case"video":case"audio":for(c=0;c<Au.length;c++)Nt(Au[c],s);break;case"image":Nt("error",s),Nt("load",s);break;case"details":Nt("toggle",s);break;case"embed":case"source":case"link":Nt("error",s),Nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(c=l[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:ae(s,a,G,c,l,null)}return;default:if(Ja(a)){for($ in l)l.hasOwnProperty($)&&(c=l[$],c!==void 0&&km(s,a,$,c,l,void 0));return}}for(A in l)l.hasOwnProperty(A)&&(c=l[A],c!=null&&ae(s,a,A,c,l,null))}function I2(s,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,v=null,A=null,N=null,G=null,$=null;for(W in l){var nt=l[W];if(l.hasOwnProperty(W)&&nt!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":N=nt;default:c.hasOwnProperty(W)||ae(s,a,W,null,c,nt)}}for(var Y in c){var W=c[Y];if(nt=l[Y],c.hasOwnProperty(Y)&&(W!=null||nt!=null))switch(Y){case"type":p=W;break;case"name":m=W;break;case"checked":G=W;break;case"defaultChecked":$=W;break;case"value":v=W;break;case"defaultValue":A=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(137,a));break;default:W!==nt&&ae(s,a,Y,W,c,nt)}}Za(s,v,A,N,G,$,p,m);return;case"select":W=v=A=Y=null;for(p in l)if(N=l[p],l.hasOwnProperty(p)&&N!=null)switch(p){case"value":break;case"multiple":W=N;default:c.hasOwnProperty(p)||ae(s,a,p,null,c,N)}for(m in c)if(p=c[m],N=l[m],c.hasOwnProperty(m)&&(p!=null||N!=null))switch(m){case"value":Y=p;break;case"defaultValue":A=p;break;case"multiple":v=p;default:p!==N&&ae(s,a,m,p,c,N)}a=A,l=v,c=W,Y!=null?Vs(s,!!l,Y,!1):!!c!=!!l&&(a!=null?Vs(s,!!l,a,!0):Vs(s,!!l,l?[]:"",!1));return;case"textarea":W=Y=null;for(A in l)if(m=l[A],l.hasOwnProperty(A)&&m!=null&&!c.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ae(s,a,A,null,c,m)}for(v in c)if(m=c[v],p=l[v],c.hasOwnProperty(v)&&(m!=null||p!=null))switch(v){case"value":Y=m;break;case"defaultValue":W=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==p&&ae(s,a,v,m,c,p)}Zc(s,Y,W);return;case"option":for(var mt in l)if(Y=l[mt],l.hasOwnProperty(mt)&&Y!=null&&!c.hasOwnProperty(mt))switch(mt){case"selected":s.selected=!1;break;default:ae(s,a,mt,null,c,Y)}for(N in c)if(Y=c[N],W=l[N],c.hasOwnProperty(N)&&Y!==W&&(Y!=null||W!=null))switch(N){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ae(s,a,N,Y,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Et in l)Y=l[Et],l.hasOwnProperty(Et)&&Y!=null&&!c.hasOwnProperty(Et)&&ae(s,a,Et,null,c,Y);for(G in c)if(Y=c[G],W=l[G],c.hasOwnProperty(G)&&Y!==W&&(Y!=null||W!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(137,a));break;default:ae(s,a,G,Y,c,W)}return;default:if(Ja(a)){for(var oe in l)Y=l[oe],l.hasOwnProperty(oe)&&Y!==void 0&&!c.hasOwnProperty(oe)&&km(s,a,oe,void 0,c,Y);for($ in c)Y=c[$],W=l[$],!c.hasOwnProperty($)||Y===W||Y===void 0&&W===void 0||km(s,a,$,Y,c,W);return}}for(var U in l)Y=l[U],l.hasOwnProperty(U)&&Y!=null&&!c.hasOwnProperty(U)&&ae(s,a,U,null,c,Y);for(nt in c)Y=c[nt],W=l[nt],!c.hasOwnProperty(nt)||Y===W||Y==null&&W==null||ae(s,a,nt,Y,c,W)}function pv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function D2(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var m=l[c],p=m.transferSize,v=m.initiatorType,A=m.duration;if(p&&A&&pv(v)){for(v=0,A=m.responseEnd,c+=1;c<l.length;c++){var N=l[c],G=N.startTime;if(G>A)break;var $=N.transferSize,nt=N.initiatorType;$&&pv(nt)&&(N=N.responseEnd,v+=$*(N<A?1:(A-G)/(N-G)))}if(--c,a+=8*(p+v)/(m.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var zm=null,Lm=null;function ef(s){return s.nodeType===9?s:s.ownerDocument}function yv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _v(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Bm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Um=null;function C2(){var s=window.event;return s&&s.type==="popstate"?s===Um?!1:(Um=s,!0):(Um=null,!1)}var bv=typeof setTimeout=="function"?setTimeout:void 0,M2=typeof clearTimeout=="function"?clearTimeout:void 0,vv=typeof Promise=="function"?Promise:void 0,V2=typeof queueMicrotask=="function"?queueMicrotask:typeof vv<"u"?function(s){return vv.resolve(null).then(s).catch(O2)}:bv;function O2(s){setTimeout(function(){throw s})}function nr(s){return s==="head"}function Tv(s,a){var l=a,c=0;do{var m=l.nextSibling;if(s.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(m),Po(a);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")wu(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,wu(l);for(var p=l.firstChild;p;){var v=p.nextSibling,A=p.nodeName;p[Ri]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||l.removeChild(p),p=v}}else l==="body"&&wu(s.ownerDocument.body);l=m}while(l);Po(a)}function Ev(s,a){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function jm(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":jm(l),Wa(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function N2(s,a,l,c){for(;s.nodeType===1;){var m=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Ri])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=ei(s.nextSibling),s===null)break}return null}function P2(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ei(s.nextSibling),s===null))return null;return s}function Sv(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ei(s.nextSibling),s===null))return null;return s}function Fm(s){return s.data==="$?"||s.data==="$~"}function Hm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function k2(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function ei(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var qm=null;function Av(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return ei(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function xv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function wv(s,a,l){switch(a=ef(l),s){case"html":if(s=a.documentElement,!s)throw Error(n(452));return s;case"head":if(s=a.head,!s)throw Error(n(453));return s;case"body":if(s=a.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function wu(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Wa(s)}var ni=new Map,Rv=new Set;function nf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var _s=at.d;at.d={f:z2,r:L2,D:B2,C:U2,L:j2,m:F2,X:q2,S:H2,M:G2};function z2(){var s=_s.f(),a=Yh();return s||a}function L2(s){var a=Gn(s);a!==null&&a.tag===5&&a.type==="form"?q0(a):_s.r(s)}var Vo=typeof document>"u"?null:document;function Iv(s,a,l){var c=Vo;if(c&&typeof a=="string"&&a){var m=pn(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Rv.has(m)||(Rv.add(m),s={rel:s,crossOrigin:l,href:a},c.querySelector(m)===null&&(a=c.createElement("link"),an(a,"link",s),Oe(a),c.head.appendChild(a)))}}function B2(s){_s.D(s),Iv("dns-prefetch",s,null)}function U2(s,a){_s.C(s,a),Iv("preconnect",s,a)}function j2(s,a,l){_s.L(s,a,l);var c=Vo;if(c&&s&&a){var m='link[rel="preload"][as="'+pn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+pn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+pn(l.imageSizes)+'"]')):m+='[href="'+pn(s)+'"]';var p=m;switch(a){case"style":p=Oo(s);break;case"script":p=No(s)}ni.has(p)||(s=_({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),ni.set(p,s),c.querySelector(m)!==null||a==="style"&&c.querySelector(Ru(p))||a==="script"&&c.querySelector(Iu(p))||(a=c.createElement("link"),an(a,"link",s),Oe(a),c.head.appendChild(a)))}}function F2(s,a){_s.m(s,a);var l=Vo;if(l&&s){var c=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+pn(c)+'"][href="'+pn(s)+'"]',p=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=No(s)}if(!ni.has(p)&&(s=_({rel:"modulepreload",href:s},a),ni.set(p,s),l.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Iu(p)))return}c=l.createElement("link"),an(c,"link",s),Oe(c),l.head.appendChild(c)}}}function H2(s,a,l){_s.S(s,a,l);var c=Vo;if(c&&s){var m=Di(c).hoistableStyles,p=Oo(s);a=a||"default";var v=m.get(p);if(!v){var A={loading:0,preload:null};if(v=c.querySelector(Ru(p)))A.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":a},l),(l=ni.get(p))&&Gm(s,l);var N=v=c.createElement("link");Oe(N),an(N,"link",s),N._p=new Promise(function(G,$){N.onload=G,N.onerror=$}),N.addEventListener("load",function(){A.loading|=1}),N.addEventListener("error",function(){A.loading|=2}),A.loading|=4,sf(v,a,c)}v={type:"stylesheet",instance:v,count:1,state:A},m.set(p,v)}}}function q2(s,a){_s.X(s,a);var l=Vo;if(l&&s){var c=Di(l).hoistableScripts,m=No(s),p=c.get(m);p||(p=l.querySelector(Iu(m)),p||(s=_({src:s,async:!0},a),(a=ni.get(m))&&Km(s,a),p=l.createElement("script"),Oe(p),an(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function G2(s,a){_s.M(s,a);var l=Vo;if(l&&s){var c=Di(l).hoistableScripts,m=No(s),p=c.get(m);p||(p=l.querySelector(Iu(m)),p||(s=_({src:s,async:!0,type:"module"},a),(a=ni.get(m))&&Km(s,a),p=l.createElement("script"),Oe(p),an(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(m,p))}}function Dv(s,a,l,c){var m=(m=At.current)?nf(m):null;if(!m)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Oo(l.href),l=Di(m).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Oo(l.href);var p=Di(m).hoistableStyles,v=p.get(s);if(v||(m=m.ownerDocument||m,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,v),(p=m.querySelector(Ru(s)))&&!p._p&&(v.instance=p,v.state.loading=5),ni.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ni.set(s,l),p||K2(m,s,l,v.state))),a&&c===null)throw Error(n(528,""));return v}if(a&&c!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=No(l),l=Di(m).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function Oo(s){return'href="'+pn(s)+'"'}function Ru(s){return'link[rel="stylesheet"]['+s+"]"}function Cv(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function K2(s,a,l,c){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=s.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),an(a,"link",l),Oe(a),s.head.appendChild(a))}function No(s){return'[src="'+pn(s)+'"]'}function Iu(s){return"script[async]"+s}function Mv(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=s.querySelector('style[data-href~="'+pn(l.href)+'"]');if(c)return a.instance=c,Oe(c),c;var m=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Oe(c),an(c,"style",m),sf(c,l.precedence,s),a.instance=c;case"stylesheet":m=Oo(l.href);var p=s.querySelector(Ru(m));if(p)return a.state.loading|=4,a.instance=p,Oe(p),p;c=Cv(l),(m=ni.get(m))&&Gm(c,m),p=(s.ownerDocument||s).createElement("link"),Oe(p);var v=p;return v._p=new Promise(function(A,N){v.onload=A,v.onerror=N}),an(p,"link",c),a.state.loading|=4,sf(p,l.precedence,s),a.instance=p;case"script":return p=No(l.src),(m=s.querySelector(Iu(p)))?(a.instance=m,Oe(m),m):(c=l,(m=ni.get(p))&&(c=_({},l),Km(c,m)),s=s.ownerDocument||s,m=s.createElement("script"),Oe(m),an(m,"link",c),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,sf(c,l.precedence,s));return a.instance}function sf(s,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,p=m,v=0;v<c.length;v++){var A=c[v];if(A.dataset.precedence===a)p=A;else if(p!==m)break}p?p.parentNode.insertBefore(s,p.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function Gm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Km(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var rf=null;function Vv(s,a,l){if(rf===null){var c=new Map,m=rf=new Map;m.set(l,c)}else m=rf,c=m.get(l),c||(c=new Map,m.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),m=0;m<l.length;m++){var p=l[m];if(!(p[Ri]||p[Ve]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(a)||"";v=s+v;var A=c.get(v);A?A.push(p):c.set(v,[p])}}return c}function Ov(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function Y2(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Nv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Q2(s,a,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=Oo(c.href),p=a.querySelector(Ru(m));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=af.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=p,Oe(p);return}p=a.ownerDocument||a,c=Cv(c),(m=ni.get(m))&&Gm(c,m),p=p.createElement("link"),Oe(p);var v=p;v._p=new Promise(function(A,N){v.onload=A,v.onerror=N}),an(p,"link",c),l.instance=p}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=af.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var Ym=0;function X2(s,a){return s.stylesheets&&s.count===0&&lf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&lf(s,s.stylesheets),s.unsuspend){var p=s.unsuspend;s.unsuspend=null,p()}},6e4+a);0<s.imgBytes&&Ym===0&&(Ym=62500*D2());var m=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&lf(s,s.stylesheets),s.unsuspend)){var p=s.unsuspend;s.unsuspend=null,p()}},(s.imgBytes>Ym?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function af(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)lf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var of=null;function lf(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,of=new Map,a.forEach(W2,s),of=null,af.call(s))}function W2(s,a){if(!(a.state.loading&4)){var l=of.get(s);if(l)var c=l.get(null);else{l=new Map,of.set(s,l);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var v=m[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(l.set(v.dataset.precedence,v),c=v)}c&&l.set(null,c)}m=a.instance,v=m.getAttribute("data-precedence"),p=l.get(v)||c,p===c&&l.set(null,m),l.set(v,m),this.count++,c=af.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),p?p.parentNode.insertBefore(m,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var Du={$$typeof:K,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function $2(s,a,l,c,m,p,v,A,N){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xi(0),this.hiddenUpdates=xi(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Pv(s,a,l,c,m,p,v,A,N,G,$,nt){return s=new $2(s,a,l,v,N,G,$,nt,A),a=1,p===!0&&(a|=24),p=On(3,null,null,a),s.current=p,p.stateNode=s,a=wg(),a.refCount++,s.pooledCache=a,a.refCount++,p.memoizedState={element:c,isDehydrated:l,cache:a},Cg(p),s}function kv(s){return s?(s=co,s):co}function zv(s,a,l,c,m,p){m=kv(m),c.context===null?c.context=m:c.pendingContext=m,c=Gs(a),c.payload={element:l},p=p===void 0?null:p,p!==null&&(c.callback=p),l=Ks(s,c,a),l!==null&&(En(l,s,a),ou(l,s,a))}function Lv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function Qm(s,a){Lv(s,a),(s=s.alternate)&&Lv(s,a)}function Bv(s){if(s.tag===13||s.tag===31){var a=Zr(s,67108864);a!==null&&En(a,s,67108864),Qm(s,67108864)}}function Uv(s){if(s.tag===13||s.tag===31){var a=Ln();a=Ur(a);var l=Zr(s,a);l!==null&&En(l,s,a),Qm(s,a)}}var uf=!0;function Z2(s,a,l,c){var m=Q.T;Q.T=null;var p=at.p;try{at.p=2,Xm(s,a,l,c)}finally{at.p=p,Q.T=m}}function J2(s,a,l,c){var m=Q.T;Q.T=null;var p=at.p;try{at.p=8,Xm(s,a,l,c)}finally{at.p=p,Q.T=m}}function Xm(s,a,l,c){if(uf){var m=Wm(c);if(m===null)Pm(s,a,c,cf,l),Fv(s,c);else if(eR(m,s,a,l,c))c.stopPropagation();else if(Fv(s,c),a&4&&-1<tR.indexOf(s)){for(;m!==null;){var p=Gn(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Si(p.pendingLanes);if(v!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var N=1<<31-Se(v);A.entanglements[1]|=N,v&=~N}Fi(p),(Xt&6)===0&&(Gh=fn()+500,Su(0))}}break;case 31:case 13:A=Zr(p,2),A!==null&&En(A,p,2),Yh(),Qm(p,2)}if(p=Wm(c),p===null&&Pm(s,a,c,cf,l),p===m)break;m=p}m!==null&&c.stopPropagation()}else Pm(s,a,c,null,l)}}function Wm(s){return s=Kn(s),$m(s)}var cf=null;function $m(s){if(cf=null,s=Ii(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=u(a),s!==null)return s;s=null}else if(l===31){if(s=h(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return cf=s,null}function jv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kr()){case Vl:return 2;case Ol:return 8;case Cs:case ig:return 32;case jc:return 268435456;default:return 32}default:return 32}}var Zm=!1,ir=null,sr=null,rr=null,Cu=new Map,Mu=new Map,ar=[],tR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fv(s,a){switch(s){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":Cu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(a.pointerId)}}function Vu(s,a,l,c,m,p){return s===null||s.nativeEvent!==p?(s={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:p,targetContainers:[m]},a!==null&&(a=Gn(a),a!==null&&Bv(a)),s):(s.eventSystemFlags|=c,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function eR(s,a,l,c,m){switch(a){case"focusin":return ir=Vu(ir,s,a,l,c,m),!0;case"dragenter":return sr=Vu(sr,s,a,l,c,m),!0;case"mouseover":return rr=Vu(rr,s,a,l,c,m),!0;case"pointerover":var p=m.pointerId;return Cu.set(p,Vu(Cu.get(p)||null,s,a,l,c,m)),!0;case"gotpointercapture":return p=m.pointerId,Mu.set(p,Vu(Mu.get(p)||null,s,a,l,c,m)),!0}return!1}function Hv(s){var a=Ii(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){s.blockedOn=a,ui(s.priority,function(){Uv(l)});return}}else if(a===31){if(a=h(l),a!==null){s.blockedOn=a,ui(s.priority,function(){Uv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function hf(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=Wm(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Gl=c,l.target.dispatchEvent(c),Gl=null}else return a=Gn(l),a!==null&&Bv(a),s.blockedOn=l,!1;a.shift()}return!0}function qv(s,a,l){hf(s)&&l.delete(a)}function nR(){Zm=!1,ir!==null&&hf(ir)&&(ir=null),sr!==null&&hf(sr)&&(sr=null),rr!==null&&hf(rr)&&(rr=null),Cu.forEach(qv),Mu.forEach(qv)}function ff(s,a){s.blockedOn===a&&(s.blockedOn=null,Zm||(Zm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,nR)))}var df=null;function Gv(s){df!==s&&(df=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){df===s&&(df=null);for(var a=0;a<s.length;a+=3){var l=s[a],c=s[a+1],m=s[a+2];if(typeof c!="function"){if($m(c||l)===null)continue;break}var p=Gn(l);p!==null&&(s.splice(a,3),a-=3,Wg(p,{pending:!0,data:m,method:l.method,action:c},c,m))}}))}function Po(s){function a(N){return ff(N,s)}ir!==null&&ff(ir,s),sr!==null&&ff(sr,s),rr!==null&&ff(rr,s),Cu.forEach(a),Mu.forEach(a);for(var l=0;l<ar.length;l++){var c=ar[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<ar.length&&(l=ar[0],l.blockedOn===null);)Hv(l),l.blockedOn===null&&ar.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var m=l[c],p=l[c+1],v=m[Qe]||null;if(typeof p=="function")v||Gv(l);else if(v){var A=null;if(p&&p.hasAttribute("formAction")){if(m=p,v=p[Qe]||null)A=v.formAction;else if($m(m)!==null)continue}else A=v.action;typeof A=="function"?l[c+1]=A:(l.splice(c,3),c-=3),Gv(l)}}}function Kv(){function s(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return m=v})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function Jm(s){this._internalRoot=s}gf.prototype.render=Jm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,c=Ln();zv(l,c,s,a,null,null)},gf.prototype.unmount=Jm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;zv(s.current,2,null,s,null,null),Yh(),a[wi]=null}};function gf(s){this._internalRoot=s}gf.prototype.unstable_scheduleHydration=function(s){if(s){var a=Yc();s={blockedOn:null,target:s,priority:a};for(var l=0;l<ar.length&&a!==0&&a<ar[l].priority;l++);ar.splice(l,0,s),l===0&&Hv(s)}};var Yv=t.version;if(Yv!=="19.2.3")throw Error(n(527,Yv,"19.2.3"));at.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=g(a),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var iR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mf.isDisabled&&mf.supportsFiber)try{oi=mf.inject(iR),tn=mf}catch{}}return Nu.createRoot=function(s,a){if(!r(s))throw Error(n(299));var l=!1,c="",m=tb,p=eb,v=nb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=Pv(s,1,!1,null,null,l,c,null,m,p,v,Kv),s[wi]=a.current,Nm(s),new Jm(a)},Nu.hydrateRoot=function(s,a,l){if(!r(s))throw Error(n(299));var c=!1,m="",p=tb,v=eb,A=nb,N=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.formState!==void 0&&(N=l.formState)),a=Pv(s,1,!0,a,l??null,c,m,N,p,v,A,Kv),a.context=kv(null),l=a.current,c=Ln(),c=Ur(c),m=Gs(c),m.callback=null,Ks(l,m,c),l=c,a.current.lanes=l,Lr(a,l),Fi(a),s[wi]=a.current,Nm(s),new gf(a)},Nu.version="19.2.3",Nu}var iT;function dR(){if(iT)return np.exports;iT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),np.exports=fR(),np.exports}var gR=dR();const JS=Yt.createContext(),Mp=[{id:"u1",name:"Claudio",avatar:""},{id:"u2",name:"Giovanna",avatar:""},{id:"u3",name:"Tailma",avatar:""},{id:"u4",name:"Victor",avatar:""}],mR=({children:i})=>{const[t,e]=Yt.useState(null),[n,r]=Yt.useState(!0);Yt.useEffect(()=>{const h=localStorage.getItem("expenses_user_id");if(h){const f=Mp.find(g=>g.id===h);f&&e(f)}r(!1)},[]);const o=h=>{const f=Mp.find(g=>g.id===h);f&&(e(f),localStorage.setItem("expenses_user_id",h))},u=()=>{e(null),localStorage.removeItem("expenses_user_id")};return ot.jsx(JS.Provider,{value:{currentUser:t,login:o,logout:u,loading:n},children:i})},py=()=>Yt.useContext(JS),pR=()=>{};var sT={};const t1=function(i){const t=[];let e=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},yR=function(i){const t=[];let e=0,n=0;for(;e<i.length;){const r=i[e++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const o=i[e++];t[n++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=i[e++],u=i[e++],h=i[e++],f=((r&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;t[n++]=String.fromCharCode(55296+(f>>10)),t[n++]=String.fromCharCode(56320+(f&1023))}else{const o=i[e++],u=i[e++];t[n++]=String.fromCharCode((r&15)<<12|(o&63)<<6|u&63)}}return t.join("")},e1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const o=i[r],u=r+1<i.length,h=u?i[r+1]:0,f=r+2<i.length,g=f?i[r+2]:0,y=o>>2,_=(o&3)<<4|h>>4;let T=(h&15)<<2|g>>6,S=g&63;f||(S=64,u||(T=64)),n.push(e[y],e[_],e[T],e[S])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(t1(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):yR(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const o=e[i.charAt(r++)],h=r<i.length?e[i.charAt(r)]:0;++r;const g=r<i.length?e[i.charAt(r)]:64;++r;const _=r<i.length?e[i.charAt(r)]:64;if(++r,o==null||h==null||g==null||_==null)throw new _R;const T=o<<2|h>>4;if(n.push(T),g!==64){const S=h<<4&240|g>>2;if(n.push(S),_!==64){const D=g<<6&192|_;n.push(D)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class _R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bR=function(i){const t=t1(i);return e1.encodeByteArray(t,!0)},Wf=function(i){return bR(i).replace(/\./g,"")},vR=function(i){try{return e1.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function n1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const TR=()=>n1().__FIREBASE_DEFAULTS__,ER=()=>{if(typeof process>"u"||typeof sT>"u")return;const i=sT.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},SR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&vR(i[1]);return t&&JSON.parse(t)},yy=()=>{try{return pR()||TR()||ER()||SR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},AR=i=>yy()?.emulatorHosts?.[i],xR=i=>{const t=AR(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},i1=()=>yy()?.config;class wR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}function _y(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function RR(i){return(await fetch(i,{credentials:"include"})).ok}function IR(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",r=i.iat||0,o=i.sub||i.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Wf(JSON.stringify(e)),Wf(JSON.stringify(u)),""].join(".")}const Ju={};function DR(){const i={prod:[],emulator:[]};for(const t of Object.keys(Ju))Ju[t]?i.emulator.push(t):i.prod.push(t);return i}function CR(i){let t=document.getElementById(i),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),e=!0),{created:e,element:t}}let rT=!1;function MR(i,t){if(typeof window>"u"||typeof document>"u"||!_y(window.location.host)||Ju[i]===t||Ju[i]||rT)return;Ju[i]=t;function e(T){return`__firebase__banner__${T}`}const n="__firebase__banner",o=DR().prod.length>0;function u(){const T=document.getElementById(n);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,S){T.setAttribute("width","24"),T.setAttribute("id",S),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{rT=!0,u()},T}function y(T,S){T.setAttribute("id",S),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=CR(n),S=e("text"),D=document.getElementById(S)||document.createElement("span"),C=e("learnmore"),M=document.getElementById(C)||document.createElement("a"),B=e("preprendIcon"),j=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const K=T.element;h(K),y(M,C);const it=g();f(j,B),K.append(j,D,M,it),document.body.appendChild(K)}o?(D.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function $f(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function s1(){const i=yy()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r1(){return!s1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function a1(){return!s1()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function o1(){try{return typeof indexedDB=="object"}catch{return!1}}function VR(){return new Promise((i,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{t(r.error?.message||"")}}catch(e){t(e)}})}const OR="FirebaseError";class bl extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=OR,Object.setPrototypeOf(this,bl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,l1.prototype.create)}}class l1{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],u=o?NR(o,n):"Error",h=`${this.serviceName}: ${u} (${r}).`;return new bl(r,h,n)}}function NR(i,t){return i.replace(PR,(e,n)=>{const r=t[n];return r!=null?String(r):`<${n}?>`})}const PR=/\{\$([^}]+)}/g;function Zf(i,t){if(i===t)return!0;const e=Object.keys(i),n=Object.keys(t);for(const r of e){if(!n.includes(r))return!1;const o=i[r],u=t[r];if(aT(o)&&aT(u)){if(!Zf(o,u))return!1}else if(o!==u)return!1}for(const r of n)if(!e.includes(r))return!1;return!0}function aT(i){return i!==null&&typeof i=="object"}function Ma(i){return i&&i._delegate?i._delegate:i}class fc{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ma="[DEFAULT]";class kR{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new wR;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),n=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(r){if(n)return null;throw r}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(LR(t))try{this.getOrInitializeService({instanceIdentifier:ma})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:r});n.resolve(o)}catch{}}}}clearInstance(t=ma){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ma){return this.instances.has(t)}getOptions(t=ma){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);n===h&&u.resolve(r)}return r}onInit(t,e){const n=this.normalizeInstanceIdentifier(e),r=this.onInitCallbacks.get(n)??new Set;r.add(t),this.onInitCallbacks.set(n,r);const o=this.instances.get(n);return o&&t(o,n),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:zR(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=ma){return this.component?this.component.multipleInstances?t:ma:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zR(i){return i===ma?void 0:i}function LR(i){return i.instantiationMode==="EAGER"}class BR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new kR(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Ft;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ft||(Ft={}));const UR={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},jR=Ft.INFO,FR={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},HR=(i,t,...e)=>{if(t<i.logLevel)return;const n=new Date().toISOString(),r=FR[t];if(r)console[r](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class u1{constructor(t){this.name=t,this._logLevel=jR,this._logHandler=HR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?UR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...t),this._logHandler(this,Ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...t),this._logHandler(this,Ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...t),this._logHandler(this,Ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...t),this._logHandler(this,Ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...t),this._logHandler(this,Ft.ERROR,...t)}}const qR=(i,t)=>t.some(e=>i instanceof e);let oT,lT;function GR(){return oT||(oT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KR(){return lT||(lT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c1=new WeakMap,Vp=new WeakMap,h1=new WeakMap,ap=new WeakMap,by=new WeakMap;function YR(i){const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("success",o),i.removeEventListener("error",u)},o=()=>{e(yr(i.result)),r()},u=()=>{n(i.error),r()};i.addEventListener("success",o),i.addEventListener("error",u)});return t.then(e=>{e instanceof IDBCursor&&c1.set(e,i)}).catch(()=>{}),by.set(t,i),t}function QR(i){if(Vp.has(i))return;const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("complete",o),i.removeEventListener("error",u),i.removeEventListener("abort",u)},o=()=>{e(),r()},u=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",o),i.addEventListener("error",u),i.addEventListener("abort",u)});Vp.set(i,t)}let Op={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return Vp.get(i);if(t==="objectStoreNames")return i.objectStoreNames||h1.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return yr(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function XR(i){Op=i(Op)}function WR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=i.call(op(this),t,...e);return h1.set(n,t.sort?t.sort():[t]),yr(n)}:KR().includes(i)?function(...t){return i.apply(op(this),t),yr(c1.get(this))}:function(...t){return yr(i.apply(op(this),t))}}function $R(i){return typeof i=="function"?WR(i):(i instanceof IDBTransaction&&QR(i),qR(i,GR())?new Proxy(i,Op):i)}function yr(i){if(i instanceof IDBRequest)return YR(i);if(ap.has(i))return ap.get(i);const t=$R(i);return t!==i&&(ap.set(i,t),by.set(t,i)),t}const op=i=>by.get(i);function ZR(i,t,{blocked:e,upgrade:n,blocking:r,terminated:o}={}){const u=indexedDB.open(i,t),h=yr(u);return n&&u.addEventListener("upgradeneeded",f=>{n(yr(u.result),f.oldVersion,f.newVersion,yr(u.transaction),f)}),e&&u.addEventListener("blocked",f=>e(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",g=>r(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const JR=["get","getKey","getAll","getAllKeys","count"],tI=["put","add","delete","clear"],lp=new Map;function uT(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(lp.get(t))return lp.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,r=tI.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(r||JR.includes(e)))return;const o=async function(u,...h){const f=this.transaction(u,r?"readwrite":"readonly");let g=f.store;return n&&(g=g.index(h.shift())),(await Promise.all([g[e](...h),r&&f.done]))[0]};return lp.set(t,o),o}XR(i=>({...i,get:(t,e,n)=>uT(t,e)||i.get(t,e,n),has:(t,e)=>!!uT(t,e)||i.has(t,e)}));class eI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(nI(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function nI(i){return i.getComponent()?.type==="VERSION"}const Np="@firebase/app",cT="0.14.6";const xs=new u1("@firebase/app"),iI="@firebase/app-compat",sI="@firebase/analytics-compat",rI="@firebase/analytics",aI="@firebase/app-check-compat",oI="@firebase/app-check",lI="@firebase/auth",uI="@firebase/auth-compat",cI="@firebase/database",hI="@firebase/data-connect",fI="@firebase/database-compat",dI="@firebase/functions",gI="@firebase/functions-compat",mI="@firebase/installations",pI="@firebase/installations-compat",yI="@firebase/messaging",_I="@firebase/messaging-compat",bI="@firebase/performance",vI="@firebase/performance-compat",TI="@firebase/remote-config",EI="@firebase/remote-config-compat",SI="@firebase/storage",AI="@firebase/storage-compat",xI="@firebase/firestore",wI="@firebase/ai",RI="@firebase/firestore-compat",II="firebase",DI="12.6.0";const Pp="[DEFAULT]",CI={[Np]:"fire-core",[iI]:"fire-core-compat",[rI]:"fire-analytics",[sI]:"fire-analytics-compat",[oI]:"fire-app-check",[aI]:"fire-app-check-compat",[lI]:"fire-auth",[uI]:"fire-auth-compat",[cI]:"fire-rtdb",[hI]:"fire-data-connect",[fI]:"fire-rtdb-compat",[dI]:"fire-fn",[gI]:"fire-fn-compat",[mI]:"fire-iid",[pI]:"fire-iid-compat",[yI]:"fire-fcm",[_I]:"fire-fcm-compat",[bI]:"fire-perf",[vI]:"fire-perf-compat",[TI]:"fire-rc",[EI]:"fire-rc-compat",[SI]:"fire-gcs",[AI]:"fire-gcs-compat",[xI]:"fire-fst",[RI]:"fire-fst-compat",[wI]:"fire-vertex","fire-js":"fire-js",[II]:"fire-js-all"};const Jf=new Map,MI=new Map,kp=new Map;function hT(i,t){try{i.container.addComponent(t)}catch(e){xs.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function td(i){const t=i.name;if(kp.has(t))return xs.debug(`There were multiple attempts to register component ${t}.`),!1;kp.set(t,i);for(const e of Jf.values())hT(e,i);for(const e of MI.values())hT(e,i);return!0}function VI(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}function OI(i){return i==null?!1:i.settings!==void 0}const NI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new l1("app","Firebase",NI);class PI{constructor(t,e,n){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}const kI=DI;function f1(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const n={name:Pp,automaticDataCollectionEnabled:!0,...t},r=n.name;if(typeof r!="string"||!r)throw _r.create("bad-app-name",{appName:String(r)});if(e||(e=i1()),!e)throw _r.create("no-options");const o=Jf.get(r);if(o){if(Zf(e,o.options)&&Zf(n,o.config))return o;throw _r.create("duplicate-app",{appName:r})}const u=new BR(r);for(const f of kp.values())u.addComponent(f);const h=new PI(e,n,u);return Jf.set(r,h),h}function zI(i=Pp){const t=Jf.get(i);if(!t&&i===Pp&&i1())return f1();if(!t)throw _r.create("no-app",{appName:i});return t}function Xo(i,t,e){let n=CI[i]??i;e&&(n+=`-${e}`);const r=n.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const u=[`Unable to register library "${n}" with version "${t}":`];r&&u.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&o&&u.push("and"),o&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),xs.warn(u.join(" "));return}td(new fc(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}const LI="firebase-heartbeat-database",BI=1,dc="firebase-heartbeat-store";let up=null;function d1(){return up||(up=ZR(LI,BI,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(dc)}catch(e){console.warn(e)}}}}).catch(i=>{throw _r.create("idb-open",{originalErrorMessage:i.message})})),up}async function UI(i){try{const e=(await d1()).transaction(dc),n=await e.objectStore(dc).get(g1(i));return await e.done,n}catch(t){if(t instanceof bl)xs.warn(t.message);else{const e=_r.create("idb-get",{originalErrorMessage:t?.message});xs.warn(e.message)}}}async function fT(i,t){try{const n=(await d1()).transaction(dc,"readwrite");await n.objectStore(dc).put(t,g1(i)),await n.done}catch(e){if(e instanceof bl)xs.warn(e.message);else{const n=_r.create("idb-set",{originalErrorMessage:e?.message});xs.warn(n.message)}}}function g1(i){return`${i.name}!${i.options.appId}`}const jI=1024,FI=30;class HI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new GI(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=dT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(r=>r.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>FI){const r=KI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){xs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=dT(),{heartbeatsToSend:e,unsentEntries:n}=qI(this._heartbeatsCache.heartbeats),r=Wf(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return xs.warn(t),""}}}function dT(){return new Date().toISOString().substring(0,10)}function qI(i,t=jI){const e=[];let n=i.slice();for(const r of i){const o=e.find(u=>u.agent===r.agent);if(o){if(o.dates.push(r.date),gT(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),gT(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class GI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o1()?VR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await UI(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return fT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return fT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function gT(i){return Wf(JSON.stringify({version:2,heartbeats:i})).length}function KI(i){if(i.length===0)return-1;let t=0,e=i[0].date;for(let n=1;n<i.length;n++)i[n].date<e&&(e=i[n].date,t=n);return t}function YI(i){td(new fc("platform-logger",t=>new eI(t),"PRIVATE")),td(new fc("heartbeat",t=>new HI(t),"PRIVATE")),Xo(Np,cT,i),Xo(Np,cT,"esm2020"),Xo("fire-js","")}YI("");var QI="firebase",XI="12.6.0";Xo(QI,XI,"app");var mT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var br,m1;(function(){var i;function t(R,w){function I(){}I.prototype=w.prototype,R.F=w.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(P,O,k){for(var V=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)V[Vt-2]=arguments[Vt];return w.prototype[O].apply(P,V)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(n,e),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,w,I){I||(I=0);const P=Array(16);if(typeof w=="string")for(var O=0;O<16;++O)P[O]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(O=0;O<16;++O)P[O]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=R.g[0],I=R.g[1],O=R.g[2];let k=R.g[3],V;V=w+(k^I&(O^k))+P[0]+3614090360&4294967295,w=I+(V<<7&4294967295|V>>>25),V=k+(O^w&(I^O))+P[1]+3905402710&4294967295,k=w+(V<<12&4294967295|V>>>20),V=O+(I^k&(w^I))+P[2]+606105819&4294967295,O=k+(V<<17&4294967295|V>>>15),V=I+(w^O&(k^w))+P[3]+3250441966&4294967295,I=O+(V<<22&4294967295|V>>>10),V=w+(k^I&(O^k))+P[4]+4118548399&4294967295,w=I+(V<<7&4294967295|V>>>25),V=k+(O^w&(I^O))+P[5]+1200080426&4294967295,k=w+(V<<12&4294967295|V>>>20),V=O+(I^k&(w^I))+P[6]+2821735955&4294967295,O=k+(V<<17&4294967295|V>>>15),V=I+(w^O&(k^w))+P[7]+4249261313&4294967295,I=O+(V<<22&4294967295|V>>>10),V=w+(k^I&(O^k))+P[8]+1770035416&4294967295,w=I+(V<<7&4294967295|V>>>25),V=k+(O^w&(I^O))+P[9]+2336552879&4294967295,k=w+(V<<12&4294967295|V>>>20),V=O+(I^k&(w^I))+P[10]+4294925233&4294967295,O=k+(V<<17&4294967295|V>>>15),V=I+(w^O&(k^w))+P[11]+2304563134&4294967295,I=O+(V<<22&4294967295|V>>>10),V=w+(k^I&(O^k))+P[12]+1804603682&4294967295,w=I+(V<<7&4294967295|V>>>25),V=k+(O^w&(I^O))+P[13]+4254626195&4294967295,k=w+(V<<12&4294967295|V>>>20),V=O+(I^k&(w^I))+P[14]+2792965006&4294967295,O=k+(V<<17&4294967295|V>>>15),V=I+(w^O&(k^w))+P[15]+1236535329&4294967295,I=O+(V<<22&4294967295|V>>>10),V=w+(O^k&(I^O))+P[1]+4129170786&4294967295,w=I+(V<<5&4294967295|V>>>27),V=k+(I^O&(w^I))+P[6]+3225465664&4294967295,k=w+(V<<9&4294967295|V>>>23),V=O+(w^I&(k^w))+P[11]+643717713&4294967295,O=k+(V<<14&4294967295|V>>>18),V=I+(k^w&(O^k))+P[0]+3921069994&4294967295,I=O+(V<<20&4294967295|V>>>12),V=w+(O^k&(I^O))+P[5]+3593408605&4294967295,w=I+(V<<5&4294967295|V>>>27),V=k+(I^O&(w^I))+P[10]+38016083&4294967295,k=w+(V<<9&4294967295|V>>>23),V=O+(w^I&(k^w))+P[15]+3634488961&4294967295,O=k+(V<<14&4294967295|V>>>18),V=I+(k^w&(O^k))+P[4]+3889429448&4294967295,I=O+(V<<20&4294967295|V>>>12),V=w+(O^k&(I^O))+P[9]+568446438&4294967295,w=I+(V<<5&4294967295|V>>>27),V=k+(I^O&(w^I))+P[14]+3275163606&4294967295,k=w+(V<<9&4294967295|V>>>23),V=O+(w^I&(k^w))+P[3]+4107603335&4294967295,O=k+(V<<14&4294967295|V>>>18),V=I+(k^w&(O^k))+P[8]+1163531501&4294967295,I=O+(V<<20&4294967295|V>>>12),V=w+(O^k&(I^O))+P[13]+2850285829&4294967295,w=I+(V<<5&4294967295|V>>>27),V=k+(I^O&(w^I))+P[2]+4243563512&4294967295,k=w+(V<<9&4294967295|V>>>23),V=O+(w^I&(k^w))+P[7]+1735328473&4294967295,O=k+(V<<14&4294967295|V>>>18),V=I+(k^w&(O^k))+P[12]+2368359562&4294967295,I=O+(V<<20&4294967295|V>>>12),V=w+(I^O^k)+P[5]+4294588738&4294967295,w=I+(V<<4&4294967295|V>>>28),V=k+(w^I^O)+P[8]+2272392833&4294967295,k=w+(V<<11&4294967295|V>>>21),V=O+(k^w^I)+P[11]+1839030562&4294967295,O=k+(V<<16&4294967295|V>>>16),V=I+(O^k^w)+P[14]+4259657740&4294967295,I=O+(V<<23&4294967295|V>>>9),V=w+(I^O^k)+P[1]+2763975236&4294967295,w=I+(V<<4&4294967295|V>>>28),V=k+(w^I^O)+P[4]+1272893353&4294967295,k=w+(V<<11&4294967295|V>>>21),V=O+(k^w^I)+P[7]+4139469664&4294967295,O=k+(V<<16&4294967295|V>>>16),V=I+(O^k^w)+P[10]+3200236656&4294967295,I=O+(V<<23&4294967295|V>>>9),V=w+(I^O^k)+P[13]+681279174&4294967295,w=I+(V<<4&4294967295|V>>>28),V=k+(w^I^O)+P[0]+3936430074&4294967295,k=w+(V<<11&4294967295|V>>>21),V=O+(k^w^I)+P[3]+3572445317&4294967295,O=k+(V<<16&4294967295|V>>>16),V=I+(O^k^w)+P[6]+76029189&4294967295,I=O+(V<<23&4294967295|V>>>9),V=w+(I^O^k)+P[9]+3654602809&4294967295,w=I+(V<<4&4294967295|V>>>28),V=k+(w^I^O)+P[12]+3873151461&4294967295,k=w+(V<<11&4294967295|V>>>21),V=O+(k^w^I)+P[15]+530742520&4294967295,O=k+(V<<16&4294967295|V>>>16),V=I+(O^k^w)+P[2]+3299628645&4294967295,I=O+(V<<23&4294967295|V>>>9),V=w+(O^(I|~k))+P[0]+4096336452&4294967295,w=I+(V<<6&4294967295|V>>>26),V=k+(I^(w|~O))+P[7]+1126891415&4294967295,k=w+(V<<10&4294967295|V>>>22),V=O+(w^(k|~I))+P[14]+2878612391&4294967295,O=k+(V<<15&4294967295|V>>>17),V=I+(k^(O|~w))+P[5]+4237533241&4294967295,I=O+(V<<21&4294967295|V>>>11),V=w+(O^(I|~k))+P[12]+1700485571&4294967295,w=I+(V<<6&4294967295|V>>>26),V=k+(I^(w|~O))+P[3]+2399980690&4294967295,k=w+(V<<10&4294967295|V>>>22),V=O+(w^(k|~I))+P[10]+4293915773&4294967295,O=k+(V<<15&4294967295|V>>>17),V=I+(k^(O|~w))+P[1]+2240044497&4294967295,I=O+(V<<21&4294967295|V>>>11),V=w+(O^(I|~k))+P[8]+1873313359&4294967295,w=I+(V<<6&4294967295|V>>>26),V=k+(I^(w|~O))+P[15]+4264355552&4294967295,k=w+(V<<10&4294967295|V>>>22),V=O+(w^(k|~I))+P[6]+2734768916&4294967295,O=k+(V<<15&4294967295|V>>>17),V=I+(k^(O|~w))+P[13]+1309151649&4294967295,I=O+(V<<21&4294967295|V>>>11),V=w+(O^(I|~k))+P[4]+4149444226&4294967295,w=I+(V<<6&4294967295|V>>>26),V=k+(I^(w|~O))+P[11]+3174756917&4294967295,k=w+(V<<10&4294967295|V>>>22),V=O+(w^(k|~I))+P[2]+718787259&4294967295,O=k+(V<<15&4294967295|V>>>17),V=I+(k^(O|~w))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(O+(V<<21&4294967295|V>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+k&4294967295}n.prototype.v=function(R,w){w===void 0&&(w=R.length);const I=w-this.blockSize,P=this.C;let O=this.h,k=0;for(;k<w;){if(O==0)for(;k<=I;)r(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<w;)if(P[O++]=R.charCodeAt(k++),O==this.blockSize){r(this,P),O=0;break}}else for(;k<w;)if(P[O++]=R[k++],O==this.blockSize){r(this,P),O=0;break}}this.h=O,this.o+=w},n.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;w=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=w&255,w/=256;for(this.v(R),R=Array(16),w=0,I=0;I<4;++I)for(let P=0;P<32;P+=8)R[w++]=this.g[I]>>>P&255;return R};function o(R,w){var I=h;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=w(R)}function u(R,w){this.h=w;const I=[];let P=!0;for(let O=R.length-1;O>=0;O--){const k=R[O]|0;P&&k==w||(I[O]=k,P=!1)}this.g=I}var h={};function f(R){return-128<=R&&R<128?o(R,function(w){return new u([w|0],w<0?-1:0)}):new u([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return _;if(R<0)return M(g(-R));const w=[];let I=1;for(let P=0;R>=I;P++)w[P]=R/I|0,I*=4294967296;return new u(w,0)}function y(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return M(y(R.substring(1),w));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(w,8));let P=_;for(let k=0;k<R.length;k+=8){var O=Math.min(8,R.length-k);const V=parseInt(R.substring(k,k+O),w);O<8?(O=g(Math.pow(w,O)),P=P.j(O).add(g(V))):(P=P.j(I),P=P.add(g(V)))}return P}var _=f(0),T=f(1),S=f(16777216);i=u.prototype,i.m=function(){if(C(this))return-M(this).m();let R=0,w=1;for(let I=0;I<this.g.length;I++){const P=this.i(I);R+=(P>=0?P:4294967296+P)*w,w*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(D(this))return"0";if(C(this))return"-"+M(this).toString(R);const w=g(Math.pow(R,6));var I=this;let P="";for(;;){const O=it(I,w).g;I=B(I,O.j(w));let k=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=O,D(I))return k+P;for(;k.length<6;)k="0"+k;P=k+P}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function D(R){if(R.h!=0)return!1;for(let w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function C(R){return R.h==-1}i.l=function(R){return R=B(this,R),C(R)?-1:D(R)?0:1};function M(R){const w=R.g.length,I=[];for(let P=0;P<w;P++)I[P]=~R.g[P];return new u(I,~R.h).add(T)}i.abs=function(){return C(this)?M(this):this},i.add=function(R){const w=Math.max(this.g.length,R.g.length),I=[];let P=0;for(let O=0;O<=w;O++){let k=P+(this.i(O)&65535)+(R.i(O)&65535),V=(k>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);P=V>>>16,k&=65535,V&=65535,I[O]=V<<16|k}return new u(I,I[I.length-1]&-2147483648?-1:0)};function B(R,w){return R.add(M(w))}i.j=function(R){if(D(this)||D(R))return _;if(C(this))return C(R)?M(this).j(M(R)):M(M(this).j(R));if(C(R))return M(this.j(M(R)));if(this.l(S)<0&&R.l(S)<0)return g(this.m()*R.m());const w=this.g.length+R.g.length,I=[];for(var P=0;P<2*w;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(let O=0;O<R.g.length;O++){const k=this.i(P)>>>16,V=this.i(P)&65535,Vt=R.i(O)>>>16,xt=R.i(O)&65535;I[2*P+2*O]+=V*xt,j(I,2*P+2*O),I[2*P+2*O+1]+=k*xt,j(I,2*P+2*O+1),I[2*P+2*O+1]+=V*Vt,j(I,2*P+2*O+1),I[2*P+2*O+2]+=k*Vt,j(I,2*P+2*O+2)}for(R=0;R<w;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=w;R<2*w;R++)I[R]=0;return new u(I,0)};function j(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function K(R,w){this.g=R,this.h=w}function it(R,w){if(D(w))throw Error("division by zero");if(D(R))return new K(_,_);if(C(R))return w=it(M(R),w),new K(M(w.g),M(w.h));if(C(w))return w=it(R,M(w)),new K(M(w.g),w.h);if(R.g.length>30){if(C(R)||C(w))throw Error("slowDivide_ only works with positive integers.");for(var I=T,P=w;P.l(R)<=0;)I=Z(I),P=Z(P);var O=st(I,1),k=st(P,1);for(P=st(P,2),I=st(I,2);!D(P);){var V=k.add(P);V.l(R)<=0&&(O=O.add(I),k=V),P=st(P,1),I=st(I,1)}return w=B(R,O.j(w)),new K(O,w)}for(O=_;R.l(w)>=0;){for(I=Math.max(1,Math.floor(R.m()/w.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),k=g(I),V=k.j(w);C(V)||V.l(R)>0;)I-=P,k=g(I),V=k.j(w);D(k)&&(k=T),O=O.add(k),R=B(R,V)}return new K(O,R)}i.B=function(R){return it(this,R).h},i.and=function(R){const w=Math.max(this.g.length,R.g.length),I=[];for(let P=0;P<w;P++)I[P]=this.i(P)&R.i(P);return new u(I,this.h&R.h)},i.or=function(R){const w=Math.max(this.g.length,R.g.length),I=[];for(let P=0;P<w;P++)I[P]=this.i(P)|R.i(P);return new u(I,this.h|R.h)},i.xor=function(R){const w=Math.max(this.g.length,R.g.length),I=[];for(let P=0;P<w;P++)I[P]=this.i(P)^R.i(P);return new u(I,this.h^R.h)};function Z(R){const w=R.g.length+1,I=[];for(let P=0;P<w;P++)I[P]=R.i(P)<<1|R.i(P-1)>>>31;return new u(I,R.h)}function st(R,w){const I=w>>5;w%=32;const P=R.g.length-I,O=[];for(let k=0;k<P;k++)O[k]=w>0?R.i(k+I)>>>w|R.i(k+I+1)<<32-w:R.i(k+I);return new u(O,R.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,m1=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=y,br=u}).apply(typeof mT<"u"?mT:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var p1,Gu,y1,Pf,zp,_1,b1,v1;(function(){var i,t=Object.defineProperty;function e(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var b=0;b<d.length;++b){var E=d[b];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var n=e(this);function r(d,b){if(b)t:{var E=n;d=d.split(".");for(var x=0;x<d.length-1;x++){var H=d[x];if(!(H in E))break t;E=E[H]}d=d[d.length-1],x=E[d],b=b(x),b!=x&&b!=null&&t(E,d,{configurable:!0,writable:!0,value:b})}}r("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(d){return d||function(b){var E=[],x;for(x in b)Object.prototype.hasOwnProperty.call(b,x)&&E.push([x,b[x]]);return E}});var o=o||{},u=this||self;function h(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function f(d,b,E){return d.call.apply(d.bind,arguments)}function g(d,b,E){return g=f,g.apply(null,arguments)}function y(d,b){var E=Array.prototype.slice.call(arguments,1);return function(){var x=E.slice();return x.push.apply(x,arguments),d.apply(this,x)}}function _(d,b){function E(){}E.prototype=b.prototype,d.Z=b.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(x,H,X){for(var lt=Array(arguments.length-2),It=2;It<arguments.length;It++)lt[It-2]=arguments[It];return b.prototype[H].apply(x,lt)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function S(d){const b=d.length;if(b>0){const E=Array(b);for(let x=0;x<b;x++)E[x]=d[x];return E}return[]}function D(d,b){for(let x=1;x<arguments.length;x++){const H=arguments[x];var E=typeof H;if(E=E!="object"?E:H?Array.isArray(H)?"array":E:"null",E=="array"||E=="object"&&typeof H.length=="number"){E=d.length||0;const X=H.length||0;d.length=E+X;for(let lt=0;lt<X;lt++)d[E+lt]=H[lt]}else d.push(H)}}class C{constructor(b,E){this.i=b,this.j=E,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function M(d){u.setTimeout(()=>{throw d},0)}function B(){var d=R;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class j{constructor(){this.h=this.g=null}add(b,E){const x=K.get();x.set(b,E),this.h?this.h.next=x:this.g=x,this.h=x}}var K=new C(()=>new it,d=>d.reset());class it{constructor(){this.next=this.g=this.h=null}set(b,E){this.h=b,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,st=!1,R=new j,w=()=>{const d=Promise.resolve(void 0);Z=()=>{d.then(I)}};function I(){for(var d;d=B();){try{d.h.call(d.g)}catch(E){M(E)}var b=K;b.j(d),b.h<100&&(b.h++,d.next=b.g,b.g=d)}st=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};u.addEventListener("test",E,b),u.removeEventListener("test",E,b)}catch{}return d})();function V(d){return/^[\s\xa0]*$/.test(d)}function Vt(d,b){O.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,b)}_(Vt,O),Vt.prototype.init=function(d,b){const E=this.type=d.type,x=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget,b||(E=="mouseover"?b=d.fromElement:E=="mouseout"&&(b=d.toElement)),this.relatedTarget=b,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Vt.Z.h.call(this)},Vt.prototype.h=function(){Vt.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var xt="closure_listenable_"+(Math.random()*1e6|0),Q=0;function at(d,b,E,x,H){this.listener=d,this.proxy=null,this.src=b,this.type=E,this.capture=!!x,this.ha=H,this.key=++Q,this.da=this.fa=!1}function gt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function St(d,b,E){for(const x in d)b.call(E,d[x],x,d)}function Pt(d,b){for(const E in d)b.call(void 0,d[E],E,d)}function z(d){const b={};for(const E in d)b[E]=d[E];return b}const tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ct(d,b){let E,x;for(let H=1;H<arguments.length;H++){x=arguments[H];for(E in x)d[E]=x[E];for(let X=0;X<tt.length;X++)E=tt[X],Object.prototype.hasOwnProperty.call(x,E)&&(d[E]=x[E])}}function ft(d){this.src=d,this.g={},this.h=0}ft.prototype.add=function(d,b,E,x,H){const X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);const lt=At(d,b,x,H);return lt>-1?(b=d[lt],E||(b.fa=!1)):(b=new at(b,this.src,X,!!x,H),b.fa=E,d.push(b)),b};function Tt(d,b){const E=b.type;if(E in d.g){var x=d.g[E],H=Array.prototype.indexOf.call(x,b,void 0),X;(X=H>=0)&&Array.prototype.splice.call(x,H,1),X&&(gt(b),d.g[E].length==0&&(delete d.g[E],d.h--))}}function At(d,b,E,x){for(let H=0;H<d.length;++H){const X=d[H];if(!X.da&&X.listener==b&&X.capture==!!E&&X.ha==x)return H}return-1}var Ut="closure_lm_"+(Math.random()*1e6|0),Fe={};function me(d,b,E,x,H){if(Array.isArray(b)){for(let X=0;X<b.length;X++)me(d,b[X],E,x,H);return null}return E=Ml(E),d&&d[xt]?d.J(b,E,h(x)?!!x.capture:!1,H):Nr(d,b,E,!1,x,H)}function Nr(d,b,E,x,H,X){if(!b)throw Error("Invalid event type");const lt=h(H)?!!H.capture:!!H;let It=Pr(d);if(It||(d[Ut]=It=new ft(d)),E=It.add(b,E,x,lt,X),E.proxy)return E;if(x=Ga(),E.proxy=x,x.src=d,x.listener=E,d.addEventListener)k||(H=lt),H===void 0&&(H=!1),d.addEventListener(b.toString(),x,H);else if(d.attachEvent)d.attachEvent(Ti(b.toString()),x);else if(d.addListener&&d.removeListener)d.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ga(){function d(E){return b.call(d.src,d.listener,E)}const b=Dl;return d}function Ka(d,b,E,x,H){if(Array.isArray(b))for(var X=0;X<b.length;X++)Ka(d,b[X],E,x,H);else x=h(x)?!!x.capture:!!x,E=Ml(E),d&&d[xt]?(d=d.i,X=String(b).toString(),X in d.g&&(b=d.g[X],E=At(b,E,x,H),E>-1&&(gt(b[E]),Array.prototype.splice.call(b,E,1),b.length==0&&(delete d.g[X],d.h--)))):d&&(d=Pr(d))&&(b=d.g[b.toString()],d=-1,b&&(d=At(b,E,x,H)),(E=d>-1?b[d]:null)&&Ya(E))}function Ya(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[xt])Tt(b.i,d);else{var E=d.type,x=d.proxy;b.removeEventListener?b.removeEventListener(E,x,d.capture):b.detachEvent?b.detachEvent(Ti(E),x):b.addListener&&b.removeListener&&b.removeListener(x),(E=Pr(b))?(Tt(E,d),E.h==0&&(E.src=null,b[Ut]=null)):gt(d)}}}function Ti(d){return d in Fe?Fe[d]:Fe[d]="on"+d}function Dl(d,b){if(d.da)d=!0;else{b=new Vt(b,this);const E=d.listener,x=d.ha||d.src;d.fa&&Ya(d),d=E.call(x,b)}return d}function Pr(d){return d=d[Ut],d instanceof ft?d:null}var Cl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ml(d){return typeof d=="function"?d:(d[Cl]||(d[Cl]=function(b){return d.handleEvent(b)}),d[Cl])}function Ce(){P.call(this),this.i=new ft(this),this.M=this,this.G=null}_(Ce,P),Ce.prototype[xt]=!0,Ce.prototype.removeEventListener=function(d,b,E,x){Ka(this,d,b,E,x)};function He(d,b){var E,x=d.G;if(x)for(E=[];x;x=x.G)E.push(x);if(d=d.M,x=b.type||b,typeof b=="string")b=new O(b,d);else if(b instanceof O)b.target=b.target||d;else{var H=b;b=new O(x,d),ct(b,H)}H=!0;let X,lt;if(E)for(lt=E.length-1;lt>=0;lt--)X=b.g=E[lt],H=Ds(X,x,!0,b)&&H;if(X=b.g=d,H=Ds(X,x,!0,b)&&H,H=Ds(X,x,!1,b)&&H,E)for(lt=0;lt<E.length;lt++)X=b.g=E[lt],H=Ds(X,x,!1,b)&&H}Ce.prototype.N=function(){if(Ce.Z.N.call(this),this.i){var d=this.i;for(const b in d.g){const E=d.g[b];for(let x=0;x<E.length;x++)gt(E[x]);delete d.g[b],d.h--}}this.G=null},Ce.prototype.J=function(d,b,E,x){return this.i.add(String(d),b,!1,E,x)},Ce.prototype.K=function(d,b,E,x){return this.i.add(String(d),b,!0,E,x)};function Ds(d,b,E,x){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();let H=!0;for(let X=0;X<b.length;++X){const lt=b[X];if(lt&&!lt.da&&lt.capture==E){const It=lt.listener,Ae=lt.ha||lt.src;lt.fa&&Tt(d.i,lt),H=It.call(Ae,x)!==!1&&H}}return H&&!x.defaultPrevented}function ng(d,b){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=g(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:u.setTimeout(d,b||0)}function Uc(d){d.g=ng(()=>{d.g=null,d.i&&(d.i=!1,Uc(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class fn extends P{constructor(b,E){super(),this.m=b,this.l=E,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Uc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(d){P.call(this),this.h=d,this.g={}}_(kr,P);var Vl=[];function Ol(d){St(d.g,function(b,E){this.g.hasOwnProperty(E)&&Ya(b)},d),d.g={}}kr.prototype.N=function(){kr.Z.N.call(this),Ol(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cs=u.JSON.stringify,ig=u.JSON.parse,jc=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function Fc(){}function Hc(){}var oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tn(){O.call(this,"d")}_(tn,O);function qn(){O.call(this,"c")}_(qn,O);var Se={},qc=null;function Qa(){return qc=qc||new Ce}Se.Ia="serverreachability";function Gc(d){O.call(this,Se.Ia,d)}_(Gc,O);function Ei(d){const b=Qa();He(b,new Gc(b))}Se.STAT_EVENT="statevent";function zr(d,b){O.call(this,Se.STAT_EVENT,d),this.stat=b}_(zr,O);function Me(d){const b=Qa();He(b,new zr(b,d))}Se.Ja="timingevent";function Si(d,b){O.call(this,Se.Ja,d),this.size=b}_(Si,O);function Ai(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},b)}function li(){this.g=!0}li.prototype.ua=function(){this.g=!1};function sg(d,b,E,x,H,X){d.info(function(){if(d.g)if(X){var lt="",It=X.split("&");for(let Qt=0;Qt<It.length;Qt++){var Ae=It[Qt].split("=");if(Ae.length>1){const pe=Ae[0];Ae=Ae[1];const Qn=pe.split("_");lt=Qn.length>=2&&Qn[1]=="type"?lt+(pe+"="+Ae+"&"):lt+(pe+"=redacted&")}}}else lt=null;else lt=X;return"XMLHTTP REQ ("+x+") [attempt "+H+"]: "+b+`
`+E+`
`+lt})}function Kc(d,b,E,x,H,X,lt){d.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+H+"]: "+b+`
`+E+`
`+X+" "+lt})}function xi(d,b,E,x){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+rg(d,E)+(x?" "+x:"")})}function Lr(d,b){d.info(function(){return"TIMEOUT: "+b})}li.prototype.info=function(){};function rg(d,b){if(!d.g)return b;if(!b)return null;try{const X=JSON.parse(b);if(X){for(d=0;d<X.length;d++)if(Array.isArray(X[d])){var E=X[d];if(!(E.length<2)){var x=E[1];if(Array.isArray(x)&&!(x.length<1)){var H=x[0];if(H!="noop"&&H!="stop"&&H!="close")for(let lt=1;lt<x.length;lt++)x[lt]=""}}}}return Cs(X)}catch{return b}}var Br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pl;function Ur(){}_(Ur,Fc),Ur.prototype.g=function(){return new XMLHttpRequest},Pl=new Ur;function ts(d){return encodeURIComponent(String(d))}function Yc(d){var b=1;d=d.split(":");const E=[];for(;b>0&&d.length;)E.push(d.shift()),b--;return d.length&&E.push(d.join(":")),E}function ui(d,b,E,x){this.j=d,this.i=b,this.l=E,this.S=x||1,this.V=new kr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ci}function ci(){this.i=null,this.g="",this.h=!1}var Ve={},Qe={};function wi(d,b,E){d.M=1,d.A=jr(Ne(b)),d.u=E,d.R=!0,Xa(d,null)}function Xa(d,b){d.F=Date.now(),Ri(d),d.B=Ne(d.A);var E=d.B,x=d.S;Array.isArray(x)||(x=[String(x)]),Ja(E.i,"t",x),d.C=0,E=d.j.L,d.h=new ci,d.g=lh(d.j,E?b:null,!d.u),d.P>0&&(d.O=new fn(g(d.Y,d,d.g),d.P)),b=d.V,E=d.g,x=d.ba;var H="readystatechange";Array.isArray(H)||(H&&(Vl[0]=H.toString()),H=Vl);for(let X=0;X<H.length;X++){const lt=me(E,H[X],x||b.handleEvent,!1,b.h||b);if(!lt)break;b.g[lt.key]=lt}b=d.J?z(d.J):{},d.u?(d.v||(d.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,b)):(d.v="GET",d.g.ea(d.B,d.v,null,b)),Ei(),sg(d.i,d.v,d.B,d.l,d.S,d.u)}ui.prototype.ba=function(d){d=d.target;const b=this.O;b&&di(d)==3?b.j():this.Y(d)},ui.prototype.Y=function(d){try{if(d==this.g)t:{const It=di(this.g),Ae=this.g.ya(),Qt=this.g.ca();if(!(It<3)&&(It!=3||this.g&&(this.h.h||this.g.la()||en(this.g)))){this.K||It!=4||Ae==7||(Ae==8||Qt<=0?Ei(3):Ei(2)),Ii(this);var b=this.g.ca();this.X=b;var E=ag(this);if(this.o=b==200,Kc(this.i,this.v,this.B,this.l,this.S,It,b),this.o){if(this.U&&!this.L){e:{if(this.g){var x,H=this.g;if((x=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(x)){var X=x;break e}}X=null}if(d=X)xi(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Di(this,d);else{this.o=!1,this.m=3,Me(12),Cn(this),Gn(this);break t}}if(this.R){d=!0;let pe;for(;!this.K&&this.C<E.length;)if(pe=Xc(this,E),pe==Qe){It==4&&(this.m=4,Me(14),d=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(pe==Ve){this.m=4,Me(15),xi(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else xi(this.i,this.l,pe,null),Di(this,pe);if(Qc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||E.length!=0||this.h.h||(this.m=1,Me(16),d=!1),this.o=this.o&&d,!d)xi(this.i,this.l,E,"[Invalid Chunked Response]"),Cn(this),Gn(this);else if(E.length>0&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.aa&&!lt.P&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Wl(lt),lt.P=!0,Me(11))}}else xi(this.i,this.l,E,null),Di(this,E);It==4&&Cn(this),this.o&&!this.K&&(It==4?sh(this.j,this):(this.o=!1,Ri(this)))}else ns(this.g),b==400&&E.indexOf("Unknown SID")>0?(this.m=3,Me(12)):(this.m=0,Me(13)),Cn(this),Gn(this)}}}catch{}finally{}};function ag(d){if(!Qc(d))return d.g.la();const b=en(d.g);if(b==="")return"";let E="";const x=b.length,H=di(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Cn(d),Gn(d),"";d.h.i=new u.TextDecoder}for(let X=0;X<x;X++)d.h.h=!0,E+=d.h.i.decode(b[X],{stream:!(H&&X==x-1)});return b.length=0,d.h.g+=E,d.C=0,d.h.g}function Qc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Xc(d,b){var E=d.C,x=b.indexOf(`
`,E);return x==-1?Qe:(E=Number(b.substring(E,x)),isNaN(E)?Ve:(x+=1,x+E>b.length?Qe:(b=b.slice(x,x+E),d.C=x+E,b)))}ui.prototype.cancel=function(){this.K=!0,Cn(this)};function Ri(d){d.T=Date.now()+d.H,Wa(d,d.H)}function Wa(d,b){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ai(g(d.aa,d),b)}function Ii(d){d.D&&(u.clearTimeout(d.D),d.D=null)}ui.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Lr(this.i,this.B),this.M!=2&&(Ei(),Me(17)),Cn(this),this.m=2,Gn(this)):Wa(this,this.T-d)};function Gn(d){d.j.I==0||d.K||sh(d.j,d)}function Cn(d){Ii(d);var b=d.O;b&&typeof b.dispose=="function"&&b.dispose(),d.O=null,Ol(d.V),d.g&&(b=d.g,d.g=null,b.abort(),b.dispose())}function Di(d,b){try{var E=d.j;if(E.I!=0&&(E.g==d||Mi(E.h,d))){if(!d.L&&Mi(E.h,d)&&E.I==3){try{var x=E.Ba.g.parse(b)}catch{x=null}if(Array.isArray(x)&&x.length==3){var H=x;if(H[0]==0){t:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)so(E),Ls(E);else break t;Qr(E),Me(18)}}else E.xa=H[1],0<E.xa-E.K&&H[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Ai(g(E.Va,E),6e3));Ci(E.h)<=1&&E.ta&&(E.ta=void 0)}else zi(E,11)}else if((d.L||E.g==d)&&so(E),!V(b))for(H=E.Ba.g.parse(b),b=0;b<H.length;b++){let Qt=H[b];const pe=Qt[0];if(!(pe<=E.K))if(E.K=pe,Qt=Qt[1],E.I==2)if(Qt[0]=="c"){E.M=Qt[1],E.ba=Qt[2];const Qn=Qt[3];Qn!=null&&(E.ka=Qn,E.j.info("VER="+E.ka));const Li=Qt[4];Li!=null&&(E.za=Li,E.j.info("SVER="+E.za));const gi=Qt[5];gi!=null&&typeof gi=="number"&&gi>0&&(x=1.5*gi,E.O=x,E.j.info("backChannelRequestTimeoutMs_="+x)),x=E;const mi=d.g;if(mi){const Xr=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xr){var X=x.h;X.g||Xr.indexOf("spdy")==-1&&Xr.indexOf("quic")==-1&&Xr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ll(X,X.h),X.h=null))}if(x.G){const ro=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;ro&&(x.wa=ro,Zt(x.J,x.G,ro))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),x=E;var lt=d;if(x.na=oh(x,x.L?x.ba:null,x.W),lt.L){Bl(x.h,lt);var It=lt,Ae=x.O;Ae&&(It.H=Ae),It.D&&(Ii(It),Ri(It)),x.g=lt}else nh(x);E.i.length>0&&ki(E)}else Qt[0]!="stop"&&Qt[0]!="close"||zi(E,7);else E.I==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?zi(E,7):Ql(E):Qt[0]!="noop"&&E.l&&E.l.qa(Qt),E.A=0)}}Ei(4)}catch{}}var Oe=class{constructor(d,b){this.g=d,this.map=b}};function kl(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ci(d){return d.h?1:d.g?d.g.size:0}function Mi(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function Ll(d,b){d.g?d.g.add(b):d.h=b}function Bl(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}kl.prototype.cancel=function(){if(this.i=Ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ul(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const E of d.g.values())b=b.concat(E.G);return b}return S(d.i)}var Wc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $a(d,b){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const x=d[E].indexOf("=");let H,X=null;x>=0?(H=d[E].substring(0,x),X=d[E].substring(x+1)):H=d[E],b(H,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Mn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;d instanceof Mn?(this.l=d.l,Xe(this,d.j),this.o=d.o,this.g=d.g,Ms(this,d.u),this.h=d.h,jl(this,th(d.i)),this.m=d.m):d&&(b=String(d).match(Wc))?(this.l=!1,Xe(this,b[1]||"",!0),this.o=Vi(b[2]||""),this.g=Vi(b[3]||"",!0),Ms(this,b[4]),this.h=Vi(b[5]||"",!0),jl(this,b[6]||"",!0),this.m=Vi(b[7]||"")):(this.l=!1,this.i=new Os(null,this.l))}Mn.prototype.toString=function(){const d=[];var b=this.j;b&&d.push(Fr(b,Za,!0),":");var E=this.g;return(E||b=="file")&&(d.push("//"),(b=this.o)&&d.push(Fr(b,Za,!0),"@"),d.push(ts(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Fr(E,E.charAt(0)=="/"?Fl:$c,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Fr(E,Zc)),d.join("")},Mn.prototype.resolve=function(d){const b=Ne(this);let E=!!d.j;E?Xe(b,d.j):E=!!d.o,E?b.o=d.o:E=!!d.g,E?b.g=d.g:E=d.u!=null;var x=d.h;if(E)Ms(b,d.u);else if(E=!!d.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var H=b.h.lastIndexOf("/");H!=-1&&(x=b.h.slice(0,H+1)+x)}if(H=x,H==".."||H==".")x="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){x=H.lastIndexOf("/",0)==0,H=H.split("/");const X=[];for(let lt=0;lt<H.length;){const It=H[lt++];It=="."?x&&lt==H.length&&X.push(""):It==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),x&&lt==H.length&&X.push("")):(X.push(It),x=!0)}x=X.join("/")}else x=H}return E?b.h=x:E=d.i.toString()!=="",E?jl(b,th(d.i)):E=!!d.m,E&&(b.m=d.m),b};function Ne(d){return new Mn(d)}function Xe(d,b,E){d.j=E?Vi(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function Ms(d,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);d.u=b}else d.u=null}function jl(d,b,E){b instanceof Os?(d.i=b,to(d.i,d.l)):(E||(b=Fr(b,Vs)),d.i=new Os(b,d.l))}function Zt(d,b,E){d.i.set(b,E)}function jr(d){return Zt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Vi(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Fr(d,b,E){return typeof d=="string"?(d=encodeURI(d).replace(b,pn),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function pn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Za=/[#\/\?@]/g,$c=/[#\?:]/g,Fl=/[#\?]/g,Vs=/[#\?@]/g,Zc=/#/g;function Os(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function yn(d){d.g||(d.g=new Map,d.h=0,d.i&&$a(d.i,function(b,E){d.add(decodeURIComponent(b.replace(/\+/g," ")),E)}))}i=Os.prototype,i.add=function(d,b){yn(this),this.i=null,d=Ns(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(b),this.h+=1,this};function Jc(d,b){yn(d),b=Ns(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function Hl(d,b){return yn(d),b=Ns(d,b),d.g.has(b)}i.forEach=function(d,b){yn(this),this.g.forEach(function(E,x){E.forEach(function(H){d.call(b,H,x,this)},this)},this)};function ql(d,b){yn(d);let E=[];if(typeof b=="string")Hl(d,b)&&(E=E.concat(d.g.get(Ns(d,b))));else for(d=Array.from(d.g.values()),b=0;b<d.length;b++)E=E.concat(d[b]);return E}i.set=function(d,b){return yn(this),this.i=null,d=Ns(this,d),Hl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},i.get=function(d,b){return d?(d=ql(this,d),d.length>0?String(d[0]):b):b};function Ja(d,b,E){Jc(d,b),E.length>0&&(d.i=null,d.g.set(Ns(d,b),S(E)),d.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(let x=0;x<b.length;x++){var E=b[x];const H=ts(E);E=ql(this,E);for(let X=0;X<E.length;X++){let lt=H;E[X]!==""&&(lt+="="+ts(E[X])),d.push(lt)}}return this.i=d.join("&")};function th(d){const b=new Os;return b.i=d.i,d.g&&(b.g=new Map(d.g),b.h=d.h),b}function Ns(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function to(d,b){b&&!d.j&&(yn(d),d.i=null,d.g.forEach(function(E,x){const H=x.toLowerCase();x!=H&&(Jc(this,x),Ja(this,H,E))},d)),d.j=b}function hi(d,b){const E=new li;if(u.Image){const x=new Image;x.onload=y(Kn,E,"TestLoadImage: loaded",!0,b,x),x.onerror=y(Kn,E,"TestLoadImage: error",!1,b,x),x.onabort=y(Kn,E,"TestLoadImage: abort",!1,b,x),x.ontimeout=y(Kn,E,"TestLoadImage: timeout",!1,b,x),u.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=d}else b(!1)}function Gl(d,b){const E=new li,x=new AbortController,H=setTimeout(()=>{x.abort(),Kn(E,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:x.signal}).then(X=>{clearTimeout(H),X.ok?Kn(E,"TestPingServer: ok",!0,b):Kn(E,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(H),Kn(E,"TestPingServer: error",!1,b)})}function Kn(d,b,E,x,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),x(E)}catch{}}function Ps(){this.g=new jc}function Oi(d){this.i=d.Sb||null,this.h=d.ab||!1}_(Oi,Fc),Oi.prototype.g=function(){return new Hr(this.i,this.h)};function Hr(d,b){Ce.call(this),this.H=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Hr,Ce),i=Hr.prototype,i.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=b,this.readyState=1,fi(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(b.body=d),(this.H||u).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ks(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;eo(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function eo(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?ks(this):fi(this),this.readyState==3&&eo(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,ks(this))},i.Na=function(d){this.g&&(this.response=d,ks(this))},i.ga=function(){this.g&&ks(this)};function ks(d){d.readyState=4,d.l=null,d.j=null,d.B=null,fi(d)}i.setRequestHeader=function(d,b){this.A.append(d,b)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var E=b.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=b.next();return d.join(`\r
`)};function fi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Yn(d){let b="";return St(d,function(E,x){b+=x,b+=":",b+=E,b+=`\r
`}),b}function qr(d,b,E){t:{for(x in E){var x=!1;break t}x=!0}x||(E=Yn(E),typeof d=="string"?E!=null&&ts(E):Zt(d,b,E))}function se(d){Ce.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(se,Ce);var Ni=/^https?$/i,Kl=["POST","PUT"];i=se.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,b,E,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pl.g(),this.g.onreadystatechange=T(g(this.Ca,this));try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(X){Gr(this,X);return}if(d=E||"",E=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var H in x)E.set(H,x[H]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const X of x.keys())E.set(X,x.get(X));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),H=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(Kl,b,void 0)>=0)||x||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,lt]of E)this.g.setRequestHeader(X,lt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(X){Gr(this,X)}};function Gr(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.o=5,Yl(d),es(d)}function Yl(d){d.A||(d.A=!0,He(d,"complete"),He(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,He(this,"complete"),He(this,"abort"),es(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),es(this,!0)),se.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Kr(this):this.Xa())},i.Xa=function(){Kr(this)};function Kr(d){if(d.h&&typeof o<"u"){if(d.v&&di(d)==4)setTimeout(d.Ca.bind(d),0);else if(He(d,"readystatechange"),di(d)==4){d.h=!1;try{const X=d.ca();t:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break t;default:b=!1}var E;if(!(E=b)){var x;if(x=X===0){let lt=String(d.D).match(Wc)[1]||null;!lt&&u.self&&u.self.location&&(lt=u.self.location.protocol.slice(0,-1)),x=!Ni.test(lt?lt.toLowerCase():"")}E=x}if(E)He(d,"complete"),He(d,"success");else{d.o=6;try{var H=di(d)>2?d.g.statusText:""}catch{H=""}d.l=H+" ["+d.ca()+"]",Yl(d)}}finally{es(d)}}}}function es(d,b){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,b||He(d,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function di(d){return d.g?d.g.readyState:0}i.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),ig(b)}};function en(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(d){const b={};d=(d.g&&di(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<d.length;x++){if(V(d[x]))continue;var E=Yc(d[x]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=b[H]||[];b[H]=X,X.push(E)}Pt(b,function(x){return x.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pi(d,b,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||b}function zs(d){this.za=0,this.i=[],this.j=new li,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Pi("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Pi("baseRetryDelayMs",5e3,d),this.Za=Pi("retryDelaySeedMs",1e4,d),this.Ta=Pi("forwardChannelMaxRetries",2,d),this.va=Pi("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new kl(d&&d.concurrentRequestLimit),this.Ba=new Ps,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=zs.prototype,i.ka=8,i.I=1,i.connect=function(d,b,E,x){Me(0),this.W=d,this.H=b||{},E&&x!==void 0&&(this.H.OSID=E,this.H.OAID=x),this.F=this.X,this.J=oh(this,null,this.W),ki(this)};function Ql(d){if(no(d),d.I==3){var b=d.V++,E=Ne(d.J);if(Zt(E,"SID",d.M),Zt(E,"RID",b),Zt(E,"TYPE","terminate"),Yr(d,E),b=new ui(d,d.j,b),b.M=2,b.A=jr(Ne(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(b.A.toString(),"")}catch{}!E&&u.Image&&(new Image().src=b.A,E=!0),E||(b.g=lh(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Ri(b)}ah(d)}function Ls(d){d.g&&(Wl(d),d.g.cancel(),d.g=null)}function no(d){Ls(d),d.v&&(u.clearTimeout(d.v),d.v=null),so(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function ki(d){if(!zl(d.h)&&!d.m){d.m=!0;var b=d.Ea;Z||w(),st||(Z(),st=!0),R.add(b,d),d.D=0}}function io(d,b){return Ci(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=b.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ai(g(d.Ea,d,b),rh(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const H=new ui(this,this.j,d);let X=this.o;if(this.U&&(X?(X=z(X),ct(X,this.U)):X=this.U),this.u!==null||this.R||(H.J=X,X=null),this.S)t:{for(var b=0,E=0;E<this.i.length;E++){e:{var x=this.i[E];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break e}x=void 0}if(x===void 0)break;if(b+=x,b>4096){b=E;break t}if(b===4096||E===this.i.length-1){b=E+1;break t}}b=1e3}else b=1e3;b=eh(this,H,b),E=Ne(this.J),Zt(E,"RID",d),Zt(E,"CVER",22),this.G&&Zt(E,"X-HTTP-Session-Id",this.G),Yr(this,E),X&&(this.R?b="headers="+ts(Yn(X))+"&"+b:this.u&&qr(E,this.u,X)),Ll(this.h,H),this.Ra&&Zt(E,"TYPE","init"),this.S?(Zt(E,"$req",b),Zt(E,"SID","null"),H.U=!0,wi(H,E,null)):wi(H,E,b),this.I=2}}else this.I==3&&(d?Xl(this,d):this.i.length==0||zl(this.h)||Xl(this))};function Xl(d,b){var E;b?E=b.l:E=d.V++;const x=Ne(d.J);Zt(x,"SID",d.M),Zt(x,"RID",E),Zt(x,"AID",d.K),Yr(d,x),d.u&&d.o&&qr(x,d.u,d.o),E=new ui(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),b&&(d.i=b.G.concat(d.i)),b=eh(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Ll(d.h,E),wi(E,x,b)}function Yr(d,b){d.H&&St(d.H,function(E,x){Zt(b,x,E)}),d.l&&St({},function(E,x){Zt(b,x,E)})}function eh(d,b,E){E=Math.min(d.i.length,E);const x=d.l?g(d.l.Ka,d.l,d):null;t:{var H=d.i;let It=-1;for(;;){const Ae=["count="+E];It==-1?E>0?(It=H[0].g,Ae.push("ofs="+It)):It=0:Ae.push("ofs="+It);let Qt=!0;for(let pe=0;pe<E;pe++){var X=H[pe].g;const Qn=H[pe].map;if(X-=It,X<0)It=Math.max(0,H[pe].g-100),Qt=!1;else try{X="req"+X+"_"||"";try{var lt=Qn instanceof Map?Qn:Object.entries(Qn);for(const[Li,gi]of lt){let mi=gi;h(gi)&&(mi=Cs(gi)),Ae.push(X+Li+"="+encodeURIComponent(mi))}}catch(Li){throw Ae.push(X+"type="+encodeURIComponent("_badmap")),Li}}catch{x&&x(Qn)}}if(Qt){lt=Ae.join("&");break t}}lt=void 0}return d=d.i.splice(0,E),b.G=d,lt}function nh(d){if(!d.g&&!d.v){d.Y=1;var b=d.Da;Z||w(),st||(Z(),st=!0),R.add(b,d),d.A=0}}function Qr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ai(g(d.Da,d),rh(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,ih(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ai(g(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Me(10),Ls(this),ih(this))};function Wl(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function ih(d){d.g=new ui(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var b=Ne(d.na);Zt(b,"RID","rpc"),Zt(b,"SID",d.M),Zt(b,"AID",d.K),Zt(b,"CI",d.F?"0":"1"),!d.F&&d.ia&&Zt(b,"TO",d.ia),Zt(b,"TYPE","xmlhttp"),Yr(d,b),d.u&&d.o&&qr(b,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=jr(Ne(b)),E.u=null,E.R=!0,Xa(E,d)}i.Va=function(){this.C!=null&&(this.C=null,Ls(this),Qr(this),Me(19))};function so(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function sh(d,b){var E=null;if(d.g==b){so(d),Wl(d),d.g=null;var x=2}else if(Mi(d.h,b))E=b.G,Bl(d.h,b),x=1;else return;if(d.I!=0){if(b.o)if(x==1){E=b.u?b.u.length:0,b=Date.now()-b.F;var H=d.D;x=Qa(),He(x,new Si(x,E)),ki(d)}else nh(d);else if(H=b.m,H==3||H==0&&b.X>0||!(x==1&&io(d,b)||x==2&&Qr(d)))switch(E&&E.length>0&&(b=d.h,b.i=b.i.concat(E)),H){case 1:zi(d,5);break;case 4:zi(d,10);break;case 3:zi(d,6);break;default:zi(d,2)}}}function rh(d,b){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*b}function zi(d,b){if(d.j.info("Error code "+b),b==2){var E=g(d.bb,d),x=d.Ua;const H=!x;x=new Mn(x||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Xe(x,"https"),jr(x),H?hi(x.toString(),E):Gl(x.toString(),E)}else Me(2);d.I=0,d.l&&d.l.pa(b),ah(d),no(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function ah(d){if(d.I=0,d.ja=[],d.l){const b=Ul(d.h);(b.length!=0||d.i.length!=0)&&(D(d.ja,b),D(d.ja,d.i),d.h.i.length=0,S(d.i),d.i.length=0),d.l.oa()}}function oh(d,b,E){var x=E instanceof Mn?Ne(E):new Mn(E);if(x.g!="")b&&(x.g=b+"."+x.g),Ms(x,x.u);else{var H=u.location;x=H.protocol,b=b?b+"."+H.hostname:H.hostname,H=+H.port;const X=new Mn(null);x&&Xe(X,x),b&&(X.g=b),H&&Ms(X,H),E&&(X.h=E),x=X}return E=d.G,b=d.wa,E&&b&&Zt(x,E,b),Zt(x,"VER",d.ka),Yr(d,x),x}function lh(d,b,E){if(b&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Aa&&!d.ma?new se(new Oi({ab:E})):new se(d.ma),b.Fa(d.L),b}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function uh(){}i=uh.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Bs(){}Bs.prototype.g=function(d,b){return new dn(d,b)};function dn(d,b){Ce.call(this),this.g=new zs(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(d?d["X-WebChannel-Client-Profile"]=b.sa:d={"X-WebChannel-Client-Profile":b.sa}),this.g.U=d,(d=b&&b.Qb)&&!V(d)&&(this.g.u=d),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!V(b)&&(this.g.G=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new is(this)}_(dn,Ce),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Ql(this.g)},dn.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=Cs(d),d=E);b.i.push(new Oe(b.Ya++,d)),b.I==3&&ki(b)},dn.prototype.N=function(){this.g.l=null,delete this.j,Ql(this.g),delete this.g,dn.Z.N.call(this)};function ch(d){tn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){t:{for(const E in b){d=E;break t}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}_(ch,tn);function hh(){qn.call(this),this.status=1}_(hh,qn);function is(d){this.g=d}_(is,uh),is.prototype.ra=function(){He(this.g,"a")},is.prototype.qa=function(d){He(this.g,new ch(d))},is.prototype.pa=function(d){He(this.g,new hh)},is.prototype.oa=function(){He(this.g,"b")},Bs.prototype.createWebChannel=Bs.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,v1=function(){return new Bs},b1=function(){return Qa()},_1=Se,zp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Br.NO_ERROR=0,Br.TIMEOUT=8,Br.HTTP_ERROR=6,Pf=Br,Nl.COMPLETE="complete",y1=Nl,Hc.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",Ce.prototype.listen=Ce.prototype.J,Gu=Hc,se.prototype.listenOnce=se.prototype.K,se.prototype.getLastError=se.prototype.Ha,se.prototype.getLastErrorCode=se.prototype.ya,se.prototype.getStatus=se.prototype.ca,se.prototype.getResponseJson=se.prototype.La,se.prototype.getResponseText=se.prototype.la,se.prototype.send=se.prototype.ea,se.prototype.setWithCredentials=se.prototype.Fa,p1=se}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});const pT="@firebase/firestore",yT="4.9.2";class Ze{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");let vl="12.3.0";const Va=new u1("@firebase/firestore");function qo(){return Va.logLevel}function rt(i,...t){if(Va.logLevel<=Ft.DEBUG){const e=t.map(vy);Va.debug(`Firestore (${vl}): ${i}`,...e)}}function Re(i,...t){if(Va.logLevel<=Ft.ERROR){const e=t.map(vy);Va.error(`Firestore (${vl}): ${i}`,...e)}}function Oa(i,...t){if(Va.logLevel<=Ft.WARN){const e=t.map(vy);Va.warn(`Firestore (${vl}): ${i}`,...e)}}function vy(i){if(typeof i=="string")return i;try{return(function(e){return JSON.stringify(e)})(i)}catch{return i}}function dt(i,t,e){let n="Unexpected state";typeof t=="string"?n=t:e=t,T1(i,n,e)}function T1(i,t,e){let n=`FIRESTORE (${vl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(e!==void 0)try{n+=" CONTEXT: "+JSON.stringify(e)}catch{n+=" CONTEXT: "+e}throw Re(n),new Error(n)}function _t(i,t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,i||T1(t,r,n)}function pt(i,t){return i}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends bl{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class E1{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class WI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Ze.UNAUTHENTICATED)))}shutdown(){}}class $I{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class ZI{constructor(t){this.t=t,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){_t(this.o===void 0,42304);let n=this.i;const r=f=>this.i!==n?(n=this.i,e(f)):Promise.resolve();let o=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vr,t.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const f=o;t.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},h=f=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vr)}}),0),u()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((n=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_t(typeof n.accessToken=="string",31837,{l:n}),new E1(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _t(t===null||typeof t=="string",2055,{h:t}),new Ze(t)}}class JI{constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tD{constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new JI(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Ze.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _T{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eD{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,OI(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){_t(this.o===void 0,3512);const n=o=>{o.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,rt("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>n(o)))};const r=o=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _T(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(_t(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new _T(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function nD(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}class Ty{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const r=nD(40);for(let o=0;o<r.length;++o)n.length<20&&r[o]<e&&(n+=t.charAt(r[o]%62))}return n}}function wt(i,t){return i<t?-1:i>t?1:0}function Lp(i,t){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++){const r=i.charAt(n),o=t.charAt(n);if(r!==o)return cp(r)===cp(o)?wt(r,o):cp(r)?1:-1}return wt(i.length,t.length)}const iD=55296,sD=57343;function cp(i){const t=i.charCodeAt(0);return t>=iD&&t<=sD}function tl(i,t,e){return i.length===t.length&&i.every(((n,r)=>e(n,t[r])))}function S1(i){return i+"\0"}const bT="__name__";class Ki{constructor(t,e,n){e===void 0?e=0:e>t.length&&dt(637,{offset:e,range:t.length}),n===void 0?n=t.length-e:n>t.length-e&&dt(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return Ki.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ki?t.forEach((n=>{e.push(n)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const o=Ki.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return wt(t.length,e.length)}static compareSegments(t,e){const n=Ki.isNumericId(t),r=Ki.isNumericId(e);return n&&!r?-1:!n&&r?1:n&&r?Ki.extractNumericId(t).compare(Ki.extractNumericId(e)):Lp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return br.fromString(t.substring(4,t.length-2))}}class Wt extends Ki{construct(t,e,n){return new Wt(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new ut(J.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((r=>r.length>0)))}return new Wt(e)}static emptyPath(){return new Wt([])}}const rD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class be extends Ki{construct(t,e,n){return new be(t,e,n)}static isValidIdentifier(t){return rD.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),be.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bT}static keyField(){return new be([bT])}static fromServerFormat(t){const e=[];let n="",r=0;const o=()=>{if(n.length===0)throw new ut(J.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let u=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new ut(J.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ut(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=f,r+=2}else h==="`"?(u=!u,r++):h!=="."||u?(n+=h,r++):(o(),r++)}if(o(),u)throw new ut(J.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new be(e)}static emptyPath(){return new be([])}}class ht{constructor(t){this.path=t}static fromPath(t){return new ht(Wt.fromString(t))}static fromName(t){return new ht(Wt.fromString(t).popFirst(5))}static empty(){return new ht(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Wt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Wt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ht(new Wt(t.slice()))}}function A1(i,t,e){if(!e)throw new ut(J.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function aD(i,t,e,n){if(t===!0&&n===!0)throw new ut(J.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function vT(i){if(!ht.isDocumentKey(i))throw new ut(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function TT(i){if(ht.isDocumentKey(i))throw new ut(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function x1(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Cd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":dt(12329,{type:typeof i})}function xa(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new ut(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Cd(i);throw new ut(J.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}function Ue(i,t){const e={typeString:i};return t&&(e.value=t),e}function Mc(i,t){if(!x1(i))throw new ut(J.INVALID_ARGUMENT,"JSON must be an object");let e;for(const n in t)if(t[n]){const r=t[n].typeString,o="value"in t[n]?{value:t[n].value}:void 0;if(!(n in i)){e=`JSON missing required field: '${n}'`;break}const u=i[n];if(r&&typeof u!==r){e=`JSON field '${n}' must be a ${r}.`;break}if(o!==void 0&&u!==o.value){e=`Expected '${n}' field to equal '${o.value}'`;break}}if(e)throw new ut(J.INVALID_ARGUMENT,e);return!0}const ET=-62135596800,ST=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(t){return $t.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*ST);return new $t(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ut(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ut(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<ET)throw new ut(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ut(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ST}_compareTo(t){return this.seconds===t.seconds?wt(this.nanoseconds,t.nanoseconds):wt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Mc(t,$t._jsonSchema))return new $t(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-ET;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:Ue("string",$t._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};class vt{static fromTimestamp(t){return new vt(t)}static min(){return new vt(new $t(0,0))}static max(){return new vt(new $t(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const el=-1;class ed{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}}function Bp(i){return i.fields.find((t=>t.kind===2))}function pa(i){return i.fields.filter((t=>t.kind!==2))}ed.UNKNOWN_ID=-1;class kf{constructor(t,e){this.fieldPath=t,this.kind=e}}class gc{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new gc(0,Hn.min())}}function w1(i,t){const e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=vt.fromTimestamp(n===1e9?new $t(e+1,0):new $t(e,n));return new Hn(r,ht.empty(),t)}function R1(i){return new Hn(i.readTime,i.key,el)}class Hn{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Hn(vt.min(),ht.empty(),el)}static max(){return new Hn(vt.max(),ht.empty(),el)}}function Ey(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=ht.comparator(i.documentKey,t.documentKey),e!==0?e:wt(i.largestBatchId,t.largestBatchId))}const I1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Cr(i){if(i.code!==J.FAILED_PRECONDITION||i.message!==I1)throw i;rt("LocalStore","Unexpectedly lost primary lease")}class F{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new F(((n,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(n,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof F?e:F.resolve(e)}catch(e){return F.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):F.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):F.reject(e)}static resolve(t){return new F(((e,n)=>{e(t)}))}static reject(t){return new F(((e,n)=>{n(t)}))}static waitFor(t){return new F(((e,n)=>{let r=0,o=0,u=!1;t.forEach((h=>{++r,h.next((()=>{++o,u&&o===r&&e()}),(f=>n(f)))})),u=!0,o===r&&e()}))}static or(t){let e=F.resolve(!1);for(const n of t)e=e.next((r=>r?F.resolve(r):n()));return e}static forEach(t,e){const n=[];return t.forEach(((r,o)=>{n.push(e.call(this,r,o))})),this.waitFor(n)}static mapArray(t,e){return new F(((n,r)=>{const o=t.length,u=new Array(o);let h=0;for(let f=0;f<o;f++){const g=f;e(t[g]).next((y=>{u[g]=y,++h,h===o&&n(u)}),(y=>r(y)))}}))}static doWhile(t,e){return new F(((n,r)=>{const o=()=>{t()===!0?e().next((()=>{o()}),r):n()};o()}))}}const Un="SimpleDb";class Md{static open(t,e,n,r){try{return new Md(e,t.transaction(r,n))}catch(o){throw new tc(e,o)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new vr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new tc(t,e.error)):this.S.resolve()},this.transaction.onerror=n=>{const r=Sy(n.target.error);this.S.reject(new tc(t,r))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(rt(Un,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new lD(e)}}class Tr{static delete(t){return rt(Un,"Removing database:",t),ba(n1().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!o1())return!1;if(Tr.F())return!0;const t=$f(),e=Tr.M(t),n=0<e&&e<10,r=C1(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(t,e,n){this.name=t,this.version=e,this.N=n,this.B=null,Tr.M($f())===12.2&&Re("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(rt(Un,"Opening database:",this.name),this.db=await new Promise(((e,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{const u=o.target.result;e(u)},r.onblocked=()=>{n(new tc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{const u=o.target.error;u.name==="VersionError"?n(new ut(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?n(new ut(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):n(new tc(t,u))},r.onupgradeneeded=o=>{rt(Un,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const u=o.target.result;this.N.k(u,r.transaction,o.oldVersion,this.version).next((()=>{rt(Un,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,r){const o=e==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(t);const h=Md.open(this.db,t,o?"readonly":"readwrite",n),f=r(h).next((g=>(h.C(),g))).catch((g=>(h.abort(g),F.reject(g)))).toPromise();return f.catch((()=>{})),await h.D,f}catch(h){const f=h,g=f.name!=="FirebaseError"&&u<3;if(rt(Un,"Transaction failed with error:",f.message,"Retrying:",g),this.close(),!g)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function C1(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class oD{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return ba(this.U.delete())}}class tc extends ut{constructor(t,e){super(J.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Mr(i){return i.name==="IndexedDbTransactionError"}class lD{constructor(t){this.store=t}put(t,e){let n;return e!==void 0?(rt(Un,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(rt(Un,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ba(n)}add(t){return rt(Un,"ADD",this.store.name,t,t),ba(this.store.add(t))}get(t){return ba(this.store.get(t)).next((e=>(e===void 0&&(e=null),rt(Un,"GET",this.store.name,t,e),e)))}delete(t){return rt(Un,"DELETE",this.store.name,t),ba(this.store.delete(t))}count(){return rt(Un,"COUNT",this.store.name),ba(this.store.count())}J(t,e){const n=this.options(t,e),r=n.index?this.store.index(n.index):this.store;if(typeof r.getAll=="function"){const o=r.getAll(n.range);return new F(((u,h)=>{o.onerror=f=>{h(f.target.error)},o.onsuccess=f=>{u(f.target.result)}}))}{const o=this.cursor(n),u=[];return this.H(o,((h,f)=>{u.push(f)})).next((()=>u))}}Y(t,e){const n=this.store.getAll(t,e===null?void 0:e);return new F(((r,o)=>{n.onerror=u=>{o(u.target.error)},n.onsuccess=u=>{r(u.target.result)}}))}Z(t,e){rt(Un,"DELETE ALL",this.store.name);const n=this.options(t,e);n.X=!1;const r=this.cursor(n);return this.H(r,((o,u,h)=>h.delete()))}ee(t,e){let n;e?n=t:(n={},e=t);const r=this.cursor(n);return this.H(r,e)}te(t){const e=this.cursor({});return new F(((n,r)=>{e.onerror=o=>{const u=Sy(o.target.error);r(u)},e.onsuccess=o=>{const u=o.target.result;u?t(u.primaryKey,u.value).next((h=>{h?u.continue():n()})):n()}}))}H(t,e){const n=[];return new F(((r,o)=>{t.onerror=u=>{o(u.target.error)},t.onsuccess=u=>{const h=u.target.result;if(!h)return void r();const f=new oD(h),g=e(h.primaryKey,h.value,f);if(g instanceof F){const y=g.catch((_=>(f.done(),F.reject(_))));n.push(y)}f.isDone?r():f.G===null?h.continue():h.continue(f.G)}})).next((()=>F.waitFor(n)))}options(t,e){let n;return t!==void 0&&(typeof t=="string"?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.X?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function ba(i){return new F(((t,e)=>{i.onsuccess=n=>{const r=n.target.result;t(r)},i.onerror=n=>{const r=Sy(n.target.error);e(r)}}))}let AT=!1;function Sy(i){const t=Tr.M($f());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(e)>=0){const n=new ut("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AT||(AT=!0,setTimeout((()=>{throw n}),0)),n}}return i}const ec="IndexBackfiller";class uD{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){rt(ec,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();rt(ec,`Documents written: ${e}`)}catch(e){Mr(e)?rt(ec,"Ignoring IndexedDB error during index backfill: ",e):await Cr(e)}await this.re(6e4)}))}}class cD{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const n=new Set;let r=e,o=!0;return F.doWhile((()=>o===!0&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((u=>{if(u!==null&&!n.has(u))return rt(ec,`Processing collection: ${u}`),this.oe(t,u,r).next((h=>{r-=h,n.add(u)}));o=!1})))).next((()=>e-r))}oe(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((r=>this.localStore.localDocuments.getNextDocuments(t,e,r,n).next((o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(t,u).next((()=>this._e(r,o))).next((h=>(rt(ec,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(t,e,h)))).next((()=>u.size))}))))}_e(t,e){let n=t;return e.changes.forEach(((r,o)=>{const u=R1(o);Ey(u,n)>0&&(n=u)})),new Hn(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}}class wn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>e.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}wn.ce=-1;const wa=-1;function Vd(i){return i==null}function mc(i){return i===0&&1/i==-1/0}function M1(i){return typeof i=="number"&&Number.isInteger(i)&&!mc(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const nd="";function hn(i){let t="";for(let e=0;e<i.length;e++)t.length>0&&(t=xT(t)),t=hD(i.get(e),t);return xT(t)}function hD(i,t){let e=t;const n=i.length;for(let r=0;r<n;r++){const o=i.charAt(r);switch(o){case"\0":e+="";break;case nd:e+="";break;default:e+=o}}return e}function xT(i){return i+nd+""}function Xi(i){const t=i.length;if(_t(t>=2,64408,{path:i}),t===2)return _t(i.charAt(0)===nd&&i.charAt(1)==="",56145,{path:i}),Wt.emptyPath();const e=t-2,n=[];let r="";for(let o=0;o<t;){const u=i.indexOf(nd,o);switch((u<0||u>e)&&dt(50515,{path:i}),i.charAt(u+1)){case"":const h=i.substring(o,u);let f;r.length===0?f=h:(r+=h,f=r,r=""),n.push(f);break;case"":r+=i.substring(o,u),r+="\0";break;case"":r+=i.substring(o,u+1);break;default:dt(61167,{path:i})}o=u+2}return new Wt(n)}const ya="remoteDocuments",Vc="owner",ko="owner",pc="mutationQueues",fD="userId",bi="mutations",wT="batchId",Sa="userMutationsIndex",RT=["userId","batchId"];function zf(i,t){return[i,hn(t)]}function V1(i,t,e){return[i,hn(t),e]}const dD={},nl="documentMutations",id="remoteDocumentsV14",gD=["prefixPath","collectionGroup","readTime","documentId"],Lf="documentKeyIndex",mD=["prefixPath","collectionGroup","documentId"],O1="collectionGroupIndex",pD=["collectionGroup","readTime","prefixPath","documentId"],yc="remoteDocumentGlobal",Up="remoteDocumentGlobalKey",il="targets",N1="queryTargetsIndex",yD=["canonicalId","targetId"],sl="targetDocuments",_D=["targetId","path"],Ay="documentTargetsIndex",bD=["path","targetId"],sd="targetGlobalKey",Ra="targetGlobal",_c="collectionParents",vD=["collectionId","parent"],rl="clientMetadata",TD="clientId",Od="bundles",ED="bundleId",Nd="namedQueries",SD="name",xy="indexConfiguration",AD="indexId",jp="collectionGroupIndex",xD="collectionGroup",nc="indexState",wD=["indexId","uid"],P1="sequenceNumberIndex",RD=["uid","sequenceNumber"],ic="indexEntries",ID=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],k1="documentKeyIndex",DD=["indexId","uid","orderedDocumentKey"],Pd="documentOverlays",CD=["userId","collectionPath","documentId"],Fp="collectionPathOverlayIndex",MD=["userId","collectionPath","largestBatchId"],z1="collectionGroupOverlayIndex",VD=["userId","collectionGroup","largestBatchId"],wy="globals",OD="name",L1=[pc,bi,nl,ya,il,Vc,Ra,sl,rl,yc,_c,Od,Nd],ND=[...L1,Pd],B1=[pc,bi,nl,id,il,Vc,Ra,sl,rl,yc,_c,Od,Nd,Pd],U1=B1,Ry=[...U1,xy,nc,ic],PD=Ry,j1=[...Ry,wy],kD=j1;class Hp extends D1{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function Ye(i,t){const e=pt(i);return Tr.O(e.le,t)}function IT(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Fa(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function F1(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}class ce{constructor(t,e){this.comparator=t,this.root=e||on.EMPTY}insert(t,e){return new ce(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,on.BLACK,null,null))}remove(t){return new ce(this.comparator,this.root.remove(t,this.comparator).copy(null,null,on.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new yf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new yf(this.root,t,this.comparator,!1)}getReverseIterator(){return new yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new yf(this.root,t,this.comparator,!0)}}class yf{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?n(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class on{constructor(t,e,n,r,o){this.key=t,this.value=e,this.color=n??on.RED,this.left=r??on.EMPTY,this.right=o??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,o){return new on(t??this.key,e??this.value,n??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const o=n(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,n),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return on.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw dt(27949);return t+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw dt(57766)}get value(){throw dt(16141)}get color(){throw dt(16727)}get left(){throw dt(29726)}get right(){throw dt(36894)}copy(t,e,n,r,o){return this}insert(t,e,n){return new on(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ie{constructor(t){this.comparator=t,this.data=new ce(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new DT(this.data.getIterator())}getIteratorFrom(t){return new DT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((n=>{e=e.add(n)})),e}isEqual(t){if(!(t instanceof ie)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=n.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new ie(this.comparator);return e.data=t,e}}class DT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zo(i){return i.hasNext()?i.getNext():void 0}class ri{constructor(t){this.fields=t,t.sort(be.comparator)}static empty(){return new ri([])}unionWith(t){let e=new ie(be.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new ri(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return tl(this.fields,t.fields,((e,n)=>e.isEqual(n)))}}class H1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class De{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new H1("Invalid base64 string: "+o):o}})(t);return new De(e)}static fromUint8Array(t){const e=(function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o})(t);return new De(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return wt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}De.EMPTY_BYTE_STRING=new De("");const zD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(i){if(_t(!!i,39018),typeof i=="string"){let t=0;const e=zD.exec(i);if(_t(!!e,46558,{timestamp:i}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:_e(i.seconds),nanos:_e(i.nanos)}}function _e(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Rs(i){return typeof i=="string"?De.fromBase64String(i):De.fromUint8Array(i)}const q1="server_timestamp",G1="__type__",K1="__previous_value__",Y1="__local_write_time__";function Iy(i){return(i?.mapValue?.fields||{})[G1]?.stringValue===q1}function kd(i){const t=i.mapValue.fields[K1];return Iy(t)?kd(t):t}function bc(i){const t=ws(i.mapValue.fields[Y1].timestampValue);return new $t(t.seconds,t.nanos)}class LD{constructor(t,e,n,r,o,u,h,f,g,y){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=g,this.isUsingEmulator=y}}const rd="(default)";class Na{constructor(t,e){this.projectId=t,this.database=e||rd}static empty(){return new Na("","")}get isDefaultDatabase(){return this.database===rd}isEqual(t){return t instanceof Na&&t.projectId===this.projectId&&t.database===this.database}}const Dy="__type__",Q1="__max__",fr={mapValue:{fields:{__type__:{stringValue:Q1}}}},Cy="__vector__",al="value",Bf={nullValue:"NULL_VALUE"};function xr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Iy(i)?4:X1(i)?9007199254740991:zd(i)?10:11:dt(28295,{value:i})}function Ji(i,t){if(i===t)return!0;const e=xr(i);if(e!==xr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return bc(i).isEqual(bc(t));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=ws(r.timestampValue),h=ws(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(i,t);case 5:return i.stringValue===t.stringValue;case 6:return(function(r,o){return Rs(r.bytesValue).isEqual(Rs(o.bytesValue))})(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return(function(r,o){return _e(r.geoPointValue.latitude)===_e(o.geoPointValue.latitude)&&_e(r.geoPointValue.longitude)===_e(o.geoPointValue.longitude)})(i,t);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return _e(r.integerValue)===_e(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=_e(r.doubleValue),h=_e(o.doubleValue);return u===h?mc(u)===mc(h):isNaN(u)&&isNaN(h)}return!1})(i,t);case 9:return tl(i.arrayValue.values||[],t.arrayValue.values||[],Ji);case 10:case 11:return(function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(IT(u)!==IT(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Ji(u[f],h[f])))return!1;return!0})(i,t);default:return dt(52216,{left:i})}}function vc(i,t){return(i.values||[]).find((e=>Ji(e,t)))!==void 0}function wr(i,t){if(i===t)return 0;const e=xr(i),n=xr(t);if(e!==n)return wt(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return wt(i.booleanValue,t.booleanValue);case 2:return(function(o,u){const h=_e(o.integerValue||o.doubleValue),f=_e(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(i,t);case 3:return CT(i.timestampValue,t.timestampValue);case 4:return CT(bc(i),bc(t));case 5:return Lp(i.stringValue,t.stringValue);case 6:return(function(o,u){const h=Rs(o),f=Rs(u);return h.compareTo(f)})(i.bytesValue,t.bytesValue);case 7:return(function(o,u){const h=o.split("/"),f=u.split("/");for(let g=0;g<h.length&&g<f.length;g++){const y=wt(h[g],f[g]);if(y!==0)return y}return wt(h.length,f.length)})(i.referenceValue,t.referenceValue);case 8:return(function(o,u){const h=wt(_e(o.latitude),_e(u.latitude));return h!==0?h:wt(_e(o.longitude),_e(u.longitude))})(i.geoPointValue,t.geoPointValue);case 9:return MT(i.arrayValue,t.arrayValue);case 10:return(function(o,u){const h=o.fields||{},f=u.fields||{},g=h[al]?.arrayValue,y=f[al]?.arrayValue,_=wt(g?.values?.length||0,y?.values?.length||0);return _!==0?_:MT(g,y)})(i.mapValue,t.mapValue);case 11:return(function(o,u){if(o===fr.mapValue&&u===fr.mapValue)return 0;if(o===fr.mapValue)return 1;if(u===fr.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),g=u.fields||{},y=Object.keys(g);f.sort(),y.sort();for(let _=0;_<f.length&&_<y.length;++_){const T=Lp(f[_],y[_]);if(T!==0)return T;const S=wr(h[f[_]],g[y[_]]);if(S!==0)return S}return wt(f.length,y.length)})(i.mapValue,t.mapValue);default:throw dt(23264,{he:e})}}function CT(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return wt(i,t);const e=ws(i),n=ws(t),r=wt(e.seconds,n.seconds);return r!==0?r:wt(e.nanos,n.nanos)}function MT(i,t){const e=i.values||[],n=t.values||[];for(let r=0;r<e.length&&r<n.length;++r){const o=wr(e[r],n[r]);if(o)return o}return wt(e.length,n.length)}function ol(i){return qp(i)}function qp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(e){const n=ws(e);return`time(${n.seconds},${n.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(e){return Rs(e).toBase64()})(i.bytesValue):"referenceValue"in i?(function(e){return ht.fromName(e).toString()})(i.referenceValue):"geoPointValue"in i?(function(e){return`geo(${e.latitude},${e.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(e){let n="[",r=!0;for(const o of e.values||[])r?r=!1:n+=",",n+=qp(o);return n+"]"})(i.arrayValue):"mapValue"in i?(function(e){const n=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const u of n)o?o=!1:r+=",",r+=`${u}:${qp(e.fields[u])}`;return r+"}"})(i.mapValue):dt(61005,{value:i})}function Uf(i){switch(xr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=kd(i);return t?16+Uf(t):16;case 5:return 2*i.stringValue.length;case 6:return Rs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((r,o)=>r+Uf(o)),0)})(i.arrayValue);case 10:case 11:return(function(n){let r=0;return Fa(n.fields,((o,u)=>{r+=o.length+Uf(u)})),r})(i.mapValue);default:throw dt(13486,{value:i})}}function Tc(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function Gp(i){return!!i&&"integerValue"in i}function Ec(i){return!!i&&"arrayValue"in i}function VT(i){return!!i&&"nullValue"in i}function OT(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function jf(i){return!!i&&"mapValue"in i}function zd(i){return(i?.mapValue?.fields||{})[Dy]?.stringValue===Cy}function sc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return Fa(i.mapValue.fields,((e,n)=>t.mapValue.fields[e]=sc(n))),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=sc(i.arrayValue.values[e]);return t}return{...i}}function X1(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Q1}const W1={mapValue:{fields:{[Dy]:{stringValue:Cy},[al]:{arrayValue:{}}}}};function BD(i){return"nullValue"in i?Bf:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Tc(Na.empty(),ht.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?zd(i)?W1:{mapValue:{}}:dt(35942,{value:i})}function UD(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Tc(Na.empty(),ht.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?W1:"mapValue"in i?zd(i)?{mapValue:{}}:fr:dt(61959,{value:i})}function NT(i,t){const e=wr(i.value,t.value);return e!==0?e:i.inclusive&&!t.inclusive?-1:!i.inclusive&&t.inclusive?1:0}function PT(i,t){const e=wr(i.value,t.value);return e!==0?e:i.inclusive&&!t.inclusive?1:!i.inclusive&&t.inclusive?-1:0}class An{constructor(t){this.value=t}static empty(){return new An({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!jf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=sc(e)}setAll(t){let e=be.emptyPath(),n={},r=[];t.forEach(((u,h)=>{if(!e.isImmediateParentOf(h)){const f=this.getFieldsMap(e);this.applyChanges(f,n,r),n={},r=[],e=h.popLast()}u?n[h.lastSegment()]=sc(u):r.push(h.lastSegment())}));const o=this.getFieldsMap(e);this.applyChanges(o,n,r)}delete(t){const e=this.field(t.popLast());jf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ji(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];jf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Fa(e,((r,o)=>t[r]=o));for(const r of n)delete t[r]}clone(){return new An(sc(this.value))}}function $1(i){const t=[];return Fa(i.fields,((e,n)=>{const r=new be([e]);if(jf(n)){const o=$1(n.mapValue).fields;if(o.length===0)t.push(r);else for(const u of o)t.push(r.child(u))}else t.push(r)})),new ri(t)}class Ee{constructor(t,e,n,r,o,u,h){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(t){return new Ee(t,0,vt.min(),vt.min(),vt.min(),An.empty(),0)}static newFoundDocument(t,e,n,r){return new Ee(t,1,e,vt.min(),n,r,0)}static newNoDocument(t,e){return new Ee(t,2,e,vt.min(),vt.min(),An.empty(),0)}static newUnknownDocument(t,e){return new Ee(t,3,e,vt.min(),vt.min(),An.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ee&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ee(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ll{constructor(t,e){this.position=t,this.inclusive=e}}function kT(i,t,e){let n=0;for(let r=0;r<i.position.length;r++){const o=t[r],u=i.position[r];if(o.field.isKeyField()?n=ht.comparator(ht.fromName(u.referenceValue),e.key):n=wr(u,e.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function zT(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!Ji(i.position[e],t.position[e]))return!1;return!0}class Sc{constructor(t,e="asc"){this.field=t,this.dir=e}}function jD(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}class Z1{}class Lt extends Z1{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new FD(t,e,n):e==="array-contains"?new GD(t,n):e==="in"?new sA(t,n):e==="not-in"?new KD(t,n):e==="array-contains-any"?new YD(t,n):new Lt(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new HD(t,n):new qD(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(wr(e,this.value)):e!==null&&xr(this.value)===xr(e)&&this.matchesComparison(wr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ne extends Z1{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ne(t,e)}matches(t){return ul(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ul(i){return i.op==="and"}function Kp(i){return i.op==="or"}function My(i){return J1(i)&&ul(i)}function J1(i){for(const t of i.filters)if(t instanceof ne)return!1;return!0}function Yp(i){if(i instanceof Lt)return i.field.canonicalString()+i.op.toString()+ol(i.value);if(My(i))return i.filters.map((t=>Yp(t))).join(",");{const t=i.filters.map((e=>Yp(e))).join(",");return`${i.op}(${t})`}}function tA(i,t){return i instanceof Lt?(function(n,r){return r instanceof Lt&&n.op===r.op&&n.field.isEqual(r.field)&&Ji(n.value,r.value)})(i,t):i instanceof ne?(function(n,r){return r instanceof ne&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce(((o,u,h)=>o&&tA(u,r.filters[h])),!0):!1})(i,t):void dt(19439)}function eA(i,t){const e=i.filters.concat(t);return ne.create(e,i.op)}function nA(i){return i instanceof Lt?(function(e){return`${e.field.canonicalString()} ${e.op} ${ol(e.value)}`})(i):i instanceof ne?(function(e){return e.op.toString()+" {"+e.getFilters().map(nA).join(" ,")+"}"})(i):"Filter"}class FD extends Lt{constructor(t,e,n){super(t,e,n),this.key=ht.fromName(n.referenceValue)}matches(t){const e=ht.comparator(t.key,this.key);return this.matchesComparison(e)}}class HD extends Lt{constructor(t,e){super(t,"in",e),this.keys=iA("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class qD extends Lt{constructor(t,e){super(t,"not-in",e),this.keys=iA("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function iA(i,t){return(t.arrayValue?.values||[]).map((e=>ht.fromName(e.referenceValue)))}class GD extends Lt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Ec(e)&&vc(e.arrayValue,this.value)}}class sA extends Lt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&vc(this.value.arrayValue,e)}}class KD extends Lt{constructor(t,e){super(t,"not-in",e)}matches(t){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!vc(this.value.arrayValue,e)}}class YD extends Lt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Ec(e)||!e.arrayValue.values)&&e.arrayValue.values.some((n=>vc(this.value.arrayValue,n)))}}class QD{constructor(t,e=null,n=[],r=[],o=null,u=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=u,this.endAt=h,this.Te=null}}function Qp(i,t=null,e=[],n=[],r=null,o=null,u=null){return new QD(i,t,e,n,r,o,u)}function Pa(i){const t=pt(i);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((n=>Yp(n))).join(","),e+="|ob:",e+=t.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),Vd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((n=>ol(n))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((n=>ol(n))).join(",")),t.Te=e}return t.Te}function Oc(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!jD(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!tA(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!zT(i.startAt,t.startAt)&&zT(i.endAt,t.endAt)}function ad(i){return ht.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function od(i,t){return i.filters.filter((e=>e instanceof Lt&&e.field.isEqual(t)))}function LT(i,t,e){let n=Bf,r=!0;for(const o of od(i,t)){let u=Bf,h=!0;switch(o.op){case"<":case"<=":u=BD(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=Bf}NT({value:n,inclusive:r},{value:u,inclusive:h})<0&&(n=u,r=h)}if(e!==null){for(let o=0;o<i.orderBy.length;++o)if(i.orderBy[o].field.isEqual(t)){const u=e.position[o];NT({value:n,inclusive:r},{value:u,inclusive:e.inclusive})<0&&(n=u,r=e.inclusive);break}}return{value:n,inclusive:r}}function BT(i,t,e){let n=fr,r=!0;for(const o of od(i,t)){let u=fr,h=!0;switch(o.op){case">=":case">":u=UD(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=fr}PT({value:n,inclusive:r},{value:u,inclusive:h})>0&&(n=u,r=h)}if(e!==null){for(let o=0;o<i.orderBy.length;++o)if(i.orderBy[o].field.isEqual(t)){const u=e.position[o];PT({value:n,inclusive:r},{value:u,inclusive:e.inclusive})>0&&(n=u,r=e.inclusive);break}}return{value:n,inclusive:r}}class Tl{constructor(t,e=null,n=[],r=[],o=null,u="F",h=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rA(i,t,e,n,r,o,u,h){return new Tl(i,t,e,n,r,o,u,h)}function Ld(i){return new Tl(i)}function UT(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function aA(i){return i.collectionGroup!==null}function rc(i){const t=pt(i);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new ie(be.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new Sc(o,n))})),e.has(be.keyField().canonicalString())||t.Ie.push(new Sc(be.keyField(),n))}return t.Ie}function Fn(i){const t=pt(i);return t.Ee||(t.Ee=XD(t,rc(i))),t.Ee}function XD(i,t){if(i.limitType==="F")return Qp(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new Sc(r.field,o)}));const e=i.endAt?new ll(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new ll(i.startAt.position,i.startAt.inclusive):null;return Qp(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function Xp(i,t){const e=i.filters.concat([t]);return new Tl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),e,i.limit,i.limitType,i.startAt,i.endAt)}function Wp(i,t,e){return new Tl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function Bd(i,t){return Oc(Fn(i),Fn(t))&&i.limitType===t.limitType}function oA(i){return`${Pa(Fn(i))}|lt:${i.limitType}`}function Go(i){return`Query(target=${(function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map((r=>nA(r))).join(", ")}]`),Vd(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ol(r))).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ol(r))).join(",")),`Target(${n})`})(Fn(i))}; limitType=${i.limitType})`}function Nc(i,t){return t.isFoundDocument()&&(function(n,r){const o=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):ht.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(i,t)&&(function(n,r){for(const o of rc(n))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(i,t)&&(function(n,r){for(const o of n.filters)if(!o.matches(r))return!1;return!0})(i,t)&&(function(n,r){return!(n.startAt&&!(function(u,h,f){const g=kT(u,h,f);return u.inclusive?g<=0:g<0})(n.startAt,rc(n),r)||n.endAt&&!(function(u,h,f){const g=kT(u,h,f);return u.inclusive?g>=0:g>0})(n.endAt,rc(n),r))})(i,t)}function lA(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function uA(i){return(t,e)=>{let n=!1;for(const r of rc(i)){const o=WD(r,t,e);if(o!==0)return o;n=n||r.field.isKeyField()}return 0}}function WD(i,t,e){const n=i.field.isKeyField()?ht.comparator(t.key,e.key):(function(o,u,h){const f=u.data.field(o),g=h.data.field(o);return f!==null&&g!==null?wr(f,g):dt(42886)})(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return dt(19790,{direction:i.dir})}}class Is{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[r,o]of n)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Fa(this.inner,((e,n)=>{for(const[r,o]of n)t(r,o)}))}isEmpty(){return F1(this.inner)}size(){return this.innerSize}}const $D=new ce(ht.comparator);function jn(){return $D}const cA=new ce(ht.comparator);function Ku(...i){let t=cA;for(const e of i)t=t.insert(e.key,e);return t}function hA(i){let t=cA;return i.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Wi(){return ac()}function fA(){return ac()}function ac(){return new Is((i=>i.toString()),((i,t)=>i.isEqual(t)))}const ZD=new ce(ht.comparator),JD=new ie(ht.comparator);function Mt(...i){let t=JD;for(const e of i)t=t.add(e);return t}const tC=new ie(wt);function Vy(){return tC}function Oy(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mc(t)?"-0":t}}function dA(i){return{integerValue:""+i}}function eC(i,t){return M1(t)?dA(t):Oy(i,t)}class Ud{constructor(){this._=void 0}}function nC(i,t,e){return i instanceof Ac?(function(r,o){const u={fields:{[G1]:{stringValue:q1},[Y1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Iy(o)&&(o=kd(o)),o&&(u.fields[K1]=o),{mapValue:u}})(e,t):i instanceof cl?mA(i,t):i instanceof hl?pA(i,t):(function(r,o){const u=gA(r,o),h=jT(u)+jT(r.Ae);return Gp(u)&&Gp(r.Ae)?dA(h):Oy(r.serializer,h)})(i,t)}function iC(i,t,e){return i instanceof cl?mA(i,t):i instanceof hl?pA(i,t):e}function gA(i,t){return i instanceof xc?(function(n){return Gp(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(t)?t:{integerValue:0}:null}class Ac extends Ud{}class cl extends Ud{constructor(t){super(),this.elements=t}}function mA(i,t){const e=yA(t);for(const n of i.elements)e.some((r=>Ji(r,n)))||e.push(n);return{arrayValue:{values:e}}}class hl extends Ud{constructor(t){super(),this.elements=t}}function pA(i,t){let e=yA(t);for(const n of i.elements)e=e.filter((r=>!Ji(r,n)));return{arrayValue:{values:e}}}class xc extends Ud{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function jT(i){return _e(i.integerValue||i.doubleValue)}function yA(i){return Ec(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class sC{constructor(t,e){this.field=t,this.transform=e}}function rC(i,t){return i.field.isEqual(t.field)&&(function(n,r){return n instanceof cl&&r instanceof cl||n instanceof hl&&r instanceof hl?tl(n.elements,r.elements,Ji):n instanceof xc&&r instanceof xc?Ji(n.Ae,r.Ae):n instanceof Ac&&r instanceof Ac})(i.transform,t.transform)}class aC{constructor(t,e){this.version=t,this.transformResults=e}}class Rn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Rn}static exists(t){return new Rn(void 0,t)}static updateTime(t){return new Rn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ff(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class jd{}function _A(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new Fd(i.key,Rn.none()):new El(i.key,i.data,Rn.none());{const e=i.data,n=An.empty();let r=new ie(be.comparator);for(let o of t.fields)if(!r.has(o)){let u=e.field(o);u===null&&o.length>1&&(o=o.popLast(),u=e.field(o)),u===null?n.delete(o):n.set(o,u),r=r.add(o)}return new Vr(i.key,n,new ri(r.toArray()),Rn.none())}}function oC(i,t,e){i instanceof El?(function(r,o,u){const h=r.value.clone(),f=HT(r.fieldTransforms,o,u.transformResults);h.setAll(f),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(i,t,e):i instanceof Vr?(function(r,o,u){if(!Ff(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=HT(r.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(bA(r)),f.setAll(h),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(i,t,e):(function(r,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,t,e)}function oc(i,t,e,n){return i instanceof El?(function(o,u,h,f){if(!Ff(o.precondition,u))return h;const g=o.value.clone(),y=qT(o.fieldTransforms,f,u);return g.setAll(y),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(i,t,e,n):i instanceof Vr?(function(o,u,h,f){if(!Ff(o.precondition,u))return h;const g=qT(o.fieldTransforms,f,u),y=u.data;return y.setAll(bA(o)),y.setAll(g),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(i,t,e,n):(function(o,u,h){return Ff(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(i,t,e)}function lC(i,t){let e=null;for(const n of i.fieldTransforms){const r=t.data.field(n.field),o=gA(n.transform,r||null);o!=null&&(e===null&&(e=An.empty()),e.set(n.field,o))}return e||null}function FT(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!(function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&tl(n,r,((o,u)=>rC(o,u)))})(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class El extends jd{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vr extends jd{constructor(t,e,n,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function bA(i){const t=new Map;return i.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const n=i.data.field(e);t.set(e,n)}})),t}function HT(i,t,e){const n=new Map;_t(i.length===e.length,32656,{Re:e.length,Ve:i.length});for(let r=0;r<e.length;r++){const o=i[r],u=o.transform,h=t.data.field(o.field);n.set(o.field,iC(u,h,e[r]))}return n}function qT(i,t,e){const n=new Map;for(const r of i){const o=r.transform,u=e.data.field(r.field);n.set(r.field,nC(o,u,t))}return n}class Fd extends jd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vA extends jd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ny{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&oC(o,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=oc(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=oc(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=fA();return this.mutations.forEach((r=>{const o=t.get(r.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=e.has(r.key)?null:h;const f=_A(u,h);f!==null&&n.set(r.key,f),u.isValidDocument()||u.convertToNoDocument(vt.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Mt())}isEqual(t){return this.batchId===t.batchId&&tl(this.mutations,t.mutations,((e,n)=>FT(e,n)))&&tl(this.baseMutations,t.baseMutations,((e,n)=>FT(e,n)))}}class Py{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){_t(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let r=(function(){return ZD})();const o=t.mutations;for(let u=0;u<o.length;u++)r=r.insert(o[u].key,n[u].version);return new Py(t,e,n,r)}}class ky{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class uC{constructor(t,e){this.count=t,this.unchangedNames=e}}var Be,jt;function cC(i){switch(i){case J.OK:return dt(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return dt(15467,{code:i})}}function TA(i){if(i===void 0)return Re("GRPC error has no .code"),J.UNKNOWN;switch(i){case Be.OK:return J.OK;case Be.CANCELLED:return J.CANCELLED;case Be.UNKNOWN:return J.UNKNOWN;case Be.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Be.INTERNAL:return J.INTERNAL;case Be.UNAVAILABLE:return J.UNAVAILABLE;case Be.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Be.NOT_FOUND:return J.NOT_FOUND;case Be.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Be.ABORTED:return J.ABORTED;case Be.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Be.DATA_LOSS:return J.DATA_LOSS;default:return dt(39323,{code:i})}}(jt=Be||(Be={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";function hC(){return new TextEncoder}const fC=new br([4294967295,4294967295],0);function GT(i){const t=hC().encode(i),e=new m1;return e.update(t),new Uint8Array(e.digest())}function KT(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new br([e,n],0),new br([r,o],0)]}class zy{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Yu(`Invalid padding: ${e}`);if(n<0)throw new Yu(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Yu(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new Yu(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=br.fromNumber(this.ge)}ye(t,e,n){let r=t.add(e.multiply(br.fromNumber(n)));return r.compare(fC)===1&&(r=new br([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=GT(t),[n,r]=KT(e);for(let o=0;o<this.hashCount;o++){const u=this.ye(n,r,o);if(!this.we(u))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),u=new zy(o,r,e);return n.forEach((h=>u.insert(h))),u}insert(t){if(this.ge===0)return;const e=GT(t),[n,r]=KT(e);for(let o=0;o<this.hashCount;o++){const u=this.ye(n,r,o);this.Se(u)}}Se(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Pc{constructor(t,e,n,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,kc.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Pc(vt.min(),r,new ce(wt),jn(),Mt())}}class kc{constructor(t,e,n,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new kc(n,e,Mt(),Mt(),Mt())}}class Hf{constructor(t,e,n,r){this.be=t,this.removedTargetIds=e,this.key=n,this.De=r}}class EA{constructor(t,e){this.targetId=t,this.Ce=e}}class SA{constructor(t,e,n=De.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class YT{constructor(){this.ve=0,this.Fe=QT(),this.Me=De.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Mt(),e=Mt(),n=Mt();return this.Fe.forEach(((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:dt(38017,{changeType:o})}})),new kc(this.Me,this.xe,t,e,n)}qe(){this.Oe=!1,this.Fe=QT()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class dC{constructor(t){this.Ge=t,this.ze=new Map,this.je=jn(),this.Je=_f(),this.He=_f(),this.Ye=new ce(wt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const n=this.nt(e);switch(t.state){case 0:this.rt(e)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),n.Le(t.resumeToken));break;default:dt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((n,r)=>{this.rt(r)&&e(r)}))}st(t){const e=t.targetId,n=t.Ce.count,r=this.ot(e);if(r){const o=r.target;if(ad(o))if(n===0){const u=new ht(o.path);this.et(e,u,Ee.newNoDocument(u,vt.min()))}else _t(n===1,20013,{expectedCount:n});else{const u=this._t(e);if(u!==n){const h=this.ut(t),f=h?this.ct(h,t,u):1;if(f!==0){this.it(e);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:o=0}=e;let u,h;try{u=Rs(n).toUint8Array()}catch(f){if(f instanceof H1)return Oa("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new zy(u,r,o)}catch(f){return Oa(f instanceof Yu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(t,e,n){return e.Ce.count===n-this.Pt(t,e.targetId)?0:2}Pt(t,e){const n=this.Ge.getRemoteKeysForTarget(e);let r=0;return n.forEach((o=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;t.mightContain(h)||(this.et(e,o,null),r++)})),r}Tt(t){const e=new Map;this.ze.forEach(((o,u)=>{const h=this.ot(u);if(h){if(o.current&&ad(h.target)){const f=new ht(h.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,Ee.newNoDocument(f,t))}o.Be&&(e.set(u,o.ke()),o.qe())}}));let n=Mt();this.He.forEach(((o,u)=>{let h=!0;u.forEachWhile((f=>{const g=this.ot(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(n=n.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(t)));const r=new Pc(t,e,this.Ye,this.je,n);return this.je=jn(),this.Je=_f(),this.He=_f(),this.Ye=new ce(wt),r}Xe(t,e){if(!this.rt(t))return;const n=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,n),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,n){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,e)?r.Qe(e,1):r.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),n&&(this.je=this.je.insert(e,n))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new YT,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new ie(wt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new ie(wt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||rt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new YT),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function _f(){return new ce(ht.comparator)}function QT(){return new ce(ht.comparator)}const gC={asc:"ASCENDING",desc:"DESCENDING"},mC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pC={and:"AND",or:"OR"};class yC{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function $p(i,t){return i.useProto3Json||Vd(t)?t:{value:t}}function fl(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function AA(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function _C(i,t){return fl(i,t.toTimestamp())}function mn(i){return _t(!!i,49232),vt.fromTimestamp((function(e){const n=ws(e);return new $t(n.seconds,n.nanos)})(i))}function Ly(i,t){return Zp(i,t).canonicalString()}function Zp(i,t){const e=(function(r){return new Wt(["projects",r.projectId,"databases",r.database])})(i).child("documents");return t===void 0?e:e.child(t)}function xA(i){const t=Wt.fromString(i);return _t(NA(t),10190,{key:t.toString()}),t}function ld(i,t){return Ly(i.databaseId,t.path)}function Ia(i,t){const e=xA(t);if(e.get(1)!==i.databaseId.projectId)throw new ut(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new ut(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new ht(IA(e))}function wA(i,t){return Ly(i.databaseId,t)}function RA(i){const t=xA(i);return t.length===4?Wt.emptyPath():IA(t)}function Jp(i){return new Wt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function IA(i){return _t(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function XT(i,t,e){return{name:ld(i,t),fields:e.value.mapValue.fields}}function bC(i,t,e){const n=Ia(i,t.name),r=mn(t.updateTime),o=t.createTime?mn(t.createTime):vt.min(),u=new An({mapValue:{fields:t.fields}}),h=Ee.newFoundDocument(n,r,o,u);return e&&h.setHasCommittedMutations(),e?h.setHasCommittedMutations():h}function vC(i,t){let e;if("targetChange"in t){t.targetChange;const n=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:dt(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=(function(g,y){return g.useProto3Json?(_t(y===void 0||typeof y=="string",58123),De.fromBase64String(y||"")):(_t(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),De.fromUint8Array(y||new Uint8Array))})(i,t.targetChange.resumeToken),u=t.targetChange.cause,h=u&&(function(g){const y=g.code===void 0?J.UNKNOWN:TA(g.code);return new ut(y,g.message||"")})(u);e=new SA(n,r,o,h||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const r=Ia(i,n.document.name),o=mn(n.document.updateTime),u=n.document.createTime?mn(n.document.createTime):vt.min(),h=new An({mapValue:{fields:n.document.fields}}),f=Ee.newFoundDocument(r,o,u,h),g=n.targetIds||[],y=n.removedTargetIds||[];e=new Hf(g,y,f.key,f)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const r=Ia(i,n.document),o=n.readTime?mn(n.readTime):vt.min(),u=Ee.newNoDocument(r,o),h=n.removedTargetIds||[];e=new Hf([],h,u.key,u)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const r=Ia(i,n.document),o=n.removedTargetIds||[];e=new Hf([],o,r,null)}else{if(!("filter"in t))return dt(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:r=0,unchangedNames:o}=n,u=new uC(r,o),h=n.targetId;e=new EA(h,u)}}return e}function ud(i,t){let e;if(t instanceof El)e={update:XT(i,t.key,t.value)};else if(t instanceof Fd)e={delete:ld(i,t.key)};else if(t instanceof Vr)e={update:XT(i,t.key,t.data),updateMask:wC(t.fieldMask)};else{if(!(t instanceof vA))return dt(16599,{Vt:t.type});e={verify:ld(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((n=>(function(o,u){const h=u.transform;if(h instanceof Ac)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof cl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof hl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof xc)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw dt(20930,{transform:u.transform})})(0,n)))),t.precondition.isNone||(e.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:_C(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:dt(27497)})(i,t.precondition)),e}function ty(i,t){const e=t.currentDocument?(function(o){return o.updateTime!==void 0?Rn.updateTime(mn(o.updateTime)):o.exists!==void 0?Rn.exists(o.exists):Rn.none()})(t.currentDocument):Rn.none(),n=t.updateTransforms?t.updateTransforms.map((r=>(function(u,h){let f=null;if("setToServerValue"in h)_t(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),f=new Ac;else if("appendMissingElements"in h){const y=h.appendMissingElements.values||[];f=new cl(y)}else if("removeAllFromArray"in h){const y=h.removeAllFromArray.values||[];f=new hl(y)}else"increment"in h?f=new xc(u,h.increment):dt(16584,{proto:h});const g=be.fromServerFormat(h.fieldPath);return new sC(g,f)})(i,r))):[];if(t.update){t.update.name;const r=Ia(i,t.update.name),o=new An({mapValue:{fields:t.update.fields}});if(t.updateMask){const u=(function(f){const g=f.fieldPaths||[];return new ri(g.map((y=>be.fromServerFormat(y))))})(t.updateMask);return new Vr(r,o,u,e,n)}return new El(r,o,e,n)}if(t.delete){const r=Ia(i,t.delete);return new Fd(r,e)}if(t.verify){const r=Ia(i,t.verify);return new vA(r,e)}return dt(1463,{proto:t})}function TC(i,t){return i&&i.length>0?(_t(t!==void 0,14353),i.map((e=>(function(r,o){let u=r.updateTime?mn(r.updateTime):mn(o);return u.isEqual(vt.min())&&(u=mn(o)),new aC(u,r.transformResults||[])})(e,t)))):[]}function DA(i,t){return{documents:[wA(i,t.path)]}}function CA(i,t){const e={structuredQuery:{}},n=t.path;let r;t.collectionGroup!==null?(r=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=wA(i,r);const o=(function(g){if(g.length!==0)return OA(ne.create(g,"and"))})(t.filters);o&&(e.structuredQuery.where=o);const u=(function(g){if(g.length!==0)return g.map((y=>(function(T){return{field:Ko(T.field),direction:SC(T.dir)}})(y)))})(t.orderBy);u&&(e.structuredQuery.orderBy=u);const h=$p(i,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:r}}function MA(i){let t=RA(i.parent);const e=i.structuredQuery,n=e.from?e.from.length:0;let r=null;if(n>0){_t(n===1,65062);const y=e.from[0];y.allDescendants?r=y.collectionId:t=t.child(y.collectionId)}let o=[];e.where&&(o=(function(_){const T=VA(_);return T instanceof ne&&My(T)?T.getFilters():[T]})(e.where));let u=[];e.orderBy&&(u=(function(_){return _.map((T=>(function(D){return new Sc(Yo(D.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(T)))})(e.orderBy));let h=null;e.limit&&(h=(function(_){let T;return T=typeof _=="object"?_.value:_,Vd(T)?null:T})(e.limit));let f=null;e.startAt&&(f=(function(_){const T=!!_.before,S=_.values||[];return new ll(S,T)})(e.startAt));let g=null;return e.endAt&&(g=(function(_){const T=!_.before,S=_.values||[];return new ll(S,T)})(e.endAt)),rA(t,r,u,o,h,"F",f,g)}function EC(i,t){const e=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt(28987,{purpose:r})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function VA(i){return i.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Yo(e.unaryFilter.field);return Lt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Yo(e.unaryFilter.field);return Lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Yo(e.unaryFilter.field);return Lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Yo(e.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return dt(61313);default:return dt(60726)}})(i):i.fieldFilter!==void 0?(function(e){return Lt.create(Yo(e.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return dt(58110);default:return dt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(e){return ne.create(e.compositeFilter.filters.map((n=>VA(n))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return dt(1026)}})(e.compositeFilter.op))})(i):dt(30097,{filter:i})}function SC(i){return gC[i]}function AC(i){return mC[i]}function xC(i){return pC[i]}function Ko(i){return{fieldPath:i.canonicalString()}}function Yo(i){return be.fromServerFormat(i.fieldPath)}function OA(i){return i instanceof Lt?(function(e){if(e.op==="=="){if(OT(e.value))return{unaryFilter:{field:Ko(e.field),op:"IS_NAN"}};if(VT(e.value))return{unaryFilter:{field:Ko(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(OT(e.value))return{unaryFilter:{field:Ko(e.field),op:"IS_NOT_NAN"}};if(VT(e.value))return{unaryFilter:{field:Ko(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ko(e.field),op:AC(e.op),value:e.value}}})(i):i instanceof ne?(function(e){const n=e.getFilters().map((r=>OA(r)));return n.length===1?n[0]:{compositeFilter:{op:xC(e.op),filters:n}}})(i):dt(54877,{filter:i})}function wC(i){const t=[];return i.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function NA(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}class Ss{constructor(t,e,n,r,o=vt.min(),u=vt.min(),h=De.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(t){return new Ss(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class PA{constructor(t){this.yt=t}}function RC(i,t){let e;if(t.document)e=bC(i.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const n=ht.fromSegments(t.noDocument.path),r=za(t.noDocument.readTime);e=Ee.newNoDocument(n,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return dt(56709);{const n=ht.fromSegments(t.unknownDocument.path),r=za(t.unknownDocument.version);e=Ee.newUnknownDocument(n,r)}}return t.readTime&&e.setReadTime((function(r){const o=new $t(r[0],r[1]);return vt.fromTimestamp(o)})(t.readTime)),e}function WT(i,t){const e=t.key,n={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:cd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=(function(o,u){return{name:ld(o,u.key),fields:u.data.value.mapValue.fields,updateTime:fl(o,u.version.toTimestamp()),createTime:fl(o,u.createTime.toTimestamp())}})(i.yt,t);else if(t.isNoDocument())n.noDocument={path:e.path.toArray(),readTime:ka(t.version)};else{if(!t.isUnknownDocument())return dt(57904,{document:t});n.unknownDocument={path:e.path.toArray(),version:ka(t.version)}}return n}function cd(i){const t=i.toTimestamp();return[t.seconds,t.nanoseconds]}function ka(i){const t=i.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function za(i){const t=new $t(i.seconds,i.nanoseconds);return vt.fromTimestamp(t)}function va(i,t){const e=(t.baseMutations||[]).map((o=>ty(i.yt,o)));for(let o=0;o<t.mutations.length-1;++o){const u=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){const h=t.mutations[o+1];u.updateTransforms=h.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const n=t.mutations.map((o=>ty(i.yt,o))),r=$t.fromMillis(t.localWriteTimeMs);return new Ny(t.batchId,r,e,n)}function Qu(i){const t=za(i.readTime),e=i.lastLimboFreeSnapshotVersion!==void 0?za(i.lastLimboFreeSnapshotVersion):vt.min();let n;return n=(function(o){return o.documents!==void 0})(i.query)?(function(o){const u=o.documents.length;return _t(u===1,1966,{count:u}),Fn(Ld(RA(o.documents[0])))})(i.query):(function(o){return Fn(MA(o))})(i.query),new Ss(n,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,t,e,De.fromBase64String(i.resumeToken))}function kA(i,t){const e=ka(t.snapshotVersion),n=ka(t.lastLimboFreeSnapshotVersion);let r;r=ad(t.target)?DA(i.yt,t.target):CA(i.yt,t.target).ft;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Pa(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:r}}function zA(i){const t=MA({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Wp(t,t.limit,"L"):t}function hp(i,t){return new ky(t.largestBatchId,ty(i.yt,t.overlayMutation))}function $T(i,t){const e=t.path.lastSegment();return[i,hn(t.path.popLast()),e]}function ZT(i,t,e,n){return{indexId:i,uid:t,sequenceNumber:e,readTime:ka(n.readTime),documentKey:hn(n.documentKey.path),largestBatchId:n.largestBatchId}}class IC{getBundleMetadata(t,e){return JT(t).get(e).next((n=>{if(n)return(function(o){return{id:o.bundleId,createTime:za(o.createTime),version:o.version}})(n)}))}saveBundleMetadata(t,e){return JT(t).put((function(r){return{bundleId:r.id,createTime:ka(mn(r.createTime)),version:r.version}})(e))}getNamedQuery(t,e){return tE(t).get(e).next((n=>{if(n)return(function(o){return{name:o.name,query:zA(o.bundledQuery),readTime:za(o.readTime)}})(n)}))}saveNamedQuery(t,e){return tE(t).put((function(r){return{name:r.name,readTime:ka(mn(r.readTime)),bundledQuery:r.bundledQuery}})(e))}}function JT(i){return Ye(i,Od)}function tE(i){return Ye(i,Nd)}class Hd{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const n=e.uid||"";return new Hd(t,n)}getOverlay(t,e){return Pu(t).get($T(this.userId,e)).next((n=>n?hp(this.serializer,n):null))}getOverlays(t,e){const n=Wi();return F.forEach(e,(r=>this.getOverlay(t,r).next((o=>{o!==null&&n.set(r,o)})))).next((()=>n))}saveOverlays(t,e,n){const r=[];return n.forEach(((o,u)=>{const h=new ky(e,u);r.push(this.St(t,h))})),F.waitFor(r)}removeOverlaysForBatchId(t,e,n){const r=new Set;e.forEach((u=>r.add(hn(u.getCollectionPath()))));const o=[];return r.forEach((u=>{const h=IDBKeyRange.bound([this.userId,u,n],[this.userId,u,n+1],!1,!0);o.push(Pu(t).Z(Fp,h))})),F.waitFor(o)}getOverlaysForCollection(t,e,n){const r=Wi(),o=hn(e),u=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Pu(t).J(Fp,u).next((h=>{for(const f of h){const g=hp(this.serializer,f);r.set(g.getKey(),g)}return r}))}getOverlaysForCollectionGroup(t,e,n,r){const o=Wi();let u;const h=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Pu(t).ee({index:z1,range:h},((f,g,y)=>{const _=hp(this.serializer,g);o.size()<r||_.largestBatchId===u?(o.set(_.getKey(),_),u=_.largestBatchId):y.done()})).next((()=>o))}St(t,e){return Pu(t).put((function(r,o,u){const[h,f,g]=$T(o,u.mutation.key);return{userId:o,collectionPath:f,documentId:g,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:ud(r.yt,u.mutation)}})(this.serializer,this.userId,e))}}function Pu(i){return Ye(i,Pd)}class DC{bt(t){return Ye(t,wy)}getSessionToken(t){return this.bt(t).get("sessionToken").next((e=>{const n=e?.value;return n?De.fromUint8Array(n):De.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}class Ta{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(_e(t.integerValue));else if("doubleValue"in t){const n=_e(t.doubleValue);isNaN(n)?this.Ft(e,13):(this.Ft(e,15),mc(n)?e.Mt(0):e.Mt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Ft(e,20),typeof n=="string"&&(n=ws(n)),e.xt(`${n.seconds||""}`),e.Mt(n.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Rs(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Ft(e,45),e.Mt(n.latitude||0),e.Mt(n.longitude||0)}else"mapValue"in t?X1(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):zd(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):dt(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const n=t.fields||{};this.Ft(e,55);for(const r of Object.keys(n))this.Ot(r,e),this.Ct(n[r],e)}kt(t,e){const n=t.fields||{};this.Ft(e,53);const r=al,o=n[r].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(_e(o)),this.Ot(r,e),this.Ct(n[r],e)}Qt(t,e){const n=t.values||[];this.Ft(e,50);for(const r of n)this.Ct(r,e)}Lt(t,e){this.Ft(e,37),ht.fromName(t).path.forEach((n=>{this.Ft(e,60),this.Ut(n,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Ta.Kt=new Ta;const Lo=255;function CC(i){if(i===0)return 8;let t=0;return i>>4||(t+=4,i<<=4),i>>6||(t+=2,i<<=2),i>>7||(t+=1),t}function eE(i){const t=64-(function(n){let r=0;for(let o=0;o<8;++o){const u=CC(255&n[o]);if(r+=u,u!==8)break}return r})(i);return Math.ceil(t/8)}class MC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Gt(n.value),n=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Jt(n.value),n=e.next();this.Ht()}Yt(t){for(const e of t){const n=e.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const r=e.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(t){for(const e of t){const n=e.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const r=e.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(t){const e=this.en(t),n=eE(e);this.tn(1+n),this.buffer[this.position++]=255&n;for(let r=e.length-n;r<e.length;++r)this.buffer[this.position++]=255&e[r]}nn(t){const e=this.en(t),n=eE(e);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let r=e.length-n;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}rn(){this.sn(Lo),this.sn(255)}_n(){this.an(Lo),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)})(t),n=!!(128&e[0]);e[0]^=n?255:128;for(let r=1;r<e.length;++r)e[r]^=n?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===Lo?(this.sn(Lo),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===Lo?(this.an(Lo),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class VC{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class OC{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class ku{constructor(){this.cn=new MC,this.ln=new VC(this.cn),this.hn=new OC(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Ea{constructor(t,e,n,r){this.Tn=t,this.In=e,this.En=n,this.dn=r}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,n=new Uint8Array(e);return n.set(this.dn,0),e!==t?n.set([0],this.dn.length):++n[n.length-1],new Ea(this.Tn,this.In,this.En,n)}Rn(t,e,n){return{indexId:this.Tn,uid:t,arrayValue:qf(this.En),directionalValue:qf(this.dn),orderedDocumentKey:qf(e),documentKey:n.path.toArray()}}Vn(t,e,n){const r=this.Rn(t,e,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function lr(i,t){let e=i.Tn-t.Tn;return e!==0?e:(e=nE(i.En,t.En),e!==0?e:(e=nE(i.dn,t.dn),e!==0?e:ht.comparator(i.In,t.In)))}function nE(i,t){for(let e=0;e<i.length&&e<t.length;++e){const n=i[e]-t[e];if(n!==0)return n}return i.length-t.length}function qf(i){return a1()?(function(e){let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return n})(i):i}function iE(i){return typeof i!="string"?i:(function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n})(i)}class sE{constructor(t){this.mn=new ie(((e,n)=>be.comparator(e.field,n.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const n=e;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(t){if(_t(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Bp(t);if(e!==void 0&&!this.wn(e))return!1;const n=pa(t);let r=new Set,o=0,u=0;for(;o<n.length&&this.wn(n[o]);++o)r=r.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!r.has(h.field.canonicalString())){const f=n[o];if(!this.Sn(h,f)||!this.bn(this.fn[u++],f))return!1}++o}for(;o<n.length;++o){const h=n[o];if(u>=this.fn.length||!this.bn(this.fn[u++],h))return!1}return!0}Dn(){if(this.pn)return null;let t=new ie(be.comparator);const e=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")e.push(new kf(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),e.push(new kf(n.field,0))}for(const n of this.fn)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),e.push(new kf(n.field,n.dir==="asc"?0:1)));return new ed(ed.UNKNOWN_ID,this.collectionId,e,gc.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const n=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===n}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}function LA(i){if(_t(i instanceof Lt||i instanceof ne,20012),i instanceof Lt){if(i instanceof sA){const e=i.value.arrayValue?.values?.map((n=>Lt.create(i.field,"==",n)))||[];return ne.create(e,"or")}return i}const t=i.filters.map((e=>LA(e)));return ne.create(t,i.op)}function NC(i){if(i.getFilters().length===0)return[];const t=iy(LA(i));return _t(BA(t),7391),ey(t)||ny(t)?[t]:t.getFilters()}function ey(i){return i instanceof Lt}function ny(i){return i instanceof ne&&My(i)}function BA(i){return ey(i)||ny(i)||(function(e){if(e instanceof ne&&Kp(e)){for(const n of e.getFilters())if(!ey(n)&&!ny(n))return!1;return!0}return!1})(i)}function iy(i){if(_t(i instanceof Lt||i instanceof ne,34018),i instanceof Lt)return i;if(i.filters.length===1)return iy(i.filters[0]);const t=i.filters.map((n=>iy(n)));let e=ne.create(t,i.op);return e=hd(e),BA(e)?e:(_t(e instanceof ne,64498),_t(ul(e),40251),_t(e.filters.length>1,57927),e.filters.reduce(((n,r)=>By(n,r))))}function By(i,t){let e;return _t(i instanceof Lt||i instanceof ne,38388),_t(t instanceof Lt||t instanceof ne,25473),e=i instanceof Lt?t instanceof Lt?(function(r,o){return ne.create([r,o],"and")})(i,t):rE(i,t):t instanceof Lt?rE(t,i):(function(r,o){if(_t(r.filters.length>0&&o.filters.length>0,48005),ul(r)&&ul(o))return eA(r,o.getFilters());const u=Kp(r)?r:o,h=Kp(r)?o:r,f=u.filters.map((g=>By(g,h)));return ne.create(f,"or")})(i,t),hd(e)}function rE(i,t){if(ul(t))return eA(t,i.getFilters());{const e=t.filters.map((n=>By(i,n)));return ne.create(e,"or")}}function hd(i){if(_t(i instanceof Lt||i instanceof ne,11850),i instanceof Lt)return i;const t=i.getFilters();if(t.length===1)return hd(t[0]);if(J1(i))return i;const e=t.map((r=>hd(r))),n=[];return e.forEach((r=>{r instanceof Lt?n.push(r):r instanceof ne&&(r.op===i.op?n.push(...r.filters):n.push(r))})),n.length===1?n[0]:ne.create(n,i.op)}class PC{constructor(){this.Cn=new Uy}addToCollectionParentIndex(t,e){return this.Cn.add(e),F.resolve()}getCollectionParents(t,e){return F.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return F.resolve()}deleteFieldIndex(t,e){return F.resolve()}deleteAllFieldIndexes(t){return F.resolve()}createTargetIndexes(t,e){return F.resolve()}getDocumentsMatchingTarget(t,e){return F.resolve(null)}getIndexType(t,e){return F.resolve(0)}getFieldIndexes(t,e){return F.resolve([])}getNextCollectionGroupToUpdate(t){return F.resolve(null)}getMinOffset(t,e){return F.resolve(Hn.min())}getMinOffsetFromCollectionGroup(t,e){return F.resolve(Hn.min())}updateCollectionGroup(t,e,n){return F.resolve()}updateIndexEntries(t,e){return F.resolve()}}class Uy{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ie(Wt.comparator),o=!r.has(n);return this.index[e]=r.add(n),o}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new ie(Wt.comparator)).toArray()}}const aE="IndexedDbIndexManager",bf=new Uint8Array(0);class kC{constructor(t,e){this.databaseId=e,this.vn=new Uy,this.Fn=new Is((n=>Pa(n)),((n,r)=>Oc(n,r))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const n=e.lastSegment(),r=e.popLast();t.addOnCommittedListener((()=>{this.vn.add(e)}));const o={collectionId:n,parent:hn(r)};return oE(t).put(o)}return F.resolve()}getCollectionParents(t,e){const n=[],r=IDBKeyRange.bound([e,""],[S1(e),""],!1,!0);return oE(t).J(r).next((o=>{for(const u of o){if(u.collectionId!==e)break;n.push(Xi(u.parent))}return n}))}addFieldIndex(t,e){const n=zu(t),r=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(e);delete r.indexId;const o=n.add(r);if(e.indexState){const u=Uo(t);return o.next((h=>{u.put(ZT(h,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return o.next()}deleteFieldIndex(t,e){const n=zu(t),r=Uo(t),o=Bo(t);return n.delete(e.indexId).next((()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=zu(t),n=Bo(t),r=Uo(t);return e.Z().next((()=>n.Z())).next((()=>r.Z()))}createTargetIndexes(t,e){return F.forEach(this.Mn(e),(n=>this.getIndexType(t,n).next((r=>{if(r===0||r===1){const o=new sE(n).Dn();if(o!=null)return this.addFieldIndex(t,o)}}))))}getDocumentsMatchingTarget(t,e){const n=Bo(t);let r=!0;const o=new Map;return F.forEach(this.Mn(e),(u=>this.xn(t,u).next((h=>{r&&(r=!!h),o.set(u,h)})))).next((()=>{if(r){let u=Mt();const h=[];return F.forEach(o,((f,g)=>{rt(aE,`Using index ${(function(K){return`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map((it=>`${it.fieldPath}:${it.kind}`)).join(",")}`})(f)} to execute ${Pa(e)}`);const y=(function(K,it){const Z=Bp(it);if(Z===void 0)return null;for(const st of od(K,Z.fieldPath))switch(st.op){case"array-contains-any":return st.value.arrayValue.values||[];case"array-contains":return[st.value]}return null})(g,f),_=(function(K,it){const Z=new Map;for(const st of pa(it))for(const R of od(K,st.fieldPath))switch(R.op){case"==":case"in":Z.set(st.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return Z.set(st.fieldPath.canonicalString(),R.value),Array.from(Z.values())}return null})(g,f),T=(function(K,it){const Z=[];let st=!0;for(const R of pa(it)){const w=R.kind===0?LT(K,R.fieldPath,K.startAt):BT(K,R.fieldPath,K.startAt);Z.push(w.value),st&&(st=w.inclusive)}return new ll(Z,st)})(g,f),S=(function(K,it){const Z=[];let st=!0;for(const R of pa(it)){const w=R.kind===0?BT(K,R.fieldPath,K.endAt):LT(K,R.fieldPath,K.endAt);Z.push(w.value),st&&(st=w.inclusive)}return new ll(Z,st)})(g,f),D=this.On(f,g,T),C=this.On(f,g,S),M=this.Nn(f,g,_),B=this.Bn(f.indexId,y,D,T.inclusive,C,S.inclusive,M);return F.forEach(B,(j=>n.Y(j,e.limit).next((K=>{K.forEach((it=>{const Z=ht.fromSegments(it.documentKey);u.has(Z)||(u=u.add(Z),h.push(Z))}))}))))})).next((()=>h))}return F.resolve(null)}))}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=NC(ne.create(t.filters,"and")).map((n=>Qp(t.path,t.collectionGroup,t.orderBy,n.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,e),e)}Bn(t,e,n,r,o,u,h){const f=(e!=null?e.length:1)*Math.max(n.length,o.length),g=f/(e!=null?e.length:1),y=[];for(let _=0;_<f;++_){const T=e?this.Ln(e[_/g]):bf,S=this.kn(t,T,n[_%g],r),D=this.qn(t,T,o[_%g],u),C=h.map((M=>this.kn(t,T,M,!0)));y.push(...this.createRange(S,D,C))}return y}kn(t,e,n,r){const o=new Ea(t,ht.empty(),e,n);return r?o:o.An()}qn(t,e,n,r){const o=new Ea(t,ht.empty(),e,n);return r?o.An():o}xn(t,e){const n=new sE(e),r=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next((o=>{let u=null;for(const h of o)n.yn(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u}))}getIndexType(t,e){let n=2;const r=this.Mn(e);return F.forEach(r,(o=>this.xn(t,o).next((u=>{u?n!==0&&u.fields.length<(function(f){let g=new ie(be.comparator),y=!1;for(const _ of f.filters)for(const T of _.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?y=!0:g=g.add(T.field));for(const _ of f.orderBy)_.field.isKeyField()||(g=g.add(_.field));return g.size+(y?1:0)})(o)&&(n=1):n=0})))).next((()=>(function(u){return u.limit!==null})(e)&&r.length>1&&n===2?1:n))}Qn(t,e){const n=new ku;for(const r of pa(t)){const o=e.data.field(r.fieldPath);if(o==null)return null;const u=n.Pn(r.kind);Ta.Kt.Dt(o,u)}return n.un()}Ln(t){const e=new ku;return Ta.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const n=new ku;return Ta.Kt.Dt(Tc(this.databaseId,e),n.Pn((function(o){const u=pa(o);return u.length===0?0:u[u.length-1].kind})(t))),n.un()}Nn(t,e,n){if(n===null)return[];let r=[];r.push(new ku);let o=0;for(const u of pa(t)){const h=n[o++];for(const f of r)if(this.Un(e,u.fieldPath)&&Ec(h))r=this.Kn(r,u,h);else{const g=f.Pn(u.kind);Ta.Kt.Dt(h,g)}}return this.Wn(r)}On(t,e,n){return this.Nn(t,e,n.position)}Wn(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].un();return e}Kn(t,e,n){const r=[...t],o=[];for(const u of n.arrayValue.values||[])for(const h of r){const f=new ku;f.seed(h.un()),Ta.Kt.Dt(u,f.Pn(e.kind)),o.push(f)}return o}Un(t,e){return!!t.filters.find((n=>n instanceof Lt&&n.field.isEqual(e)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(t,e){const n=zu(t),r=Uo(t);return(e?n.J(jp,IDBKeyRange.bound(e,e)):n.J()).next((o=>{const u=[];return F.forEach(o,(h=>r.get([h.indexId,this.uid]).next((f=>{u.push((function(y,_){const T=_?new gc(_.sequenceNumber,new Hn(za(_.readTime),new ht(Xi(_.documentKey)),_.largestBatchId)):gc.empty(),S=y.fields.map((([D,C])=>new kf(be.fromServerFormat(D),C)));return new ed(y.indexId,y.collectionGroup,S,T)})(h,f))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((n,r)=>{const o=n.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:wt(n.collectionGroup,r.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,n){const r=zu(t),o=Uo(t);return this.Gn(t).next((u=>r.J(jp,IDBKeyRange.bound(e,e)).next((h=>F.forEach(h,(f=>o.put(ZT(f.indexId,this.uid,u,n))))))))}updateIndexEntries(t,e){const n=new Map;return F.forEach(e,((r,o)=>{const u=n.get(r.collectionGroup);return(u?F.resolve(u):this.getFieldIndexes(t,r.collectionGroup)).next((h=>(n.set(r.collectionGroup,h),F.forEach(h,(f=>this.zn(t,r,f).next((g=>{const y=this.jn(o,f);return g.isEqual(y)?F.resolve():this.Jn(t,o,f,g,y)})))))))}))}Hn(t,e,n,r){return Bo(t).put(r.Rn(this.uid,this.$n(n,e.key),e.key))}Yn(t,e,n,r){return Bo(t).delete(r.Vn(this.uid,this.$n(n,e.key),e.key))}zn(t,e,n){const r=Bo(t);let o=new ie(lr);return r.ee({index:k1,range:IDBKeyRange.only([n.indexId,this.uid,qf(this.$n(n,e))])},((u,h)=>{o=o.add(new Ea(n.indexId,e,iE(h.arrayValue),iE(h.directionalValue)))})).next((()=>o))}jn(t,e){let n=new ie(lr);const r=this.Qn(e,t);if(r==null)return n;const o=Bp(e);if(o!=null){const u=t.data.field(o.fieldPath);if(Ec(u))for(const h of u.arrayValue.values||[])n=n.add(new Ea(e.indexId,t.key,this.Ln(h),r))}else n=n.add(new Ea(e.indexId,t.key,bf,r));return n}Jn(t,e,n,r,o){rt(aE,"Updating index entries for document '%s'",e.key);const u=[];return(function(f,g,y,_,T){const S=f.getIterator(),D=g.getIterator();let C=zo(S),M=zo(D);for(;C||M;){let B=!1,j=!1;if(C&&M){const K=y(C,M);K<0?j=!0:K>0&&(B=!0)}else C!=null?j=!0:B=!0;B?(_(M),M=zo(D)):j?(T(C),C=zo(S)):(C=zo(S),M=zo(D))}})(r,o,lr,(h=>{u.push(this.Hn(t,e,n,h))}),(h=>{u.push(this.Yn(t,e,n,h))})),F.waitFor(u)}Gn(t){let e=1;return Uo(t).ee({index:P1,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,r,o)=>{o.done(),e=r.sequenceNumber+1})).next((()=>e))}createRange(t,e,n){n=n.sort(((u,h)=>lr(u,h))).filter(((u,h,f)=>!h||lr(u,f[h-1])!==0));const r=[];r.push(t);for(const u of n){const h=lr(u,t),f=lr(u,e);if(h===0)r[0]=t.An();else if(h>0&&f<0)r.push(u),r.push(u.An());else if(f>0)break}r.push(e);const o=[];for(let u=0;u<r.length;u+=2){if(this.Zn(r[u],r[u+1]))return[];const h=r[u].Vn(this.uid,bf,ht.empty()),f=r[u+1].Vn(this.uid,bf,ht.empty());o.push(IDBKeyRange.bound(h,f))}return o}Zn(t,e){return lr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(lE)}getMinOffset(t,e){return F.mapArray(this.Mn(e),(n=>this.xn(t,n).next((r=>r||dt(44426))))).next(lE)}}function oE(i){return Ye(i,_c)}function Bo(i){return Ye(i,ic)}function zu(i){return Ye(i,xy)}function Uo(i){return Ye(i,nc)}function lE(i){_t(i.length!==0,28825);let t=i[0].indexState.offset,e=t.largestBatchId;for(let n=1;n<i.length;n++){const r=i[n].indexState.offset;Ey(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new Hn(t.readTime,t.documentKey,e)}const uE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UA=41943040;class cn{static withCacheSize(t){return new cn(t,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}function jA(i,t,e){const n=i.store(bi),r=i.store(nl),o=[],u=IDBKeyRange.only(e.batchId);let h=0;const f=n.ee({range:u},((y,_,T)=>(h++,T.delete())));o.push(f.next((()=>{_t(h===1,47070,{batchId:e.batchId})})));const g=[];for(const y of e.mutations){const _=V1(t,y.key.path,e.batchId);o.push(r.delete(_)),g.push(y.key)}return F.waitFor(o).next((()=>g))}function fd(i){if(!i)return 0;let t;if(i.document)t=i.document;else if(i.unknownDocument)t=i.unknownDocument;else{if(!i.noDocument)throw dt(14731);t=i.noDocument}return JSON.stringify(t).length}cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(UA,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);class qd{constructor(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.Xn={}}static wt(t,e,n,r){_t(t.uid!=="",64387);const o=t.isAuthenticated()?t.uid:"";return new qd(o,e,n,r)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ur(t).ee({index:Sa,range:n},((r,o,u)=>{e=!1,u.done()})).next((()=>e))}addMutationBatch(t,e,n,r){const o=Qo(t),u=ur(t);return u.add({}).next((h=>{_t(typeof h=="number",49019);const f=new Ny(h,e,n,r),g=(function(S,D,C){const M=C.baseMutations.map((j=>ud(S.yt,j))),B=C.mutations.map((j=>ud(S.yt,j)));return{userId:D,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:M,mutations:B}})(this.serializer,this.userId,f),y=[];let _=new ie(((T,S)=>wt(T.canonicalString(),S.canonicalString())));for(const T of r){const S=V1(this.userId,T.key.path,h);_=_.add(T.key.path.popLast()),y.push(u.put(g)),y.push(o.put(S,dD))}return _.forEach((T=>{y.push(this.indexManager.addToCollectionParentIndex(t,T))})),t.addOnCommittedListener((()=>{this.Xn[h]=f.keys()})),F.waitFor(y).next((()=>f))}))}lookupMutationBatch(t,e){return ur(t).get(e).next((n=>n?(_t(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:e}),va(this.serializer,n)):null))}er(t,e){return this.Xn[e]?F.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next((n=>{if(n){const r=n.keys();return this.Xn[e]=r,r}return null}))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=IDBKeyRange.lowerBound([this.userId,n]);let o=null;return ur(t).ee({index:Sa,range:r},((u,h,f)=>{h.userId===this.userId&&(_t(h.batchId>=n,47524,{tr:n}),o=va(this.serializer,h)),f.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=wa;return ur(t).ee({index:Sa,range:e,reverse:!0},((r,o,u)=>{n=o.batchId,u.done()})).next((()=>n))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,wa],[this.userId,Number.POSITIVE_INFINITY]);return ur(t).J(Sa,e).next((n=>n.map((r=>va(this.serializer,r)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=zf(this.userId,e.path),r=IDBKeyRange.lowerBound(n),o=[];return Qo(t).ee({range:r},((u,h,f)=>{const[g,y,_]=u,T=Xi(y);if(g===this.userId&&e.path.isEqual(T))return ur(t).get(_).next((S=>{if(!S)throw dt(61480,{nr:u,batchId:_});_t(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:_}),o.push(va(this.serializer,S))}));f.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ie(wt);const r=[];return e.forEach((o=>{const u=zf(this.userId,o.path),h=IDBKeyRange.lowerBound(u),f=Qo(t).ee({range:h},((g,y,_)=>{const[T,S,D]=g,C=Xi(S);T===this.userId&&o.path.isEqual(C)?n=n.add(D):_.done()}));r.push(f)})),F.waitFor(r).next((()=>this.rr(t,n)))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1,o=zf(this.userId,n),u=IDBKeyRange.lowerBound(o);let h=new ie(wt);return Qo(t).ee({range:u},((f,g,y)=>{const[_,T,S]=f,D=Xi(T);_===this.userId&&n.isPrefixOf(D)?D.length===r&&(h=h.add(S)):y.done()})).next((()=>this.rr(t,h)))}rr(t,e){const n=[],r=[];return e.forEach((o=>{r.push(ur(t).get(o).next((u=>{if(u===null)throw dt(35274,{batchId:o});_t(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:o}),n.push(va(this.serializer,u))})))})),F.waitFor(r).next((()=>n))}removeMutationBatch(t,e){return jA(t.le,this.userId,e).next((n=>(t.addOnCommittedListener((()=>{this.ir(e.batchId)})),F.forEach(n,(r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return F.resolve();const n=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),r=[];return Qo(t).ee({range:n},((o,u,h)=>{if(o[0]===this.userId){const f=Xi(o[1]);r.push(f)}else h.done()})).next((()=>{_t(r.length===0,56720,{sr:r.map((o=>o.canonicalString()))})}))}))}containsKey(t,e){return FA(t,this.userId,e)}_r(t){return HA(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:wa,lastStreamToken:""}))}}function FA(i,t,e){const n=zf(t,e.path),r=n[1],o=IDBKeyRange.lowerBound(n);let u=!1;return Qo(i).ee({range:o,X:!0},((h,f,g)=>{const[y,_,T]=h;y===t&&_===r&&(u=!0),g.done()})).next((()=>u))}function ur(i){return Ye(i,bi)}function Qo(i){return Ye(i,nl)}function HA(i){return Ye(i,pc)}class La{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new La(0)}static cr(){return new La(-1)}}class zC{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next((e=>{const n=new La(e.highestTargetId);return e.highestTargetId=n.next(),this.hr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((e=>vt.fromTimestamp(new $t(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,n){return this.lr(t).next((r=>(r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.hr(t,r))))}addTargetData(t,e){return this.Pr(t,e).next((()=>this.lr(t).next((n=>(n.targetCount+=1,this.Tr(e,n),this.hr(t,n))))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>jo(t).delete(e.targetId))).next((()=>this.lr(t))).next((n=>(_t(n.targetCount>0,8065),n.targetCount-=1,this.hr(t,n))))}removeTargets(t,e,n){let r=0;const o=[];return jo(t).ee(((u,h)=>{const f=Qu(h);f.sequenceNumber<=e&&n.get(f.targetId)===null&&(r++,o.push(this.removeTargetData(t,f)))})).next((()=>F.waitFor(o))).next((()=>r))}forEachTarget(t,e){return jo(t).ee(((n,r)=>{const o=Qu(r);e(o)}))}lr(t){return cE(t).get(sd).next((e=>(_t(e!==null,2888),e)))}hr(t,e){return cE(t).put(sd,e)}Pr(t,e){return jo(t).put(kA(this.serializer,e))}Tr(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.lr(t).next((e=>e.targetCount))}getTargetData(t,e){const n=Pa(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let o=null;return jo(t).ee({range:r,index:N1},((u,h,f)=>{const g=Qu(h);Oc(e,g.target)&&(o=g,f.done())})).next((()=>o))}addMatchingKeys(t,e,n){const r=[],o=hr(t);return e.forEach((u=>{const h=hn(u.path);r.push(o.put({targetId:n,path:h})),r.push(this.referenceDelegate.addReference(t,n,u))})),F.waitFor(r)}removeMatchingKeys(t,e,n){const r=hr(t);return F.forEach(e,(o=>{const u=hn(o.path);return F.waitFor([r.delete([n,u]),this.referenceDelegate.removeReference(t,n,o)])}))}removeMatchingKeysForTargetId(t,e){const n=hr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),r=hr(t);let o=Mt();return r.ee({range:n,X:!0},((u,h,f)=>{const g=Xi(u[1]),y=new ht(g);o=o.add(y)})).next((()=>o))}containsKey(t,e){const n=hn(e.path),r=IDBKeyRange.bound([n],[S1(n)],!1,!0);let o=0;return hr(t).ee({index:Ay,X:!0,range:r},(([u,h],f,g)=>{u!==0&&(o++,g.done())})).next((()=>o>0))}At(t,e){return jo(t).get(e).next((n=>n?Qu(n):null))}}function jo(i){return Ye(i,il)}function cE(i){return Ye(i,Ra)}function hr(i){return Ye(i,sl)}const hE="LruGarbageCollector",LC=1048576;function fE([i,t],[e,n]){const r=wt(i,e);return r===0?wt(t,n):r}class BC{constructor(t){this.Ir=t,this.buffer=new ie(fE),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const n=this.buffer.last();fE(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}}get maxValue(){return this.buffer.last()[0]}}class qA{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){rt(hE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Mr(e)?rt(hE,"Ignoring IndexedDB error during garbage collection: ",e):await Cr(e)}await this.Vr(3e5)}))}}class UC{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((n=>Math.floor(e/100*n)))}nthSequenceNumber(t,e){if(e===0)return F.resolve(wn.ce);const n=new BC(e);return this.mr.forEachTarget(t,(r=>n.Ar(r.sequenceNumber))).next((()=>this.mr.pr(t,(r=>n.Ar(r))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.mr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(uE)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uE):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let n,r,o,u,h,f,g;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,u=Date.now(),this.nthSequenceNumber(t,r)))).next((_=>(n=_,h=Date.now(),this.removeTargets(t,n,e)))).next((_=>(o=_,f=Date.now(),this.removeOrphanedDocuments(t,n)))).next((_=>(g=Date.now(),qo()<=Ft.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${r} in `+(h-u)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${_} documents in `+(g-f)+`ms
Total Duration: ${g-y}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function GA(i,t){return new UC(i,t)}class jC{constructor(t,e){this.db=t,this.garbageCollector=GA(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((n=>e.next((r=>n+r))))}wr(t){let e=0;return this.pr(t,(n=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,((n,r)=>e(r)))}addReference(t,e,n){return vf(t,n)}removeReference(t,e,n){return vf(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return vf(t,e)}br(t,e){return(function(r,o){let u=!1;return HA(r).te((h=>FA(r,h,o).next((f=>(f&&(u=!0),F.resolve(!f)))))).next((()=>u))})(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Sr(t,((u,h)=>{if(h<=e){const f=this.br(t,u).next((g=>{if(!g)return o++,n.getEntry(t,u).next((()=>(n.removeEntry(u,vt.min()),hr(t).delete((function(_){return[0,hn(_.path)]})(u)))))}));r.push(f)}})).next((()=>F.waitFor(r))).next((()=>n.apply(t))).next((()=>o))}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return vf(t,e)}Sr(t,e){const n=hr(t);let r,o=wn.ce;return n.ee({index:Ay},(([u,h],{path:f,sequenceNumber:g})=>{u===0?(o!==wn.ce&&e(new ht(Xi(r)),o),o=g,r=f):o=wn.ce})).next((()=>{o!==wn.ce&&e(new ht(Xi(r)),o)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function vf(i,t){return hr(i).put((function(n,r){return{targetId:0,path:hn(n.path),sequenceNumber:r}})(t,i.currentSequenceNumber))}class KA{constructor(){this.changes=new Is((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ee.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?F.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class FC{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return ha(t).put(n)}removeEntry(t,e,n){return ha(t).delete((function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],cd(u),h[h.length-1]]})(e,n))}updateMetadata(t,e){return this.getMetadata(t).next((n=>(n.byteSize+=e,this.Dr(t,n))))}getEntry(t,e){let n=Ee.newInvalidDocument(e);return ha(t).ee({index:Lf,range:IDBKeyRange.only(Lu(e))},((r,o)=>{n=this.Cr(e,o)})).next((()=>n))}vr(t,e){let n={size:0,document:Ee.newInvalidDocument(e)};return ha(t).ee({index:Lf,range:IDBKeyRange.only(Lu(e))},((r,o)=>{n={document:this.Cr(e,o),size:fd(o)}})).next((()=>n))}getEntries(t,e){let n=jn();return this.Fr(t,e,((r,o)=>{const u=this.Cr(r,o);n=n.insert(r,u)})).next((()=>n))}Mr(t,e){let n=jn(),r=new ce(ht.comparator);return this.Fr(t,e,((o,u)=>{const h=this.Cr(o,u);n=n.insert(o,h),r=r.insert(o,fd(u))})).next((()=>({documents:n,Or:r})))}Fr(t,e,n){if(e.isEmpty())return F.resolve();let r=new ie(mE);e.forEach((f=>r=r.add(f)));const o=IDBKeyRange.bound(Lu(r.first()),Lu(r.last())),u=r.getIterator();let h=u.getNext();return ha(t).ee({index:Lf,range:o},((f,g,y)=>{const _=ht.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;h&&mE(h,_)<0;)n(h,null),h=u.getNext();h&&h.isEqual(_)&&(n(h,g),h=u.hasNext()?u.getNext():null),h?y.j(Lu(h)):y.done()})).next((()=>{for(;h;)n(h,null),h=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(t,e,n,r,o){const u=e.path,h=[u.popLast().toArray(),u.lastSegment(),cd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ha(t).J(IDBKeyRange.bound(h,f,!0)).next((g=>{o?.incrementDocumentReadCount(g.length);let y=jn();for(const _ of g){const T=this.Cr(ht.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);T.isFoundDocument()&&(Nc(e,T)||r.has(T.key))&&(y=y.insert(T.key,T))}return y}))}getAllFromCollectionGroup(t,e,n,r){let o=jn();const u=gE(e,n),h=gE(e,Hn.max());return ha(t).ee({index:O1,range:IDBKeyRange.bound(u,h,!0)},((f,g,y)=>{const _=this.Cr(ht.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);o=o.insert(_.key,_),o.size===r&&y.done()})).next((()=>o))}newChangeBuffer(t){return new HC(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return dE(t).get(Up).next((e=>(_t(!!e,20021),e)))}Dr(t,e){return dE(t).put(Up,e)}Cr(t,e){if(e){const n=RC(this.serializer,e);if(!(n.isNoDocument()&&n.version.isEqual(vt.min())))return n}return Ee.newInvalidDocument(t)}}function YA(i){return new FC(i)}class HC extends KA{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new Is((n=>n.toString()),((n,r)=>n.isEqual(r)))}applyChanges(t){const e=[];let n=0,r=new ie(((o,u)=>wt(o.canonicalString(),u.canonicalString())));return this.changes.forEach(((o,u)=>{const h=this.Br.get(o);if(e.push(this.Nr.removeEntry(t,o,h.readTime)),u.isValidDocument()){const f=WT(this.Nr.serializer,u);r=r.add(o.path.popLast());const g=fd(f);n+=g-h.size,e.push(this.Nr.addEntry(t,o,f))}else if(n-=h.size,this.trackRemovals){const f=WT(this.Nr.serializer,u.convertToNoDocument(vt.min()));e.push(this.Nr.addEntry(t,o,f))}})),r.forEach((o=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,o))})),e.push(this.Nr.updateMetadata(t,n)),F.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next((n=>(this.Br.set(e,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next((({documents:n,Or:r})=>(r.forEach(((o,u)=>{this.Br.set(o,{size:u,readTime:n.get(o).readTime})})),n)))}}function dE(i){return Ye(i,yc)}function ha(i){return Ye(i,id)}function Lu(i){const t=i.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function gE(i,t){const e=t.documentKey.path.toArray();return[i,cd(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function mE(i,t){const e=i.path.toArray(),n=t.path.toArray();let r=0;for(let o=0;o<e.length-2&&o<n.length-2;++o)if(r=wt(e[o],n[o]),r)return r;return r=wt(e.length,n.length),r||(r=wt(e[e.length-2],n[n.length-2]),r||wt(e[e.length-1],n[n.length-1]))}class qC{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class QA{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((r=>(n!==null&&oc(n.mutation,r,ri.empty(),$t.now()),r)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.getLocalViewOfDocuments(t,n,Mt()).next((()=>n))))}getLocalViewOfDocuments(t,e,n=Mt()){const r=Wi();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((o=>{let u=Ku();return o.forEach(((h,f)=>{u=u.insert(h,f.overlayedDocument)})),u}))))}getOverlayedDocuments(t,e){const n=Wi();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Mt())))}populateOverlays(t,e,n){const r=[];return n.forEach((o=>{e.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(t,r).next((o=>{o.forEach(((u,h)=>{e.set(u,h)}))}))}computeViews(t,e,n,r){let o=jn();const u=ac(),h=(function(){return ac()})();return e.forEach(((f,g)=>{const y=n.get(g.key);r.has(g.key)&&(y===void 0||y.mutation instanceof Vr)?o=o.insert(g.key,g):y!==void 0?(u.set(g.key,y.mutation.getFieldMask()),oc(y.mutation,g,y.mutation.getFieldMask(),$t.now())):u.set(g.key,ri.empty())})),this.recalculateAndSaveOverlays(t,o).next((f=>(f.forEach(((g,y)=>u.set(g,y))),e.forEach(((g,y)=>h.set(g,new qC(y,u.get(g)??null)))),h)))}recalculateAndSaveOverlays(t,e){const n=ac();let r=new ce(((u,h)=>u-h)),o=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((u=>{for(const h of u)h.keys().forEach((f=>{const g=e.get(f);if(g===null)return;let y=n.get(f)||ri.empty();y=h.applyToLocalView(g,y),n.set(f,y);const _=(r.get(h.batchId)||Mt()).add(f);r=r.insert(h.batchId,_)}))})).next((()=>{const u=[],h=r.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),g=f.key,y=f.value,_=fA();y.forEach((T=>{if(!o.has(T)){const S=_A(e.get(T),n.get(T));S!==null&&_.set(T,S),o=o.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(t,g,_))}return F.waitFor(u)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.recalculateAndSaveOverlays(t,n)))}getDocumentsMatchingQuery(t,e,n,r){return(function(u){return ht.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):aA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((o=>{const u=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-o.size):F.resolve(Wi());let h=el,f=o;return u.next((g=>F.forEach(g,((y,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),o.get(y)?F.resolve():this.remoteDocumentCache.getEntry(t,y).next((T=>{f=f.insert(y,T)}))))).next((()=>this.populateOverlays(t,g,o))).next((()=>this.computeViews(t,f,g,Mt()))).next((y=>({batchId:h,changes:hA(y)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new ht(e)).next((n=>{let r=Ku();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const o=e.collectionGroup;let u=Ku();return this.indexManager.getCollectionParents(t,o).next((h=>F.forEach(h,(f=>{const g=(function(_,T){return new Tl(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(e,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,g,n,r).next((y=>{y.forEach(((_,T)=>{u=u.insert(_,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,o,r)))).next((u=>{o.forEach(((f,g)=>{const y=g.getKey();u.get(y)===null&&(u=u.insert(y,Ee.newInvalidDocument(y)))}));let h=Ku();return u.forEach(((f,g)=>{const y=o.get(f);y!==void 0&&oc(y.mutation,g,ri.empty(),$t.now()),Nc(e,g)&&(h=h.insert(f,g))})),h}))}}class GC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return F.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(r){return{id:r.id,version:r.version,createTime:mn(r.createTime)}})(e)),F.resolve()}getNamedQuery(t,e){return F.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(r){return{name:r.name,query:zA(r.bundledQuery),readTime:mn(r.readTime)}})(e)),F.resolve()}}class KC{constructor(){this.overlays=new ce(ht.comparator),this.qr=new Map}getOverlay(t,e){return F.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Wi();return F.forEach(e,(r=>this.getOverlay(t,r).next((o=>{o!==null&&n.set(r,o)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((r,o)=>{this.St(t,e,o)})),F.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.qr.get(n);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),F.resolve()}getOverlaysForCollection(t,e,n){const r=Wi(),o=e.length+1,u=new ht(e.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,g=f.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===o&&f.largestBatchId>n&&r.set(f.getKey(),f)}return F.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let o=new ce(((g,y)=>g-y));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>n){let y=o.get(g.largestBatchId);y===null&&(y=Wi(),o=o.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const h=Wi(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((g,y)=>h.set(g,y))),!(h.size()>=r)););return F.resolve(h)}St(t,e,n){const r=this.overlays.get(n.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new ky(e,n));let o=this.qr.get(e);o===void 0&&(o=Mt(),this.qr.set(e,o)),this.qr.set(e,o.add(n.key))}}class YC{constructor(){this.sessionToken=De.EMPTY_BYTE_STRING}getSessionToken(t){return F.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,F.resolve()}}class jy{constructor(){this.Qr=new ie($e.$r),this.Ur=new ie($e.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const n=new $e(t,e);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,e){t.forEach((n=>this.addReference(n,e)))}removeReference(t,e){this.Gr(new $e(t,e))}zr(t,e){t.forEach((n=>this.removeReference(n,e)))}jr(t){const e=new ht(new Wt([])),n=new $e(e,t),r=new $e(e,t+1),o=[];return this.Ur.forEachInRange([n,r],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new ht(new Wt([])),n=new $e(e,t),r=new $e(e,t+1);let o=Mt();return this.Ur.forEachInRange([n,r],(u=>{o=o.add(u.key)})),o}containsKey(t){const e=new $e(t,0),n=this.Qr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class $e{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return ht.comparator(t.key,e.key)||wt(t.Yr,e.Yr)}static Kr(t,e){return wt(t.Yr,e.Yr)||ht.comparator(t.key,e.key)}}class QC{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new ie($e.$r)}checkEmpty(t){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Ny(o,e,n,r);this.mutationQueue.push(u);for(const h of r)this.Zr=this.Zr.add(new $e(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return F.resolve(u)}lookupMutationBatch(t,e){return F.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.ei(n),o=r<0?0:r;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?wa:this.tr-1)}getAllMutationBatches(t){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new $e(e,0),r=new $e(e,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,r],(u=>{const h=this.Xr(u.Yr);o.push(h)})),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ie(wt);return e.forEach((r=>{const o=new $e(r,0),u=new $e(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(h=>{n=n.add(h.Yr)}))})),F.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let o=n;ht.isDocumentKey(o)||(o=o.child(""));const u=new $e(new ht(o),0);let h=new ie(wt);return this.Zr.forEachWhile((f=>{const g=f.key.path;return!!n.isPrefixOf(g)&&(g.length===r&&(h=h.add(f.Yr)),!0)}),u),F.resolve(this.ti(h))}ti(t){const e=[];return t.forEach((n=>{const r=this.Xr(n);r!==null&&e.push(r)})),e}removeMutationBatch(t,e){_t(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return F.forEach(e.mutations,(r=>{const o=new $e(r.key,e.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=n}))}ir(t){}containsKey(t,e){const n=new $e(e,0),r=this.Zr.firstAfterOrEqual(n);return F.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,F.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class XC{constructor(t){this.ri=t,this.docs=(function(){return new ce(ht.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),o=r?r.size:0,u=this.ri(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return F.resolve(n?n.document.mutableCopy():Ee.newInvalidDocument(e))}getEntries(t,e){let n=jn();return e.forEach((r=>{const o=this.docs.get(r);n=n.insert(r,o?o.document.mutableCopy():Ee.newInvalidDocument(r))})),F.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let o=jn();const u=e.path,h=new ht(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:g,value:{document:y}}=f.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||Ey(R1(y),n)<=0||(r.has(y.key)||Nc(e,y))&&(o=o.insert(y.key,y.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(t,e,n,r){dt(9500)}ii(t,e){return F.forEach(this.docs,(n=>e(n)))}newChangeBuffer(t){return new WC(this)}getSize(t){return F.resolve(this.size)}}class WC extends KA{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(n)})),F.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class $C{constructor(t){this.persistence=t,this.si=new Is((e=>Pa(e)),Oc),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.oi=0,this._i=new jy,this.targetCount=0,this.ai=La.ur()}forEachTarget(t,e){return this.si.forEach(((n,r)=>e(r))),F.resolve()}getLastRemoteSnapshotVersion(t){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return F.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.oi&&(this.oi=e),F.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new La(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,F.resolve()}updateTargetData(t,e){return this.Pr(e),F.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,F.resolve()}removeTargets(t,e,n){let r=0;const o=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=e&&n.get(h.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)})),F.waitFor(o).next((()=>r))}getTargetCount(t){return F.resolve(this.targetCount)}getTargetData(t,e){const n=this.si.get(e)||null;return F.resolve(n)}addMatchingKeys(t,e,n){return this._i.Wr(e,n),F.resolve()}removeMatchingKeys(t,e,n){this._i.zr(e,n);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach((u=>{o.push(r.markPotentiallyOrphaned(t,u))})),F.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),F.resolve()}getMatchingKeysForTargetId(t,e){const n=this._i.Hr(e);return F.resolve(n)}containsKey(t,e){return F.resolve(this._i.containsKey(e))}}class Fy{constructor(t,e){this.ui={},this.overlays={},this.ci=new wn(0),this.li=!1,this.li=!0,this.hi=new YC,this.referenceDelegate=t(this),this.Pi=new $C(this),this.indexManager=new PC,this.remoteDocumentCache=(function(r){return new XC(r)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new PA(e),this.Ii=new GC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new KC,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.ui[t.toKey()];return n||(n=new QC(e,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,n){rt("MemoryPersistence","Starting transaction:",t);const r=new ZC(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(t,e){return F.or(Object.values(this.ui).map((n=>()=>n.containsKey(t,e))))}}class ZC extends D1{constructor(t){super(),this.currentSequenceNumber=t}}class Gd{constructor(t){this.persistence=t,this.Ri=new jy,this.Vi=null}static mi(t){return new Gd(t)}get fi(){if(this.Vi)return this.Vi;throw dt(60996)}addReference(t,e,n){return this.Ri.addReference(n,e),this.fi.delete(n.toString()),F.resolve()}removeReference(t,e,n){return this.Ri.removeReference(n,e),this.fi.add(n.toString()),F.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),F.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((r=>this.fi.add(r.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,(n=>{const r=ht.fromPath(n);return this.gi(t,r).next((o=>{o||e.removeEntry(r,vt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((n=>{n?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return F.or([()=>F.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class dd{constructor(t,e){this.persistence=t,this.pi=new Is((n=>hn(n.path)),((n,r)=>n.isEqual(r))),this.garbageCollector=GA(this,e)}static mi(t,e){return new dd(t,e)}Ei(){}di(t){return F.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((n=>e.next((r=>n+r))))}wr(t){let e=0;return this.pr(t,(n=>{e++})).next((()=>e))}pr(t,e){return F.forEach(this.pi,((n,r)=>this.br(t,n,r).next((o=>o?F.resolve():e(r)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(t,(u=>this.br(t,u,e).next((h=>{h||(n++,o.removeEntry(u,vt.min()))})))).next((()=>o.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),F.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),F.resolve()}removeReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),F.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),F.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Uf(t.data.value)),e}br(t,e,n){return F.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.pi.get(e);return F.resolve(r!==void 0&&r>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class JC{constructor(t){this.serializer=t}k(t,e,n,r){const o=new Md("createOrUpgrade",e);n<1&&r>=1&&((function(f){f.createObjectStore(Vc)})(t),(function(f){f.createObjectStore(pc,{keyPath:fD}),f.createObjectStore(bi,{keyPath:wT,autoIncrement:!0}).createIndex(Sa,RT,{unique:!0}),f.createObjectStore(nl)})(t),pE(t),(function(f){f.createObjectStore(ya)})(t));let u=F.resolve();return n<3&&r>=3&&(n!==0&&((function(f){f.deleteObjectStore(sl),f.deleteObjectStore(il),f.deleteObjectStore(Ra)})(t),pE(t)),u=u.next((()=>(function(f){const g=f.store(Ra),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return g.put(sd,y)})(o)))),n<4&&r>=4&&(n!==0&&(u=u.next((()=>(function(f,g){return g.store(bi).J().next((_=>{f.deleteObjectStore(bi),f.createObjectStore(bi,{keyPath:wT,autoIncrement:!0}).createIndex(Sa,RT,{unique:!0});const T=g.store(bi),S=_.map((D=>T.put(D)));return F.waitFor(S)}))})(t,o)))),u=u.next((()=>{(function(f){f.createObjectStore(rl,{keyPath:TD})})(t)}))),n<5&&r>=5&&(u=u.next((()=>this.yi(o)))),n<6&&r>=6&&(u=u.next((()=>((function(f){f.createObjectStore(yc)})(t),this.wi(o))))),n<7&&r>=7&&(u=u.next((()=>this.Si(o)))),n<8&&r>=8&&(u=u.next((()=>this.bi(t,o)))),n<9&&r>=9&&(u=u.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(t)}))),n<10&&r>=10&&(u=u.next((()=>this.Di(o)))),n<11&&r>=11&&(u=u.next((()=>{(function(f){f.createObjectStore(Od,{keyPath:ED})})(t),(function(f){f.createObjectStore(Nd,{keyPath:SD})})(t)}))),n<12&&r>=12&&(u=u.next((()=>{(function(f){const g=f.createObjectStore(Pd,{keyPath:CD});g.createIndex(Fp,MD,{unique:!1}),g.createIndex(z1,VD,{unique:!1})})(t)}))),n<13&&r>=13&&(u=u.next((()=>(function(f){const g=f.createObjectStore(id,{keyPath:gD});g.createIndex(Lf,mD),g.createIndex(O1,pD)})(t))).next((()=>this.Ci(t,o))).next((()=>t.deleteObjectStore(ya)))),n<14&&r>=14&&(u=u.next((()=>this.Fi(t,o)))),n<15&&r>=15&&(u=u.next((()=>(function(f){f.createObjectStore(xy,{keyPath:AD,autoIncrement:!0}).createIndex(jp,xD,{unique:!1}),f.createObjectStore(nc,{keyPath:wD}).createIndex(P1,RD,{unique:!1}),f.createObjectStore(ic,{keyPath:ID}).createIndex(k1,DD,{unique:!1})})(t)))),n<16&&r>=16&&(u=u.next((()=>{e.objectStore(nc).clear()})).next((()=>{e.objectStore(ic).clear()}))),n<17&&r>=17&&(u=u.next((()=>{(function(f){f.createObjectStore(wy,{keyPath:OD})})(t)}))),n<18&&r>=18&&a1()&&(u=u.next((()=>{e.objectStore(nc).clear()})).next((()=>{e.objectStore(ic).clear()}))),u}wi(t){let e=0;return t.store(ya).ee(((n,r)=>{e+=fd(r)})).next((()=>{const n={byteSize:e};return t.store(yc).put(Up,n)}))}yi(t){const e=t.store(pc),n=t.store(bi);return e.J().next((r=>F.forEach(r,(o=>{const u=IDBKeyRange.bound([o.userId,wa],[o.userId,o.lastAcknowledgedBatchId]);return n.J(Sa,u).next((h=>F.forEach(h,(f=>{_t(f.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const g=va(this.serializer,f);return jA(t,o.userId,g).next((()=>{}))}))))}))))}Si(t){const e=t.store(sl),n=t.store(ya);return t.store(Ra).get(sd).next((r=>{const o=[];return n.ee(((u,h)=>{const f=new Wt(u),g=(function(_){return[0,hn(_)]})(f);o.push(e.get(g).next((y=>y?F.resolve():(_=>e.put({targetId:0,path:hn(_),sequenceNumber:r.highestListenSequenceNumber}))(f))))})).next((()=>F.waitFor(o)))}))}bi(t,e){t.createObjectStore(_c,{keyPath:vD});const n=e.store(_c),r=new Uy,o=u=>{if(r.add(u)){const h=u.lastSegment(),f=u.popLast();return n.put({collectionId:h,parent:hn(f)})}};return e.store(ya).ee({X:!0},((u,h)=>{const f=new Wt(u);return o(f.popLast())})).next((()=>e.store(nl).ee({X:!0},(([u,h,f],g)=>{const y=Xi(h);return o(y.popLast())}))))}Di(t){const e=t.store(il);return e.ee(((n,r)=>{const o=Qu(r),u=kA(this.serializer,o);return e.put(u)}))}Ci(t,e){const n=e.store(ya),r=[];return n.ee(((o,u)=>{const h=e.store(id),f=(function(_){return _.document?new ht(Wt.fromString(_.document.name).popFirst(5)):_.noDocument?ht.fromSegments(_.noDocument.path):_.unknownDocument?ht.fromSegments(_.unknownDocument.path):dt(36783)})(u).path.toArray(),g={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};r.push(h.put(g))})).next((()=>F.waitFor(r)))}Fi(t,e){const n=e.store(bi),r=YA(this.serializer),o=new Fy(Gd.mi,this.serializer.yt);return n.J().next((u=>{const h=new Map;return u.forEach((f=>{let g=h.get(f.userId)??Mt();va(this.serializer,f).keys().forEach((y=>g=g.add(y))),h.set(f.userId,g)})),F.forEach(h,((f,g)=>{const y=new Ze(g),_=Hd.wt(this.serializer,y),T=o.getIndexManager(y),S=qd.wt(y,this.serializer,T,o.referenceDelegate);return new QA(r,S,_,T).recalculateAndSaveOverlaysForDocumentKeys(new Hp(e,wn.ce),f).next()}))}))}}function pE(i){i.createObjectStore(sl,{keyPath:_D}).createIndex(Ay,bD,{unique:!0}),i.createObjectStore(il,{keyPath:"targetId"}).createIndex(N1,yD,{unique:!0}),i.createObjectStore(Ra)}const cr="IndexedDbPersistence",fp=18e5,dp=5e3,gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",tM="main";class Hy{constructor(t,e,n,r,o,u,h,f,g,y,_=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Mi=o,this.window=u,this.document=h,this.xi=g,this.Oi=y,this.Ni=_,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=T=>Promise.resolve(),!Hy.v())throw new ut(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jC(this,r),this.$i=e+tM,this.serializer=new PA(f),this.Ui=new Tr(this.$i,this.Ni,new JC(this.serializer)),this.hi=new DC,this.Pi=new zC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=YA(this.serializer),this.Ii=new IC,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,y===!1&&Re(cr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ut(J.FAILED_PRECONDITION,gp);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new wn(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Tf(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((e=>this.isPrimary&&!e?this.Zi(t).next((()=>!1)):!!e&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(Mr(t))return rt(cr,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return rt(cr,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return Bu(t).get(ko).next((e=>F.resolve(this.es(e))))}ts(t){return Tf(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,fp)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const n=Ye(e,rl);return n.J().next((r=>{const o=this.ss(r,fp),u=r.filter((h=>o.indexOf(h)===-1));return F.forEach(u,(h=>n.delete(h.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?F.resolve(!0):Bu(t).get(ko).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,dp)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new ut(J.FAILED_PRECONDITION,gp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tf(t).J().next((n=>this.ss(n,dp).find((r=>{if(this.clientId!==r.clientId){const o=!this.networkEnabled&&r.networkEnabled,u=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(o||u&&h)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&rt(cr,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Vc,rl],(t=>{const e=new Hp(t,wn.ce);return this.Zi(e).next((()=>this.ts(e)))})),this.Ui.close(),this.Ps()}ss(t,e){return t.filter((n=>this.rs(n.updateTimeMs,e)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>Tf(t).J().next((e=>this.ss(e,fp).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return qd.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new kC(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return Hd.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,n){rt(cr,"Starting transaction:",t);const r=e==="readonly"?"readonly":"readwrite",o=(function(f){return f===18?kD:f===17?j1:f===16?PD:f===15?Ry:f===14?U1:f===13?B1:f===12?ND:f===11?L1:void dt(60245)})(this.Ni);let u;return this.Ui.runTransaction(t,r,o,(h=>(u=new Hp(h,this.ci?this.ci.next():wn.ce),e==="readwrite-primary"?this.Hi(u).next((f=>!!f||this.Yi(u))).next((f=>{if(!f)throw Re(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ut(J.FAILED_PRECONDITION,I1);return n(u)})).next((f=>this.Xi(u).next((()=>f)))):this.Is(u).next((()=>n(u)))))).then((h=>(u.raiseOnCommittedEvent(),h)))}Is(t){return Bu(t).get(ko).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,dp)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ut(J.FAILED_PRECONDITION,gp)}))}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bu(t).put(ko,e)}static v(){return Tr.v()}Zi(t){const e=Bu(t);return e.get(ko).next((n=>this.es(n)?(rt(cr,"Releasing primary lease."),e.delete(ko)):F.resolve()))}rs(t,e){const n=Date.now();return!(t<n-e)&&(!(t>n)||(Re(`Detected an update time that is in the future: ${t} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;r1()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){try{const e=this.Ki?.getItem(this._s(t))!==null;return rt(cr,`Client '${t}' ${e?"is":"is not"} zombied in LocalStorage`),e}catch(e){return Re(cr,"Failed to get zombied client id.",e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Re("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Bu(i){return Ye(i,Vc)}function Tf(i){return Ye(i,rl)}function XA(i,t){let e=i.projectId;return i.isDefaultDatabase||(e+="."+i.database),"firestore/"+t+"/"+e+"/"}class qy{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Es=n,this.ds=r}static As(t,e){let n=Mt(),r=Mt();for(const o of e.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new qy(t,e.fromCache,n,r)}}class eM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class WA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return r1()?8:C1($f())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,n,r){const o={result:null};return this.ys(t,e).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(t,e,r,n).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new eM;return this.Ss(t,e,u).next((h=>{if(o.result=h,this.Vs)return this.bs(t,e,u,h.size)}))})).next((()=>o.result))}bs(t,e,n,r){return n.documentReadCount<this.fs?(qo()<=Ft.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",Go(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(qo()<=Ft.DEBUG&&rt("QueryEngine","Query:",Go(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(qo()<=Ft.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",Go(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fn(e))):F.resolve())}ys(t,e){if(UT(e))return F.resolve(null);let n=Fn(e);return this.indexManager.getIndexType(t,n).next((r=>r===0?null:(e.limit!==null&&r===1&&(e=Wp(e,null,"F"),n=Fn(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((o=>{const u=Mt(...o);return this.ps.getDocuments(t,u).next((h=>this.indexManager.getMinOffset(t,n).next((f=>{const g=this.Ds(e,h);return this.Cs(e,g,u,f.readTime)?this.ys(t,Wp(e,null,"F")):this.vs(t,g,e,f)}))))})))))}ws(t,e,n,r){return UT(e)||r.isEqual(vt.min())?F.resolve(null):this.ps.getDocuments(t,n).next((o=>{const u=this.Ds(e,o);return this.Cs(e,u,n,r)?F.resolve(null):(qo()<=Ft.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Go(e)),this.vs(t,u,e,w1(r,el)).next((h=>h)))}))}Ds(t,e){let n=new ie(uA(t));return e.forEach(((r,o)=>{Nc(t,o)&&(n=n.add(o))})),n}Cs(t,e,n,r){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(t,e,n){return qo()<=Ft.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",Go(e)),this.ps.getDocumentsMatchingQuery(t,e,Hn.min(),n)}vs(t,e,n,r){return this.ps.getDocumentsMatchingQuery(t,n,r).next((o=>(e.forEach((u=>{o=o.insert(u.key,u)})),o)))}}const Gy="LocalStore",nM=3e8;class iM{constructor(t,e,n,r){this.persistence=t,this.Fs=e,this.serializer=r,this.Ms=new ce(wt),this.xs=new Is((o=>Pa(o)),Oc),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new QA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function $A(i,t,e,n){return new iM(i,t,e,n)}async function ZA(i,t){const e=pt(i);return await e.persistence.runTransaction("Handle user change","readonly",(n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next((o=>(r=o,e.Bs(t),e.mutationQueue.getAllMutationBatches(n)))).next((o=>{const u=[],h=[];let f=Mt();for(const g of r){u.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}for(const g of o){h.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}return e.localDocuments.getDocuments(n,f).next((g=>({Ls:g,removedBatchIds:u,addedBatchIds:h})))}))}))}function sM(i,t){const e=pt(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const r=t.batch.keys(),o=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,g,y){const _=g.batch,T=_.keys();let S=F.resolve();return T.forEach((D=>{S=S.next((()=>y.getEntry(f,D))).next((C=>{const M=g.docVersions.get(D);_t(M!==null,48541),C.version.compareTo(M)<0&&(_.applyToRemoteDocument(C,g),C.isValidDocument()&&(C.setReadTime(g.commitVersion),y.addEntry(C)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(f,_)))})(e,n,t,o).next((()=>o.apply(n))).next((()=>e.mutationQueue.performConsistencyCheck(n))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(h){let f=Mt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(f=f.add(h.batch.mutations[g].key));return f})(t)))).next((()=>e.localDocuments.getDocuments(n,r)))}))}function JA(i){const t=pt(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function rM(i,t){const e=pt(i),n=t.snapshotVersion;let r=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=e.Ns.newChangeBuffer({trackRemovals:!0});r=e.Ms;const h=[];t.targetChanges.forEach(((y,_)=>{const T=r.get(_);if(!T)return;h.push(e.Pi.removeMatchingKeys(o,y.removedDocuments,_).next((()=>e.Pi.addMatchingKeys(o,y.addedDocuments,_))));let S=T.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(_)!==null?S=S.withResumeToken(De.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,n)),r=r.insert(_,S),(function(C,M,B){return C.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=nM?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(T,S,y)&&h.push(e.Pi.updateTargetData(o,S))}));let f=jn(),g=Mt();if(t.documentUpdates.forEach((y=>{t.resolvedLimboDocuments.has(y)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,y))})),h.push(aM(o,u,t.documentUpdates).next((y=>{f=y.ks,g=y.qs}))),!n.isEqual(vt.min())){const y=e.Pi.getLastRemoteSnapshotVersion(o).next((_=>e.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));h.push(y)}return F.waitFor(h).next((()=>u.apply(o))).next((()=>e.localDocuments.getLocalViewOfDocuments(o,f,g))).next((()=>f))})).then((o=>(e.Ms=r,o)))}function aM(i,t,e){let n=Mt(),r=Mt();return e.forEach((o=>n=n.add(o))),t.getEntries(i,n).next((o=>{let u=jn();return e.forEach(((h,f)=>{const g=o.get(h);f.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(h)),f.isNoDocument()&&f.version.isEqual(vt.min())?(t.removeEntry(h,f.readTime),u=u.insert(h,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(f),u=u.insert(h,f)):rt(Gy,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",f.version)})),{ks:u,qs:r}}))}function oM(i,t){const e=pt(i);return e.persistence.runTransaction("Get next mutation batch","readonly",(n=>(t===void 0&&(t=wa),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t))))}function gd(i,t){const e=pt(i);return e.persistence.runTransaction("Allocate target","readwrite",(n=>{let r;return e.Pi.getTargetData(n,t).next((o=>o?(r=o,F.resolve(r)):e.Pi.allocateTargetId(n).next((u=>(r=new Ss(t,u,"TargetPurposeListen",n.currentSequenceNumber),e.Pi.addTargetData(n,r).next((()=>r)))))))})).then((n=>{const r=e.Ms.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(n.targetId,n),e.xs.set(t,n.targetId)),n}))}async function dl(i,t,e){const n=pt(i),r=n.Ms.get(t),o=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",o,(u=>n.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Mr(u))throw u;rt(Gy,`Failed to update sequence numbers for target ${t}: ${u}`)}n.Ms=n.Ms.remove(t),n.xs.delete(r.target)}function sy(i,t,e){const n=pt(i);let r=vt.min(),o=Mt();return n.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,g,y){const _=pt(f),T=_.xs.get(y);return T!==void 0?F.resolve(_.Ms.get(T)):_.Pi.getTargetData(g,y)})(n,u,Fn(t)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(u,h.targetId).next((f=>{o=f}))})).next((()=>n.Fs.getDocumentsMatchingQuery(u,t,e?r:vt.min(),e?o:Mt()))).next((h=>(nx(n,lA(t),h),{documents:h,Qs:o})))))}function tx(i,t){const e=pt(i),n=pt(e.Pi),r=e.Ms.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",(o=>n.At(o,t).next((u=>u?u.target:null))))}function ex(i,t){const e=pt(i),n=e.Os.get(t)||vt.min();return e.persistence.runTransaction("Get new document changes","readonly",(r=>e.Ns.getAllFromCollectionGroup(r,t,w1(n,el),Number.MAX_SAFE_INTEGER))).then((r=>(nx(e,t,r),r)))}function nx(i,t,e){let n=i.Os.get(t)||vt.min();e.forEach(((r,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),i.Os.set(t,n)}const ix="firestore_clients";function yE(i,t){return`${ix}_${i}_${t}`}const sx="firestore_mutations";function _E(i,t,e){let n=`${sx}_${i}_${e}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}const rx="firestore_targets";function mp(i,t){return`${rx}_${i}_${t}`}const Qi="SharedClientState";class md{constructor(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}static Ws(t,e,n){const r=JSON.parse(n);let o,u=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new ut(r.error.code,r.error.message))),u?new md(t,e,r.state,o):(Re(Qi,`Failed to parse mutation state for ID '${e}': ${n}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class lc{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static Ws(t,e){const n=JSON.parse(e);let r,o=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return o&&n.error&&(o=typeof n.error.message=="string"&&typeof n.error.code=="string",o&&(r=new ut(n.error.code,n.error.message))),o?new lc(t,n.state,r):(Re(Qi,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class pd{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const n=JSON.parse(e);let r=typeof n=="object"&&n.activeTargetIds instanceof Array,o=Vy();for(let u=0;r&&u<n.activeTargetIds.length;++u)r=M1(n.activeTargetIds[u]),o=o.add(n.activeTargetIds[u]);return r?new pd(t,o):(Re(Qi,`Failed to parse client data for instance '${t}': ${e}`),null)}}class Ky{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new Ky(e.clientId,e.onlineState):(Re(Qi,`Failed to parse online state: ${t}`),null)}}class ry{constructor(){this.activeTargetIds=Vy()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class pp{constructor(t,e,n,r,o){this.window=t,this.Mi=e,this.persistenceKey=n,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ce(wt),this.started=!1,this.Xs=[];const u=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=yE(this.persistenceKey,this.Js),this.no=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new ry),this.ro=new RegExp(`^${ix}_${u}_([^_]*)$`),this.io=new RegExp(`^${sx}_${u}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${rx}_${u}_(\\d+)$`),this.oo=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this._o=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const n of t){if(n===this.Js)continue;const r=this.getItem(yE(this.persistenceKey,n));if(r){const o=pd.Ws(n,r);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const n=this.uo(e);n&&this.co(n)}for(const n of this.Xs)this.Ys(n);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach(((n,r)=>{r.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,n){this.ho(t,e,n),this.Po(t)}addLocalQueryTarget(t,e=!0){let n="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(mp(this.persistenceKey,t));if(r){const o=lc.Ws(t,r);o&&(n=o.state)}}return e&&this.To.zs(t),this.ao(),n}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(mp(this.persistenceKey,t))}updateQueryState(t,e,n){this.Io(t,e,n)}handleUserChange(t,e,n){e.forEach((r=>{this.Po(r)})),this.currentUser=t,n.forEach((r=>{this.addPendingMutation(r)}))}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return rt(Qi,"READ",t,e),e}setItem(t,e){rt(Qi,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){rt(Qi,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(rt(Qi,"EVENT",e.key,e.newValue),e.key===this.eo)return void Re("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const n=this.Ro(e.key);return this.Vo(n,null)}{const n=this.mo(e.key,e.newValue);if(n)return this.Vo(n.clientId,n)}}else if(this.io.test(e.key)){if(e.newValue!==null){const n=this.fo(e.key,e.newValue);if(n)return this.po(n)}}else if(this.so.test(e.key)){if(e.newValue!==null){const n=this.yo(e.key,e.newValue);if(n)return this.wo(n)}}else if(e.key===this.oo){if(e.newValue!==null){const n=this.uo(e.newValue);if(n)return this.co(n)}}else if(e.key===this.no){const n=(function(o){let u=wn.ce;if(o!=null)try{const h=JSON.parse(o);_t(typeof h=="number",30636,{So:o}),u=h}catch(h){Re(Qi,"Failed to read sequence number from WebStorage",h)}return u})(e.newValue);n!==wn.ce&&this.sequenceNumberHandler(n)}else if(e.key===this._o){const n=this.bo(e.newValue);await Promise.all(n.map((r=>this.syncEngine.Do(r))))}}}else this.Xs.push(e)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,n){const r=new md(this.currentUser,t,e,n),o=_E(this.persistenceKey,this.currentUser,t);this.setItem(o,r.Gs())}Po(t){const e=_E(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,n){const r=mp(this.persistenceKey,t),o=new lc(t,e,n);this.setItem(r,o.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const n=this.Ro(t);return pd.Ws(n,e)}fo(t,e){const n=this.io.exec(t),r=Number(n[1]),o=n[2]!==void 0?n[2]:null;return md.Ws(new Ze(o),r,e)}yo(t,e){const n=this.so.exec(t),r=Number(n[1]);return lc.Ws(r,e)}uo(t){return Ky.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);rt(Qi,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const n=e?this.Zs.insert(t,e):this.Zs.remove(t),r=this.lo(this.Zs),o=this.lo(n),u=[],h=[];return o.forEach((f=>{r.has(f)||u.push(f)})),r.forEach((f=>{o.has(f)||h.push(f)})),this.syncEngine.Fo(u,h).then((()=>{this.Zs=n}))}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=Vy();return t.forEach(((n,r)=>{e=e.unionWith(r.activeTargetIds)})),e}}class ax{constructor(){this.Mo=new ry,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,n){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new ry,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class lM{Oo(t){}shutdown(){}}const bE="ConnectivityMonitor";class vE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){rt(bE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){rt(bE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ef=null;function ay(){return Ef===null?Ef=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ef++,"0x"+Ef.toString(16)}const yp="RestConnection",uM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cM{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===rd?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(t,e,n,r,o){const u=ay(),h=this.zo(t,e.toUriEncodedString());rt(yp,`Sending RPC '${t}' ${u}:`,h,n);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,o);const{host:g}=new URL(h),y=_y(g);return this.Jo(t,h,f,n,y).then((_=>(rt(yp,`Received RPC '${t}' ${u}: `,_),_)),(_=>{throw Oa(yp,`RPC '${t}' ${u} failed with error: `,_,"url: ",h,"request:",n),_}))}Ho(t,e,n,r,o,u){return this.Go(t,e,n,r,o)}jo(t,e,n){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+vl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((r,o)=>t[o]=r)),n&&n.headers.forEach(((r,o)=>t[o]=r))}zo(t,e){const n=uM[t];return`${this.Uo}/v1/${e}:${n}`}terminate(){}}class hM{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const un="WebChannelConnection";class fM extends cM{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,n,r,o){const u=ay();return new Promise(((h,f)=>{const g=new p1;g.setWithCredentials(!0),g.listenOnce(y1.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Pf.NO_ERROR:const _=g.getResponseJson();rt(un,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(_)),h(_);break;case Pf.TIMEOUT:rt(un,`RPC '${t}' ${u} timed out`),f(new ut(J.DEADLINE_EXCEEDED,"Request time out"));break;case Pf.HTTP_ERROR:const T=g.getStatus();if(rt(un,`RPC '${t}' ${u} failed with status:`,T,"response text:",g.getResponseText()),T>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const D=S?.error;if(D&&D.status&&D.message){const C=(function(B){const j=B.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(j)>=0?j:J.UNKNOWN})(D.status);f(new ut(C,D.message))}else f(new ut(J.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ut(J.UNAVAILABLE,"Connection failed."));break;default:dt(9055,{l_:t,streamId:u,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{rt(un,`RPC '${t}' ${u} completed.`)}}));const y=JSON.stringify(r);rt(un,`RPC '${t}' ${u} sending request:`,r),g.send(e,"POST",y,n,15)}))}T_(t,e,n){const r=ay(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],u=v1(),h=b1(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,e,n),f.encodeInitMessageHeaders=!0;const y=o.join("");rt(un,`Creating RPC '${t}' stream ${r}: ${y}`,f);const _=u.createWebChannel(y,f);this.I_(_);let T=!1,S=!1;const D=new hM({Yo:M=>{S?rt(un,`Not sending because RPC '${t}' stream ${r} is closed:`,M):(T||(rt(un,`Opening RPC '${t}' stream ${r} transport.`),_.open(),T=!0),rt(un,`RPC '${t}' stream ${r} sending:`,M),_.send(M))},Zo:()=>_.close()}),C=(M,B,j)=>{M.listen(B,(K=>{try{j(K)}catch(it){setTimeout((()=>{throw it}),0)}}))};return C(_,Gu.EventType.OPEN,(()=>{S||(rt(un,`RPC '${t}' stream ${r} transport opened.`),D.o_())})),C(_,Gu.EventType.CLOSE,(()=>{S||(S=!0,rt(un,`RPC '${t}' stream ${r} transport closed`),D.a_(),this.E_(_))})),C(_,Gu.EventType.ERROR,(M=>{S||(S=!0,Oa(un,`RPC '${t}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),D.a_(new ut(J.UNAVAILABLE,"The operation could not be completed")))})),C(_,Gu.EventType.MESSAGE,(M=>{if(!S){const B=M.data[0];_t(!!B,16349);const j=B,K=j?.error||j[0]?.error;if(K){rt(un,`RPC '${t}' stream ${r} received error:`,K);const it=K.status;let Z=(function(w){const I=Be[w];if(I!==void 0)return TA(I)})(it),st=K.message;Z===void 0&&(Z=J.INTERNAL,st="Unknown error status: "+it+" with message "+K.message),S=!0,D.a_(new ut(Z,st)),_.close()}else rt(un,`RPC '${t}' stream ${r} received:`,B),D.u_(B)}})),C(h,_1.STAT_EVENT,(M=>{M.stat===zp.PROXY?rt(un,`RPC '${t}' stream ${r} detected buffering proxy`):M.stat===zp.NOPROXY&&rt(un,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{D.__()}),0),D}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function ox(){return typeof window<"u"?window:null}function Gf(){return typeof document<"u"?document:null}function Kd(i){return new yC(i,!0)}class lx{constructor(t,e,n=1e3,r=1.5,o=6e4){this.Mi=t,this.timerId=e,this.d_=n,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,e-n);r>0&&rt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const TE="PersistentStream";class ux{constructor(t,e,n,r,o,u,h,f){this.Mi=t,this.S_=n,this.b_=r,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lx(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===J.RESOURCE_EXHAUSTED?(Re(e.toString()),Re("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,r])=>{this.D_===e&&this.G_(n,r)}),(n=>{t((()=>{const r=new ut(J.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(r)}))}))}G_(t,e){const n=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{n((()=>this.z_(r)))})),this.stream.onMessage((r=>{n((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return rt(TE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(rt(TE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dM extends ux{constructor(t,e,n,r,o,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,u),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=vC(this.serializer,t),n=(function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?mn(u.readTime):vt.min()})(t);return this.listener.H_(e,n)}Y_(t){const e={};e.database=Jp(this.serializer),e.addTarget=(function(o,u){let h;const f=u.target;if(h=ad(f)?{documents:DA(o,f)}:{query:CA(o,f).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=AA(o,u.resumeToken);const g=$p(o,u.expectedCount);g!==null&&(h.expectedCount=g)}else if(u.snapshotVersion.compareTo(vt.min())>0){h.readTime=fl(o,u.snapshotVersion.toTimestamp());const g=$p(o,u.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,t);const n=EC(this.serializer,t);n&&(e.labels=n),this.q_(e)}Z_(t){const e={};e.database=Jp(this.serializer),e.removeTarget=t,this.q_(e)}}class gM extends ux{constructor(t,e,n,r,o,u){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return _t(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,_t(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){_t(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=TC(t.writeResults,t.commitTime),n=mn(t.commitTime);return this.listener.na(n,e)}ra(){const t={};t.database=Jp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((n=>ud(this.serializer,n)))};this.q_(e)}}class mM{}class pM extends mM{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ut(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(t,Zp(e,n),r,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ut(J.UNKNOWN,o.toString())}))}Ho(t,e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(t,Zp(e,n),r,u,h,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ut(J.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class yM{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Re(e),this.aa=!1):rt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ba="RemoteStore";class _M{constructor(t,e,n,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{n.enqueueAndForget((async()=>{Ha(this)&&(rt(Ba,"Restarting streams for network reachability change."),await(async function(f){const g=pt(f);g.Ea.add(4),await zc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Yd(g)})(this))}))})),this.Ra=new yM(n,r)}}async function Yd(i){if(Ha(i))for(const t of i.da)await t(!0)}async function zc(i){for(const t of i.da)await t(!1)}function Qd(i,t){const e=pt(i);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Xy(e)?Qy(e):Al(e).O_()&&Yy(e,t))}function gl(i,t){const e=pt(i),n=Al(e);e.Ia.delete(t),n.O_()&&cx(e,t),e.Ia.size===0&&(n.O_()?n.L_():Ha(e)&&e.Ra.set("Unknown"))}function Yy(i,t){if(i.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vt.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Al(i).Y_(t)}function cx(i,t){i.Va.Ue(t),Al(i).Z_(t)}function Qy(i){i.Va=new dC({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),Al(i).start(),i.Ra.ua()}function Xy(i){return Ha(i)&&!Al(i).x_()&&i.Ia.size>0}function Ha(i){return pt(i).Ea.size===0}function hx(i){i.Va=void 0}async function bM(i){i.Ra.set("Online")}async function vM(i){i.Ia.forEach(((t,e)=>{Yy(i,t)}))}async function TM(i,t){hx(i),Xy(i)?(i.Ra.ha(t),Qy(i)):i.Ra.set("Unknown")}async function EM(i,t,e){if(i.Ra.set("Online"),t instanceof SA&&t.state===2&&t.cause)try{await(async function(r,o){const u=o.cause;for(const h of o.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,u),r.Ia.delete(h),r.Va.removeTarget(h))})(i,t)}catch(n){rt(Ba,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await yd(i,n)}else if(t instanceof Hf?i.Va.Ze(t):t instanceof EA?i.Va.st(t):i.Va.tt(t),!e.isEqual(vt.min()))try{const n=await JA(i.localStore);e.compareTo(n)>=0&&await(function(o,u){const h=o.Va.Tt(u);return h.targetChanges.forEach(((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.Ia.get(g);y&&o.Ia.set(g,y.withResumeToken(f.resumeToken,u))}})),h.targetMismatches.forEach(((f,g)=>{const y=o.Ia.get(f);if(!y)return;o.Ia.set(f,y.withResumeToken(De.EMPTY_BYTE_STRING,y.snapshotVersion)),cx(o,f);const _=new Ss(y.target,f,g,y.sequenceNumber);Yy(o,_)})),o.remoteSyncer.applyRemoteEvent(h)})(i,e)}catch(n){rt(Ba,"Failed to raise snapshot:",n),await yd(i,n)}}async function yd(i,t,e){if(!Mr(t))throw t;i.Ea.add(1),await zc(i),i.Ra.set("Offline"),e||(e=()=>JA(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{rt(Ba,"Retrying IndexedDB access"),await e(),i.Ea.delete(1),await Yd(i)}))}function fx(i,t){return t().catch((e=>yd(i,e,t)))}async function Sl(i){const t=pt(i),e=Rr(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:wa;for(;SM(t);)try{const r=await oM(t.localStore,n);if(r===null){t.Ta.length===0&&e.L_();break}n=r.batchId,AM(t,r)}catch(r){await yd(t,r)}dx(t)&&gx(t)}function SM(i){return Ha(i)&&i.Ta.length<10}function AM(i,t){i.Ta.push(t);const e=Rr(i);e.O_()&&e.X_&&e.ea(t.mutations)}function dx(i){return Ha(i)&&!Rr(i).x_()&&i.Ta.length>0}function gx(i){Rr(i).start()}async function xM(i){Rr(i).ra()}async function wM(i){const t=Rr(i);for(const e of i.Ta)t.ea(e.mutations)}async function RM(i,t,e){const n=i.Ta.shift(),r=Py.from(n,t,e);await fx(i,(()=>i.remoteSyncer.applySuccessfulWrite(r))),await Sl(i)}async function IM(i,t){t&&Rr(i).X_&&await(async function(n,r){if((function(u){return cC(u)&&u!==J.ABORTED})(r.code)){const o=n.Ta.shift();Rr(n).B_(),await fx(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Sl(n)}})(i,t),dx(i)&&gx(i)}async function EE(i,t){const e=pt(i);e.asyncQueue.verifyOperationInProgress(),rt(Ba,"RemoteStore received new credentials");const n=Ha(e);e.Ea.add(3),await zc(e),n&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Yd(e)}async function oy(i,t){const e=pt(i);t?(e.Ea.delete(2),await Yd(e)):t||(e.Ea.add(2),await zc(e),e.Ra.set("Unknown"))}function Al(i){return i.ma||(i.ma=(function(e,n,r){const o=pt(e);return o.sa(),new dM(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(i.datastore,i.asyncQueue,{Xo:bM.bind(null,i),t_:vM.bind(null,i),r_:TM.bind(null,i),H_:EM.bind(null,i)}),i.da.push((async t=>{t?(i.ma.B_(),Xy(i)?Qy(i):i.Ra.set("Unknown")):(await i.ma.stop(),hx(i))}))),i.ma}function Rr(i){return i.fa||(i.fa=(function(e,n,r){const o=pt(e);return o.sa(),new gM(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:xM.bind(null,i),r_:IM.bind(null,i),ta:wM.bind(null,i),na:RM.bind(null,i)}),i.da.push((async t=>{t?(i.fa.B_(),await Sl(i)):(await i.fa.stop(),i.Ta.length>0&&(rt(Ba,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Wy{constructor(t,e,n,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,o){const u=Date.now()+n,h=new Wy(t,e,u,r,o);return h.start(n),h}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(J.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $y(i,t){if(Re("AsyncQueue",`${t}: ${i}`),Mr(i))return new ut(J.UNAVAILABLE,`${t}: ${i}`);throw i}class Wo{static emptySet(t){return new Wo(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||ht.comparator(e.key,n.key):(e,n)=>ht.comparator(e.key,n.key),this.keyedMap=Ku(),this.sortedSet=new ce(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Wo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=n.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new Wo;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class SE{constructor(){this.ga=new ce(ht.comparator)}track(t){const e=t.doc.key,n=this.ga.get(e);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(e,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(e):t.type===1&&n.type===2?this.ga=this.ga.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):dt(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,n)=>{t.push(n)})),t}}class ml{constructor(t,e,n,r,o,u,h,f,g){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(t,e,n,r,o){const u=[];return e.forEach((h=>{u.push({type:0,doc:h})})),new ml(t,e,Wo.emptySet(e),u,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}class DM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class CM{constructor(){this.queries=AE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const r=pt(e),o=r.queries;r.queries=AE(),o.forEach(((u,h)=>{for(const f of h.Sa)f.onError(n)}))})(this,new ut(J.ABORTED,"Firestore shutting down"))}}function AE(){return new Is((i=>oA(i)),Bd)}async function MM(i,t){const e=pt(i);let n=3;const r=t.query;let o=e.queries.get(r);o?!o.ba()&&t.Da()&&(n=2):(o=new DM,n=t.Da()?0:1);try{switch(n){case 0:o.wa=await e.onListen(r,!0);break;case 1:o.wa=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(u){const h=$y(u,`Initialization of query '${Go(t.query)}' failed`);return void t.onError(h)}e.queries.set(r,o),o.Sa.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&Zy(e)}async function VM(i,t){const e=pt(i),n=t.query;let r=3;const o=e.queries.get(n);if(o){const u=o.Sa.indexOf(t);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?r=t.Da()?0:1:!o.ba()&&t.Da()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function OM(i,t){const e=pt(i);let n=!1;for(const r of t){const o=r.query,u=e.queries.get(o);if(u){for(const h of u.Sa)h.Fa(r)&&(n=!0);u.wa=r}}n&&Zy(e)}function NM(i,t,e){const n=pt(i),r=n.queries.get(t);if(r)for(const o of r.Sa)o.onError(e);n.queries.delete(t)}function Zy(i){i.Ca.forEach((t=>{t.next()}))}var ly,xE;(xE=ly||(ly={})).Ma="default",xE.Cache="cache";class PM{constructor(t,e,n){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const r of t.docChanges)r.type!==3&&n.push(r);t=new ml(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const n=e!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=ml.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==ly.Cache}}class mx{constructor(t){this.key=t}}class px{constructor(t){this.key=t}}class kM{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mt(),this.mutatedKeys=Mt(),this.eu=uA(t),this.tu=new Wo(this.eu)}get nu(){return this.Ya}ru(t,e){const n=e?e.iu:new SE,r=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,u=r,h=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,g=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((y,_)=>{const T=r.get(y),S=Nc(this.query,_)?_:null,D=!!T&&this.mutatedKeys.has(T.key),C=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let M=!1;T&&S?T.data.isEqual(S.data)?D!==C&&(n.track({type:3,doc:S}),M=!0):this.su(T,S)||(n.track({type:2,doc:S}),M=!0,(f&&this.eu(S,f)>0||g&&this.eu(S,g)<0)&&(h=!0)):!T&&S?(n.track({type:0,doc:S}),M=!0):T&&!S&&(n.track({type:1,doc:T}),M=!0,(f||g)&&(h=!0)),M&&(S?(u=u.add(S),o=C?o.add(y):o.delete(y)):(u=u.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),o=o.delete(y.key),n.track({type:1,doc:y})}return{tu:u,iu:n,Cs:h,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const u=t.iu.ya();u.sort(((y,_)=>(function(S,D){const C=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt(20277,{Rt:M})}};return C(S)-C(D)})(y.type,_.type)||this.eu(y.doc,_.doc))),this.ou(n),r=r??!1;const h=e&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,g=f!==this.Za;return this.Za=f,u.length!==0||g?{snapshot:new ml(this.query,t.tu,o,u,t.mutatedKeys,f===0,g,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new SE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Mt(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const e=[];return t.forEach((n=>{this.Xa.has(n)||e.push(new px(n))})),this.Xa.forEach((n=>{t.has(n)||e.push(new mx(n))})),e}cu(t){this.Ya=t.Qs,this.Xa=Mt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const xl="SyncEngine";class zM{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class LM{constructor(t){this.key=t,this.hu=!1}}class BM{constructor(t,e,n,r,o,u){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Is((h=>oA(h)),Bd),this.Iu=new Map,this.Eu=new Set,this.du=new ce(ht.comparator),this.Au=new Map,this.Ru=new jy,this.Vu={},this.mu=new Map,this.fu=La.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UM(i,t,e=!0){const n=Xd(i);let r;const o=n.Tu.get(t);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await yx(n,t,e,!0),r}async function jM(i,t){const e=Xd(i);await yx(e,t,!0,!1)}async function yx(i,t,e,n){const r=await gd(i.localStore,Fn(t)),o=r.targetId,u=i.sharedClientState.addLocalQueryTarget(o,e);let h;return n&&(h=await Jy(i,t,o,u==="current",r.resumeToken)),i.isPrimaryClient&&e&&Qd(i.remoteStore,r),h}async function Jy(i,t,e,n,r){i.pu=(_,T,S)=>(async function(C,M,B,j){let K=M.view.ru(B);K.Cs&&(K=await sy(C.localStore,M.query,!1).then((({documents:R})=>M.view.ru(R,K))));const it=j&&j.targetChanges.get(M.targetId),Z=j&&j.targetMismatches.get(M.targetId)!=null,st=M.view.applyChanges(K,C.isPrimaryClient,it,Z);return uy(C,M.targetId,st.au),st.snapshot})(i,_,T,S);const o=await sy(i.localStore,t,!0),u=new kM(t,o.Qs),h=u.ru(o.documents),f=kc.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",r),g=u.applyChanges(h,i.isPrimaryClient,f);uy(i,e,g.au);const y=new zM(t,e,u);return i.Tu.set(t,y),i.Iu.has(e)?i.Iu.get(e).push(t):i.Iu.set(e,[t]),g.snapshot}async function FM(i,t,e){const n=pt(i),r=n.Tu.get(t),o=n.Iu.get(r.targetId);if(o.length>1)return n.Iu.set(r.targetId,o.filter((u=>!Bd(u,t)))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await dl(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),e&&gl(n.remoteStore,r.targetId),pl(n,r.targetId)})).catch(Cr)):(pl(n,r.targetId),await dl(n.localStore,r.targetId,!0))}async function HM(i,t){const e=pt(i),n=e.Tu.get(t),r=e.Iu.get(n.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),gl(e.remoteStore,n.targetId))}async function qM(i,t,e){const n=i_(i);try{const r=await(function(u,h){const f=pt(u),g=$t.now(),y=h.reduce(((S,D)=>S.add(D.key)),Mt());let _,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let D=jn(),C=Mt();return f.Ns.getEntries(S,y).next((M=>{D=M,D.forEach(((B,j)=>{j.isValidDocument()||(C=C.add(B))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,D))).next((M=>{_=M;const B=[];for(const j of h){const K=lC(j,_.get(j.key).overlayedDocument);K!=null&&B.push(new Vr(j.key,K,$1(K.value.mapValue),Rn.exists(!0)))}return f.mutationQueue.addMutationBatch(S,g,B,h)})).next((M=>{T=M;const B=M.applyToLocalDocumentSet(_,C);return f.documentOverlayCache.saveOverlays(S,M.batchId,B)}))})).then((()=>({batchId:T.batchId,changes:hA(_)})))})(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),(function(u,h,f){let g=u.Vu[u.currentUser.toKey()];g||(g=new ce(wt)),g=g.insert(h,f),u.Vu[u.currentUser.toKey()]=g})(n,r.batchId,e),await Or(n,r.changes),await Sl(n.remoteStore)}catch(r){const o=$y(r,"Failed to persist write");e.reject(o)}}async function _x(i,t){const e=pt(i);try{const n=await rM(e.localStore,t);t.targetChanges.forEach(((r,o)=>{const u=e.Au.get(o);u&&(_t(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?_t(u.hu,14607):r.removedDocuments.size>0&&(_t(u.hu,42227),u.hu=!1))})),await Or(e,n,t)}catch(n){await Cr(n)}}function wE(i,t,e){const n=pt(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const r=[];n.Tu.forEach(((o,u)=>{const h=u.view.va(t);h.snapshot&&r.push(h.snapshot)})),(function(u,h){const f=pt(u);f.onlineState=h;let g=!1;f.queries.forEach(((y,_)=>{for(const T of _.Sa)T.va(h)&&(g=!0)})),g&&Zy(f)})(n.eventManager,t),r.length&&n.Pu.H_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function GM(i,t,e){const n=pt(i);n.sharedClientState.updateQueryState(t,"rejected",e);const r=n.Au.get(t),o=r&&r.key;if(o){let u=new ce(ht.comparator);u=u.insert(o,Ee.newNoDocument(o,vt.min()));const h=Mt().add(o),f=new Pc(vt.min(),new Map,new ce(wt),u,h);await _x(n,f),n.du=n.du.remove(o),n.Au.delete(t),n_(n)}else await dl(n.localStore,t,!1).then((()=>pl(n,t,e))).catch(Cr)}async function KM(i,t){const e=pt(i),n=t.batch.batchId;try{const r=await sM(e.localStore,t);e_(e,n,null),t_(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await Or(e,r)}catch(r){await Cr(r)}}async function YM(i,t,e){const n=pt(i);try{const r=await(function(u,h){const f=pt(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return f.mutationQueue.lookupMutationBatch(g,h).next((_=>(_t(_!==null,37113),y=_.keys(),f.mutationQueue.removeMutationBatch(g,_)))).next((()=>f.mutationQueue.performConsistencyCheck(g))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(g,y,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>f.localDocuments.getDocuments(g,y)))}))})(n.localStore,t);e_(n,t,e),t_(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await Or(n,r)}catch(r){await Cr(r)}}function t_(i,t){(i.mu.get(t)||[]).forEach((e=>{e.resolve()})),i.mu.delete(t)}function e_(i,t,e){const n=pt(i);let r=n.Vu[n.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),n.Vu[n.currentUser.toKey()]=r}}function pl(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const n of i.Iu.get(t))i.Tu.delete(n),e&&i.Pu.yu(n,e);i.Iu.delete(t),i.isPrimaryClient&&i.Ru.jr(t).forEach((n=>{i.Ru.containsKey(n)||bx(i,n)}))}function bx(i,t){i.Eu.delete(t.path.canonicalString());const e=i.du.get(t);e!==null&&(gl(i.remoteStore,e),i.du=i.du.remove(t),i.Au.delete(e),n_(i))}function uy(i,t,e){for(const n of e)n instanceof mx?(i.Ru.addReference(n.key,t),QM(i,n)):n instanceof px?(rt(xl,"Document no longer in limbo: "+n.key),i.Ru.removeReference(n.key,t),i.Ru.containsKey(n.key)||bx(i,n.key)):dt(19791,{wu:n})}function QM(i,t){const e=t.key,n=e.path.canonicalString();i.du.get(e)||i.Eu.has(n)||(rt(xl,"New document in limbo: "+e),i.Eu.add(n),n_(i))}function n_(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const e=new ht(Wt.fromString(t)),n=i.fu.next();i.Au.set(n,new LM(e)),i.du=i.du.insert(e,n),Qd(i.remoteStore,new Ss(Fn(Ld(e.path)),n,"TargetPurposeLimboResolution",wn.ce))}}async function Or(i,t,e){const n=pt(i),r=[],o=[],u=[];n.Tu.isEmpty()||(n.Tu.forEach(((h,f)=>{u.push(n.pu(f,t,e).then((g=>{if((g||e)&&n.isPrimaryClient){const y=g?!g.fromCache:e?.targetChanges.get(f.targetId)?.current;n.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(g){r.push(g);const y=qy.As(f.targetId,g);o.push(y)}})))})),await Promise.all(u),n.Pu.H_(r),await(async function(f,g){const y=pt(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>F.forEach(g,(T=>F.forEach(T.Es,(S=>y.persistence.referenceDelegate.addReference(_,T.targetId,S))).next((()=>F.forEach(T.ds,(S=>y.persistence.referenceDelegate.removeReference(_,T.targetId,S)))))))))}catch(_){if(!Mr(_))throw _;rt(Gy,"Failed to update sequence numbers: "+_)}for(const _ of g){const T=_.targetId;if(!_.fromCache){const S=y.Ms.get(T),D=S.snapshotVersion,C=S.withLastLimboFreeSnapshotVersion(D);y.Ms=y.Ms.insert(T,C)}}})(n.localStore,o))}async function XM(i,t){const e=pt(i);if(!e.currentUser.isEqual(t)){rt(xl,"User change. New user:",t.toKey());const n=await ZA(e.localStore,t);e.currentUser=t,(function(o,u){o.mu.forEach((h=>{h.forEach((f=>{f.reject(new ut(J.CANCELLED,u))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Or(e,n.Ls)}}function WM(i,t){const e=pt(i),n=e.Au.get(t);if(n&&n.hu)return Mt().add(n.key);{let r=Mt();const o=e.Iu.get(t);if(!o)return r;for(const u of o){const h=e.Tu.get(u);r=r.unionWith(h.view.nu)}return r}}async function $M(i,t){const e=pt(i),n=await sy(e.localStore,t.query,!0),r=t.view.cu(n);return e.isPrimaryClient&&uy(e,t.targetId,r.au),r}async function ZM(i,t){const e=pt(i);return ex(e.localStore,t).then((n=>Or(e,n)))}async function JM(i,t,e,n){const r=pt(i),o=await(function(h,f){const g=pt(h),y=pt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(_=>y.er(_,f).next((T=>T?g.localDocuments.getDocuments(_,T):F.resolve(null)))))})(r.localStore,t);o!==null?(e==="pending"?await Sl(r.remoteStore):e==="acknowledged"||e==="rejected"?(e_(r,t,n||null),t_(r,t),(function(h,f){pt(pt(h).mutationQueue).ir(f)})(r.localStore,t)):dt(6720,"Unknown batchState",{Su:e}),await Or(r,o)):rt(xl,"Cannot apply mutation batch with id: "+t)}async function tV(i,t){const e=pt(i);if(Xd(e),i_(e),t===!0&&e.gu!==!0){const n=e.sharedClientState.getAllActiveQueryTargets(),r=await RE(e,n.toArray());e.gu=!0,await oy(e.remoteStore,!0);for(const o of r)Qd(e.remoteStore,o)}else if(t===!1&&e.gu!==!1){const n=[];let r=Promise.resolve();e.Iu.forEach(((o,u)=>{e.sharedClientState.isLocalQueryTarget(u)?n.push(u):r=r.then((()=>(pl(e,u),dl(e.localStore,u,!0)))),gl(e.remoteStore,u)})),await r,await RE(e,n),(function(u){const h=pt(u);h.Au.forEach(((f,g)=>{gl(h.remoteStore,g)})),h.Ru.Jr(),h.Au=new Map,h.du=new ce(ht.comparator)})(e),e.gu=!1,await oy(e.remoteStore,!1)}}async function RE(i,t,e){const n=pt(i),r=[],o=[];for(const u of t){let h;const f=n.Iu.get(u);if(f&&f.length!==0){h=await gd(n.localStore,Fn(f[0]));for(const g of f){const y=n.Tu.get(g),_=await $M(n,y);_.snapshot&&o.push(_.snapshot)}}else{const g=await tx(n.localStore,u);h=await gd(n.localStore,g),await Jy(n,vx(g),u,!1,h.resumeToken)}r.push(h)}return n.Pu.H_(o),r}function vx(i){return rA(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function eV(i){return(function(e){return pt(pt(e).persistence).Ts()})(pt(i).localStore)}async function nV(i,t,e,n){const r=pt(i);if(r.gu)return void rt(xl,"Ignoring unexpected query state notification.");const o=r.Iu.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const u=await ex(r.localStore,lA(o[0])),h=Pc.createSynthesizedRemoteEventForCurrentChange(t,e==="current",De.EMPTY_BYTE_STRING);await Or(r,u,h);break}case"rejected":await dl(r.localStore,t,!0),pl(r,t,n);break;default:dt(64155,e)}}async function iV(i,t,e){const n=Xd(i);if(n.gu){for(const r of t){if(n.Iu.has(r)&&n.sharedClientState.isActiveQueryTarget(r)){rt(xl,"Adding an already active target "+r);continue}const o=await tx(n.localStore,r),u=await gd(n.localStore,o);await Jy(n,vx(o),u.targetId,!1,u.resumeToken),Qd(n.remoteStore,u)}for(const r of e)n.Iu.has(r)&&await dl(n.localStore,r,!1).then((()=>{gl(n.remoteStore,r),pl(n,r)})).catch(Cr)}}function Xd(i){const t=pt(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=_x.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=WM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=GM.bind(null,t),t.Pu.H_=OM.bind(null,t.eventManager),t.Pu.yu=NM.bind(null,t.eventManager),t}function i_(i){const t=pt(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=KM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=YM.bind(null,t),t}class wc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Kd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return $A(this.persistence,new WA,t.initialUser,this.serializer)}Cu(t){return new Fy(Gd.mi,this.serializer)}Du(t){return new ax}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wc.provider={build:()=>new wc};class sV extends wc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){_t(this.persistence.referenceDelegate instanceof dd,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new qA(n,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Fy((n=>dd.mi(n,e)),this.serializer)}}class rV extends wc{constructor(t,e,n){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await i_(this.xu.syncEngine),await Sl(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return $A(this.persistence,new WA,t.initialUser,this.serializer)}Fu(t,e){const n=this.persistence.referenceDelegate.garbageCollector;return new qA(n,t.asyncQueue,e)}Mu(t,e){const n=new cD(e,this.persistence);return new uD(t.asyncQueue,n)}Cu(t){const e=XA(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new Hy(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,ox(),Gf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new ax}}class aV extends rV{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof pp&&(this.sharedClientState.syncEngine={Co:JM.bind(null,e),vo:nV.bind(null,e),Fo:iV.bind(null,e),Ts:eV.bind(null,e),Do:ZM.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji((async n=>{await tV(this.xu.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Du(t){const e=ox();if(!pp.v(e))throw new ut(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=XA(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new pp(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class _d{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>wE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=XM.bind(null,this.syncEngine),await oy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new CM})()}createDatastore(t){const e=Kd(t.databaseInfo.databaseId),n=(function(o){return new fM(o)})(t.databaseInfo);return(function(o,u,h,f){return new pM(o,u,h,f)})(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return(function(n,r,o,u,h){return new _M(n,r,o,u,h)})(this.localStore,this.datastore,t.asyncQueue,(e=>wE(this.syncEngine,e,0)),(function(){return vE.v()?new vE:new lM})())}createSyncEngine(t,e){return(function(r,o,u,h,f,g,y){const _=new BM(r,o,u,h,f,g);return y&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const n=pt(e);rt(Ba,"RemoteStore shutting down."),n.Ea.add(5),await zc(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_d.provider={build:()=>new _d};class oV{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Re("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const Ir="FirestoreClient";class lV{constructor(t,e,n,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Ze.UNAUTHENTICATED,this.clientId=Ty.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async u=>{rt(Ir,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(n,(u=>(rt(Ir,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=$y(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function _p(i,t){i.asyncQueue.verifyOperationInProgress(),rt(Ir,"Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener((async r=>{n.isEqual(r)||(await ZA(t.localStore,r),n=r)})),t.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=t}async function IE(i,t){i.asyncQueue.verifyOperationInProgress();const e=await uV(i);rt(Ir,"Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener((n=>EE(t.remoteStore,n))),i.setAppCheckTokenChangeListener(((n,r)=>EE(t.remoteStore,r))),i._onlineComponents=t}async function uV(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){rt(Ir,"Using user provided OfflineComponentProvider");try{await _p(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(r){return r.name==="FirebaseError"?r.code===J.FAILED_PRECONDITION||r.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(e))throw e;Oa("Error using user provided cache. Falling back to memory cache: "+e),await _p(i,new wc)}}else rt(Ir,"Using default OfflineComponentProvider"),await _p(i,new sV(void 0));return i._offlineComponents}async function Tx(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(rt(Ir,"Using user provided OnlineComponentProvider"),await IE(i,i._uninitializedComponentsProvider._online)):(rt(Ir,"Using default OnlineComponentProvider"),await IE(i,new _d))),i._onlineComponents}function cV(i){return Tx(i).then((t=>t.syncEngine))}async function DE(i){const t=await Tx(i),e=t.eventManager;return e.onListen=UM.bind(null,t.syncEngine),e.onUnlisten=FM.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=jM.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=HM.bind(null,t.syncEngine),e}function Ex(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}const CE=new Map;const Sx="firestore.googleapis.com",ME=!0;class VE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ut(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sx,this.ssl=ME}else this.host=t.host,this.ssl=t.ssl??ME;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=UA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<LC)throw new ut(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}aD("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ex(t.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ut(J.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ut(J.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ut(J.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,r){return n.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Wd{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ut(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new WI;switch(n.type){case"firstParty":return new tD(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ut(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const n=CE.get(e);n&&(rt("ComponentProvider","Removing Datastore"),CE.delete(e),n.terminate())})(this),Promise.resolve()}}function hV(i,t,e,n={}){i=xa(i,Wd);const r=_y(t),o=i._getSettings(),u={...o,emulatorOptions:i._getEmulatorOptions()},h=`${t}:${e}`;r&&(RR(`https://${h}`),MR("Firestore",!0)),o.host!==Sx&&o.host!==h&&Oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:h,ssl:r,emulatorOptions:n};if(!Zf(f,u)&&(i._setSettings(f),n.mockUserToken)){let g,y;if(typeof n.mockUserToken=="string")g=n.mockUserToken,y=Ze.MOCK_USER;else{g=IR(n.mockUserToken,i._app?.options.projectId);const _=n.mockUserToken.sub||n.mockUserToken.user_id;if(!_)throw new ut(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ze(_)}i._authCredentials=new $I(new E1(g,y))}}class qa{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new qa(this.firestore,t,this._query)}}class Ge{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ge(this.firestore,t,this._key)}toJSON(){return{type:Ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,n){if(Mc(e,Ge._jsonSchema))return new Ge(t,n||null,new ht(Wt.fromString(e.referencePath)))}}Ge._jsonSchemaVersion="firestore/documentReference/1.0",Ge._jsonSchema={type:Ue("string",Ge._jsonSchemaVersion),referencePath:Ue("string")};class Er extends qa{constructor(t,e,n){super(t,e,Ld(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ge(this.firestore,null,new ht(t))}withConverter(t){return new Er(this.firestore,t,this._path)}}function Ax(i,t,...e){if(i=Ma(i),A1("collection","path",t),i instanceof Wd){const n=Wt.fromString(t,...e);return TT(n),new Er(i,null,n)}{if(!(i instanceof Ge||i instanceof Er))throw new ut(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Wt.fromString(t,...e));return TT(n),new Er(i.firestore,null,n)}}function xx(i,t,...e){if(i=Ma(i),arguments.length===1&&(t=Ty.newId()),A1("doc","path",t),i instanceof Wd){const n=Wt.fromString(t,...e);return vT(n),new Ge(i,null,new ht(n))}{if(!(i instanceof Ge||i instanceof Er))throw new ut(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Wt.fromString(t,...e));return vT(n),new Ge(i.firestore,i instanceof Er?i.converter:null,new ht(n))}}const OE="AsyncQueue";class NE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lx(this,"async_queue_retry"),this._c=()=>{const n=Gf();n&&rt(OE,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const e=Gf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Gf();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new vr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Mr(t))throw t;rt(OE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((n=>{throw this.nc=n,this.rc=!1,Re("INTERNAL UNHANDLED ERROR: ",PE(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=e,e}enqueueAfterDelay(t,e,n){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const r=Wy.createAndSchedule(this,t,e,n,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&dt(47125,{Pc:PE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,n)=>e.targetTimeMs-n.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function PE(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}function kE(i){return(function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const o of n)if(o in r&&typeof r[o]=="function")return!0;return!1})(i,["next","error","complete"])}class yl extends Wd{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new NE,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new NE(t),this._firestoreClient=void 0,await t}}}function fV(i,t){const e=typeof i=="object"?i:zI(),n=typeof i=="string"?i:rd,r=VI(e,"firestore").getImmediate({identifier:n});if(!r._initialized){const o=xR("firestore");o&&hV(r,...o)}return r}function wx(i){if(i._terminated)throw new ut(J.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||Rx(i),i._firestoreClient}function Rx(i){const t=i._freezeSettings(),e=(function(r,o,u,h){return new LD(r,o,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Ex(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,t);i._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new lV(i._authCredentials,i._appCheckCredentials,i._queue,e,i._componentsProvider&&(function(r){const o=r?._online.build();return{_offline:r?._offline.build(o),_online:o}})(i._componentsProvider))}async function dV(i){Oa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();gV(i,_d.provider,{build:e=>new aV(e,t.cacheSizeBytes)})}function gV(i,t,e){if((i=xa(i,yl))._firestoreClient||i._terminated)throw new ut(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new ut(J.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:t,_offline:e},Rx(i)}class si{constructor(t){this._byteString=t}static fromBase64String(t){try{return new si(De.fromBase64String(t))}catch(e){throw new ut(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new si(De.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:si._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Mc(t,si._jsonSchema))return si.fromBase64String(t.bytes)}}si._jsonSchemaVersion="firestore/bytes/1.0",si._jsonSchema={type:Ue("string",si._jsonSchemaVersion),bytes:Ue("string")};class s_{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ut(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new be(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Ix{constructor(t){this._methodName=t}}class $i{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ut(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ut(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return wt(this._lat,t._lat)||wt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$i._jsonSchemaVersion}}static fromJSON(t){if(Mc(t,$i._jsonSchema))return new $i(t.latitude,t.longitude)}}$i._jsonSchemaVersion="firestore/geoPoint/1.0",$i._jsonSchema={type:Ue("string",$i._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};class Zi{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,r){if(n.length!==r.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==r[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Mc(t,Zi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Zi(t.vectorValues);throw new ut(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zi._jsonSchemaVersion="firestore/vectorValue/1.0",Zi._jsonSchema={type:Ue("string",Zi._jsonSchemaVersion),vectorValues:Ue("object")};const mV=/^__.*__$/;class pV{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new Vr(t,this.data,this.fieldMask,e,this.fieldTransforms):new El(t,this.data,e,this.fieldTransforms)}}function Dx(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt(40011,{Ac:i})}}class r_{constructor(t,e,n,r,o,u){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new r_({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),n=this.Vc({path:e,fc:!1});return n.gc(t),n}yc(t){const e=this.path?.child(t),n=this.Vc({path:e,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return bd(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Dx(this.Ac)&&mV.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class yV{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Kd(t)}Cc(t,e,n,r=!1){return new r_({Ac:t,methodName:e,Dc:n,path:be.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cx(i){const t=i._freezeSettings(),e=Kd(i._databaseId);return new yV(i._databaseId,!!t.ignoreUndefinedProperties,e)}function _V(i,t,e,n,r,o={}){const u=i.Cc(o.merge||o.mergeFields?2:0,t,e,r);Ox("Data must be an object, but it was:",u,n);const h=Mx(n,u);let f,g;if(o.merge)f=new ri(u.fieldMask),g=u.fieldTransforms;else if(o.mergeFields){const y=[];for(const _ of o.mergeFields){const T=vV(t,_,e);if(!u.contains(T))throw new ut(J.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);EV(y,T)||y.push(T)}f=new ri(y),g=u.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,g=u.fieldTransforms;return new pV(new An(h),f,g)}function bV(i,t,e,n=!1){return a_(e,i.Cc(n?4:3,t))}function a_(i,t){if(Vx(i=Ma(i)))return Ox("Unsupported field value:",t,i),Mx(i,t);if(i instanceof Ix)return(function(n,r){if(!Dx(r.Ac))throw r.Sc(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(n,r){const o=[];let u=0;for(const h of n){let f=a_(h,r.wc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}})(i,t)}return(function(n,r){if((n=Ma(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return eC(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=$t.fromDate(n);return{timestampValue:fl(r.serializer,o)}}if(n instanceof $t){const o=new $t(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:fl(r.serializer,o)}}if(n instanceof $i)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof si)return{bytesValue:AA(r.serializer,n._byteString)};if(n instanceof Ge){const o=r.databaseId,u=n.firestore._databaseId;if(!u.isEqual(o))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ly(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Zi)return(function(u,h){return{mapValue:{fields:{[Dy]:{stringValue:Cy},[al]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return Oy(h.serializer,g)}))}}}}}})(n,r);throw r.Sc(`Unsupported field value: ${Cd(n)}`)})(i,t)}function Mx(i,t){const e={};return F1(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fa(i,((n,r)=>{const o=a_(r,t.mc(n));o!=null&&(e[n]=o)})),{mapValue:{fields:e}}}function Vx(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof $t||i instanceof $i||i instanceof si||i instanceof Ge||i instanceof Ix||i instanceof Zi)}function Ox(i,t,e){if(!Vx(e)||!x1(e)){const n=Cd(e);throw n==="an object"?t.Sc(i+" a custom object"):t.Sc(i+" "+n)}}function vV(i,t,e){if((t=Ma(t))instanceof s_)return t._internalPath;if(typeof t=="string")return Nx(i,t);throw bd("Field path arguments must be of type string or ",i,!1,void 0,e)}const TV=new RegExp("[~\\*/\\[\\]]");function Nx(i,t,e){if(t.search(TV)>=0)throw bd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new s_(...t.split("."))._internalPath}catch{throw bd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function bd(i,t,e,n,r){const o=n&&!n.isEmpty(),u=r!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${n}`),u&&(f+=` in document ${r}`),f+=")"),new ut(J.INVALID_ARGUMENT,h+i+f)}function EV(i,t){return i.some((e=>e.isEqual(t)))}class Px{constructor(t,e,n,r,o){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new SV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(o_("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class SV extends Px{data(){return super.data()}}function o_(i,t){return typeof t=="string"?Nx(i,t):t instanceof s_?t._internalPath:t._delegate._internalPath}function AV(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ut(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l_{}class kx extends l_{}function xV(i,t,...e){let n=[];t instanceof l_&&n.push(t),n=n.concat(e),(function(o){const u=o.filter((f=>f instanceof c_)).length,h=o.filter((f=>f instanceof u_)).length;if(u>1||u>0&&h>0)throw new ut(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const r of n)i=r._apply(i);return i}class u_ extends kx{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new u_(t,e,n)}_apply(t){const e=this._parse(t);return zx(t._query,e),new qa(t.firestore,t.converter,Xp(t._query,e))}_parse(t){const e=Cx(t.firestore);return(function(o,u,h,f,g,y,_){let T;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ut(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){LE(_,y);const D=[];for(const C of _)D.push(zE(f,o,C));T={arrayValue:{values:D}}}else T=zE(f,o,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||LE(_,y),T=bV(h,u,_,y==="in"||y==="not-in");return Lt.create(g,y,T)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class c_ extends l_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new c_(t,e)}_parse(t){const e=this._queryConstraints.map((n=>n._parse(t))).filter((n=>n.getFilters().length>0));return e.length===1?e[0]:ne.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(r,o){let u=r;const h=o.getFlattenedFilters();for(const f of h)zx(u,f),u=Xp(u,f)})(t._query,e),new qa(t.firestore,t.converter,Xp(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class h_ extends kx{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new h_(t,e)}_apply(t){const e=(function(r,o,u){if(r.startAt!==null)throw new ut(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ut(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sc(o,u)})(t._query,this._field,this._direction);return new qa(t.firestore,t.converter,(function(r,o){const u=r.explicitOrderBy.concat([o]);return new Tl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(t._query,e))}}function wV(i,t="asc"){const e=t,n=o_("orderBy",i);return h_._create(n,e)}function zE(i,t,e){if(typeof(e=Ma(e))=="string"){if(e==="")throw new ut(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aA(t)&&e.indexOf("/")!==-1)throw new ut(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const n=t.path.child(Wt.fromString(e));if(!ht.isDocumentKey(n))throw new ut(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Tc(i,new ht(n))}if(e instanceof Ge)return Tc(i,e._key);throw new ut(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cd(e)}.`)}function LE(i,t){if(!Array.isArray(i)||i.length===0)throw new ut(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function zx(i,t){const e=(function(r,o){for(const u of r)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(i.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new ut(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ut(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class RV{convertValue(t,e="none"){switch(xr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _e(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Rs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw dt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Fa(t,((r,o)=>{n[r]=this.convertValue(o,e)})),n}convertVectorValue(t){const e=t.fields?.[al].arrayValue?.values?.map((n=>_e(n.doubleValue)));return new Zi(e)}convertGeoPoint(t){return new $i(_e(t.latitude),_e(t.longitude))}convertArray(t,e){return(t.values||[]).map((n=>this.convertValue(n,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=kd(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(bc(t));default:return null}}convertTimestamp(t){const e=ws(t);return new $t(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Wt.fromString(t);_t(NA(n),9688,{name:t});const r=new Na(n.get(1),n.get(3)),o=new ht(n.popFirst(5));return r.isEqual(e)||Re(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}function IV(i,t,e){let n;return n=i?i.toFirestore(t):t,n}class Xu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Da extends Px{constructor(t,e,n,r,o,u){super(t,e,n,r,u),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Kf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(o_("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Da._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Da._jsonSchemaVersion="firestore/documentSnapshot/1.0",Da._jsonSchema={type:Ue("string",Da._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class Kf extends Da{data(t={}){return super.data(t)}}class $o{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Xu(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Kf(this._firestore,this._userDataWriter,n.key,n,new Xu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ut(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((h=>{const f=new Kf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Xu(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const f=new Kf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Xu(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return h.type!==0&&(g=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:DV(h.type),doc:f,oldIndex:g,newIndex:y}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=$o._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Ty.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],n=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function DV(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt(61501,{type:i})}}$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:Ue("string",$o._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class Lx extends RV{constructor(t){super(),this.firestore=t}convertBytes(t){return new si(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ge(this.firestore,null,e)}}function CV(i){return Bx(xa(i.firestore,yl),[new Fd(i._key,Rn.none())])}function MV(i,t){const e=xa(i.firestore,yl),n=xx(i),r=IV(i.converter,t);return Bx(e,[_V(Cx(i.firestore),"addDoc",n._key,r,i.converter!==null,{}).toMutation(n._key,Rn.exists(!1))]).then((()=>n))}function VV(i,...t){i=Ma(i);let e={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||kE(t[n])||(e=t[n++]);const r={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(kE(t[n])){const f=t[n];t[n]=f.next?.bind(f),t[n+1]=f.error?.bind(f),t[n+2]=f.complete?.bind(f)}let o,u,h;if(i instanceof Ge)u=xa(i.firestore,yl),h=Ld(i._key.path),o={next:f=>{t[n]&&t[n](OV(u,i,f))},error:t[n+1],complete:t[n+2]};else{const f=xa(i,qa);u=xa(f.firestore,yl),h=f._query;const g=new Lx(u);o={next:y=>{t[n]&&t[n](new $o(u,g,f,y))},error:t[n+1],complete:t[n+2]},AV(i._query)}return(function(g,y,_,T){const S=new oV(T),D=new PM(y,S,_);return g.asyncQueue.enqueueAndForget((async()=>MM(await DE(g),D))),()=>{S.Nu(),g.asyncQueue.enqueueAndForget((async()=>VM(await DE(g),D)))}})(wx(u),h,r,o)}function Bx(i,t){return(function(n,r){const o=new vr;return n.asyncQueue.enqueueAndForget((async()=>qM(await cV(n),r,o))),o.promise})(wx(i),t)}function OV(i,t,e){const n=e.docs.get(t._key),r=new Lx(i);return new Da(i,r,t._key,n,new Xu(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){vl=r})(kI),td(new fc("firestore",((n,{instanceIdentifier:r,options:o})=>{const u=n.getProvider("app").getImmediate(),h=new yl(new ZI(n.getProvider("auth-internal")),new eD(u,n.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ut(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Na(g.options.projectId,y)})(u,r),u);return o={useFetchStreams:e,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),Xo(pT,yT,t),Xo(pT,yT,"esm2020")})();const NV={apiKey:"AIzaSyDoPUzOwMfesfjp-Rjp8yWLEu57G6CYxvk",authDomain:"expenses-64ed1.firebaseapp.com",projectId:"expenses-64ed1",storageBucket:"expenses-64ed1.firebasestorage.app",messagingSenderId:"159598256090",appId:"1:159598256090:web:528d571c390e5870c9eae3"},PV=f1(NV),Lc=fV(PV);dV(Lc).catch(i=>{i.code=="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a a time."):i.code=="unimplemented"&&console.warn("The current browser does not support all of the features required to enable persistence")});const kV=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zV=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),BE=i=>{const t=zV(i);return t.charAt(0).toUpperCase()+t.slice(1)},Ux=(...i)=>i.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),LV=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var BV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const UV=Yt.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:r="",children:o,iconNode:u,...h},f)=>Yt.createElement("svg",{ref:f,...BV,width:t,height:t,stroke:i,strokeWidth:n?Number(e)*24/Number(t):e,className:Ux("lucide",r),...!o&&!LV(h)&&{"aria-hidden":"true"},...h},[...u.map(([g,y])=>Yt.createElement(g,y)),...Array.isArray(o)?o:[o]]));const $d=(i,t)=>{const e=Yt.forwardRef(({className:n,...r},o)=>Yt.createElement(UV,{ref:o,iconNode:t,className:Ux(`lucide-${kV(BE(i))}`,`lucide-${i}`,n),...r}));return e.displayName=BE(i),e};const jV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],FV=$d("circle-plus",jV);const HV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],qV=$d("loader-circle",HV);const GV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],KV=$d("log-out",GV);const YV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],QV=$d("trash-2",YV),XV=["Mercado","Contas","Lazer","Transporte","Sade","Outros"],WV=()=>{const{currentUser:i}=py(),[t,e]=Yt.useState(""),[n,r]=Yt.useState(""),[o,u]=Yt.useState("Mercado"),[h,f]=Yt.useState(new Date().toISOString().split("T")[0]),[g,y]=Yt.useState(!1),_=async T=>{if(T.preventDefault(),!(!t||!n)){y(!0);try{await MV(Ax(Lc,"expenses"),{amount:parseFloat(t),description:n,category:o,date:h,userId:i.id,userName:i.name,createdAt:$t.now()}),e(""),r("")}catch(S){console.error("Error adding document: ",S),alert("Falha ao salvar despesa")}finally{y(!1)}}};return ot.jsxs("form",{onSubmit:_,className:"glass-panel",style:{padding:"20px",marginBottom:"20px"},children:[ot.jsx("h3",{style:{marginBottom:"15px",color:"var(--color-primary-text)"},children:"Adicionar Nova Despesa"}),ot.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[ot.jsxs("div",{children:[ot.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"0.9em",color:"var(--color-text-muted)"},children:"Valor ()"}),ot.jsx("input",{type:"number",step:"0.01",value:t,onChange:T=>e(T.target.value),className:"input-field",placeholder:"0.00",required:!0})]}),ot.jsxs("div",{children:[ot.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"0.9em",color:"var(--color-text-muted)"},children:"Data"}),ot.jsx("input",{type:"date",value:h,onChange:T=>f(T.target.value),className:"input-field",required:!0})]})]}),ot.jsxs("div",{style:{marginBottom:"15px"},children:[ot.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"0.9em",color:"var(--color-text-muted)"},children:"Descrio"}),ot.jsx("input",{type:"text",value:n,onChange:T=>r(T.target.value),className:"input-field",placeholder:"ex: Compras da semana no Tesco",required:!0})]}),ot.jsxs("div",{style:{marginBottom:"20px"},children:[ot.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"0.9em",color:"var(--color-text-muted)"},children:"Categoria"}),ot.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:XV.map(T=>ot.jsx("button",{type:"button",onClick:()=>u(T),style:{background:o===T?"var(--color-primary)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",padding:"6px 12px",borderRadius:"20px",cursor:"pointer",fontSize:"0.85em",transition:"background 0.2s"},children:T},T))})]}),ot.jsxs("button",{type:"submit",className:"btn-primary",style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",gap:"8px"},disabled:g,children:[g?ot.jsx(qV,{className:"animate-spin",size:20}):ot.jsx(FV,{size:20}),"Adicionar Despesa"]})]})},$V=({expenses:i})=>{const t=async e=>{window.confirm("Apagar despesa?")&&await CV(xx(Lc,"expenses",e))};return i.length===0?ot.jsx("div",{className:"glass-panel",style:{padding:"30px",textAlign:"center",color:"var(--color-text-muted)"},children:"Nenhuma despesa registrada este ms ainda."}):ot.jsxs("div",{className:"glass-panel",style:{padding:"20px"},children:[ot.jsx("h3",{style:{marginBottom:"15px"},children:"Despesas Recentes"}),ot.jsx("div",{style:{overflowX:"auto"},children:ot.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"500px"},children:[ot.jsx("thead",{children:ot.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)",textAlign:"left"},children:[ot.jsx("th",{style:{padding:"10px",color:"var(--color-text-muted)",fontSize:"0.9em"},children:"Data"}),ot.jsx("th",{style:{padding:"10px",color:"var(--color-text-muted)",fontSize:"0.9em"},children:"Descrio"}),ot.jsx("th",{style:{padding:"10px",color:"var(--color-text-muted)",fontSize:"0.9em"},children:"Pessoa"}),ot.jsx("th",{style:{padding:"10px",color:"var(--color-text-muted)",fontSize:"0.9em"},children:"Categoria"}),ot.jsx("th",{style:{padding:"10px",color:"var(--color-text-muted)",fontSize:"0.9em",textAlign:"right"},children:"Valor"}),ot.jsx("th",{style:{padding:"10px"}})]})}),ot.jsx("tbody",{children:i.map(e=>ot.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[ot.jsx("td",{style:{padding:"12px 10px",fontSize:"0.9em"},children:new Date(e.date).toLocaleDateString()}),ot.jsx("td",{style:{padding:"12px 10px",fontWeight:"500"},children:e.description}),ot.jsx("td",{style:{padding:"12px 10px",fontSize:"0.9em",color:"var(--color-text-muted)"},children:e.userName}),ot.jsx("td",{style:{padding:"12px 10px"},children:ot.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",background:"rgba(255,255,255,0.1)",fontSize:"0.8em"},children:e.category})}),ot.jsxs("td",{style:{padding:"12px 10px",textAlign:"right",fontWeight:"bold"},children:["",e.amount.toFixed(2)]}),ot.jsx("td",{style:{padding:"12px 10px",textAlign:"right"},children:ot.jsx("button",{onClick:()=>t(e.id),style:{background:"none",border:"none",cursor:"pointer",color:"#ef4444",padding:"5px"},title:"Delete",children:ot.jsx(QV,{size:16})})})]},e.id))})]})})]})};function Bc(i){return i+.5|0}const dr=(i,t,e)=>Math.max(Math.min(i,e),t);function Wu(i){return dr(Bc(i*2.55),0,255)}function Sr(i){return dr(Bc(i*255),0,255)}function Es(i){return dr(Bc(i/2.55)/100,0,1)}function UE(i){return dr(Bc(i*100),0,100)}const ii={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},cy=[..."0123456789ABCDEF"],ZV=i=>cy[i&15],JV=i=>cy[(i&240)>>4]+cy[i&15],Sf=i=>(i&240)>>4===(i&15),tO=i=>Sf(i.r)&&Sf(i.g)&&Sf(i.b)&&Sf(i.a);function eO(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&ii[i[1]]*17,g:255&ii[i[2]]*17,b:255&ii[i[3]]*17,a:t===5?ii[i[4]]*17:255}:(t===7||t===9)&&(e={r:ii[i[1]]<<4|ii[i[2]],g:ii[i[3]]<<4|ii[i[4]],b:ii[i[5]]<<4|ii[i[6]],a:t===9?ii[i[7]]<<4|ii[i[8]]:255})),e}const nO=(i,t)=>i<255?t(i):"";function iO(i){var t=tO(i)?ZV:JV;return i?"#"+t(i.r)+t(i.g)+t(i.b)+nO(i.a,t):void 0}const sO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function jx(i,t,e){const n=t*Math.min(e,1-e),r=(o,u=(o+i/30)%12)=>e-n*Math.max(Math.min(u-3,9-u,1),-1);return[r(0),r(8),r(4)]}function rO(i,t,e){const n=(r,o=(r+i/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function aO(i,t,e){const n=jx(i,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)n[r]*=1-t-e,n[r]+=t;return n}function oO(i,t,e,n,r){return i===r?(t-e)/n+(t<e?6:0):t===r?(e-i)/n+2:(i-t)/n+4}function f_(i){const e=i.r/255,n=i.g/255,r=i.b/255,o=Math.max(e,n,r),u=Math.min(e,n,r),h=(o+u)/2;let f,g,y;return o!==u&&(y=o-u,g=h>.5?y/(2-o-u):y/(o+u),f=oO(e,n,r,y,o),f=f*60+.5),[f|0,g||0,h]}function d_(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(Sr)}function g_(i,t,e){return d_(jx,i,t,e)}function lO(i,t,e){return d_(aO,i,t,e)}function uO(i,t,e){return d_(rO,i,t,e)}function Fx(i){return(i%360+360)%360}function cO(i){const t=sO.exec(i);let e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?Wu(+t[5]):Sr(+t[5]));const r=Fx(+t[2]),o=+t[3]/100,u=+t[4]/100;return t[1]==="hwb"?n=lO(r,o,u):t[1]==="hsv"?n=uO(r,o,u):n=g_(r,o,u),{r:n[0],g:n[1],b:n[2],a:e}}function hO(i,t){var e=f_(i);e[0]=Fx(e[0]+t),e=g_(e),i.r=e[0],i.g=e[1],i.b=e[2]}function fO(i){if(!i)return;const t=f_(i),e=t[0],n=UE(t[1]),r=UE(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${r}%, ${Es(i.a)})`:`hsl(${e}, ${n}%, ${r}%)`}const jE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},FE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function dO(){const i={},t=Object.keys(FE),e=Object.keys(jE);let n,r,o,u,h;for(n=0;n<t.length;n++){for(u=h=t[n],r=0;r<e.length;r++)o=e[r],h=h.replace(o,jE[o]);o=parseInt(FE[u],16),i[h]=[o>>16&255,o>>8&255,o&255]}return i}let Af;function gO(i){Af||(Af=dO(),Af.transparent=[0,0,0,0]);const t=Af[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const mO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function pO(i){const t=mO.exec(i);let e=255,n,r,o;if(t){if(t[7]!==n){const u=+t[7];e=t[8]?Wu(u):dr(u*255,0,255)}return n=+t[1],r=+t[3],o=+t[5],n=255&(t[2]?Wu(n):dr(n,0,255)),r=255&(t[4]?Wu(r):dr(r,0,255)),o=255&(t[6]?Wu(o):dr(o,0,255)),{r:n,g:r,b:o,a:e}}}function yO(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Es(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const bp=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,Fo=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function _O(i,t,e){const n=Fo(Es(i.r)),r=Fo(Es(i.g)),o=Fo(Es(i.b));return{r:Sr(bp(n+e*(Fo(Es(t.r))-n))),g:Sr(bp(r+e*(Fo(Es(t.g))-r))),b:Sr(bp(o+e*(Fo(Es(t.b))-o))),a:i.a+e*(t.a-i.a)}}function xf(i,t,e){if(i){let n=f_(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=g_(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function Hx(i,t){return i&&Object.assign(t||{},i)}function HE(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=Sr(i[3]))):(t=Hx(i,{r:0,g:0,b:0,a:1}),t.a=Sr(t.a)),t}function bO(i){return i.charAt(0)==="r"?pO(i):cO(i)}class Rc{constructor(t){if(t instanceof Rc)return t;const e=typeof t;let n;e==="object"?n=HE(t):e==="string"&&(n=eO(t)||gO(t)||bO(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Hx(this._rgb);return t&&(t.a=Es(t.a)),t}set rgb(t){this._rgb=HE(t)}rgbString(){return this._valid?yO(this._rgb):void 0}hexString(){return this._valid?iO(this._rgb):void 0}hslString(){return this._valid?fO(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let o;const u=e===o?.5:e,h=2*u-1,f=n.a-r.a,g=((h*f===-1?h:(h+f)/(1+h*f))+1)/2;o=1-g,n.r=255&g*n.r+o*r.r+.5,n.g=255&g*n.g+o*r.g+.5,n.b=255&g*n.b+o*r.b+.5,n.a=u*n.a+(1-u)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=_O(this._rgb,t._rgb,e)),this}clone(){return new Rc(this.rgb)}alpha(t){return this._rgb.a=Sr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Bc(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return xf(this._rgb,2,t),this}darken(t){return xf(this._rgb,2,-t),this}saturate(t){return xf(this._rgb,1,t),this}desaturate(t){return xf(this._rgb,1,-t),this}rotate(t){return hO(this._rgb,t),this}}function bs(){}const vO=(()=>{let i=0;return()=>i++})();function ue(i){return i==null}function Je(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function qt(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function ai(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Hi(i,t){return ai(i)?i:t}function Ht(i,t){return typeof i>"u"?t:i}const TO=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,qx=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function de(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function ee(i,t,e,n){let r,o,u;if(Je(i))for(o=i.length,r=0;r<o;r++)t.call(e,i[r],r);else if(qt(i))for(u=Object.keys(i),o=u.length,r=0;r<o;r++)t.call(e,i[u[r]],u[r])}function vd(i,t){let e,n,r,o;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(r=i[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function Td(i){if(Je(i))return i.map(Td);if(qt(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let r=0;for(;r<n;++r)t[e[r]]=Td(i[e[r]]);return t}return i}function Gx(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function EO(i,t,e,n){if(!Gx(i))return;const r=t[i],o=e[i];qt(r)&&qt(o)?Ic(r,o,n):t[i]=Td(o)}function Ic(i,t,e){const n=Je(t)?t:[t],r=n.length;if(!qt(i))return i;e=e||{};const o=e.merger||EO;let u;for(let h=0;h<r;++h){if(u=n[h],!qt(u))continue;const f=Object.keys(u);for(let g=0,y=f.length;g<y;++g)o(f[g],i,u,e)}return i}function uc(i,t){return Ic(i,t,{merger:SO})}function SO(i,t,e){if(!Gx(i))return;const n=t[i],r=e[i];qt(n)&&qt(r)?uc(n,r):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=Td(r))}const qE={"":i=>i,x:i=>i.x,y:i=>i.y};function AO(i){const t=i.split("."),e=[];let n="";for(const r of t)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function xO(i){const t=AO(i);return e=>{for(const n of t){if(n==="")break;e=e&&e[n]}return e}}function Ua(i,t){return(qE[t]||(qE[t]=xO(t)))(i)}function m_(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Dc=i=>typeof i<"u",Dr=i=>typeof i=="function",GE=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0};function wO(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const ge=Math.PI,je=2*ge,Ed=Number.POSITIVE_INFINITY,RO=ge/180,Ke=ge/2,fa=ge/4,KE=ge*2/3,Kx=Math.log10,Ar=Math.sign;function Yf(i,t,e){return Math.abs(i-t)<e}function YE(i){const t=Math.round(i);i=Yf(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(Kx(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function IO(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n===0&&(t.push(n),t.push(i/n));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function DO(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function Sd(i){return!DO(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function CO(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}function MO(i,t,e){let n,r,o;for(n=0,r=i.length;n<r;n++)o=i[n][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function As(i){return i*(ge/180)}function VO(i){return i*(180/ge)}function QE(i){if(!ai(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function Yx(i,t){const e=t.x-i.x,n=t.y-i.y,r=Math.sqrt(e*e+n*n);let o=Math.atan2(n,e);return o<-.5*ge&&(o+=je),{angle:o,distance:r}}function OO(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Yi(i){return(i%je+je)%je}function Ad(i,t,e,n){const r=Yi(i),o=Yi(t),u=Yi(e),h=Yi(o-r),f=Yi(u-r),g=Yi(r-o),y=Yi(r-u);return r===o||r===u||n&&o===u||h>f&&g<y}function In(i,t,e){return Math.max(t,Math.min(e,i))}function NO(i){return In(i,-32768,32767)}function Aa(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function p_(i,t,e){e=e||(u=>i[u]<t);let n=i.length-1,r=0,o;for(;n-r>1;)o=r+n>>1,e(o)?r=o:n=o;return{lo:r,hi:n}}const hy=(i,t,e,n)=>p_(i,e,n?r=>{const o=i[r][t];return o<e||o===e&&i[r+1][t]===e}:r=>i[r][t]<e),PO=(i,t,e)=>p_(i,e,n=>i[n][t]>=e);function kO(i,t,e){let n=0,r=i.length;for(;n<r&&i[n]<t;)n++;for(;r>n&&i[r-1]>e;)r--;return n>0||r<i.length?i.slice(n,r):i}const Qx=["push","pop","shift","splice","unshift"];function zO(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Qx.forEach(e=>{const n="_onData"+m_(e),r=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...o){const u=r.apply(this,o);return i._chartjs.listeners.forEach(h=>{typeof h[n]=="function"&&h[n](...o)}),u}})})}function XE(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,r=n.indexOf(t);r!==-1&&n.splice(r,1),!(n.length>0)&&(Qx.forEach(o=>{delete i[o]}),delete i._chartjs)}function Xx(i){const t=new Set(i);return t.size===i.length?i:Array.from(t)}const Wx=(function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame})();function $x(i,t){let e=[],n=!1;return function(...r){e=r,n||(n=!0,Wx.call(window,()=>{n=!1,i.apply(t,e)}))}}function LO(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}const Zx=i=>i==="start"?"left":i==="end"?"right":"center",Bn=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,BO=(i,t,e,n)=>i===(n?"left":"right")?e:i==="center"?(t+e)/2:t,wf=i=>i===0||i===1,WE=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*je/e)),$E=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*je/e)+1,cc={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*Ke)+1,easeOutSine:i=>Math.sin(i*Ke),easeInOutSine:i=>-.5*(Math.cos(ge*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>wf(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>wf(i)?i:WE(i,.075,.3),easeOutElastic:i=>wf(i)?i:$E(i,.075,.3),easeInOutElastic(i){return wf(i)?i:i<.5?.5*WE(i*2,.1125,.45):.5+.5*$E(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-cc.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?cc.easeInBounce(i*2)*.5:cc.easeOutBounce(i*2-1)*.5+.5};function Jx(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function ZE(i){return Jx(i)?i:new Rc(i)}function vp(i){return Jx(i)?i:new Rc(i).saturate(.5).darken(.1).hexString()}const UO=["x","y","borderWidth","radius","tension"],jO=["color","borderColor","backgroundColor"];function FO(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:jO},numbers:{type:"number",properties:UO}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function HO(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const JE=new Map;function qO(i,t){t=t||{};const e=i+JSON.stringify(t);let n=JE.get(e);return n||(n=new Intl.NumberFormat(i,t),JE.set(e,n)),n}function y_(i,t,e){return qO(t,e).format(i)}const GO={values(i){return Je(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";const n=this.chart.options.locale;let r,o=i;if(e.length>1){const g=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(g<1e-4||g>1e15)&&(r="scientific"),o=KO(i,e)}const u=Kx(Math.abs(o)),h=isNaN(u)?1:Math.max(Math.min(-1*Math.floor(u),20),0),f={notation:r,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(f,this.options.ticks.format),y_(i,n,f)}};function KO(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var tw={formatters:GO};function YO(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:tw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ja=Object.create(null),fy=Object.create(null);function hc(i,t){if(!t)return i;const e=t.split(".");for(let n=0,r=e.length;n<r;++n){const o=e[n];i=i[o]||(i[o]=Object.create(null))}return i}function Tp(i,t,e){return typeof t=="string"?Ic(hc(i,t),e):Ic(hc(i,""),t)}class QO{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>vp(r.backgroundColor),this.hoverBorderColor=(n,r)=>vp(r.borderColor),this.hoverColor=(n,r)=>vp(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Tp(this,t,e)}get(t){return hc(this,t)}describe(t,e){return Tp(fy,t,e)}override(t,e){return Tp(ja,t,e)}route(t,e,n,r){const o=hc(this,t),u=hc(this,n),h="_"+e;Object.defineProperties(o,{[h]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const f=this[h],g=u[r];return qt(f)?Object.assign({},g,f):Ht(f,g)},set(f){this[h]=f}}})}apply(t){t.forEach(e=>e(this))}}var Ie=new QO({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[FO,HO,YO]);function XO(i){return!i||ue(i.size)||ue(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function tS(i,t,e,n,r){let o=t[r];return o||(o=t[r]=i.measureText(r).width,e.push(r)),o>n&&(n=o),n}function da(i,t,e){const n=i.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*n)/n+r}function eS(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function nS(i,t,e,n){ew(i,t,e,n,null)}function ew(i,t,e,n,r){let o,u,h,f,g,y,_,T;const S=t.pointStyle,D=t.rotation,C=t.radius;let M=(D||0)*RO;if(S&&typeof S=="object"&&(o=S.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){i.save(),i.translate(e,n),i.rotate(M),i.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),i.restore();return}if(!(isNaN(C)||C<=0)){switch(i.beginPath(),S){default:r?i.ellipse(e,n,r/2,C,0,0,je):i.arc(e,n,C,0,je),i.closePath();break;case"triangle":y=r?r/2:C,i.moveTo(e+Math.sin(M)*y,n-Math.cos(M)*C),M+=KE,i.lineTo(e+Math.sin(M)*y,n-Math.cos(M)*C),M+=KE,i.lineTo(e+Math.sin(M)*y,n-Math.cos(M)*C),i.closePath();break;case"rectRounded":g=C*.516,f=C-g,u=Math.cos(M+fa)*f,_=Math.cos(M+fa)*(r?r/2-g:f),h=Math.sin(M+fa)*f,T=Math.sin(M+fa)*(r?r/2-g:f),i.arc(e-_,n-h,g,M-ge,M-Ke),i.arc(e+T,n-u,g,M-Ke,M),i.arc(e+_,n+h,g,M,M+Ke),i.arc(e-T,n+u,g,M+Ke,M+ge),i.closePath();break;case"rect":if(!D){f=Math.SQRT1_2*C,y=r?r/2:f,i.rect(e-y,n-f,2*y,2*f);break}M+=fa;case"rectRot":_=Math.cos(M)*(r?r/2:C),u=Math.cos(M)*C,h=Math.sin(M)*C,T=Math.sin(M)*(r?r/2:C),i.moveTo(e-_,n-h),i.lineTo(e+T,n-u),i.lineTo(e+_,n+h),i.lineTo(e-T,n+u),i.closePath();break;case"crossRot":M+=fa;case"cross":_=Math.cos(M)*(r?r/2:C),u=Math.cos(M)*C,h=Math.sin(M)*C,T=Math.sin(M)*(r?r/2:C),i.moveTo(e-_,n-h),i.lineTo(e+_,n+h),i.moveTo(e+T,n-u),i.lineTo(e-T,n+u);break;case"star":_=Math.cos(M)*(r?r/2:C),u=Math.cos(M)*C,h=Math.sin(M)*C,T=Math.sin(M)*(r?r/2:C),i.moveTo(e-_,n-h),i.lineTo(e+_,n+h),i.moveTo(e+T,n-u),i.lineTo(e-T,n+u),M+=fa,_=Math.cos(M)*(r?r/2:C),u=Math.cos(M)*C,h=Math.sin(M)*C,T=Math.sin(M)*(r?r/2:C),i.moveTo(e-_,n-h),i.lineTo(e+_,n+h),i.moveTo(e+T,n-u),i.lineTo(e-T,n+u);break;case"line":u=r?r/2:Math.cos(M)*C,h=Math.sin(M)*C,i.moveTo(e-u,n-h),i.lineTo(e+u,n+h);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(M)*(r?r/2:C),n+Math.sin(M)*C);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function nw(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function __(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function b_(i){i.restore()}function WO(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),ue(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function $O(i,t,e,n,r){if(r.strikethrough||r.underline){const o=i.measureText(n),u=t-o.actualBoundingBoxLeft,h=t+o.actualBoundingBoxRight,f=e-o.actualBoundingBoxAscent,g=e+o.actualBoundingBoxDescent,y=r.strikethrough?(f+g)/2:g;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(u,y),i.lineTo(h,y),i.stroke()}}function ZO(i,t){const e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function xd(i,t,e,n,r,o={}){const u=Je(t)?t:[t],h=o.strokeWidth>0&&o.strokeColor!=="";let f,g;for(i.save(),i.font=r.string,WO(i,o),f=0;f<u.length;++f)g=u[f],o.backdrop&&ZO(i,o.backdrop),h&&(o.strokeColor&&(i.strokeStyle=o.strokeColor),ue(o.strokeWidth)||(i.lineWidth=o.strokeWidth),i.strokeText(g,e,n,o.maxWidth)),i.fillText(g,e,n,o.maxWidth),$O(i,e,n,g,o),n+=Number(r.lineHeight);i.restore()}function wd(i,t){const{x:e,y:n,w:r,h:o,radius:u}=t;i.arc(e+u.topLeft,n+u.topLeft,u.topLeft,1.5*ge,ge,!0),i.lineTo(e,n+o-u.bottomLeft),i.arc(e+u.bottomLeft,n+o-u.bottomLeft,u.bottomLeft,ge,Ke,!0),i.lineTo(e+r-u.bottomRight,n+o),i.arc(e+r-u.bottomRight,n+o-u.bottomRight,u.bottomRight,Ke,0,!0),i.lineTo(e+r,n+u.topRight),i.arc(e+r-u.topRight,n+u.topRight,u.topRight,0,-Ke,!0),i.lineTo(e+u.topLeft,n)}const JO=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,tN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function eN(i,t){const e=(""+i).match(JO);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}const nN=i=>+i||0;function v_(i,t){const e={},n=qt(t),r=n?Object.keys(t):t,o=qt(i)?n?u=>Ht(i[u],i[t[u]]):u=>i[u]:()=>i;for(const u of r)e[u]=nN(o(u));return e}function iw(i){return v_(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Zo(i){return v_(i,["topLeft","topRight","bottomLeft","bottomRight"])}function vi(i){const t=iw(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Dn(i,t){i=i||{},t=t||Ie.font;let e=Ht(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=Ht(i.style,t.style);n&&!(""+n).match(tN)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:Ht(i.family,t.family),lineHeight:eN(Ht(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:Ht(i.weight,t.weight),string:""};return r.string=XO(r),r}function Rf(i,t,e,n){let r,o,u;for(r=0,o=i.length;r<o;++r)if(u=i[r],u!==void 0&&u!==void 0)return u}function iN(i,t,e){const{min:n,max:r}=i,o=qx(t,(r-n)/2),u=(h,f)=>e&&h===0?0:h+f;return{min:u(n,-Math.abs(o)),max:u(r,o)}}function wl(i,t){return Object.assign(Object.create(i),t)}function T_(i,t=[""],e,n,r=()=>i[0]){const o=e||i;typeof n>"u"&&(n=ow("_fallback",i));const u={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:o,_fallback:n,_getTarget:r,override:h=>T_([h,...i],t,o,n)};return new Proxy(u,{deleteProperty(h,f){return delete h[f],delete h._keys,delete i[0][f],!0},get(h,f){return rw(h,f,()=>hN(f,t,i,h))},getOwnPropertyDescriptor(h,f){return Reflect.getOwnPropertyDescriptor(h._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(h,f){return sS(h).includes(f)},ownKeys(h){return sS(h)},set(h,f,g){const y=h._storage||(h._storage=r());return h[f]=y[f]=g,delete h._keys,!0}})}function _l(i,t,e,n){const r={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:sw(i,n),setContext:o=>_l(i,o,e,n),override:o=>_l(i.override(o),t,e,n)};return new Proxy(r,{deleteProperty(o,u){return delete o[u],delete i[u],!0},get(o,u,h){return rw(o,u,()=>rN(o,u,h))},getOwnPropertyDescriptor(o,u){return o._descriptors.allKeys?Reflect.has(i,u)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,u)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(o,u){return Reflect.has(i,u)},ownKeys(){return Reflect.ownKeys(i)},set(o,u,h){return i[u]=h,delete o[u],!0}})}function sw(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=i;return{allKeys:r,scriptable:e,indexable:n,isScriptable:Dr(e)?e:()=>e,isIndexable:Dr(n)?n:()=>n}}const sN=(i,t)=>i?i+m_(t):t,E_=(i,t)=>qt(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function rw(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];const n=e();return i[t]=n,n}function rN(i,t,e){const{_proxy:n,_context:r,_subProxy:o,_descriptors:u}=i;let h=n[t];return Dr(h)&&u.isScriptable(t)&&(h=aN(t,h,i,e)),Je(h)&&h.length&&(h=oN(t,h,i,u.isIndexable)),E_(t,h)&&(h=_l(h,r,o&&o[t],u)),h}function aN(i,t,e,n){const{_proxy:r,_context:o,_subProxy:u,_stack:h}=e;if(h.has(i))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+i);h.add(i);let f=t(o,u||n);return h.delete(i),E_(i,f)&&(f=S_(r._scopes,r,i,f)),f}function oN(i,t,e,n){const{_proxy:r,_context:o,_subProxy:u,_descriptors:h}=e;if(typeof o.index<"u"&&n(i))return t[o.index%t.length];if(qt(t[0])){const f=t,g=r._scopes.filter(y=>y!==f);t=[];for(const y of f){const _=S_(g,r,i,y);t.push(_l(_,o,u&&u[i],h))}}return t}function aw(i,t,e){return Dr(i)?i(t,e):i}const lN=(i,t)=>i===!0?t:typeof i=="string"?Ua(t,i):void 0;function uN(i,t,e,n,r){for(const o of t){const u=lN(e,o);if(u){i.add(u);const h=aw(u._fallback,e,r);if(typeof h<"u"&&h!==e&&h!==n)return h}else if(u===!1&&typeof n<"u"&&e!==n)return null}return!1}function S_(i,t,e,n){const r=t._rootScopes,o=aw(t._fallback,e,n),u=[...i,...r],h=new Set;h.add(n);let f=iS(h,u,e,o||e,n);return f===null||typeof o<"u"&&o!==e&&(f=iS(h,u,o,f,n),f===null)?!1:T_(Array.from(h),[""],r,o,()=>cN(t,e,n))}function iS(i,t,e,n,r){for(;e;)e=uN(i,t,e,n,r);return e}function cN(i,t,e){const n=i._getTarget();t in n||(n[t]={});const r=n[t];return Je(r)&&qt(e)?e:r||{}}function hN(i,t,e,n){let r;for(const o of t)if(r=ow(sN(o,i),e),typeof r<"u")return E_(i,r)?S_(e,n,i,r):r}function ow(i,t){for(const e of t){if(!e)continue;const n=e[i];if(typeof n<"u")return n}}function sS(i){let t=i._keys;return t||(t=i._keys=fN(i._scopes)),t}function fN(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(n);return Array.from(t)}function A_(){return typeof window<"u"&&typeof document<"u"}function x_(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Rd(i,t,e){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=i,n}const Zd=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function dN(i,t){return Zd(i).getPropertyValue(t)}const gN=["top","right","bottom","left"];function Ca(i,t,e){const n={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=gN[r];n[o]=parseFloat(i[t+"-"+o+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const mN=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function pN(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:r,offsetY:o}=n;let u=!1,h,f;if(mN(r,o,i.target))h=r,f=o;else{const g=t.getBoundingClientRect();h=n.clientX-g.left,f=n.clientY-g.top,u=!0}return{x:h,y:f,box:u}}function _a(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,r=Zd(e),o=r.boxSizing==="border-box",u=Ca(r,"padding"),h=Ca(r,"border","width"),{x:f,y:g,box:y}=pN(i,e),_=u.left+(y&&h.left),T=u.top+(y&&h.top);let{width:S,height:D}=t;return o&&(S-=u.width+h.width,D-=u.height+h.height),{x:Math.round((f-_)/S*e.width/n),y:Math.round((g-T)/D*e.height/n)}}function yN(i,t,e){let n,r;if(t===void 0||e===void 0){const o=i&&x_(i);if(!o)t=i.clientWidth,e=i.clientHeight;else{const u=o.getBoundingClientRect(),h=Zd(o),f=Ca(h,"border","width"),g=Ca(h,"padding");t=u.width-g.width-f.width,e=u.height-g.height-f.height,n=Rd(h.maxWidth,o,"clientWidth"),r=Rd(h.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:n||Ed,maxHeight:r||Ed}}const gr=i=>Math.round(i*10)/10;function _N(i,t,e,n){const r=Zd(i),o=Ca(r,"margin"),u=Rd(r.maxWidth,i,"clientWidth")||Ed,h=Rd(r.maxHeight,i,"clientHeight")||Ed,f=yN(i,t,e);let{width:g,height:y}=f;if(r.boxSizing==="content-box"){const T=Ca(r,"border","width"),S=Ca(r,"padding");g-=S.width+T.width,y-=S.height+T.height}return g=Math.max(0,g-o.width),y=Math.max(0,n?g/n:y-o.height),g=gr(Math.min(g,u,f.maxWidth)),y=gr(Math.min(y,h,f.maxHeight)),g&&!y&&(y=gr(g/2)),(t!==void 0||e!==void 0)&&n&&f.height&&y>f.height&&(y=f.height,g=gr(Math.floor(y*n))),{width:g,height:y}}function rS(i,t,e){const n=t||1,r=gr(i.height*n),o=gr(i.width*n);i.height=gr(i.height),i.width=gr(i.width);const u=i.canvas;return u.style&&(e||!u.style.height&&!u.style.width)&&(u.style.height=`${i.height}px`,u.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||u.height!==r||u.width!==o?(i.currentDevicePixelRatio=n,u.height=r,u.width=o,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}const bN=(function(){let i=!1;try{const t={get passive(){return i=!0,!1}};A_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i})();function aS(i,t){const e=dN(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}const vN=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},TN=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function Jo(i,t,e){return i?vN(t,e):TN()}function lw(i,t){let e,n;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function uw(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function If(i,t,e){return i.options.clip?i[e]:t[e]}function EN(i,t){const{xScale:e,yScale:n}=i;return e&&n?{left:If(e,t,"left"),right:If(e,t,"right"),top:If(n,t,"top"),bottom:If(n,t,"bottom")}:t}function SN(i,t){const e=t._clip;if(e.disabled)return!1;const n=EN(t,i.chartArea);return{left:e.left===!1?0:n.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:n.right+(e.right===!0?0:e.right),top:e.top===!1?0:n.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:n.bottom+(e.bottom===!0?0:e.bottom)}}class AN{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const o=e.listeners[r],u=e.duration;o.forEach(h=>h({chart:t,initial:e.initial,numSteps:u,currentStep:Math.min(n-e.start,u)}))}_refresh(){this._request||(this._running=!0,this._request=Wx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const o=n.items;let u=o.length-1,h=!1,f;for(;u>=0;--u)f=o[u],f._active?(f._total>n.duration&&(n.duration=f._total),f.tick(t),h=!0):(o[u]=o[o.length-1],o.pop());h&&(r.draw(),this._notify(r,n,t,"progress")),o.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var vs=new AN;const oS="transparent",xN={boolean(i,t,e){return e>.5?t:i},color(i,t,e){const n=ZE(i||oS),r=n.valid&&ZE(t||oS);return r&&r.valid?r.mix(n,e).hexString():t},number(i,t,e){return i+(t-i)*e}};class wN{constructor(t,e,n,r){const o=e[n];r=Rf([t.to,r,o,t.from]);const u=Rf([t.from,o,r]);this._active=!0,this._fn=t.fn||xN[t.type||typeof u],this._easing=cc[t.easing]||cc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=u,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],o=n-this._start,u=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(u,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Rf([t.to,e,r,t.from]),this._from=Rf([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,o=this._from,u=this._loop,h=this._to;let f;if(this._active=o!==h&&(u||e<n),!this._active){this._target[r]=h,this._notify(!0);return}if(e<0){this._target[r]=o;return}f=e/n%2,f=u&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[r]=this._fn(o,h,f)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}}class cw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!qt(t))return;const e=Object.keys(Ie.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!qt(o))return;const u={};for(const h of e)u[h]=o[h];(Je(o.properties)&&o.properties||[r]).forEach(h=>{(h===r||!n.has(h))&&n.set(h,u)})})}_animateOptions(t,e){const n=e.options,r=IN(t,n);if(!r)return[];const o=this._createAnimations(r,n);return n.$shared&&RN(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,e){const n=this._properties,r=[],o=t.$animations||(t.$animations={}),u=Object.keys(e),h=Date.now();let f;for(f=u.length-1;f>=0;--f){const g=u[f];if(g.charAt(0)==="$")continue;if(g==="options"){r.push(...this._animateOptions(t,e));continue}const y=e[g];let _=o[g];const T=n.get(g);if(_)if(T&&_.active()){_.update(T,y,h);continue}else _.cancel();if(!T||!T.duration){t[g]=y;continue}o[g]=_=new wN(T,t,g,y),r.push(_)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const n=this._createAnimations(t,e);if(n.length)return vs.add(this._chart,n),!0}}function RN(i,t){const e=[],n=Object.keys(t);for(let r=0;r<n.length;r++){const o=i[n[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function IN(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function lS(i,t){const e=i&&i.options||{},n=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:n?o:r,end:n?r:o}}function DN(i,t,e){if(e===!1)return!1;const n=lS(i,e),r=lS(t,e);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function CN(i){let t,e,n,r;return qt(i)?(t=i.top,e=i.right,n=i.bottom,r=i.left):t=e=n=r=i,{top:t,right:e,bottom:n,left:r,disabled:i===!1}}function hw(i,t){const e=[],n=i._getSortedDatasetMetas(t);let r,o;for(r=0,o=n.length;r<o;++r)e.push(n[r].index);return e}function uS(i,t,e,n={}){const r=i.keys,o=n.mode==="single";let u,h,f,g;if(t===null)return;let y=!1;for(u=0,h=r.length;u<h;++u){if(f=+r[u],f===e){if(y=!0,n.all)continue;break}g=i.values[f],ai(g)&&(o||t===0||Ar(t)===Ar(g))&&(t+=g)}return!y&&!n.all?0:t}function MN(i,t){const{iScale:e,vScale:n}=t,r=e.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",u=Object.keys(i),h=new Array(u.length);let f,g,y;for(f=0,g=u.length;f<g;++f)y=u[f],h[f]={[r]:y,[o]:i[y]};return h}function Ep(i,t){const e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function VN(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function ON(i){const{min:t,max:e,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function NN(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function cS(i,t,e,n){for(const r of t.getMatchingVisibleMetas(n).reverse()){const o=i[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function hS(i,t){const{chart:e,_cachedMeta:n}=i,r=e._stacks||(e._stacks={}),{iScale:o,vScale:u,index:h}=n,f=o.axis,g=u.axis,y=VN(o,u,n),_=t.length;let T;for(let S=0;S<_;++S){const D=t[S],{[f]:C,[g]:M}=D,B=D._stacks||(D._stacks={});T=B[g]=NN(r,y,C),T[h]=M,T._top=cS(T,u,!0,n.type),T._bottom=cS(T,u,!1,n.type);const j=T._visualValues||(T._visualValues={});j[h]=M}}function Sp(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function PN(i,t){return wl(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function kN(i,t,e){return wl(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Uu(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const r of t){const o=r._stacks;if(!o||o[n]===void 0||o[n][e]===void 0)return;delete o[n][e],o[n]._visualValues!==void 0&&o[n]._visualValues[e]!==void 0&&delete o[n]._visualValues[e]}}}const Ap=i=>i==="reset"||i==="none",fS=(i,t)=>t?i:Object.assign({},i),zN=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:hw(e,!0),values:null};class w_{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ep(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Uu(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),r=(_,T,S,D)=>_==="x"?T:_==="r"?D:S,o=e.xAxisID=Ht(n.xAxisID,Sp(t,"x")),u=e.yAxisID=Ht(n.yAxisID,Sp(t,"y")),h=e.rAxisID=Ht(n.rAxisID,Sp(t,"r")),f=e.indexAxis,g=e.iAxisID=r(f,o,u,h),y=e.vAxisID=r(f,u,o,h);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(u),e.rScale=this.getScaleForId(h),e.iScale=this.getScaleForId(g),e.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&XE(this._data,this),t._stacked&&Uu(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(qt(e)){const r=this._cachedMeta;this._data=MN(e,r)}else if(n!==e){if(n){XE(n,this);const r=this._cachedMeta;Uu(r),r._parsed=[]}e&&Object.isExtensible(e)&&zO(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=Ep(e.vScale,e),e.stack!==n.stack&&(r=!0,Uu(e),e.stack=n.stack),this._resyncElements(t),(r||o!==e._stacked)&&(hS(this,e._parsed),e._stacked=Ep(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:r}=this,{iScale:o,_stacked:u}=n,h=o.axis;let f=t===0&&e===r.length?!0:n._sorted,g=t>0&&n._parsed[t-1],y,_,T;if(this._parsing===!1)n._parsed=r,n._sorted=!0,T=r;else{Je(r[t])?T=this.parseArrayData(n,r,t,e):qt(r[t])?T=this.parseObjectData(n,r,t,e):T=this.parsePrimitiveData(n,r,t,e);const S=()=>_[h]===null||g&&_[h]<g[h];for(y=0;y<e;++y)n._parsed[y+t]=_=T[y],f&&(S()&&(f=!1),g=_);n._sorted=f}u&&hS(this,T)}parsePrimitiveData(t,e,n,r){const{iScale:o,vScale:u}=t,h=o.axis,f=u.axis,g=o.getLabels(),y=o===u,_=new Array(r);let T,S,D;for(T=0,S=r;T<S;++T)D=T+n,_[T]={[h]:y||o.parse(g[D],D),[f]:u.parse(e[D],D)};return _}parseArrayData(t,e,n,r){const{xScale:o,yScale:u}=t,h=new Array(r);let f,g,y,_;for(f=0,g=r;f<g;++f)y=f+n,_=e[y],h[f]={x:o.parse(_[0],y),y:u.parse(_[1],y)};return h}parseObjectData(t,e,n,r){const{xScale:o,yScale:u}=t,{xAxisKey:h="x",yAxisKey:f="y"}=this._parsing,g=new Array(r);let y,_,T,S;for(y=0,_=r;y<_;++y)T=y+n,S=e[T],g[y]={x:o.parse(Ua(S,h),T),y:u.parse(Ua(S,f),T)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const r=this.chart,o=this._cachedMeta,u=e[t.axis],h={keys:hw(r,!0),values:e._stacks[t.axis]._visualValues};return uS(h,u,o.index,{mode:n})}updateRangeFromParsed(t,e,n,r){const o=n[e.axis];let u=o===null?NaN:o;const h=r&&n._stacks[e.axis];r&&h&&(r.values=h,u=uS(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,u),t.max=Math.max(t.max,u)}getMinMax(t,e){const n=this._cachedMeta,r=n._parsed,o=n._sorted&&t===n.iScale,u=r.length,h=this._getOtherScale(t),f=zN(e,n,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:_}=ON(h);let T,S;function D(){S=r[T];const C=S[h.axis];return!ai(S[t.axis])||y>C||_<C}for(T=0;T<u&&!(!D()&&(this.updateRangeFromParsed(g,t,S,f),o));++T);if(o){for(T=u-1;T>=0;--T)if(!D()){this.updateRangeFromParsed(g,t,S,f);break}}return g}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let r,o,u;for(r=0,o=e.length;r<o;++r)u=e[r][t.axis],ai(u)&&n.push(u);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=CN(Ht(this.options.clip,DN(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,r=n.data||[],o=e.chartArea,u=[],h=this._drawStart||0,f=this._drawCount||r.length-h,g=this.options.drawActiveElementsOnTop;let y;for(n.dataset&&n.dataset.draw(t,o,h,f),y=h;y<h+f;++y){const _=r[y];_.hidden||(_.active&&g?u.push(_):_.draw(t,o))}for(y=0;y<u.length;++y)u[y].draw(t,o)}getStyle(t,e){const n=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const u=this._cachedMeta.data[t];o=u.$context||(u.$context=kN(this.getContext(),t,u)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=PN(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const r=e==="active",o=this._cachedDataOpts,u=t+"-"+e,h=o[u],f=this.enableOptionSharing&&Dc(n);if(h)return fS(h,f);const g=this.chart.config,y=g.datasetElementScopeKeys(this._type,t),_=r?[`${t}Hover`,"hover",t,""]:[t,""],T=g.getOptionScopes(this.getDataset(),y),S=Object.keys(Ie.elements[t]),D=()=>this.getContext(n,r,e),C=g.resolveNamedOptions(T,S,D,_);return C.$shared&&(C.$shared=f,o[u]=Object.freeze(fS(C,f))),C}_resolveAnimations(t,e,n){const r=this.chart,o=this._cachedDataOpts,u=`animation-${e}`,h=o[u];if(h)return h;let f;if(r.options.animation!==!1){const y=this.chart.config,_=y.datasetAnimationScopeKeys(this._type,e),T=y.getOptionScopes(this.getDataset(),_);f=y.createResolver(T,this.getContext(t,n,e))}const g=new cw(r,f&&f.animations);return f&&f._cacheable&&(o[u]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Ap(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(n),u=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,n),{sharedOptions:o,includeOptions:u}}updateElement(t,e,n,r){Ap(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}updateSharedOptions(t,e,n){t&&!Ap(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[h,f,g]of this._syncList)this[h](f,g);this._syncList=[];const r=n.length,o=e.length,u=Math.min(o,r);u&&this.parse(0,u),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,n=!0){const r=this._cachedMeta,o=r.data,u=t+e;let h;const f=g=>{for(g.length+=e,h=g.length-1;h>=u;h--)g[h]=g[h-e]};for(f(o),h=t;h<u;++h)o[h]=new this.dataElementType;this._parsing&&f(r._parsed),this.parse(t,e),n&&this.updateElements(o,t,e,"reset")}updateElements(t,e,n,r){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,e);n._stacked&&Uu(n,r)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,r]=t;this[e](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function LN(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let n=[];for(let r=0,o=e.length;r<o;r++)n=n.concat(e[r].controller.getAllParsedValues(i));i._cache.$bar=Xx(n.sort((r,o)=>r-o))}return i._cache.$bar}function BN(i){const t=i.iScale,e=LN(t,i.type);let n=t._length,r,o,u,h;const f=()=>{u===32767||u===-32768||(Dc(h)&&(n=Math.min(n,Math.abs(u-h)||n)),h=u)};for(r=0,o=e.length;r<o;++r)u=t.getPixelForValue(e[r]),f();for(h=void 0,r=0,o=t.ticks.length;r<o;++r)u=t.getPixelForTick(r),f();return n}function UN(i,t,e,n){const r=e.barThickness;let o,u;return ue(r)?(o=t.min*e.categoryPercentage,u=e.barPercentage):(o=r*n,u=1),{chunk:o/n,ratio:u,start:t.pixels[i]-o/2}}function jN(i,t,e,n){const r=t.pixels,o=r[i];let u=i>0?r[i-1]:null,h=i<r.length-1?r[i+1]:null;const f=e.categoryPercentage;u===null&&(u=o-(h===null?t.end-t.start:h-o)),h===null&&(h=o+o-u);const g=o-(o-Math.min(u,h))/2*f;return{chunk:Math.abs(h-u)/2*f/n,ratio:e.barPercentage,start:g}}function FN(i,t,e,n){const r=e.parse(i[0],n),o=e.parse(i[1],n),u=Math.min(r,o),h=Math.max(r,o);let f=u,g=h;Math.abs(u)>Math.abs(h)&&(f=h,g=u),t[e.axis]=g,t._custom={barStart:f,barEnd:g,start:r,end:o,min:u,max:h}}function fw(i,t,e,n){return Je(i)?FN(i,t,e,n):t[e.axis]=e.parse(i,n),t}function dS(i,t,e,n){const r=i.iScale,o=i.vScale,u=r.getLabels(),h=r===o,f=[];let g,y,_,T;for(g=e,y=e+n;g<y;++g)T=t[g],_={},_[r.axis]=h||r.parse(u[g],g),f.push(fw(T,_,o,g));return f}function xp(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function HN(i,t,e){return i!==0?Ar(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function qN(i){let t,e,n,r,o;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(r="end",o="start"):(r="start",o="end"),{start:e,end:n,reverse:t,top:r,bottom:o}}function GN(i,t,e,n){let r=t.borderSkipped;const o={};if(!r){i.borderSkipped=o;return}if(r===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:u,end:h,reverse:f,top:g,bottom:y}=qN(i);r==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?r=g:(e._bottom||0)===n?r=y:(o[gS(y,u,h,f)]=!0,r=g)),o[gS(r,u,h,f)]=!0,i.borderSkipped=o}function gS(i,t,e,n){return n?(i=KN(i,t,e),i=mS(i,e,t)):i=mS(i,t,e),i}function KN(i,t,e){return i===t?e:i===e?t:i}function mS(i,t,e){return i==="start"?t:i==="end"?e:i}function YN(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}class QN extends w_{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,r){return dS(t,e,n,r)}parseArrayData(t,e,n,r){return dS(t,e,n,r)}parseObjectData(t,e,n,r){const{iScale:o,vScale:u}=t,{xAxisKey:h="x",yAxisKey:f="y"}=this._parsing,g=o.axis==="x"?h:f,y=u.axis==="x"?h:f,_=[];let T,S,D,C;for(T=n,S=n+r;T<S;++T)C=e[T],D={},D[o.axis]=o.parse(Ua(C,g),T),_.push(fw(Ua(C,y),D,u,T));return _}updateRangeFromParsed(t,e,n,r){super.updateRangeFromParsed(t,e,n,r);const o=n._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:r}=e,o=this.getParsed(t),u=o._custom,h=xp(u)?"["+u.start+", "+u.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,r){const o=r==="reset",{index:u,_cachedMeta:{vScale:h}}=this,f=h.getBasePixel(),g=h.isHorizontal(),y=this._getRuler(),{sharedOptions:_,includeOptions:T}=this._getSharedOptions(e,r);for(let S=e;S<e+n;S++){const D=this.getParsed(S),C=o||ue(D[h.axis])?{base:f,head:f}:this._calculateBarValuePixels(S),M=this._calculateBarIndexPixels(S,y),B=(D._stacks||{})[h.axis],j={horizontal:g,base:C.base,enableBorderRadius:!B||xp(D._custom)||u===B._top||u===B._bottom,x:g?C.head:M.center,y:g?M.center:C.head,height:g?M.size:Math.abs(C.size),width:g?Math.abs(C.size):M.size};T&&(j.options=_||this.resolveDataElementOptions(S,t[S].active?"active":r));const K=j.options||t[S].options;GN(j,K,B,u),YN(j,K,y.ratio),this.updateElement(t[S],S,j,r)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(y=>y.controller.options.grouped),o=n.options.stacked,u=[],h=this._cachedMeta.controller.getParsed(e),f=h&&h[n.axis],g=y=>{const _=y._parsed.find(S=>S[n.axis]===f),T=_&&_[y.vScale.axis];if(ue(T)||isNaN(T))return!0};for(const y of r)if(!(e!==void 0&&g(y))&&((o===!1||u.indexOf(y.stack)===-1||o===void 0&&y.stack===void 0)&&u.push(y.stack),y.index===t))break;return u.length||u.push(void 0),u}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[Ht(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const r=this._getStacks(t,n),o=e!==void 0?r.indexOf(e):-1;return o===-1?r.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,r=[];let o,u;for(o=0,u=e.data.length;o<u;++o)r.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const h=t.barThickness;return{min:h||BN(e),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:h?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:r},options:{base:o,minBarLength:u}}=this,h=o||0,f=this.getParsed(t),g=f._custom,y=xp(g);let _=f[e.axis],T=0,S=n?this.applyStack(e,f,n):_,D,C;S!==_&&(T=S-_,S=_),y&&(_=g.barStart,S=g.barEnd-g.barStart,_!==0&&Ar(_)!==Ar(g.barEnd)&&(T=0),T+=_);const M=!ue(o)&&!y?o:T;let B=e.getPixelForValue(M);if(this.chart.getDataVisibility(t)?D=e.getPixelForValue(T+S):D=B,C=D-B,Math.abs(C)<u){C=HN(C,e,h)*u,_===h&&(B-=C/2);const j=e.getPixelForDecimal(0),K=e.getPixelForDecimal(1),it=Math.min(j,K),Z=Math.max(j,K);B=Math.max(Math.min(B,Z),it),D=B+C,n&&!y&&(f._stacks[e.axis]._visualValues[r]=e.getValueForPixel(D)-e.getValueForPixel(B))}if(B===e.getPixelForValue(h)){const j=Ar(C)*e.getLineWidthForValue(h)/2;B+=j,C-=j}return{size:C,base:B,head:D,center:D+C/2}}_calculateBarIndexPixels(t,e){const n=e.scale,r=this.options,o=r.skipNull,u=Ht(r.maxBarThickness,1/0);let h,f;const g=this._getAxisCount();if(e.grouped){const y=o?this._getStackCount(t):e.stackCount,_=r.barThickness==="flex"?jN(t,e,r,y*g):UN(t,e,r,y*g),T=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,S=this._getAxis().indexOf(Ht(T,this.getFirstScaleIdForIndexAxis())),D=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+S;h=_.start+_.chunk*D+_.chunk/2,f=Math.min(u,_.chunk*_.ratio)}else h=n.getPixelForValue(this.getParsed(t)[n.axis],t),f=Math.min(u,e.min*e.ratio);return{base:h-f/2,head:h+f/2,center:h,size:f}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length;let o=0;for(;o<r;++o)this.getParsed(o)[e.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}function XN(i,t,e){let n=1,r=1,o=0,u=0;if(t<je){const h=i,f=h+t,g=Math.cos(h),y=Math.sin(h),_=Math.cos(f),T=Math.sin(f),S=(K,it,Z)=>Ad(K,h,f,!0)?1:Math.max(it,it*e,Z,Z*e),D=(K,it,Z)=>Ad(K,h,f,!0)?-1:Math.min(it,it*e,Z,Z*e),C=S(0,g,_),M=S(Ke,y,T),B=D(ge,g,_),j=D(ge+Ke,y,T);n=(C-B)/2,r=(M-j)/2,o=-(C+B)/2,u=-(M+j)/2}return{ratioX:n,ratioY:r,offsetX:o,offsetY:u}}class WN extends w_{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:n,textAlign:r,color:o,useBorderRadius:u,borderRadius:h}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((f,g)=>{const _=t.getDatasetMeta(0).controller.getStyle(g);return{text:f,fillStyle:_.backgroundColor,fontColor:o,hidden:!t.getDataVisibility(g),lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:_.borderWidth,strokeStyle:_.borderColor,textAlign:r,pointStyle:n,borderRadius:u&&(h||_.borderRadius),index:g}}):[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let o=f=>+n[f];if(qt(n[t])){const{key:f="value"}=this._parsing;o=g=>+Ua(n[g],f)}let u,h;for(u=t,h=t+e;u<h;++u)r._parsed[u]=o(u)}}_getRotation(){return As(this.options.rotation-90)}_getCircumference(){return As(this.options.circumference)}_getRotationExtents(){let t=je,e=-je;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,o=r._getRotation(),u=r._getCircumference();t=Math.min(t,o),e=Math.max(e,o+u)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,r=this._cachedMeta,o=r.data,u=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,h=Math.max((Math.min(n.width,n.height)-u)/2,0),f=Math.min(TO(this.options.cutout,h),1),g=this._getRingWeight(this.index),{circumference:y,rotation:_}=this._getRotationExtents(),{ratioX:T,ratioY:S,offsetX:D,offsetY:C}=XN(_,y,f),M=(n.width-u)/T,B=(n.height-u)/S,j=Math.max(Math.min(M,B)/2,0),K=qx(this.options.radius,j),it=Math.max(K*f,0),Z=(K-it)/this._getVisibleDatasetWeightTotal();this.offsetX=D*K,this.offsetY=C*K,r.total=this.calculateTotal(),this.outerRadius=K-Z*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Z*g,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const n=this.options,r=this._cachedMeta,o=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*o/je)}updateElements(t,e,n,r){const o=r==="reset",u=this.chart,h=u.chartArea,g=u.options.animation,y=(h.left+h.right)/2,_=(h.top+h.bottom)/2,T=o&&g.animateScale,S=T?0:this.innerRadius,D=T?0:this.outerRadius,{sharedOptions:C,includeOptions:M}=this._getSharedOptions(e,r);let B=this._getRotation(),j;for(j=0;j<e;++j)B+=this._circumference(j,o);for(j=e;j<e+n;++j){const K=this._circumference(j,o),it=t[j],Z={x:y+this.offsetX,y:_+this.offsetY,startAngle:B,endAngle:B+K,circumference:K,outerRadius:D,innerRadius:S};M&&(Z.options=C||this.resolveDataElementOptions(j,it.active?"active":r)),B+=K,this.updateElement(it,j,Z,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n=0,r;for(r=0;r<e.length;r++){const o=t._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?je*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],o=y_(e._parsed[t],n.options.locale);return{label:r[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const n=this.chart;let r,o,u,h,f;if(!t){for(r=0,o=n.data.datasets.length;r<o;++r)if(n.isDatasetVisible(r)){u=n.getDatasetMeta(r),t=u.data,h=u.controller;break}}if(!t)return 0;for(r=0,o=t.length;r<o;++r)f=h.resolveDataElementOptions(r),f.borderAlign!=="inner"&&(e=Math.max(e,f.borderWidth||0,f.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,r=t.length;n<r;++n){const o=this.resolveDataElementOptions(n);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Ht(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class $N extends WN{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function ga(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class R_{static override(t){Object.assign(R_.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ga()}parse(){return ga()}format(){return ga()}add(){return ga()}diff(){return ga()}startOf(){return ga()}endOf(){return ga()}}var ZN={_date:R_};function JN(i,t,e,n){const{controller:r,data:o,_sorted:u}=i,h=r._cachedMeta.iScale,f=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&u&&o.length){const g=h._reversePixels?PO:hy;if(n){if(r._sharedOptions){const y=o[0],_=typeof y.getRange=="function"&&y.getRange(t);if(_){const T=g(o,t,e-_),S=g(o,t,e+_);return{lo:T.lo,hi:S.hi}}}}else{const y=g(o,t,e);if(f){const{vScale:_}=r._cachedMeta,{_parsed:T}=i,S=T.slice(0,y.lo+1).reverse().findIndex(C=>!ue(C[_.axis]));y.lo-=Math.max(0,S);const D=T.slice(y.hi).findIndex(C=>!ue(C[_.axis]));y.hi+=Math.max(0,D)}return y}}return{lo:0,hi:o.length-1}}function Jd(i,t,e,n,r){const o=i.getSortedVisibleDatasetMetas(),u=e[t];for(let h=0,f=o.length;h<f;++h){const{index:g,data:y}=o[h],{lo:_,hi:T}=JN(o[h],t,u,r);for(let S=_;S<=T;++S){const D=y[S];D.skip||n(D,g,S)}}}function t4(i){const t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(n,r){const o=t?Math.abs(n.x-r.x):0,u=e?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(u,2))}}function wp(i,t,e,n,r){const o=[];return!r&&!i.isPointInArea(t)||Jd(i,e,t,function(h,f,g){!r&&!nw(h,i.chartArea,0)||h.inRange(t.x,t.y,n)&&o.push({element:h,datasetIndex:f,index:g})},!0),o}function e4(i,t,e,n){let r=[];function o(u,h,f){const{startAngle:g,endAngle:y}=u.getProps(["startAngle","endAngle"],n),{angle:_}=Yx(u,{x:t.x,y:t.y});Ad(_,g,y)&&r.push({element:u,datasetIndex:h,index:f})}return Jd(i,e,t,o),r}function n4(i,t,e,n,r,o){let u=[];const h=t4(e);let f=Number.POSITIVE_INFINITY;function g(y,_,T){const S=y.inRange(t.x,t.y,r);if(n&&!S)return;const D=y.getCenterPoint(r);if(!(!!o||i.isPointInArea(D))&&!S)return;const M=h(t,D);M<f?(u=[{element:y,datasetIndex:_,index:T}],f=M):M===f&&u.push({element:y,datasetIndex:_,index:T})}return Jd(i,e,t,g),u}function Rp(i,t,e,n,r,o){return!o&&!i.isPointInArea(t)?[]:e==="r"&&!n?e4(i,t,e,r):n4(i,t,e,n,r,o)}function pS(i,t,e,n,r){const o=[],u=e==="x"?"inXRange":"inYRange";let h=!1;return Jd(i,e,t,(f,g,y)=>{f[u]&&f[u](t[e],r)&&(o.push({element:f,datasetIndex:g,index:y}),h=h||f.inRange(t.x,t.y,r))}),n&&!h?[]:o}var i4={modes:{index(i,t,e,n){const r=_a(t,i),o=e.axis||"x",u=e.includeInvisible||!1,h=e.intersect?wp(i,r,o,n,u):Rp(i,r,o,!1,n,u),f=[];return h.length?(i.getSortedVisibleDatasetMetas().forEach(g=>{const y=h[0].index,_=g.data[y];_&&!_.skip&&f.push({element:_,datasetIndex:g.index,index:y})}),f):[]},dataset(i,t,e,n){const r=_a(t,i),o=e.axis||"xy",u=e.includeInvisible||!1;let h=e.intersect?wp(i,r,o,n,u):Rp(i,r,o,!1,n,u);if(h.length>0){const f=h[0].datasetIndex,g=i.getDatasetMeta(f).data;h=[];for(let y=0;y<g.length;++y)h.push({element:g[y],datasetIndex:f,index:y})}return h},point(i,t,e,n){const r=_a(t,i),o=e.axis||"xy",u=e.includeInvisible||!1;return wp(i,r,o,n,u)},nearest(i,t,e,n){const r=_a(t,i),o=e.axis||"xy",u=e.includeInvisible||!1;return Rp(i,r,o,e.intersect,n,u)},x(i,t,e,n){const r=_a(t,i);return pS(i,r,"x",e.intersect,n)},y(i,t,e,n){const r=_a(t,i);return pS(i,r,"y",e.intersect,n)}}};const dw=["left","top","right","bottom"];function ju(i,t){return i.filter(e=>e.pos===t)}function yS(i,t){return i.filter(e=>dw.indexOf(e.pos)===-1&&e.box.axis===t)}function Fu(i,t){return i.sort((e,n)=>{const r=t?n:e,o=t?e:n;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function s4(i){const t=[];let e,n,r,o,u,h;for(e=0,n=(i||[]).length;e<n;++e)r=i[e],{position:o,options:{stack:u,stackWeight:h=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:u&&o+u,stackWeight:h});return t}function r4(i){const t={};for(const e of i){const{stack:n,pos:r,stackWeight:o}=e;if(!n||!dw.includes(r))continue;const u=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=o}return t}function a4(i,t){const e=r4(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t;let o,u,h;for(o=0,u=i.length;o<u;++o){h=i[o];const{fullSize:f}=h.box,g=e[h.stack],y=g&&h.stackWeight/g.weight;h.horizontal?(h.width=y?y*n:f&&t.availableWidth,h.height=r):(h.width=n,h.height=y?y*r:f&&t.availableHeight)}return e}function o4(i){const t=s4(i),e=Fu(t.filter(g=>g.box.fullSize),!0),n=Fu(ju(t,"left"),!0),r=Fu(ju(t,"right")),o=Fu(ju(t,"top"),!0),u=Fu(ju(t,"bottom")),h=yS(t,"x"),f=yS(t,"y");return{fullSize:e,leftAndTop:n.concat(o),rightAndBottom:r.concat(f).concat(u).concat(h),chartArea:ju(t,"chartArea"),vertical:n.concat(r).concat(f),horizontal:o.concat(u).concat(h)}}function _S(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function gw(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function l4(i,t,e,n){const{pos:r,box:o}=e,u=i.maxPadding;if(!qt(r)){e.size&&(i[r]-=e.size);const _=n[e.stack]||{size:0,count:1};_.size=Math.max(_.size,e.horizontal?o.height:o.width),e.size=_.size/_.count,i[r]+=e.size}o.getPadding&&gw(u,o.getPadding());const h=Math.max(0,t.outerWidth-_S(u,i,"left","right")),f=Math.max(0,t.outerHeight-_S(u,i,"top","bottom")),g=h!==i.w,y=f!==i.h;return i.w=h,i.h=f,e.horizontal?{same:g,other:y}:{same:y,other:g}}function u4(i){const t=i.maxPadding;function e(n){const r=Math.max(t[n]-i[n],0);return i[n]+=r,r}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function c4(i,t){const e=t.maxPadding;function n(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(u=>{o[u]=Math.max(t[u],e[u])}),o}return n(i?["left","right"]:["top","bottom"])}function $u(i,t,e,n){const r=[];let o,u,h,f,g,y;for(o=0,u=i.length,g=0;o<u;++o){h=i[o],f=h.box,f.update(h.width||t.w,h.height||t.h,c4(h.horizontal,t));const{same:_,other:T}=l4(t,e,h,n);g|=_&&r.length,y=y||T,f.fullSize||r.push(h)}return g&&$u(r,t,e,n)||y}function Df(i,t,e,n,r){i.top=e,i.left=t,i.right=t+n,i.bottom=e+r,i.width=n,i.height=r}function bS(i,t,e,n){const r=e.padding;let{x:o,y:u}=t;for(const h of i){const f=h.box,g=n[h.stack]||{placed:0,weight:1},y=h.stackWeight/g.weight||1;if(h.horizontal){const _=t.w*y,T=g.size||f.height;Dc(g.start)&&(u=g.start),f.fullSize?Df(f,r.left,u,e.outerWidth-r.right-r.left,T):Df(f,t.left+g.placed,u,_,T),g.start=u,g.placed+=_,u=f.bottom}else{const _=t.h*y,T=g.size||f.width;Dc(g.start)&&(o=g.start),f.fullSize?Df(f,o,r.top,T,e.outerHeight-r.bottom-r.top):Df(f,o,t.top+g.placed,T,_),g.start=o,g.placed+=_,o=f.right}}t.x=o,t.y=u}var mr={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const r=vi(i.options.layout.padding),o=Math.max(t-r.width,0),u=Math.max(e-r.height,0),h=o4(i.boxes),f=h.vertical,g=h.horizontal;ee(i.boxes,C=>{typeof C.beforeLayout=="function"&&C.beforeLayout()});const y=f.reduce((C,M)=>M.box.options&&M.box.options.display===!1?C:C+1,0)||1,_=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:u,vBoxMaxWidth:o/2/y,hBoxMaxHeight:u/2}),T=Object.assign({},r);gw(T,vi(n));const S=Object.assign({maxPadding:T,w:o,h:u,x:r.left,y:r.top},r),D=a4(f.concat(g),_);$u(h.fullSize,S,_,D),$u(f,S,_,D),$u(g,S,_,D)&&$u(f,S,_,D),u4(S),bS(h.leftAndTop,S,_,D),S.x+=S.w,S.y+=S.h,bS(h.rightAndBottom,S,_,D),i.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},ee(h.chartArea,C=>{const M=C.box;Object.assign(M,i.chartArea),M.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class mw{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class h4 extends mw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Qf="$chartjs",f4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},vS=i=>i===null||i==="";function d4(i,t){const e=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[Qf]={initial:{height:n,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",vS(r)){const o=aS(i,"width");o!==void 0&&(i.width=o)}if(vS(n))if(i.style.height==="")i.height=i.width/(t||2);else{const o=aS(i,"height");o!==void 0&&(i.height=o)}return i}const pw=bN?{passive:!0}:!1;function g4(i,t,e){i&&i.addEventListener(t,e,pw)}function m4(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,pw)}function p4(i,t){const e=f4[i.type]||i.type,{x:n,y:r}=_a(i,t);return{type:e,chart:t,native:i,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Id(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function y4(i,t,e){const n=i.canvas,r=new MutationObserver(o=>{let u=!1;for(const h of o)u=u||Id(h.addedNodes,n),u=u&&!Id(h.removedNodes,n);u&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function _4(i,t,e){const n=i.canvas,r=new MutationObserver(o=>{let u=!1;for(const h of o)u=u||Id(h.removedNodes,n),u=u&&!Id(h.addedNodes,n);u&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Cc=new Map;let TS=0;function yw(){const i=window.devicePixelRatio;i!==TS&&(TS=i,Cc.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function b4(i,t){Cc.size||window.addEventListener("resize",yw),Cc.set(i,t)}function v4(i){Cc.delete(i),Cc.size||window.removeEventListener("resize",yw)}function T4(i,t,e){const n=i.canvas,r=n&&x_(n);if(!r)return;const o=$x((h,f)=>{const g=r.clientWidth;e(h,f),g<r.clientWidth&&e()},window),u=new ResizeObserver(h=>{const f=h[0],g=f.contentRect.width,y=f.contentRect.height;g===0&&y===0||o(g,y)});return u.observe(r),b4(i,o),u}function Ip(i,t,e){e&&e.disconnect(),t==="resize"&&v4(i)}function E4(i,t,e){const n=i.canvas,r=$x(o=>{i.ctx!==null&&e(p4(o,i))},i);return g4(n,t,r),r}class S4 extends mw{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(d4(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Qf])return!1;const n=e[Qf].initial;["height","width"].forEach(o=>{const u=n[o];ue(u)?e.removeAttribute(o):e.setAttribute(o,u)});const r=n.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[Qf],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),u={attach:y4,detach:_4,resize:T4}[e]||E4;r[e]=u(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];if(!r)return;({attach:Ip,detach:Ip,resize:Ip}[e]||m4)(t,e,r),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return _N(t,e,n,r)}isAttached(t){const e=t&&x_(t);return!!(e&&e.isConnected)}}function A4(i){return!A_()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?h4:S4}class Rl{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Sd(this.x)&&Sd(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach(o=>{r[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),r}}function x4(i,t){const e=i.options.ticks,n=w4(i),r=Math.min(e.maxTicksLimit||n,n),o=e.major.enabled?I4(t):[],u=o.length,h=o[0],f=o[u-1],g=[];if(u>r)return D4(t,g,o,u/r),g;const y=R4(o,t,r);if(u>0){let _,T;const S=u>1?Math.round((f-h)/(u-1)):null;for(Cf(t,g,y,ue(S)?0:h-S,h),_=0,T=u-1;_<T;_++)Cf(t,g,y,o[_],o[_+1]);return Cf(t,g,y,f,ue(S)?t.length:f+S),g}return Cf(t,g,y),g}function w4(i){const t=i.options.offset,e=i._tickSize(),n=i._length/e+(t?0:1),r=i._maxLength/e;return Math.floor(Math.min(n,r))}function R4(i,t,e){const n=C4(i),r=t.length/e;if(!n)return Math.max(r,1);const o=IO(n);for(let u=0,h=o.length-1;u<h;u++){const f=o[u];if(f>r)return f}return Math.max(r,1)}function I4(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}function D4(i,t,e,n){let r=0,o=e[0],u;for(n=Math.ceil(n),u=0;u<i.length;u++)u===o&&(t.push(i[u]),r++,o=e[r*n])}function Cf(i,t,e,n,r){const o=Ht(n,0),u=Math.min(Ht(r,i.length),i.length);let h=0,f,g,y;for(e=Math.ceil(e),r&&(f=r-n,e=f/Math.floor(f/e)),y=o;y<0;)h++,y=Math.round(o+h*e);for(g=Math.max(o,0);g<u;g++)g===y&&(t.push(i[g]),h++,y=Math.round(o+h*e))}function C4(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}const M4=i=>i==="left"?"right":i==="right"?"left":i,ES=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,SS=(i,t)=>Math.min(t||i,i);function AS(i,t){const e=[],n=i.length/t,r=i.length;let o=0;for(;o<r;o+=n)e.push(i[Math.floor(o)]);return e}function V4(i,t,e){const n=i.ticks.length,r=Math.min(t,n-1),o=i._startPixel,u=i._endPixel,h=1e-6;let f=i.getPixelForTick(r),g;if(!(e&&(n===1?g=Math.max(f-o,u-f):t===0?g=(i.getPixelForTick(1)-f)/2:g=(f-i.getPixelForTick(r-1))/2,f+=r<t?g:-g,f<o-h||f>u+h)))return f}function O4(i,t){ee(i,e=>{const n=e.gc,r=n.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[n[o]];n.splice(0,r)}})}function Hu(i){return i.drawTicks?i.tickLength:0}function xS(i,t){if(!i.display)return 0;const e=Dn(i.font,t),n=vi(i.padding);return(Je(i.text)?i.text.length:1)*e.lineHeight+n.height}function N4(i,t){return wl(i,{scale:t,type:"scale"})}function P4(i,t,e){return wl(i,{tick:e,index:t,type:"tick"})}function k4(i,t,e){let n=Zx(i);return(e&&t!=="right"||!e&&t==="right")&&(n=M4(n)),n}function z4(i,t,e,n){const{top:r,left:o,bottom:u,right:h,chart:f}=i,{chartArea:g,scales:y}=f;let _=0,T,S,D;const C=u-r,M=h-o;if(i.isHorizontal()){if(S=Bn(n,o,h),qt(e)){const B=Object.keys(e)[0],j=e[B];D=y[B].getPixelForValue(j)+C-t}else e==="center"?D=(g.bottom+g.top)/2+C-t:D=ES(i,e,t);T=h-o}else{if(qt(e)){const B=Object.keys(e)[0],j=e[B];S=y[B].getPixelForValue(j)-M+t}else e==="center"?S=(g.left+g.right)/2-M+t:S=ES(i,e,t);D=Bn(n,u,r),_=e==="left"?-Ke:Ke}return{titleX:S,titleY:D,maxWidth:T,rotation:_}}class Il extends Rl{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=Hi(t,Number.POSITIVE_INFINITY),e=Hi(e,Number.NEGATIVE_INFINITY),n=Hi(n,Number.POSITIVE_INFINITY),r=Hi(r,Number.NEGATIVE_INFINITY),{min:Hi(t,n),max:Hi(e,r),minDefined:ai(t),maxDefined:ai(e)}}getMinMax(t){let{min:e,max:n,minDefined:r,maxDefined:o}=this.getUserBounds(),u;if(r&&o)return{min:e,max:n};const h=this.getMatchingVisibleMetas();for(let f=0,g=h.length;f<g;++f)u=h[f].controller.getMinMax(this,t),r||(e=Math.min(e,u.min)),o||(n=Math.max(n,u.max));return e=o&&e>n?n:e,n=r&&e>n?e:n,{min:Hi(e,Hi(n,e)),max:Hi(n,Hi(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){de(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:o,ticks:u}=this.options,h=u.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=iN(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=h<this.ticks.length;this._convertTicksToLabels(f?AS(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),u.display&&(u.autoSkip||u.source==="auto")&&(this.ticks=x4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){de(this.options.afterUpdate,[this])}beforeSetDimensions(){de(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){de(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),de(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){de(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,o;for(n=0,r=t.length;n<r;n++)o=t[n],o.label=de(e.callback,[o.value,n,t],this)}afterTickToLabelConversion(){de(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){de(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=SS(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let u=r,h,f,g;if(!this._isVisible()||!e.display||r>=o||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const y=this._getLabelSizes(),_=y.widest.width,T=y.highest.height,S=In(this.chart.width-_,0,this.maxWidth);h=t.offset?this.maxWidth/n:S/(n-1),_+6>h&&(h=S/(n-(t.offset?.5:1)),f=this.maxHeight-Hu(t.grid)-e.padding-xS(t.title,this.chart.options.font),g=Math.sqrt(_*_+T*T),u=VO(Math.min(Math.asin(In((y.highest.height+6)/h,-1,1)),Math.asin(In(f/g,-1,1))-Math.asin(In(T/g,-1,1)))),u=Math.max(r,Math.min(o,u))),this.labelRotation=u}afterCalculateLabelRotation(){de(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){de(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:o}}=this,u=this._isVisible(),h=this.isHorizontal();if(u){const f=xS(r,e.options.font);if(h?(t.width=this.maxWidth,t.height=Hu(o)+f):(t.height=this.maxHeight,t.width=Hu(o)+f),n.display&&this.ticks.length){const{first:g,last:y,widest:_,highest:T}=this._getLabelSizes(),S=n.padding*2,D=As(this.labelRotation),C=Math.cos(D),M=Math.sin(D);if(h){const B=n.mirror?0:M*_.width+C*T.height;t.height=Math.min(this.maxHeight,t.height+B+S)}else{const B=n.mirror?0:C*_.width+M*T.height;t.width=Math.min(this.maxWidth,t.width+B+S)}this._calculatePadding(g,y,M,C)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:o,padding:u},position:h}=this.options,f=this.labelRotation!==0,g=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,S=0;f?g?(T=r*t.width,S=n*e.height):(T=n*t.height,S=r*e.width):o==="start"?S=e.width:o==="end"?T=t.width:o!=="inner"&&(T=t.width/2,S=e.width/2),this.paddingLeft=Math.max((T-y+u)*this.width/(this.width-y),0),this.paddingRight=Math.max((S-_+u)*this.width/(this.width-_),0)}else{let y=e.height/2,_=t.height/2;o==="start"?(y=0,_=t.height):o==="end"&&(y=e.height,_=0),this.paddingTop=y+u,this.paddingBottom=_+u}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){de(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)ue(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=AS(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:r,_longestTextCache:o}=this,u=[],h=[],f=Math.floor(e/SS(e,n));let g=0,y=0,_,T,S,D,C,M,B,j,K,it,Z;for(_=0;_<e;_+=f){if(D=t[_].label,C=this._resolveTickFontOptions(_),r.font=M=C.string,B=o[M]=o[M]||{data:{},gc:[]},j=C.lineHeight,K=it=0,!ue(D)&&!Je(D))K=tS(r,B.data,B.gc,K,D),it=j;else if(Je(D))for(T=0,S=D.length;T<S;++T)Z=D[T],!ue(Z)&&!Je(Z)&&(K=tS(r,B.data,B.gc,K,Z),it+=j);u.push(K),h.push(it),g=Math.max(K,g),y=Math.max(it,y)}O4(o,e);const st=u.indexOf(g),R=h.indexOf(y),w=I=>({width:u[I]||0,height:h[I]||0});return{first:w(0),last:w(e-1),widest:w(st),highest:w(R),widths:u,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return NO(this._alignToPixels?da(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=P4(this.getContext(),t,n))}return this.$context||(this.$context=N4(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=As(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),u=t.autoSkipPadding||0,h=o?o.widest.width+u:0,f=o?o.highest.height+u:0;return this.isHorizontal()?f*n>h*r?h/n:f/r:f*r<h*n?f/n:h/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:o,position:u,border:h}=r,f=o.offset,g=this.isHorizontal(),_=this.ticks.length+(f?1:0),T=Hu(o),S=[],D=h.setContext(this.getContext()),C=D.display?D.width:0,M=C/2,B=function(Q){return da(n,Q,C)};let j,K,it,Z,st,R,w,I,P,O,k,V;if(u==="top")j=B(this.bottom),R=this.bottom-T,I=j-M,O=B(t.top)+M,V=t.bottom;else if(u==="bottom")j=B(this.top),O=t.top,V=B(t.bottom)-M,R=j+M,I=this.top+T;else if(u==="left")j=B(this.right),st=this.right-T,w=j-M,P=B(t.left)+M,k=t.right;else if(u==="right")j=B(this.left),P=t.left,k=B(t.right)-M,st=j+M,w=this.left+T;else if(e==="x"){if(u==="center")j=B((t.top+t.bottom)/2+.5);else if(qt(u)){const Q=Object.keys(u)[0],at=u[Q];j=B(this.chart.scales[Q].getPixelForValue(at))}O=t.top,V=t.bottom,R=j+M,I=R+T}else if(e==="y"){if(u==="center")j=B((t.left+t.right)/2);else if(qt(u)){const Q=Object.keys(u)[0],at=u[Q];j=B(this.chart.scales[Q].getPixelForValue(at))}st=j-M,w=st-T,P=t.left,k=t.right}const Vt=Ht(r.ticks.maxTicksLimit,_),xt=Math.max(1,Math.ceil(_/Vt));for(K=0;K<_;K+=xt){const Q=this.getContext(K),at=o.setContext(Q),gt=h.setContext(Q),St=at.lineWidth,Pt=at.color,z=gt.dash||[],tt=gt.dashOffset,ct=at.tickWidth,ft=at.tickColor,Tt=at.tickBorderDash||[],At=at.tickBorderDashOffset;it=V4(this,K,f),it!==void 0&&(Z=da(n,it,St),g?st=w=P=k=Z:R=I=O=V=Z,S.push({tx1:st,ty1:R,tx2:w,ty2:I,x1:P,y1:O,x2:k,y2:V,width:St,color:Pt,borderDash:z,borderDashOffset:tt,tickWidth:ct,tickColor:ft,tickBorderDash:Tt,tickBorderDashOffset:At}))}return this._ticksLength=_,this._borderValue=j,S}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:o}=n,u=this.isHorizontal(),h=this.ticks,{align:f,crossAlign:g,padding:y,mirror:_}=o,T=Hu(n.grid),S=T+y,D=_?-y:S,C=-As(this.labelRotation),M=[];let B,j,K,it,Z,st,R,w,I,P,O,k,V="middle";if(r==="top")st=this.bottom-D,R=this._getXAxisLabelAlignment();else if(r==="bottom")st=this.top+D,R=this._getXAxisLabelAlignment();else if(r==="left"){const xt=this._getYAxisLabelAlignment(T);R=xt.textAlign,Z=xt.x}else if(r==="right"){const xt=this._getYAxisLabelAlignment(T);R=xt.textAlign,Z=xt.x}else if(e==="x"){if(r==="center")st=(t.top+t.bottom)/2+S;else if(qt(r)){const xt=Object.keys(r)[0],Q=r[xt];st=this.chart.scales[xt].getPixelForValue(Q)+S}R=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")Z=(t.left+t.right)/2-S;else if(qt(r)){const xt=Object.keys(r)[0],Q=r[xt];Z=this.chart.scales[xt].getPixelForValue(Q)}R=this._getYAxisLabelAlignment(T).textAlign}e==="y"&&(f==="start"?V="top":f==="end"&&(V="bottom"));const Vt=this._getLabelSizes();for(B=0,j=h.length;B<j;++B){K=h[B],it=K.label;const xt=o.setContext(this.getContext(B));w=this.getPixelForTick(B)+o.labelOffset,I=this._resolveTickFontOptions(B),P=I.lineHeight,O=Je(it)?it.length:1;const Q=O/2,at=xt.color,gt=xt.textStrokeColor,St=xt.textStrokeWidth;let Pt=R;u?(Z=w,R==="inner"&&(B===j-1?Pt=this.options.reverse?"left":"right":B===0?Pt=this.options.reverse?"right":"left":Pt="center"),r==="top"?g==="near"||C!==0?k=-O*P+P/2:g==="center"?k=-Vt.highest.height/2-Q*P+P:k=-Vt.highest.height+P/2:g==="near"||C!==0?k=P/2:g==="center"?k=Vt.highest.height/2-Q*P:k=Vt.highest.height-O*P,_&&(k*=-1),C!==0&&!xt.showLabelBackdrop&&(Z+=P/2*Math.sin(C))):(st=w,k=(1-O)*P/2);let z;if(xt.showLabelBackdrop){const tt=vi(xt.backdropPadding),ct=Vt.heights[B],ft=Vt.widths[B];let Tt=k-tt.top,At=0-tt.left;switch(V){case"middle":Tt-=ct/2;break;case"bottom":Tt-=ct;break}switch(R){case"center":At-=ft/2;break;case"right":At-=ft;break;case"inner":B===j-1?At-=ft:B>0&&(At-=ft/2);break}z={left:At,top:Tt,width:ft+tt.width,height:ct+tt.height,color:xt.backdropColor}}M.push({label:it,font:I,textOffset:k,options:{rotation:C,color:at,strokeColor:gt,strokeWidth:St,textAlign:Pt,textBaseline:V,translation:[Z,st],backdrop:z}})}return M}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-As(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:o}}=this.options,u=this._getLabelSizes(),h=t+o,f=u.widest.width;let g,y;return e==="left"?r?(y=this.right+o,n==="near"?g="left":n==="center"?(g="center",y+=f/2):(g="right",y+=f)):(y=this.right-h,n==="near"?g="right":n==="center"?(g="center",y-=f/2):(g="left",y=this.left)):e==="right"?r?(y=this.left+o,n==="near"?g="right":n==="center"?(g="center",y-=f/2):(g="left",y-=f)):(y=this.left+h,n==="near"?g="left":n==="center"?(g="center",y+=f/2):(g="right",y=this.right)):g="right",{textAlign:g,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:o,height:u}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,o,u),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,u;const h=(f,g,y)=>{!y.width||!y.color||(n.save(),n.lineWidth=y.width,n.strokeStyle=y.color,n.setLineDash(y.borderDash||[]),n.lineDashOffset=y.borderDashOffset,n.beginPath(),n.moveTo(f.x,f.y),n.lineTo(g.x,g.y),n.stroke(),n.restore())};if(e.display)for(o=0,u=r.length;o<u;++o){const f=r[o];e.drawOnChartArea&&h({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),e.drawTicks&&h({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:r}}=this,o=n.setContext(this.getContext()),u=n.display?o.width:0;if(!u)return;const h=r.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let g,y,_,T;this.isHorizontal()?(g=da(t,this.left,u)-u/2,y=da(t,this.right,h)+h/2,_=T=f):(_=da(t,this.top,u)-u/2,T=da(t,this.bottom,h)+h/2,g=y=f),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(g,_),e.lineTo(y,T),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&__(n,r);const o=this.getLabelItems(t);for(const u of o){const h=u.options,f=u.font,g=u.label,y=u.textOffset;xd(n,g,0,y,f,h)}r&&b_(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const o=Dn(n.font),u=vi(n.padding),h=n.align;let f=o.lineHeight/2;e==="bottom"||e==="center"||qt(e)?(f+=u.bottom,Je(n.text)&&(f+=o.lineHeight*(n.text.length-1))):f+=u.top;const{titleX:g,titleY:y,maxWidth:_,rotation:T}=z4(this,f,e,h);xd(t,n.text,0,0,o,{color:n.color,maxWidth:_,rotation:T,textAlign:k4(h,e,r),textBaseline:"middle",translation:[g,y]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Ht(t.grid&&t.grid.z,-1),r=Ht(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Il.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let o,u;for(o=0,u=e.length;o<u;++o){const h=e[o];h[n]===this.id&&(!t||h.type===t)&&r.push(h)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Dn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Mf{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;U4(e)&&(n=this.register(e));const r=this.items,o=t.id,u=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,L4(t,u,n),this.override&&Ie.override(t.id,t.overrides)),u}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in Ie[r]&&(delete Ie[r][n],this.override&&delete ja[n])}}function L4(i,t,e){const n=Ic(Object.create(null),[e?Ie.get(e):{},Ie.get(t),i.defaults]);Ie.set(t,n),i.defaultRoutes&&B4(t,i.defaultRoutes),i.descriptors&&Ie.describe(t,i.descriptors)}function B4(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),r=n.pop(),o=[i].concat(n).join("."),u=t[e].split("."),h=u.pop(),f=u.join(".");Ie.route(o,r,f,h)})}function U4(i){return"id"in i&&"defaults"in i}class j4{constructor(){this.controllers=new Mf(w_,"datasets",!0),this.elements=new Mf(Rl,"elements"),this.plugins=new Mf(Object,"plugins"),this.scales=new Mf(Il,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(r=>{const o=n||this._getRegistryForType(r);n||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):ee(r,u=>{const h=n||this._getRegistryForType(u);this._exec(t,h,u)})})}_exec(t,e,n){const r=m_(t);de(n["before"+r],[],n),e[t](n),de(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return r}}var Gi=new j4;class F4{constructor(){this._init=void 0}notify(t,e,n,r){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const o=r?this._descriptors(t).filter(r):this._descriptors(t),u=this._notify(o,t,e,n);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),u}_notify(t,e,n,r){r=r||{};for(const o of t){const u=o.plugin,h=u[n],f=[e,r,o.options];if(de(h,f,u)===!1&&r.cancelable)return!1}return!0}invalidate(){ue(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=Ht(n.options&&n.options.plugins,{}),o=H4(n);return r===!1&&!e?[]:G4(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(o,u)=>o.filter(h=>!u.some(f=>h.plugin.id===f.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function H4(i){const t={},e=[],n=Object.keys(Gi.plugins.items);for(let o=0;o<n.length;o++)e.push(Gi.getPlugin(n[o]));const r=i.plugins||[];for(let o=0;o<r.length;o++){const u=r[o];e.indexOf(u)===-1&&(e.push(u),t[u.id]=!0)}return{plugins:e,localIds:t}}function q4(i,t){return!t&&i===!1?null:i===!0?{}:i}function G4(i,{plugins:t,localIds:e},n,r){const o=[],u=i.getContext();for(const h of t){const f=h.id,g=q4(n[f],r);g!==null&&o.push({plugin:h,options:K4(i.config,{plugin:h,local:e[f]},g,u)})}return o}function K4(i,{plugin:t,local:e},n,r){const o=i.pluginScopeKeys(t),u=i.getOptionScopes(n,o);return e&&t.defaults&&u.push(t.defaults),i.createResolver(u,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function dy(i,t){const e=Ie.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Y4(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function Q4(i,t){return i===t?"_index_":"_value_"}function wS(i){if(i==="x"||i==="y"||i==="r")return i}function X4(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function gy(i,...t){if(wS(i))return i;for(const e of t){const n=e.axis||X4(e.position)||i.length>1&&wS(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function RS(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function W4(i,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(e.length)return RS(i,"x",e[0])||RS(i,"y",e[0])}return{}}function $4(i,t){const e=ja[i.type]||{scales:{}},n=t.scales||{},r=dy(i.type,t),o=Object.create(null);return Object.keys(n).forEach(u=>{const h=n[u];if(!qt(h))return console.error(`Invalid scale configuration for scale: ${u}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${u}`);const f=gy(u,h,W4(u,i),Ie.scales[h.type]),g=Q4(f,r),y=e.scales||{};o[u]=uc(Object.create(null),[{axis:f},h,y[f],y[g]])}),i.data.datasets.forEach(u=>{const h=u.type||i.type,f=u.indexAxis||dy(h,t),y=(ja[h]||{}).scales||{};Object.keys(y).forEach(_=>{const T=Y4(_,f),S=u[T+"AxisID"]||T;o[S]=o[S]||Object.create(null),uc(o[S],[{axis:T},n[S],y[_]])})}),Object.keys(o).forEach(u=>{const h=o[u];uc(h,[Ie.scales[h.type],Ie.scale])}),o}function _w(i){const t=i.options||(i.options={});t.plugins=Ht(t.plugins,{}),t.scales=$4(i,t)}function bw(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function Z4(i){return i=i||{},i.data=bw(i.data),_w(i),i}const IS=new Map,vw=new Set;function Vf(i,t){let e=IS.get(i);return e||(e=t(),IS.set(i,e),vw.add(e)),e}const qu=(i,t,e)=>{const n=Ua(t,e);n!==void 0&&i.add(n)};class J4{constructor(t){this._config=Z4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=bw(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),_w(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Vf(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Vf(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Vf(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return Vf(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return(!r||e)&&(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:o}=this,u=this._cachedScopes(t,n),h=u.get(e);if(h)return h;const f=new Set;e.forEach(y=>{t&&(f.add(t),y.forEach(_=>qu(f,t,_))),y.forEach(_=>qu(f,r,_)),y.forEach(_=>qu(f,ja[o]||{},_)),y.forEach(_=>qu(f,Ie,_)),y.forEach(_=>qu(f,fy,_))});const g=Array.from(f);return g.length===0&&g.push(Object.create(null)),vw.has(e)&&u.set(e,g),g}chartOptionScopes(){const{options:t,type:e}=this;return[t,ja[e]||{},Ie.datasets[e]||{},{type:e},Ie,fy]}resolveNamedOptions(t,e,n,r=[""]){const o={$shared:!0},{resolver:u,subPrefixes:h}=DS(this._resolverCache,t,r);let f=u;if(e5(u,e)){o.$shared=!1,n=Dr(n)?n():n;const g=this.createResolver(t,n,h);f=_l(u,n,g)}for(const g of e)o[g]=f[g];return o}createResolver(t,e,n=[""],r){const{resolver:o}=DS(this._resolverCache,t,n);return qt(e)?_l(o,e,void 0,r):o}}function DS(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const r=e.join();let o=n.get(r);return o||(o={resolver:T_(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},n.set(r,o)),o}const t5=i=>qt(i)&&Object.getOwnPropertyNames(i).some(t=>Dr(i[t]));function e5(i,t){const{isScriptable:e,isIndexable:n}=sw(i);for(const r of t){const o=e(r),u=n(r),h=(u||o)&&i[r];if(o&&(Dr(h)||t5(h))||u&&Je(h))return!0}return!1}var n5="4.5.1";const i5=["top","bottom","left","right","chartArea"];function CS(i,t){return i==="top"||i==="bottom"||i5.indexOf(i)===-1&&t==="x"}function MS(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function VS(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),de(e&&e.onComplete,[i],t)}function s5(i){const t=i.chart,e=t.options.animation;de(e&&e.onProgress,[i],t)}function Tw(i){return A_()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Xf={},OS=i=>{const t=Tw(i);return Object.values(Xf).filter(e=>e.canvas===t).pop()};function r5(i,t,e){const n=Object.keys(i);for(const r of n){const o=+r;if(o>=t){const u=i[r];delete i[r],(e>0||o>t)&&(i[o+e]=u)}}}function a5(i,t,e,n){return!e||i.type==="mouseout"?null:n?t:i}let tg=class{static defaults=Ie;static instances=Xf;static overrides=ja;static registry=Gi;static version=n5;static getChart=OS;static register(...t){Gi.add(...t),NS()}static unregister(...t){Gi.remove(...t),NS()}constructor(t,e){const n=this.config=new J4(e),r=Tw(t),o=OS(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const u=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||A4(r)),this.platform.updateConfig(n);const h=this.platform.acquireContext(r,u.aspectRatio),f=h&&h.canvas,g=f&&f.height,y=f&&f.width;if(this.id=vO(),this.ctx=h,this.canvas=f,this.width=y,this.height=g,this._options=u,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new F4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=LO(_=>this.update(_),u.resizeDelay||0),this._dataChanges=[],Xf[this.id]=this,!h||!f){console.error("Failed to create chart: can't acquire context from the given item");return}vs.listen(this,"complete",VS),vs.listen(this,"progress",s5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:o}=this;return ue(t)?e&&o?o:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Gi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return eS(this.canvas,this.ctx),this}stop(){return vs.stop(this),this}resize(t,e){vs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,r=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,u=this.platform.getMaximumSize(r,t,e,o),h=n.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=u.width,this.height=u.height,this._aspectRatio=this.aspectRatio,rS(this,h,!0)&&(this.notifyPlugins("resize",{size:u}),de(n.onResize,[this,u],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ee(e,(n,r)=>{n.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce((u,h)=>(u[h]=!1,u),{});let o=[];e&&(o=o.concat(Object.keys(e).map(u=>{const h=e[u],f=gy(u,h),g=f==="r",y=f==="x";return{options:h,dposition:g?"chartArea":y?"bottom":"left",dtype:g?"radialLinear":y?"category":"linear"}}))),ee(o,u=>{const h=u.options,f=h.id,g=gy(f,h),y=Ht(h.type,u.dtype);(h.position===void 0||CS(h.position,g)!==CS(u.dposition))&&(h.position=u.dposition),r[f]=!0;let _=null;if(f in n&&n[f].type===y)_=n[f];else{const T=Gi.getScale(y);_=new T({id:f,type:y,ctx:this.ctx,chart:this}),n[_.id]=_}_.init(h,t)}),ee(r,(u,h)=>{u||delete n[h]}),ee(n,u=>{mr.configure(this,u,u.options),mr.addBox(this,u)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((r,o)=>r.index-o.index),n>e){for(let r=e;r<n;++r)this._destroyDatasetMeta(r);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(MS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,r)=>{e.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const o=e[n];let u=this.getDatasetMeta(n);const h=o.type||this.config.type;if(u.type&&u.type!==h&&(this._destroyDatasetMeta(n),u=this.getDatasetMeta(n)),u.type=h,u.indexAxis=o.indexAxis||dy(h,this.options),u.order=o.order||0,u.index=n,u.label=""+o.label,u.visible=this.isDatasetVisible(n),u.controller)u.controller.updateIndex(n),u.controller.linkScales();else{const f=Gi.getController(h),{datasetElementType:g,dataElementType:y}=Ie.datasets[h];Object.assign(f,{dataElementType:Gi.getElement(y),datasetElementType:g&&Gi.getElement(g)}),u.controller=new f(this,n),t.push(u.controller)}}return this._updateMetasets(),t}_resetElements(){ee(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let u=0;for(let g=0,y=this.data.datasets.length;g<y;g++){const{controller:_}=this.getDatasetMeta(g),T=!r&&o.indexOf(_)===-1;_.buildOrUpdateElements(T),u=Math.max(+_.getMaxOverflow(),u)}u=this._minPadding=n.layout.autoPadding?u:0,this._updateLayout(u),r||ee(o,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(MS("z","_idx"));const{_active:h,_lastEvent:f}=this;f?this._eventHandler(f,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){ee(this.scales,t=>{mr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!GE(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:o}of e){const u=n==="_removeElements"?-o:o;r5(t,r,u)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=o=>new Set(t.filter(u=>u[0]===o).map((u,h)=>h+","+u.splice(1).join(","))),r=n(0);for(let o=1;o<e;o++)if(!GE(r,n(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;mr.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],ee(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Dr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(vs.has(this)?this.attached&&!vs.running(this)&&vs.start(this):(this.draw(),VS({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,o;for(r=0,o=e.length;r<o;++r){const u=e[r];(!t||u.visible)&&n.push(u)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},r=SN(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&__(e,r),t.controller.draw(),r&&b_(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return nw(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const o=i4.modes[e];return typeof o=="function"?o(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=wl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",o=this.getDatasetMeta(t),u=o.controller._resolveAnimations(void 0,r);Dc(e)?(o.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),u.update(o,{visible:n}),this.update(h=>h.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),vs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),eS(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Xf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(o,u)=>{e.addEventListener(this,o,u),t[o]=u},r=(o,u,h)=>{o.offsetX=u,o.offsetY=h,this._eventHandler(o)};ee(this.options.events,o=>n(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(f,g)=>{e.addEventListener(this,f,g),t[f]=g},r=(f,g)=>{t[f]&&(e.removeEventListener(this,f,g),delete t[f])},o=(f,g)=>{this.canvas&&this.resize(f,g)};let u;const h=()=>{r("attach",h),this.attached=!0,this.resize(),n("resize",o),n("detach",u)};u=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),n("attach",h)},e.isAttached(this.canvas)?h():u()}unbindEvents(){ee(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ee(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let o,u,h,f;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),h=0,f=t.length;h<f;++h){u=t[h];const g=u&&this.getDatasetMeta(u.datasetIndex).controller;g&&g[r+"HoverStyle"](u.element,u.datasetIndex,u.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:o,index:u})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[u],index:u}});!vd(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,n){const r=this.options.hover,o=(f,g)=>f.filter(y=>!g.some(_=>y.datasetIndex===_.datasetIndex&&y.index===_.index)),u=o(e,t),h=n?t:o(t,e);u.length&&this.updateHoverStyle(u,r.mode,!1),h.length&&r.mode&&this.updateHoverStyle(h,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=u=>(u.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const o=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(o||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:o}=this,u=e,h=this._getActiveElements(t,r,n,u),f=wO(t),g=a5(t,this._lastEvent,n,f);n&&(this._lastEvent=null,de(o.onHover,[t,h,this],this),f&&de(o.onClick,[t,h,this],this));const y=!vd(h,r);return(y||e)&&(this._active=h,this._updateHoverStyles(h,r,e)),this._lastEvent=g,y}_getActiveElements(t,e,n,r){if(t.type==="mouseout")return[];if(!n)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}};function NS(){return ee(tg.instances,i=>i._plugins.invalidate())}function o5(i,t,e){const{startAngle:n,x:r,y:o,outerRadius:u,innerRadius:h,options:f}=t,{borderWidth:g,borderJoinStyle:y}=f,_=Math.min(g/u,Yi(n-e));if(i.beginPath(),i.arc(r,o,u-g/2,n+_/2,e-_/2),h>0){const T=Math.min(g/h,Yi(n-e));i.arc(r,o,h+g/2,e-T/2,n+T/2,!0)}else{const T=Math.min(g/2,u*Yi(n-e));if(y==="round")i.arc(r,o,T,e-ge/2,n+ge/2,!0);else if(y==="bevel"){const S=2*T*T,D=-S*Math.cos(e+ge/2)+r,C=-S*Math.sin(e+ge/2)+o,M=S*Math.cos(n+ge/2)+r,B=S*Math.sin(n+ge/2)+o;i.lineTo(D,C),i.lineTo(M,B)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function l5(i,t,e){const{startAngle:n,pixelMargin:r,x:o,y:u,outerRadius:h,innerRadius:f}=t;let g=r/h;i.beginPath(),i.arc(o,u,h,n-g,e+g),f>r?(g=r/f,i.arc(o,u,f,e+g,n-g,!0)):i.arc(o,u,r,e+Ke,n-Ke),i.closePath(),i.clip()}function u5(i){return v_(i,["outerStart","outerEnd","innerStart","innerEnd"])}function c5(i,t,e,n){const r=u5(i.options.borderRadius),o=(e-t)/2,u=Math.min(o,n*t/2),h=f=>{const g=(e-Math.min(o,f))*n/2;return In(f,0,Math.min(o,g))};return{outerStart:h(r.outerStart),outerEnd:h(r.outerEnd),innerStart:In(r.innerStart,0,u),innerEnd:In(r.innerEnd,0,u)}}function Ho(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function Dd(i,t,e,n,r,o){const{x:u,y:h,startAngle:f,pixelMargin:g,innerRadius:y}=t,_=Math.max(t.outerRadius+n+e-g,0),T=y>0?y+n+e+g:0;let S=0;const D=r-f;if(n){const xt=y>0?y-n:0,Q=_>0?_-n:0,at=(xt+Q)/2,gt=at!==0?D*at/(at+n):D;S=(D-gt)/2}const C=Math.max(.001,D*_-e/ge)/_,M=(D-C)/2,B=f+M+S,j=r-M-S,{outerStart:K,outerEnd:it,innerStart:Z,innerEnd:st}=c5(t,T,_,j-B),R=_-K,w=_-it,I=B+K/R,P=j-it/w,O=T+Z,k=T+st,V=B+Z/O,Vt=j-st/k;if(i.beginPath(),o){const xt=(I+P)/2;if(i.arc(u,h,_,I,xt),i.arc(u,h,_,xt,P),it>0){const St=Ho(w,P,u,h);i.arc(St.x,St.y,it,P,j+Ke)}const Q=Ho(k,j,u,h);if(i.lineTo(Q.x,Q.y),st>0){const St=Ho(k,Vt,u,h);i.arc(St.x,St.y,st,j+Ke,Vt+Math.PI)}const at=(j-st/T+(B+Z/T))/2;if(i.arc(u,h,T,j-st/T,at,!0),i.arc(u,h,T,at,B+Z/T,!0),Z>0){const St=Ho(O,V,u,h);i.arc(St.x,St.y,Z,V+Math.PI,B-Ke)}const gt=Ho(R,B,u,h);if(i.lineTo(gt.x,gt.y),K>0){const St=Ho(R,I,u,h);i.arc(St.x,St.y,K,B-Ke,I)}}else{i.moveTo(u,h);const xt=Math.cos(I)*_+u,Q=Math.sin(I)*_+h;i.lineTo(xt,Q);const at=Math.cos(P)*_+u,gt=Math.sin(P)*_+h;i.lineTo(at,gt)}i.closePath()}function h5(i,t,e,n,r){const{fullCircles:o,startAngle:u,circumference:h}=t;let f=t.endAngle;if(o){Dd(i,t,e,n,f,r);for(let g=0;g<o;++g)i.fill();isNaN(h)||(f=u+(h%je||je))}return Dd(i,t,e,n,f,r),i.fill(),f}function f5(i,t,e,n,r){const{fullCircles:o,startAngle:u,circumference:h,options:f}=t,{borderWidth:g,borderJoinStyle:y,borderDash:_,borderDashOffset:T,borderRadius:S}=f,D=f.borderAlign==="inner";if(!g)return;i.setLineDash(_||[]),i.lineDashOffset=T,D?(i.lineWidth=g*2,i.lineJoin=y||"round"):(i.lineWidth=g,i.lineJoin=y||"bevel");let C=t.endAngle;if(o){Dd(i,t,e,n,C,r);for(let M=0;M<o;++M)i.stroke();isNaN(h)||(C=u+(h%je||je))}D&&l5(i,t,C),f.selfJoin&&C-u>=ge&&S===0&&y!=="miter"&&o5(i,t,C),o||(Dd(i,t,e,n,C,r),i.stroke())}class d5 extends Rl{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:o,distance:u}=Yx(r,{x:t,y:e}),{startAngle:h,endAngle:f,innerRadius:g,outerRadius:y,circumference:_}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),T=(this.options.spacing+this.options.borderWidth)/2,S=Ht(_,f-h),D=Ad(o,h,f)&&h!==f,C=S>=je||D,M=Aa(u,g+T,y+T);return C&&M}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:o,innerRadius:u,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:f,spacing:g}=this.options,y=(r+o)/2,_=(u+h+g+f)/2;return{x:e+Math.cos(y)*_,y:n+Math.sin(y)*_}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/4,o=(e.spacing||0)/2,u=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=n>je?Math.floor(n/je):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const h=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(h)*r,Math.sin(h)*r);const f=1-Math.sin(Math.min(ge,n||0)),g=r*f;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,h5(t,this,g,o,u),f5(t,this,g,o,u),t.restore()}}function Ew(i,t){const{x:e,y:n,base:r,width:o,height:u}=i.getProps(["x","y","base","width","height"],t);let h,f,g,y,_;return i.horizontal?(_=u/2,h=Math.min(e,r),f=Math.max(e,r),g=n-_,y=n+_):(_=o/2,h=e-_,f=e+_,g=Math.min(n,r),y=Math.max(n,r)),{left:h,top:g,right:f,bottom:y}}function pr(i,t,e,n){return i?0:In(t,e,n)}function g5(i,t,e){const n=i.options.borderWidth,r=i.borderSkipped,o=iw(n);return{t:pr(r.top,o.top,0,e),r:pr(r.right,o.right,0,t),b:pr(r.bottom,o.bottom,0,e),l:pr(r.left,o.left,0,t)}}function m5(i,t,e){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,o=Zo(r),u=Math.min(t,e),h=i.borderSkipped,f=n||qt(r);return{topLeft:pr(!f||h.top||h.left,o.topLeft,0,u),topRight:pr(!f||h.top||h.right,o.topRight,0,u),bottomLeft:pr(!f||h.bottom||h.left,o.bottomLeft,0,u),bottomRight:pr(!f||h.bottom||h.right,o.bottomRight,0,u)}}function p5(i){const t=Ew(i),e=t.right-t.left,n=t.bottom-t.top,r=g5(i,e/2,n/2),o=m5(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:o},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function Dp(i,t,e,n){const r=t===null,o=e===null,h=i&&!(r&&o)&&Ew(i,n);return h&&(r||Aa(t,h.left,h.right))&&(o||Aa(e,h.top,h.bottom))}function y5(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function _5(i,t){i.rect(t.x,t.y,t.w,t.h)}function Cp(i,t,e={}){const n=i.x!==e.x?-t:0,r=i.y!==e.y?-t:0,o=(i.x+i.w!==e.x+e.w?t:0)-n,u=(i.y+i.h!==e.y+e.h?t:0)-r;return{x:i.x+n,y:i.y+r,w:i.w+o,h:i.h+u,radius:i.radius}}class b5 extends Rl{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:o,outer:u}=p5(this),h=y5(u.radius)?wd:_5;t.save(),(u.w!==o.w||u.h!==o.h)&&(t.beginPath(),h(t,Cp(u,e,o)),t.clip(),h(t,Cp(o,-e,u)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),h(t,Cp(o,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return Dp(this,t,e,n)}inXRange(t,e){return Dp(this,t,null,e)}inYRange(t,e){return Dp(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+r)/2:e,y:o?n:(n+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const PS=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}},v5=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class kS extends Rl{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=de(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,r)=>t.sort(n,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,r=Dn(n.font),o=r.size,u=this._computeTitleHeight(),{boxWidth:h,itemHeight:f}=PS(n,o);let g,y;e.font=r.string,this.isHorizontal()?(g=this.maxWidth,y=this._fitRows(u,o,h,f)+10):(y=this.maxHeight,g=this._fitCols(u,r,h,f)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(y,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:o,maxWidth:u,options:{labels:{padding:h}}}=this,f=this.legendHitBoxes=[],g=this.lineWidths=[0],y=r+h;let _=t;o.textAlign="left",o.textBaseline="middle";let T=-1,S=-y;return this.legendItems.forEach((D,C)=>{const M=n+e/2+o.measureText(D.text).width;(C===0||g[g.length-1]+M+2*h>u)&&(_+=y,g[g.length-(C>0?0:1)]=0,S+=y,T++),f[C]={left:0,top:S,row:T,width:M,height:r},g[g.length-1]+=M+h}),_}_fitCols(t,e,n,r){const{ctx:o,maxHeight:u,options:{labels:{padding:h}}}=this,f=this.legendHitBoxes=[],g=this.columnSizes=[],y=u-t;let _=h,T=0,S=0,D=0,C=0;return this.legendItems.forEach((M,B)=>{const{itemWidth:j,itemHeight:K}=T5(n,e,o,M,r);B>0&&S+K+2*h>y&&(_+=T+h,g.push({width:T,height:S}),D+=T+h,C++,T=S=0),f[B]={left:D,top:S,col:C,width:j,height:K},T=Math.max(T,j),S+=K+h}),_+=T,g.push({width:T,height:S}),_}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:o}}=this,u=Jo(o,this.left,this.width);if(this.isHorizontal()){let h=0,f=Bn(n,this.left+r,this.right-this.lineWidths[h]);for(const g of e)h!==g.row&&(h=g.row,f=Bn(n,this.left+r,this.right-this.lineWidths[h])),g.top+=this.top+t+r,g.left=u.leftForLtr(u.x(f),g.width),f+=g.width+r}else{let h=0,f=Bn(n,this.top+t+r,this.bottom-this.columnSizes[h].height);for(const g of e)g.col!==h&&(h=g.col,f=Bn(n,this.top+t+r,this.bottom-this.columnSizes[h].height)),g.top=f,g.left+=this.left+r,g.left=u.leftForLtr(u.x(g.left),g.width),f+=g.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;__(t,this),this._draw(),b_(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:o,labels:u}=t,h=Ie.color,f=Jo(t.rtl,this.left,this.width),g=Dn(u.font),{padding:y}=u,_=g.size,T=_/2;let S;this.drawTitle(),r.textAlign=f.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=g.string;const{boxWidth:D,boxHeight:C,itemHeight:M}=PS(u,_),B=function(st,R,w){if(isNaN(D)||D<=0||isNaN(C)||C<0)return;r.save();const I=Ht(w.lineWidth,1);if(r.fillStyle=Ht(w.fillStyle,h),r.lineCap=Ht(w.lineCap,"butt"),r.lineDashOffset=Ht(w.lineDashOffset,0),r.lineJoin=Ht(w.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=Ht(w.strokeStyle,h),r.setLineDash(Ht(w.lineDash,[])),u.usePointStyle){const P={radius:C*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:I},O=f.xPlus(st,D/2),k=R+T;ew(r,P,O,k,u.pointStyleWidth&&D)}else{const P=R+Math.max((_-C)/2,0),O=f.leftForLtr(st,D),k=Zo(w.borderRadius);r.beginPath(),Object.values(k).some(V=>V!==0)?wd(r,{x:O,y:P,w:D,h:C,radius:k}):r.rect(O,P,D,C),r.fill(),I!==0&&r.stroke()}r.restore()},j=function(st,R,w){xd(r,w.text,st,R+M/2,g,{strikethrough:w.hidden,textAlign:f.textAlign(w.textAlign)})},K=this.isHorizontal(),it=this._computeTitleHeight();K?S={x:Bn(o,this.left+y,this.right-n[0]),y:this.top+y+it,line:0}:S={x:this.left+y,y:Bn(o,this.top+it+y,this.bottom-e[0].height),line:0},lw(this.ctx,t.textDirection);const Z=M+y;this.legendItems.forEach((st,R)=>{r.strokeStyle=st.fontColor,r.fillStyle=st.fontColor;const w=r.measureText(st.text).width,I=f.textAlign(st.textAlign||(st.textAlign=u.textAlign)),P=D+T+w;let O=S.x,k=S.y;f.setWidth(this.width),K?R>0&&O+P+y>this.right&&(k=S.y+=Z,S.line++,O=S.x=Bn(o,this.left+y,this.right-n[S.line])):R>0&&k+Z>this.bottom&&(O=S.x=O+e[S.line].width+y,S.line++,k=S.y=Bn(o,this.top+it+y,this.bottom-e[S.line].height));const V=f.x(O);if(B(V,k,st),O=BO(I,O+D+T,K?O+P:this.right,t.rtl),j(f.x(O),k,st),K)S.x+=P+y;else if(typeof st.text!="string"){const Vt=g.lineHeight;S.y+=Sw(st,Vt)+y}else S.y+=Z}),uw(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Dn(e.font),r=vi(e.padding);if(!e.display)return;const o=Jo(t.rtl,this.left,this.width),u=this.ctx,h=e.position,f=n.size/2,g=r.top+f;let y,_=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),y=this.top+g,_=Bn(t.align,_,this.right-T);else{const D=this.columnSizes.reduce((C,M)=>Math.max(C,M.height),0);y=g+Bn(t.align,this.top,this.bottom-D-t.labels.padding-this._computeTitleHeight())}const S=Bn(h,_,_+T);u.textAlign=o.textAlign(Zx(h)),u.textBaseline="middle",u.strokeStyle=e.color,u.fillStyle=e.color,u.font=n.string,xd(u,e.text,S,y,n)}_computeTitleHeight(){const t=this.options.title,e=Dn(t.font),n=vi(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,o;if(Aa(t,this.left,this.right)&&Aa(e,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(r=o[n],Aa(t,r.left,r.left+r.width)&&Aa(e,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(t){const e=this.options;if(!A5(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=v5(r,n);r&&!o&&de(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!o&&de(e.onHover,[t,n,this],this)}else n&&de(e.onClick,[t,n,this],this)}}function T5(i,t,e,n,r){const o=E5(n,i,t,e),u=S5(r,n,t.lineHeight);return{itemWidth:o,itemHeight:u}}function E5(i,t,e,n){let r=i.text;return r&&typeof r!="string"&&(r=r.reduce((o,u)=>o.length>u.length?o:u)),t+e.size/2+n.measureText(r).width}function S5(i,t,e){let n=i;return typeof t.text!="string"&&(n=Sw(t,e)),n}function Sw(i,t){const e=i.text?i.text.length:0;return t*e}function A5(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var x5={id:"legend",_element:kS,start(i,t,e){const n=i.legend=new kS({ctx:i.ctx,options:e,chart:i});mr.configure(i,n,e),mr.addBox(i,n)},stop(i){mr.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;mr.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,r=e.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:r,color:o,useBorderRadius:u,borderRadius:h}}=i.legend.options;return i._getSortedDatasetMetas().map(f=>{const g=f.controller.getStyle(e?0:void 0),y=vi(g.borderWidth);return{text:t[f.index].label,fillStyle:g.backgroundColor,fontColor:o,hidden:!f.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:g.borderColor,pointStyle:n||g.pointStyle,rotation:g.rotation,textAlign:r||g.textAlign,borderRadius:u&&(h||g.borderRadius),datasetIndex:f.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};const Zu={average(i){if(!i.length)return!1;let t,e,n=new Set,r=0,o=0;for(t=0,e=i.length;t<e;++t){const h=i[t].element;if(h&&h.hasValue()){const f=h.tooltipPosition();n.add(f.x),r+=f.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((h,f)=>h+f)/n.size,y:r/o}},nearest(i,t){if(!i.length)return!1;let e=t.x,n=t.y,r=Number.POSITIVE_INFINITY,o,u,h;for(o=0,u=i.length;o<u;++o){const f=i[o].element;if(f&&f.hasValue()){const g=f.getCenterPoint(),y=OO(t,g);y<r&&(r=y,h=f)}}if(h){const f=h.tooltipPosition();e=f.x,n=f.y}return{x:e,y:n}}};function qi(i,t){return t&&(Je(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function Ts(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function w5(i,t){const{element:e,datasetIndex:n,index:r}=t,o=i.getDatasetMeta(n).controller,{label:u,value:h}=o.getLabelAndValue(r);return{chart:i,label:u,parsed:o.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:h,dataset:o.getDataset(),dataIndex:r,datasetIndex:n,element:e}}function zS(i,t){const e=i.chart.ctx,{body:n,footer:r,title:o}=i,{boxWidth:u,boxHeight:h}=t,f=Dn(t.bodyFont),g=Dn(t.titleFont),y=Dn(t.footerFont),_=o.length,T=r.length,S=n.length,D=vi(t.padding);let C=D.height,M=0,B=n.reduce((it,Z)=>it+Z.before.length+Z.lines.length+Z.after.length,0);if(B+=i.beforeBody.length+i.afterBody.length,_&&(C+=_*g.lineHeight+(_-1)*t.titleSpacing+t.titleMarginBottom),B){const it=t.displayColors?Math.max(h,f.lineHeight):f.lineHeight;C+=S*it+(B-S)*f.lineHeight+(B-1)*t.bodySpacing}T&&(C+=t.footerMarginTop+T*y.lineHeight+(T-1)*t.footerSpacing);let j=0;const K=function(it){M=Math.max(M,e.measureText(it).width+j)};return e.save(),e.font=g.string,ee(i.title,K),e.font=f.string,ee(i.beforeBody.concat(i.afterBody),K),j=t.displayColors?u+2+t.boxPadding:0,ee(n,it=>{ee(it.before,K),ee(it.lines,K),ee(it.after,K)}),j=0,e.font=y.string,ee(i.footer,K),e.restore(),M+=D.width,{width:M,height:C}}function R5(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}function I5(i,t,e,n){const{x:r,width:o}=n,u=e.caretSize+e.caretPadding;if(i==="left"&&r+o+u>t.width||i==="right"&&r-o-u<0)return!0}function D5(i,t,e,n){const{x:r,width:o}=e,{width:u,chartArea:{left:h,right:f}}=i;let g="center";return n==="center"?g=r<=(h+f)/2?"left":"right":r<=o/2?g="left":r>=u-o/2&&(g="right"),I5(g,i,t,e)&&(g="center"),g}function LS(i,t,e){const n=e.yAlign||t.yAlign||R5(i,e);return{xAlign:e.xAlign||t.xAlign||D5(i,t,e,n),yAlign:n}}function C5(i,t){let{x:e,width:n}=i;return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function M5(i,t,e){let{y:n,height:r}=i;return t==="top"?n+=e:t==="bottom"?n-=r+e:n-=r/2,n}function BS(i,t,e,n){const{caretSize:r,caretPadding:o,cornerRadius:u}=i,{xAlign:h,yAlign:f}=e,g=r+o,{topLeft:y,topRight:_,bottomLeft:T,bottomRight:S}=Zo(u);let D=C5(t,h);const C=M5(t,f,g);return f==="center"?h==="left"?D+=g:h==="right"&&(D-=g):h==="left"?D-=Math.max(y,T)+r:h==="right"&&(D+=Math.max(_,S)+r),{x:In(D,0,n.width-t.width),y:In(C,0,n.height-t.height)}}function Of(i,t,e){const n=vi(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-n.right:i.x+n.left}function US(i){return qi([],Ts(i))}function V5(i,t,e){return wl(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function jS(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}const Aw={beforeTitle:bs,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:bs,beforeBody:bs,beforeLabel:bs,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return ue(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:bs,afterBody:bs,beforeFooter:bs,footer:bs,afterFooter:bs};function Sn(i,t,e,n){const r=i[t].call(e,n);return typeof r>"u"?Aw[t].call(e,n):r}class FS extends Rl{static positioners=Zu;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,o=new cw(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=V5(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,r=Sn(n,"beforeTitle",this,t),o=Sn(n,"title",this,t),u=Sn(n,"afterTitle",this,t);let h=[];return h=qi(h,Ts(r)),h=qi(h,Ts(o)),h=qi(h,Ts(u)),h}getBeforeBody(t,e){return US(Sn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,r=[];return ee(t,o=>{const u={before:[],lines:[],after:[]},h=jS(n,o);qi(u.before,Ts(Sn(h,"beforeLabel",this,o))),qi(u.lines,Sn(h,"label",this,o)),qi(u.after,Ts(Sn(h,"afterLabel",this,o))),r.push(u)}),r}getAfterBody(t,e){return US(Sn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,r=Sn(n,"beforeFooter",this,t),o=Sn(n,"footer",this,t),u=Sn(n,"afterFooter",this,t);let h=[];return h=qi(h,Ts(r)),h=qi(h,Ts(o)),h=qi(h,Ts(u)),h}_createItems(t){const e=this._active,n=this.chart.data,r=[],o=[],u=[];let h=[],f,g;for(f=0,g=e.length;f<g;++f)h.push(w5(this.chart,e[f]));return t.filter&&(h=h.filter((y,_,T)=>t.filter(y,_,T,n))),t.itemSort&&(h=h.sort((y,_)=>t.itemSort(y,_,n))),ee(h,y=>{const _=jS(t.callbacks,y);r.push(Sn(_,"labelColor",this,y)),o.push(Sn(_,"labelPointStyle",this,y)),u.push(Sn(_,"labelTextColor",this,y))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=u,this.dataPoints=h,h}update(t,e){const n=this.options.setContext(this.getContext()),r=this._active;let o,u=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const h=Zu[n.position].call(this,r,this._eventPosition);u=this._createItems(n),this.title=this.getTitle(u,n),this.beforeBody=this.getBeforeBody(u,n),this.body=this.getBody(u,n),this.afterBody=this.getAfterBody(u,n),this.footer=this.getFooter(u,n);const f=this._size=zS(this,n),g=Object.assign({},h,f),y=LS(this.chart,n,g),_=BS(n,g,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,o={opacity:1,x:_.x,y:_.y,width:f.width,height:f.height,caretX:h.x,caretY:h.y}}this._tooltipItems=u,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,r){const o=this.getCaretPosition(t,n,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,n){const{xAlign:r,yAlign:o}=this,{caretSize:u,cornerRadius:h}=n,{topLeft:f,topRight:g,bottomLeft:y,bottomRight:_}=Zo(h),{x:T,y:S}=t,{width:D,height:C}=e;let M,B,j,K,it,Z;return o==="center"?(it=S+C/2,r==="left"?(M=T,B=M-u,K=it+u,Z=it-u):(M=T+D,B=M+u,K=it-u,Z=it+u),j=M):(r==="left"?B=T+Math.max(f,y)+u:r==="right"?B=T+D-Math.max(g,_)-u:B=this.caretX,o==="top"?(K=S,it=K-u,M=B-u,j=B+u):(K=S+C,it=K+u,M=B+u,j=B-u),Z=K),{x1:M,x2:B,x3:j,y1:K,y2:it,y3:Z}}drawTitle(t,e,n){const r=this.title,o=r.length;let u,h,f;if(o){const g=Jo(n.rtl,this.x,this.width);for(t.x=Of(this,n.titleAlign,n),e.textAlign=g.textAlign(n.titleAlign),e.textBaseline="middle",u=Dn(n.titleFont),h=n.titleSpacing,e.fillStyle=n.titleColor,e.font=u.string,f=0;f<o;++f)e.fillText(r[f],g.x(t.x),t.y+u.lineHeight/2),t.y+=u.lineHeight+h,f+1===o&&(t.y+=n.titleMarginBottom-h)}}_drawColorBox(t,e,n,r,o){const u=this.labelColors[n],h=this.labelPointStyles[n],{boxHeight:f,boxWidth:g}=o,y=Dn(o.bodyFont),_=Of(this,"left",o),T=r.x(_),S=f<y.lineHeight?(y.lineHeight-f)/2:0,D=e.y+S;if(o.usePointStyle){const C={radius:Math.min(g,f)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},M=r.leftForLtr(T,g)+g/2,B=D+f/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,nS(t,C,M,B),t.strokeStyle=u.borderColor,t.fillStyle=u.backgroundColor,nS(t,C,M,B)}else{t.lineWidth=qt(u.borderWidth)?Math.max(...Object.values(u.borderWidth)):u.borderWidth||1,t.strokeStyle=u.borderColor,t.setLineDash(u.borderDash||[]),t.lineDashOffset=u.borderDashOffset||0;const C=r.leftForLtr(T,g),M=r.leftForLtr(r.xPlus(T,1),g-2),B=Zo(u.borderRadius);Object.values(B).some(j=>j!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,wd(t,{x:C,y:D,w:g,h:f,radius:B}),t.fill(),t.stroke(),t.fillStyle=u.backgroundColor,t.beginPath(),wd(t,{x:M,y:D+1,w:g-2,h:f-2,radius:B}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(C,D,g,f),t.strokeRect(C,D,g,f),t.fillStyle=u.backgroundColor,t.fillRect(M,D+1,g-2,f-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:r}=this,{bodySpacing:o,bodyAlign:u,displayColors:h,boxHeight:f,boxWidth:g,boxPadding:y}=n,_=Dn(n.bodyFont);let T=_.lineHeight,S=0;const D=Jo(n.rtl,this.x,this.width),C=function(w){e.fillText(w,D.x(t.x+S),t.y+T/2),t.y+=T+o},M=D.textAlign(u);let B,j,K,it,Z,st,R;for(e.textAlign=u,e.textBaseline="middle",e.font=_.string,t.x=Of(this,M,n),e.fillStyle=n.bodyColor,ee(this.beforeBody,C),S=h&&M!=="right"?u==="center"?g/2+y:g+2+y:0,it=0,st=r.length;it<st;++it){for(B=r[it],j=this.labelTextColors[it],e.fillStyle=j,ee(B.before,C),K=B.lines,h&&K.length&&(this._drawColorBox(e,t,it,D,n),T=Math.max(_.lineHeight,f)),Z=0,R=K.length;Z<R;++Z)C(K[Z]),T=_.lineHeight;ee(B.after,C)}S=0,T=_.lineHeight,ee(this.afterBody,C),t.y-=o}drawFooter(t,e,n){const r=this.footer,o=r.length;let u,h;if(o){const f=Jo(n.rtl,this.x,this.width);for(t.x=Of(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=f.textAlign(n.footerAlign),e.textBaseline="middle",u=Dn(n.footerFont),e.fillStyle=n.footerColor,e.font=u.string,h=0;h<o;++h)e.fillText(r[h],f.x(t.x),t.y+u.lineHeight/2),t.y+=u.lineHeight+n.footerSpacing}}drawBackground(t,e,n,r){const{xAlign:o,yAlign:u}=this,{x:h,y:f}=t,{width:g,height:y}=n,{topLeft:_,topRight:T,bottomLeft:S,bottomRight:D}=Zo(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(h+_,f),u==="top"&&this.drawCaret(t,e,n,r),e.lineTo(h+g-T,f),e.quadraticCurveTo(h+g,f,h+g,f+T),u==="center"&&o==="right"&&this.drawCaret(t,e,n,r),e.lineTo(h+g,f+y-D),e.quadraticCurveTo(h+g,f+y,h+g-D,f+y),u==="bottom"&&this.drawCaret(t,e,n,r),e.lineTo(h+S,f+y),e.quadraticCurveTo(h,f+y,h,f+y-S),u==="center"&&o==="left"&&this.drawCaret(t,e,n,r),e.lineTo(h,f+_),e.quadraticCurveTo(h,f,h+_,f),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,r=n&&n.x,o=n&&n.y;if(r||o){const u=Zu[t.position].call(this,this._active,this._eventPosition);if(!u)return;const h=this._size=zS(this,t),f=Object.assign({},u,this._size),g=LS(e,t,f),y=BS(t,f,g,e);(r._to!==y.x||o._to!==y.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=h.width,this.height=h.height,this.caretX=u.x,this.caretY=u.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const u=vi(e.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&h&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,r,e),lw(t,e.textDirection),o.y+=u.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),uw(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,r=t.map(({datasetIndex:h,index:f})=>{const g=this.chart.getDatasetMeta(h);if(!g)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:g.data[f],index:f}}),o=!vd(n,r),u=this._positionChanged(r,e);(o||u)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],u=this._getActiveElements(t,o,e,n),h=this._positionChanged(u,t),f=e||!vd(u,o)||h;return f&&(this._active=u,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),f}_getActiveElements(t,e,n,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const u=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&u.reverse(),u}_positionChanged(t,e){const{caretX:n,caretY:r,options:o}=this,u=Zu[o.position].call(this,t,e);return u!==!1&&(n!==u.x||r!==u.y)}}var O5={id:"tooltip",_element:FS,positioners:Zu,afterInit(i,t,e){e&&(i.tooltip=new FS({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){const e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Aw},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const N5=(i,t,e,n)=>(typeof t=="string"?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function P5(i,t,e,n){const r=i.indexOf(t);if(r===-1)return N5(i,t,e,n);const o=i.lastIndexOf(t);return r!==o?e:r}const k5=(i,t)=>i===null?null:In(Math.round(i),0,t);function HS(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class z5 extends Il{static id="category";static defaults={ticks:{callback:HS}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:r,label:o}of e)n[r]===o&&n.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ue(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:P5(n,t,Ht(e,t),this._addedLabels),k5(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let u=t;u<=e;u++)r.push({value:u});return r}getLabelForValue(t){return HS.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function L5(i,t){const e=[],{bounds:r,step:o,min:u,max:h,precision:f,count:g,maxTicks:y,maxDigits:_,includeBounds:T}=i,S=o||1,D=y-1,{min:C,max:M}=t,B=!ue(u),j=!ue(h),K=!ue(g),it=(M-C)/(_+1);let Z=YE((M-C)/D/S)*S,st,R,w,I;if(Z<1e-14&&!B&&!j)return[{value:C},{value:M}];I=Math.ceil(M/Z)-Math.floor(C/Z),I>D&&(Z=YE(I*Z/D/S)*S),ue(f)||(st=Math.pow(10,f),Z=Math.ceil(Z*st)/st),r==="ticks"?(R=Math.floor(C/Z)*Z,w=Math.ceil(M/Z)*Z):(R=C,w=M),B&&j&&o&&CO((h-u)/o,Z/1e3)?(I=Math.round(Math.min((h-u)/Z,y)),Z=(h-u)/I,R=u,w=h):K?(R=B?u:R,w=j?h:w,I=g-1,Z=(w-R)/I):(I=(w-R)/Z,Yf(I,Math.round(I),Z/1e3)?I=Math.round(I):I=Math.ceil(I));const P=Math.max(QE(Z),QE(R));st=Math.pow(10,ue(f)?P:f),R=Math.round(R*st)/st,w=Math.round(w*st)/st;let O=0;for(B&&(T&&R!==u?(e.push({value:u}),R<u&&O++,Yf(Math.round((R+O*Z)*st)/st,u,qS(u,it,i))&&O++):R<u&&O++);O<I;++O){const k=Math.round((R+O*Z)*st)/st;if(j&&k>h)break;e.push({value:k})}return j&&T&&w!==h?e.length&&Yf(e[e.length-1].value,h,qS(h,it,i))?e[e.length-1].value=h:e.push({value:h}):(!j||w===h)&&e.push({value:w}),e}function qS(i,t,{horizontal:e,minRotation:n}){const r=As(n),o=(e?Math.sin(r):Math.cos(r))||.001,u=.75*t*(""+i).length;return Math.min(t/o,u)}class B5 extends Il{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ue(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:o}=this;const u=f=>r=e?r:f,h=f=>o=n?o:f;if(t){const f=Ar(r),g=Ar(o);f<0&&g<0?h(0):f>0&&g>0&&u(0)}if(r===o){let f=o===0?1:Math.abs(o*.05);h(o+f),t||u(r-f)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:n}=t,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,u=L5(r,o);return t.bounds==="ticks"&&MO(u,this,"value"),t.reverse?(u.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),u}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return y_(t,this.chart.options.locale,this.options.ticks.format)}}class U5 extends B5{static id="linear";static defaults={ticks:{callback:tw.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ai(t)?t:0,this.max=ai(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=As(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const eg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},xn=Object.keys(eg);function GS(i,t){return i-t}function KS(i,t){if(ue(t))return null;const e=i._adapter,{parser:n,round:r,isoWeekday:o}=i._parseOpts;let u=t;return typeof n=="function"&&(u=n(u)),ai(u)||(u=typeof n=="string"?e.parse(u,n):e.parse(u)),u===null?null:(r&&(u=r==="week"&&(Sd(o)||o===!0)?e.startOf(u,"isoWeek",o):e.startOf(u,r)),+u)}function YS(i,t,e,n){const r=xn.length;for(let o=xn.indexOf(i);o<r-1;++o){const u=eg[xn[o]],h=u.steps?u.steps:Number.MAX_SAFE_INTEGER;if(u.common&&Math.ceil((e-t)/(h*u.size))<=n)return xn[o]}return xn[r-1]}function j5(i,t,e,n,r){for(let o=xn.length-1;o>=xn.indexOf(e);o--){const u=xn[o];if(eg[u].common&&i._adapter.diff(r,n,u)>=t-1)return u}return xn[e?xn.indexOf(e):0]}function F5(i){for(let t=xn.indexOf(i)+1,e=xn.length;t<e;++t)if(eg[xn[t]].common)return xn[t]}function QS(i,t,e){if(!e)i[t]=!0;else if(e.length){const{lo:n,hi:r}=p_(e,t),o=e[n]>=t?e[n]:e[r];i[o]=!0}}function H5(i,t,e,n){const r=i._adapter,o=+r.startOf(t[0].value,n),u=t[t.length-1].value;let h,f;for(h=o;h<=u;h=+r.add(h,1,n))f=e[h],f>=0&&(t[f].major=!0);return t}function XS(i,t,e){const n=[],r={},o=t.length;let u,h;for(u=0;u<o;++u)h=t[u],r[h]=u,n.push({value:h,major:!1});return o===0||!e?n:H5(i,n,r,e)}class WS extends Il{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),r=this._adapter=new ZN._date(t.adapters.date);r.init(e),uc(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:KS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:r,max:o,minDefined:u,maxDefined:h}=this.getUserBounds();function f(g){!u&&!isNaN(g.min)&&(r=Math.min(r,g.min)),!h&&!isNaN(g.max)&&(o=Math.max(o,g.max))}(!u||!h)&&(f(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&f(this.getMinMax(!1))),r=ai(r)&&!isNaN(r)?r:+e.startOf(Date.now(),n),o=ai(o)&&!isNaN(o)?o:+e.endOf(Date.now(),n)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,u=this.max,h=kO(r,o,u);return this._unit=e.unit||(n.autoSkip?YS(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):j5(this,h.length,e.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:F5(this._unit),this.initOffsets(r),t.reverse&&h.reverse(),XS(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,n=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);const u=t.length<3?.5:.25;e=In(e,0,u),n=In(n,0,u),this._offsets={start:e,end:n,factor:1/(e+1+n)}}_generate(){const t=this._adapter,e=this.min,n=this.max,r=this.options,o=r.time,u=o.unit||YS(o.minUnit,e,n,this._getLabelCapacity(e)),h=Ht(r.ticks.stepSize,1),f=u==="week"?o.isoWeekday:!1,g=Sd(f)||f===!0,y={};let _=e,T,S;if(g&&(_=+t.startOf(_,"isoWeek",f)),_=+t.startOf(_,g?"day":u),t.diff(n,e,u)>1e5*h)throw new Error(e+" and "+n+" are too far apart with stepSize of "+h+" "+u);const D=r.ticks.source==="data"&&this.getDataTimestamps();for(T=_,S=0;T<n;T=+t.add(T,h,u),S++)QS(y,T,D);return(T===n||r.bounds==="ticks"||S===1)&&QS(y,T,D),Object.keys(y).sort(GS).map(C=>+C)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,u=e||r[o];return this._adapter.format(t,u)}_tickFormatFunction(t,e,n,r){const o=this.options,u=o.ticks.callback;if(u)return de(u,[t,e,n],this);const h=o.time.displayFormats,f=this._unit,g=this._majorUnit,y=f&&h[f],_=g&&h[g],T=n[e],S=g&&_&&T&&T.major;return this._adapter.format(t,r||(S?_:y))}generateTickLabels(t){let e,n,r;for(e=0,n=t.length;e<n;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,r=As(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),u=Math.sin(r),h=this._resolveTickFontOptions(0).size;return{w:n*o+h*u,h:n*u+h*o}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,o=this._tickFormatFunction(t,0,XS(this,[t],this._majorUnit),r),u=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/u.w:this.height/u.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],e,n;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,n=r.length;e<n;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const r=this.getLabels();for(e=0,n=r.length;e<n;++e)t.push(KS(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Xx(t.sort(GS))}}function Nf(i,t,e){let n=0,r=i.length-1,o,u,h,f;e?(t>=i[n].pos&&t<=i[r].pos&&({lo:n,hi:r}=hy(i,"pos",t)),{pos:o,time:h}=i[n],{pos:u,time:f}=i[r]):(t>=i[n].time&&t<=i[r].time&&({lo:n,hi:r}=hy(i,"time",t)),{time:o,pos:h}=i[n],{time:u,pos:f}=i[r]);const g=u-o;return g?h+(f-h)*(t-o)/g:h}class tP extends WS{static id="timeseries";static defaults=WS.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Nf(e,this.min),this._tableRange=Nf(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],o=[];let u,h,f,g,y;for(u=0,h=t.length;u<h;++u)g=t[u],g>=e&&g<=n&&r.push(g);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(u=0,h=r.length;u<h;++u)y=r[u+1],f=r[u-1],g=r[u],Math.round((y+f)/2)!==g&&o.push({time:g,pos:u/(h-1)});return o}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Nf(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Nf(this._table,n*this._tableRange+this._minPos,!0)}}const xw="label";function $S(i,t){typeof i=="function"?i(t):i&&(i.current=t)}function q5(i,t){const e=i.options;e&&t&&Object.assign(e,t)}function ww(i,t){i.labels=t}function Rw(i,t,e=xw){const n=[];i.datasets=t.map(r=>{const o=i.datasets.find(u=>u[e]===r[e]);return!o||!r.data||n.includes(o)?{...r}:(n.push(o),Object.assign(o,r),o)})}function G5(i,t=xw){const e={labels:[],datasets:[]};return ww(e,i.labels),Rw(e,i.datasets,t),e}function K5(i,t){const{height:e=150,width:n=300,redraw:r=!1,datasetIdKey:o,type:u,data:h,options:f,plugins:g=[],fallbackContent:y,updateMode:_,...T}=i,S=Yt.useRef(null),D=Yt.useRef(null),C=()=>{S.current&&(D.current=new tg(S.current,{type:u,data:G5(h,o),options:f&&{...f},plugins:g}),$S(t,D.current))},M=()=>{$S(t,null),D.current&&(D.current.destroy(),D.current=null)};return Yt.useEffect(()=>{!r&&D.current&&f&&q5(D.current,f)},[r,f]),Yt.useEffect(()=>{!r&&D.current&&ww(D.current.config.data,h.labels)},[r,h.labels]),Yt.useEffect(()=>{!r&&D.current&&h.datasets&&Rw(D.current.config.data,h.datasets,o)},[r,h.datasets]),Yt.useEffect(()=>{D.current&&(r?(M(),setTimeout(C)):D.current.update(_))},[r,f,h.labels,h.datasets,_]),Yt.useEffect(()=>{D.current&&(M(),setTimeout(C))},[u]),Yt.useEffect(()=>(C(),()=>M()),[]),ot.jsx("canvas",{ref:S,role:"img",height:e,width:n,...T,children:y})}const Y5=Yt.forwardRef(K5);function Iw(i,t){return tg.register(t),Yt.forwardRef((e,n)=>ot.jsx(Y5,{...e,ref:n,type:i}))}const ZS=Iw("bar",QN),Q5=Iw("pie",$N);tg.register(d5,O5,x5,z5,U5,b5);const X5=()=>{const{currentUser:i,logout:t}=py(),[e,n]=Yt.useState([]),[r,o]=Yt.useState(!0),[u,h]=Yt.useState(!1);Yt.useEffect(()=>{const B=xV(Ax(Lc,"expenses"),wV("date","desc")),j=VV(B,K=>{h(K.metadata.fromCache);const it=K.docs.map(Z=>({id:Z.id,...Z.data()}));n(it),o(!1)},K=>{console.error("Firestore Error:",K),K.code==="permission-denied"?alert("ERRO DE PERMISSO: O Firebase recusou a conexo. Verifique se as regras esto como 'allow read, write: if true;'."):K.code==="not-found"?alert("ERRO: Banco de dados no encontrado. Crie o 'Cloud Firestore' no console."):alert("Erro de Conexo: "+K.message),o(!1)});return()=>j()},[]);const f=e.reduce((B,j)=>B+j.amount,0),g=e.reduce((B,j)=>(B[j.category]=(B[j.category]||0)+j.amount,B),{}),y={labels:Object.keys(g),datasets:[{data:Object.values(g),backgroundColor:["#6366f1","#f472b6","#34d399","#facc15","#a78bfa","#fb923c"],borderWidth:0}]},_=e.reduce((B,j)=>(B[j.userName]=(B[j.userName]||0)+j.amount,B),{}),T={labels:Object.keys(_),datasets:[{label:"Spent",data:Object.values(_),backgroundColor:"#f472b6",borderRadius:6}]},S={plugins:{legend:{position:"bottom",labels:{color:"#94a3b8"}}},scales:{y:{ticks:{color:"#94a3b8"},grid:{color:"rgba(255,255,255,0.05)"}},x:{ticks:{color:"#94a3b8"},grid:{display:!1}}}},[D,C]=Yt.useState(null);Yt.useEffect(()=>{const B=()=>{const j=[];for(let R=11;R>=0;R--){const w=new Date;w.setMonth(w.getMonth()-R),j.push(w.toISOString().slice(0,7))}const K=j.reduce((R,w)=>(R[w]={},R),{});e.forEach(R=>{const w=R.date.slice(0,7);K[w]&&(K[w][R.category]=(K[w][R.category]||0)+R.amount)});const it=[...new Set(e.map(R=>R.category))],Z={Mercado:"#6366f1",Contas:"#f472b6",Lazer:"#34d399",Transporte:"#facc15",Sade:"#a78bfa",Outros:"#fb923c"},st=it.map(R=>({label:R,data:j.map(w=>K[w][R]||0),backgroundColor:Z[R]||"#94a3b8",stack:"Stack 0"}));C({labels:j,datasets:st})};e.length>0&&B()},[e]);const M={plugins:{legend:{position:"bottom",labels:{color:"#94a3b8"}}},scales:{y:{stacked:!0,ticks:{color:"#94a3b8"},grid:{color:"rgba(255,255,255,0.05)"}},x:{stacked:!0,ticks:{color:"#94a3b8"},grid:{display:!1}}},responsive:!0,maintainAspectRatio:!1};return ot.jsxs("div",{className:"container",children:[ot.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[ot.jsxs("div",{children:[ot.jsx("h2",{style:{marginBottom:"5px"},children:"Despesas da Casa"}),ot.jsxs("p",{style:{color:"var(--color-text-muted)",margin:0},children:["Bem-vindo, ",i.name]})]}),ot.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[ot.jsx("div",{style:{padding:"6px 12px",borderRadius:"20px",background:u?"rgba(234, 179, 8, 0.2)":"rgba(34, 197, 94, 0.2)",color:u?"#facc15":"#4ade80",fontSize:"0.85em",border:`1px solid ${u?"rgba(234, 179, 8, 0.3)":"rgba(34, 197, 94, 0.3)"}`},children:u?" Offline (No sincronizado)":" Online (Sincronizado)"}),ot.jsxs("button",{onClick:t,className:"glass-panel",style:{padding:"8px 12px",color:"var(--color-text-muted)",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[ot.jsx(KV,{size:16})," Sair"]})]})]}),ot.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginBottom:"30px"},children:[ot.jsxs("div",{className:"glass-panel",style:{padding:"20px",display:"flex",flexDirection:"column",justifyContent:"center"},children:[ot.jsx("span",{style:{color:"var(--color-text-muted)",fontSize:"0.9em"},children:"Total de Despesas"}),ot.jsxs("span",{style:{fontSize:"2.5em",fontWeight:"800",color:"white"},children:["",f.toFixed(2)]})]}),ot.jsx("div",{style:{gridRow:"span 2"},children:ot.jsx(WV,{})}),ot.jsxs("div",{className:"glass-panel",style:{padding:"20px",minHeight:"300px"},children:[ot.jsx("h4",{style:{marginBottom:"15px"},children:"Por Categoria"}),ot.jsx(Q5,{data:y,options:{plugins:{legend:{position:"right",labels:{color:"#fff"}}}}})]}),ot.jsxs("div",{className:"glass-panel",style:{padding:"20px",minHeight:"300px"},children:[ot.jsx("h4",{style:{marginBottom:"15px"},children:"Gastos por Pessoa"}),Object.keys(_).length>0?ot.jsx(ZS,{data:T,options:S}):ot.jsx("p",{className:"text-muted",children:"Sem dados ainda"})]}),ot.jsxs("div",{className:"glass-panel",style:{padding:"20px",minHeight:"300px",gridColumn:"1 / -1"},children:[ot.jsx("h4",{style:{marginBottom:"15px"},children:"Histrico Global (ltimos 12 Meses)"}),ot.jsx("div",{style:{height:"300px"},children:D?ot.jsx(ZS,{data:D,options:M}):ot.jsx("p",{className:"text-muted",children:"Adicione despesas para ver o histrico"})})]})]}),ot.jsx($V,{expenses:e})]})},W5=()=>{const{currentUser:i,login:t}=py();return Lc.app.options.apiKey!=="YOUR_API_KEY_HERE"?i?ot.jsx(X5,{}):ot.jsx("div",{className:"container flex-center",style:{minHeight:"100vh",flexDirection:"column"},children:ot.jsxs("div",{className:"glass-panel",style:{padding:"40px",width:"100%",maxWidth:"400px",textAlign:"center"},children:[ot.jsx("h2",{children:"Welcome Home"}),ot.jsx("p",{style:{color:"var(--color-text-muted)",marginBottom:"30px"},children:"Who is spending money today?"}),ot.jsx("div",{style:{display:"grid",gap:"15px"},children:Mp.map(n=>ot.jsxs("button",{onClick:()=>t(n.id),className:"btn-primary",style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)"},children:[n.avatar," ",n.name]},n.id))})]})}):ot.jsx("div",{className:"container flex-center",style:{minHeight:"100vh",flexDirection:"column",textAlign:"center"},children:ot.jsxs("div",{className:"glass-panel",style:{padding:"40px"},children:[ot.jsx("h1",{style:{color:"var(--color-accent)"},children:"Configurao Necessria"}),ot.jsxs("p",{children:["Por favor configure suas chaves do Firebase em ",ot.jsx("code",{children:"src/services/firebase.js"})]}),ot.jsx("p",{className:"text-muted",children:"Voc solicitou executar isso, ento preciso das chaves para prosseguir com o Banco de Dados."})]})})};function $5(){return ot.jsx(mR,{children:ot.jsx(W5,{})})}gR.createRoot(document.getElementById("root")).render(ot.jsx(Yt.StrictMode,{children:ot.jsx($5,{})}));
